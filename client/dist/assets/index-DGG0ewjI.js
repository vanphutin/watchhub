function Vw(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function fh(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var rm={exports:{}},zc={},im={exports:{}},Lt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bv;function zw(){if(bv)return Lt;bv=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;function g(H){return H===null||typeof H!="object"?null:(H=p&&H[p]||H["@@iterator"],typeof H=="function"?H:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,S={};function T(H,Q,we){this.props=H,this.context=Q,this.refs=S,this.updater=we||x}T.prototype.isReactComponent={},T.prototype.setState=function(H,Q){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,Q,"setState")},T.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function _(){}_.prototype=T.prototype;function C(H,Q,we){this.props=H,this.context=Q,this.refs=S,this.updater=we||x}var k=C.prototype=new _;k.constructor=C,v(k,T.prototype),k.isPureReactComponent=!0;var O=Array.isArray,w=Object.prototype.hasOwnProperty,$={current:null},M={key:!0,ref:!0,__self:!0,__source:!0};function U(H,Q,we){var Ae,Oe={},Me=null,ct=null;if(Q!=null)for(Ae in Q.ref!==void 0&&(ct=Q.ref),Q.key!==void 0&&(Me=""+Q.key),Q)w.call(Q,Ae)&&!M.hasOwnProperty(Ae)&&(Oe[Ae]=Q[Ae]);var Ce=arguments.length-2;if(Ce===1)Oe.children=we;else if(1<Ce){for(var nt=Array(Ce),Ut=0;Ut<Ce;Ut++)nt[Ut]=arguments[Ut+2];Oe.children=nt}if(H&&H.defaultProps)for(Ae in Ce=H.defaultProps,Ce)Oe[Ae]===void 0&&(Oe[Ae]=Ce[Ae]);return{$$typeof:n,type:H,key:Me,ref:ct,props:Oe,_owner:$.current}}function W(H,Q){return{$$typeof:n,type:H.type,key:Q,ref:H.ref,props:H.props,_owner:H._owner}}function R(H){return typeof H=="object"&&H!==null&&H.$$typeof===n}function G(H){var Q={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(we){return Q[we]})}var fe=/\/+/g;function ae(H,Q){return typeof H=="object"&&H!==null&&H.key!=null?G(""+H.key):Q.toString(36)}function xe(H,Q,we,Ae,Oe){var Me=typeof H;(Me==="undefined"||Me==="boolean")&&(H=null);var ct=!1;if(H===null)ct=!0;else switch(Me){case"string":case"number":ct=!0;break;case"object":switch(H.$$typeof){case n:case e:ct=!0}}if(ct)return ct=H,Oe=Oe(ct),H=Ae===""?"."+ae(ct,0):Ae,O(Oe)?(we="",H!=null&&(we=H.replace(fe,"$&/")+"/"),xe(Oe,Q,we,"",function(Ut){return Ut})):Oe!=null&&(R(Oe)&&(Oe=W(Oe,we+(!Oe.key||ct&&ct.key===Oe.key?"":(""+Oe.key).replace(fe,"$&/")+"/")+H)),Q.push(Oe)),1;if(ct=0,Ae=Ae===""?".":Ae+":",O(H))for(var Ce=0;Ce<H.length;Ce++){Me=H[Ce];var nt=Ae+ae(Me,Ce);ct+=xe(Me,Q,we,nt,Oe)}else if(nt=g(H),typeof nt=="function")for(H=nt.call(H),Ce=0;!(Me=H.next()).done;)Me=Me.value,nt=Ae+ae(Me,Ce++),ct+=xe(Me,Q,we,nt,Oe);else if(Me==="object")throw Q=String(H),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.");return ct}function ye(H,Q,we){if(H==null)return H;var Ae=[],Oe=0;return xe(H,Ae,"","",function(Me){return Q.call(we,Me,Oe++)}),Ae}function Ee(H){if(H._status===-1){var Q=H._result;Q=Q(),Q.then(function(we){(H._status===0||H._status===-1)&&(H._status=1,H._result=we)},function(we){(H._status===0||H._status===-1)&&(H._status=2,H._result=we)}),H._status===-1&&(H._status=0,H._result=Q)}if(H._status===1)return H._result.default;throw H._result}var Pe={current:null},ie={transition:null},se={ReactCurrentDispatcher:Pe,ReactCurrentBatchConfig:ie,ReactCurrentOwner:$};function B(){throw Error("act(...) is not supported in production builds of React.")}return Lt.Children={map:ye,forEach:function(H,Q,we){ye(H,function(){Q.apply(this,arguments)},we)},count:function(H){var Q=0;return ye(H,function(){Q++}),Q},toArray:function(H){return ye(H,function(Q){return Q})||[]},only:function(H){if(!R(H))throw Error("React.Children.only expected to receive a single React element child.");return H}},Lt.Component=T,Lt.Fragment=t,Lt.Profiler=i,Lt.PureComponent=C,Lt.StrictMode=r,Lt.Suspense=u,Lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=se,Lt.act=B,Lt.cloneElement=function(H,Q,we){if(H==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+H+".");var Ae=v({},H.props),Oe=H.key,Me=H.ref,ct=H._owner;if(Q!=null){if(Q.ref!==void 0&&(Me=Q.ref,ct=$.current),Q.key!==void 0&&(Oe=""+Q.key),H.type&&H.type.defaultProps)var Ce=H.type.defaultProps;for(nt in Q)w.call(Q,nt)&&!M.hasOwnProperty(nt)&&(Ae[nt]=Q[nt]===void 0&&Ce!==void 0?Ce[nt]:Q[nt])}var nt=arguments.length-2;if(nt===1)Ae.children=we;else if(1<nt){Ce=Array(nt);for(var Ut=0;Ut<nt;Ut++)Ce[Ut]=arguments[Ut+2];Ae.children=Ce}return{$$typeof:n,type:H.type,key:Oe,ref:Me,props:Ae,_owner:ct}},Lt.createContext=function(H){return H={$$typeof:a,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},H.Provider={$$typeof:s,_context:H},H.Consumer=H},Lt.createElement=U,Lt.createFactory=function(H){var Q=U.bind(null,H);return Q.type=H,Q},Lt.createRef=function(){return{current:null}},Lt.forwardRef=function(H){return{$$typeof:c,render:H}},Lt.isValidElement=R,Lt.lazy=function(H){return{$$typeof:h,_payload:{_status:-1,_result:H},_init:Ee}},Lt.memo=function(H,Q){return{$$typeof:d,type:H,compare:Q===void 0?null:Q}},Lt.startTransition=function(H){var Q=ie.transition;ie.transition={};try{H()}finally{ie.transition=Q}},Lt.unstable_act=B,Lt.useCallback=function(H,Q){return Pe.current.useCallback(H,Q)},Lt.useContext=function(H){return Pe.current.useContext(H)},Lt.useDebugValue=function(){},Lt.useDeferredValue=function(H){return Pe.current.useDeferredValue(H)},Lt.useEffect=function(H,Q){return Pe.current.useEffect(H,Q)},Lt.useId=function(){return Pe.current.useId()},Lt.useImperativeHandle=function(H,Q,we){return Pe.current.useImperativeHandle(H,Q,we)},Lt.useInsertionEffect=function(H,Q){return Pe.current.useInsertionEffect(H,Q)},Lt.useLayoutEffect=function(H,Q){return Pe.current.useLayoutEffect(H,Q)},Lt.useMemo=function(H,Q){return Pe.current.useMemo(H,Q)},Lt.useReducer=function(H,Q,we){return Pe.current.useReducer(H,Q,we)},Lt.useRef=function(H){return Pe.current.useRef(H)},Lt.useState=function(H){return Pe.current.useState(H)},Lt.useSyncExternalStore=function(H,Q,we){return Pe.current.useSyncExternalStore(H,Q,we)},Lt.useTransition=function(){return Pe.current.useTransition()},Lt.version="18.3.1",Lt}var wv;function Eu(){return wv||(wv=1,im.exports=zw()),im.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _v;function Kw(){if(_v)return zc;_v=1;var n=Eu(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(c,u,d){var h,p={},g=null,x=null;d!==void 0&&(g=""+d),u.key!==void 0&&(g=""+u.key),u.ref!==void 0&&(x=u.ref);for(h in u)r.call(u,h)&&!s.hasOwnProperty(h)&&(p[h]=u[h]);if(c&&c.defaultProps)for(h in u=c.defaultProps,u)p[h]===void 0&&(p[h]=u[h]);return{$$typeof:e,type:c,key:g,ref:x,props:p,_owner:i.current}}return zc.Fragment=t,zc.jsx=a,zc.jsxs=a,zc}var Lv;function Ww(){return Lv||(Lv=1,rm.exports=Kw()),rm.exports}var A=Ww(),qd={},sm={exports:{}},Jr={},om={exports:{}},am={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cv;function Yw(){return Cv||(Cv=1,function(n){function e(ie,se){var B=ie.length;ie.push(se);e:for(;0<B;){var H=B-1>>>1,Q=ie[H];if(0<i(Q,se))ie[H]=se,ie[B]=Q,B=H;else break e}}function t(ie){return ie.length===0?null:ie[0]}function r(ie){if(ie.length===0)return null;var se=ie[0],B=ie.pop();if(B!==se){ie[0]=B;e:for(var H=0,Q=ie.length,we=Q>>>1;H<we;){var Ae=2*(H+1)-1,Oe=ie[Ae],Me=Ae+1,ct=ie[Me];if(0>i(Oe,B))Me<Q&&0>i(ct,Oe)?(ie[H]=ct,ie[Me]=B,H=Me):(ie[H]=Oe,ie[Ae]=B,H=Ae);else if(Me<Q&&0>i(ct,B))ie[H]=ct,ie[Me]=B,H=Me;else break e}}return se}function i(ie,se){var B=ie.sortIndex-se.sortIndex;return B!==0?B:ie.id-se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,c=a.now();n.unstable_now=function(){return a.now()-c}}var u=[],d=[],h=1,p=null,g=3,x=!1,v=!1,S=!1,T=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(ie){for(var se=t(d);se!==null;){if(se.callback===null)r(d);else if(se.startTime<=ie)r(d),se.sortIndex=se.expirationTime,e(u,se);else break;se=t(d)}}function O(ie){if(S=!1,k(ie),!v)if(t(u)!==null)v=!0,Ee(w);else{var se=t(d);se!==null&&Pe(O,se.startTime-ie)}}function w(ie,se){v=!1,S&&(S=!1,_(U),U=-1),x=!0;var B=g;try{for(k(se),p=t(u);p!==null&&(!(p.expirationTime>se)||ie&&!G());){var H=p.callback;if(typeof H=="function"){p.callback=null,g=p.priorityLevel;var Q=H(p.expirationTime<=se);se=n.unstable_now(),typeof Q=="function"?p.callback=Q:p===t(u)&&r(u),k(se)}else r(u);p=t(u)}if(p!==null)var we=!0;else{var Ae=t(d);Ae!==null&&Pe(O,Ae.startTime-se),we=!1}return we}finally{p=null,g=B,x=!1}}var $=!1,M=null,U=-1,W=5,R=-1;function G(){return!(n.unstable_now()-R<W)}function fe(){if(M!==null){var ie=n.unstable_now();R=ie;var se=!0;try{se=M(!0,ie)}finally{se?ae():($=!1,M=null)}}else $=!1}var ae;if(typeof C=="function")ae=function(){C(fe)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,ye=xe.port2;xe.port1.onmessage=fe,ae=function(){ye.postMessage(null)}}else ae=function(){T(fe,0)};function Ee(ie){M=ie,$||($=!0,ae())}function Pe(ie,se){U=T(function(){ie(n.unstable_now())},se)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ie){ie.callback=null},n.unstable_continueExecution=function(){v||x||(v=!0,Ee(w))},n.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<ie?Math.floor(1e3/ie):5},n.unstable_getCurrentPriorityLevel=function(){return g},n.unstable_getFirstCallbackNode=function(){return t(u)},n.unstable_next=function(ie){switch(g){case 1:case 2:case 3:var se=3;break;default:se=g}var B=g;g=se;try{return ie()}finally{g=B}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ie,se){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var B=g;g=ie;try{return se()}finally{g=B}},n.unstable_scheduleCallback=function(ie,se,B){var H=n.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?H+B:H):B=H,ie){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=B+Q,ie={id:h++,callback:se,priorityLevel:ie,startTime:B,expirationTime:Q,sortIndex:-1},B>H?(ie.sortIndex=B,e(d,ie),t(u)===null&&ie===t(d)&&(S?(_(U),U=-1):S=!0,Pe(O,B-H))):(ie.sortIndex=Q,e(u,ie),v||x||(v=!0,Ee(w))),ie},n.unstable_shouldYield=G,n.unstable_wrapCallback=function(ie){var se=g;return function(){var B=g;g=se;try{return ie.apply(this,arguments)}finally{g=B}}}}(am)),am}var Rv;function qw(){return Rv||(Rv=1,om.exports=Yw()),om.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Av;function Xw(){if(Av)return Jr;Av=1;var n=Eu(),e=qw();function t(o){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+o,f=1;f<arguments.length;f++)l+="&args[]="+encodeURIComponent(arguments[f]);return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(o,l){a(o,l),a(o+"Capture",l)}function a(o,l){for(i[o]=l,o=0;o<l.length;o++)r.add(l[o])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},p={};function g(o){return u.call(p,o)?!0:u.call(h,o)?!1:d.test(o)?p[o]=!0:(h[o]=!0,!1)}function x(o,l,f,m){if(f!==null&&f.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return m?!1:f!==null?!f.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function v(o,l,f,m){if(l===null||typeof l>"u"||x(o,l,f,m))return!0;if(m)return!1;if(f!==null)switch(f.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function S(o,l,f,m,E,b,D){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=m,this.attributeNamespace=E,this.mustUseProperty=f,this.propertyName=o,this.type=l,this.sanitizeURL=b,this.removeEmptyString=D}var T={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){T[o]=new S(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var l=o[0];T[l]=new S(l,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){T[o]=new S(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){T[o]=new S(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){T[o]=new S(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){T[o]=new S(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){T[o]=new S(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){T[o]=new S(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){T[o]=new S(o,5,!1,o.toLowerCase(),null,!1,!1)});var _=/[\-:]([a-z])/g;function C(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var l=o.replace(_,C);T[l]=new S(l,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var l=o.replace(_,C);T[l]=new S(l,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var l=o.replace(_,C);T[l]=new S(l,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){T[o]=new S(o,1,!1,o.toLowerCase(),null,!1,!1)}),T.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){T[o]=new S(o,1,!1,o.toLowerCase(),null,!0,!0)});function k(o,l,f,m){var E=T.hasOwnProperty(l)?T[l]:null;(E!==null?E.type!==0:m||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(v(l,f,E,m)&&(f=null),m||E===null?g(l)&&(f===null?o.removeAttribute(l):o.setAttribute(l,""+f)):E.mustUseProperty?o[E.propertyName]=f===null?E.type===3?!1:"":f:(l=E.attributeName,m=E.attributeNamespace,f===null?o.removeAttribute(l):(E=E.type,f=E===3||E===4&&f===!0?"":""+f,m?o.setAttributeNS(m,l,f):o.setAttribute(l,f))))}var O=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),$=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),W=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),G=Symbol.for("react.context"),fe=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),xe=Symbol.for("react.suspense_list"),ye=Symbol.for("react.memo"),Ee=Symbol.for("react.lazy"),Pe=Symbol.for("react.offscreen"),ie=Symbol.iterator;function se(o){return o===null||typeof o!="object"?null:(o=ie&&o[ie]||o["@@iterator"],typeof o=="function"?o:null)}var B=Object.assign,H;function Q(o){if(H===void 0)try{throw Error()}catch(f){var l=f.stack.trim().match(/\n( *(at )?)/);H=l&&l[1]||""}return`
`+H+o}var we=!1;function Ae(o,l){if(!o||we)return"";we=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(re){var m=re}Reflect.construct(o,[],l)}else{try{l.call()}catch(re){m=re}o.call(l.prototype)}else{try{throw Error()}catch(re){m=re}o()}}catch(re){if(re&&m&&typeof re.stack=="string"){for(var E=re.stack.split(`
`),b=m.stack.split(`
`),D=E.length-1,j=b.length-1;1<=D&&0<=j&&E[D]!==b[j];)j--;for(;1<=D&&0<=j;D--,j--)if(E[D]!==b[j]){if(D!==1||j!==1)do if(D--,j--,0>j||E[D]!==b[j]){var z=`
`+E[D].replace(" at new "," at ");return o.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",o.displayName)),z}while(1<=D&&0<=j);break}}}finally{we=!1,Error.prepareStackTrace=f}return(o=o?o.displayName||o.name:"")?Q(o):""}function Oe(o){switch(o.tag){case 5:return Q(o.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return o=Ae(o.type,!1),o;case 11:return o=Ae(o.type.render,!1),o;case 1:return o=Ae(o.type,!0),o;default:return""}}function Me(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case M:return"Fragment";case $:return"Portal";case W:return"Profiler";case U:return"StrictMode";case ae:return"Suspense";case xe:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case G:return(o.displayName||"Context")+".Consumer";case R:return(o._context.displayName||"Context")+".Provider";case fe:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case ye:return l=o.displayName||null,l!==null?l:Me(o.type)||"Memo";case Ee:l=o._payload,o=o._init;try{return Me(o(l))}catch{}}return null}function ct(o){var l=o.type;switch(o.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=l.render,o=o.displayName||o.name||"",l.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Me(l);case 8:return l===U?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Ce(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function nt(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Ut(o){var l=nt(o)?"checked":"value",f=Object.getOwnPropertyDescriptor(o.constructor.prototype,l),m=""+o[l];if(!o.hasOwnProperty(l)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var E=f.get,b=f.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return E.call(this)},set:function(D){m=""+D,b.call(this,D)}}),Object.defineProperty(o,l,{enumerable:f.enumerable}),{getValue:function(){return m},setValue:function(D){m=""+D},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function an(o){o._valueTracker||(o._valueTracker=Ut(o))}function Bn(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var f=l.getValue(),m="";return o&&(m=nt(o)?o.checked?"true":"false":o.value),o=m,o!==f?(l.setValue(o),!0):!1}function Ot(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function ls(o,l){var f=l.checked;return B({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:f??o._wrapperState.initialChecked})}function ri(o,l){var f=l.defaultValue==null?"":l.defaultValue,m=l.checked!=null?l.checked:l.defaultChecked;f=Ce(l.value!=null?l.value:f),o._wrapperState={initialChecked:m,initialValue:f,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function Cr(o,l){l=l.checked,l!=null&&k(o,"checked",l,!1)}function zs(o,l){Cr(o,l);var f=Ce(l.value),m=l.type;if(f!=null)m==="number"?(f===0&&o.value===""||o.value!=f)&&(o.value=""+f):o.value!==""+f&&(o.value=""+f);else if(m==="submit"||m==="reset"){o.removeAttribute("value");return}l.hasOwnProperty("value")?Ks(o,l.type,f):l.hasOwnProperty("defaultValue")&&Ks(o,l.type,Ce(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(o.defaultChecked=!!l.defaultChecked)}function Mi(o,l,f){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var m=l.type;if(!(m!=="submit"&&m!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+o._wrapperState.initialValue,f||l===o.value||(o.value=l),o.defaultValue=l}f=o.name,f!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,f!==""&&(o.name=f)}function Ks(o,l,f){(l!=="number"||Ot(o.ownerDocument)!==o)&&(f==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+f&&(o.defaultValue=""+f))}var pi=Array.isArray;function On(o,l,f,m){if(o=o.options,l){l={};for(var E=0;E<f.length;E++)l["$"+f[E]]=!0;for(f=0;f<o.length;f++)E=l.hasOwnProperty("$"+o[f].value),o[f].selected!==E&&(o[f].selected=E),E&&m&&(o[f].defaultSelected=!0)}else{for(f=""+Ce(f),l=null,E=0;E<o.length;E++){if(o[E].value===f){o[E].selected=!0,m&&(o[E].defaultSelected=!0);return}l!==null||o[E].disabled||(l=o[E])}l!==null&&(l.selected=!0)}}function mr(o,l){if(l.dangerouslySetInnerHTML!=null)throw Error(t(91));return B({},l,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function Fi(o,l){var f=l.value;if(f==null){if(f=l.children,l=l.defaultValue,f!=null){if(l!=null)throw Error(t(92));if(pi(f)){if(1<f.length)throw Error(t(93));f=f[0]}l=f}l==null&&(l=""),f=l}o._wrapperState={initialValue:Ce(f)}}function ii(o,l){var f=Ce(l.value),m=Ce(l.defaultValue);f!=null&&(f=""+f,f!==o.value&&(o.value=f),l.defaultValue==null&&o.defaultValue!==f&&(o.defaultValue=f)),m!=null&&(o.defaultValue=""+m)}function pe(o){var l=o.textContent;l===o._wrapperState.initialValue&&l!==""&&l!==null&&(o.value=l)}function Z(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Te(o,l){return o==null||o==="http://www.w3.org/1999/xhtml"?Z(l):o==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var Se,lt=function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,f,m,E){MSApp.execUnsafeLocalFunction(function(){return o(l,f,m,E)})}:o}(function(o,l){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=l;else{for(Se=Se||document.createElement("div"),Se.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=Se.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;l.firstChild;)o.appendChild(l.firstChild)}});function tt(o,l){if(l){var f=o.firstChild;if(f&&f===o.lastChild&&f.nodeType===3){f.nodeValue=l;return}}o.textContent=l}var bt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ue=["Webkit","ms","Moz","O"];Object.keys(bt).forEach(function(o){ue.forEach(function(l){l=l+o.charAt(0).toUpperCase()+o.substring(1),bt[l]=bt[o]})});function ge(o,l,f){return l==null||typeof l=="boolean"||l===""?"":f||typeof l!="number"||l===0||bt.hasOwnProperty(o)&&bt[o]?(""+l).trim():l+"px"}function Ke(o,l){o=o.style;for(var f in l)if(l.hasOwnProperty(f)){var m=f.indexOf("--")===0,E=ge(f,l[f],m);f==="float"&&(f="cssFloat"),m?o.setProperty(f,E):o[f]=E}}var Be=B({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Fe(o,l){if(l){if(Be[o]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(t(137,o));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(t(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(t(61))}if(l.style!=null&&typeof l.style!="object")throw Error(t(62))}}function mt(o,l){if(o.indexOf("-")===-1)return typeof l.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nt=null;function jt(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Ct=null,en=null,Mt=null;function fn(o){if(o=no(o)){if(typeof Ct!="function")throw Error(t(280));var l=o.stateNode;l&&(l=bi(l),Ct(o.stateNode,o.type,l))}}function gr(o){en?Mt?Mt.push(o):Mt=[o]:en=o}function Fr(){if(en){var o=en,l=Mt;if(Mt=en=null,fn(o),l)for(o=0;o<l.length;o++)fn(l[o])}}function $i(o,l){return o(l)}function V(){}var X=!1;function ce(o,l,f){if(X)return o(l,f);X=!0;try{return $i(o,l,f)}finally{X=!1,(en!==null||Mt!==null)&&(V(),Fr())}}function be(o,l){var f=o.stateNode;if(f===null)return null;var m=bi(f);if(m===null)return null;f=m[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(o=o.type,m=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!m;break e;default:o=!1}if(o)return null;if(f&&typeof f!="function")throw Error(t(231,l,typeof f));return f}var He=!1;if(c)try{var Qe={};Object.defineProperty(Qe,"passive",{get:function(){He=!0}}),window.addEventListener("test",Qe,Qe),window.removeEventListener("test",Qe,Qe)}catch{He=!1}function ut(o,l,f,m,E,b,D,j,z){var re=Array.prototype.slice.call(arguments,3);try{l.apply(f,re)}catch(Le){this.onError(Le)}}var $e=!1,Ue=null,De=!1,dt=null,vt={onError:function(o){$e=!0,Ue=o}};function sn(o,l,f,m,E,b,D,j,z){$e=!1,Ue=null,ut.apply(vt,arguments)}function kn(o,l,f,m,E,b,D,j,z){if(sn.apply(this,arguments),$e){if($e){var re=Ue;$e=!1,Ue=null}else throw Error(t(198));De||(De=!0,dt=re)}}function wt(o){var l=o,f=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,l.flags&4098&&(f=l.return),o=l.return;while(o)}return l.tag===3?f:null}function xt(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function Rt(o){if(wt(o)!==o)throw Error(t(188))}function bn(o){var l=o.alternate;if(!l){if(l=wt(o),l===null)throw Error(t(188));return l!==o?null:o}for(var f=o,m=l;;){var E=f.return;if(E===null)break;var b=E.alternate;if(b===null){if(m=E.return,m!==null){f=m;continue}break}if(E.child===b.child){for(b=E.child;b;){if(b===f)return Rt(E),o;if(b===m)return Rt(E),l;b=b.sibling}throw Error(t(188))}if(f.return!==m.return)f=E,m=b;else{for(var D=!1,j=E.child;j;){if(j===f){D=!0,f=E,m=b;break}if(j===m){D=!0,m=E,f=b;break}j=j.sibling}if(!D){for(j=b.child;j;){if(j===f){D=!0,f=b,m=E;break}if(j===m){D=!0,m=b,f=E;break}j=j.sibling}if(!D)throw Error(t(189))}}if(f.alternate!==m)throw Error(t(190))}if(f.tag!==3)throw Error(t(188));return f.stateNode.current===f?o:l}function yn(o){return o=bn(o),o!==null?lr(o):null}function lr(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var l=lr(o);if(l!==null)return l;o=o.sibling}return null}var Nn=e.unstable_scheduleCallback,$r=e.unstable_cancelCallback,Br=e.unstable_shouldYield,mi=e.unstable_requestPaint,Xt=e.unstable_now,si=e.unstable_getCurrentPriorityLevel,Ft=e.unstable_ImmediatePriority,xn=e.unstable_UserBlockingPriority,oi=e.unstable_NormalPriority,cs=e.unstable_LowPriority,hn=e.unstable_IdlePriority,Ur=null,yr=null;function Ja(o){if(yr&&typeof yr.onCommitFiberRoot=="function")try{yr.onCommitFiberRoot(Ur,o,void 0,(o.current.flags&128)===128)}catch{}}var jr=Math.clz32?Math.clz32:Mu,Ou=Math.log,Nu=Math.LN2;function Mu(o){return o>>>=0,o===0?32:31-(Ou(o)/Nu|0)|0}var ra=64,Rr=4194304;function Un(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function gi(o,l){var f=o.pendingLanes;if(f===0)return 0;var m=0,E=o.suspendedLanes,b=o.pingedLanes,D=f&268435455;if(D!==0){var j=D&~E;j!==0?m=Un(j):(b&=D,b!==0&&(m=Un(b)))}else D=f&~E,D!==0?m=Un(D):b!==0&&(m=Un(b));if(m===0)return 0;if(l!==0&&l!==m&&!(l&E)&&(E=m&-m,b=l&-l,E>=b||E===16&&(b&4194240)!==0))return l;if(m&4&&(m|=f&16),l=o.entangledLanes,l!==0)for(o=o.entanglements,l&=m;0<l;)f=31-jr(l),E=1<<f,m|=o[f],l&=~E;return m}function Hr(o,l){switch(o){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lc(o,l){for(var f=o.suspendedLanes,m=o.pingedLanes,E=o.expirationTimes,b=o.pendingLanes;0<b;){var D=31-jr(b),j=1<<D,z=E[D];z===-1?(!(j&f)||j&m)&&(E[D]=Hr(j,l)):z<=l&&(o.expiredLanes|=j),b&=~j}}function ia(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function ai(){var o=ra;return ra<<=1,!(ra&4194240)&&(ra=64),o}function Bi(o){for(var l=[],f=0;31>f;f++)l.push(o);return l}function us(o,l,f){o.pendingLanes|=l,l!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,l=31-jr(l),o[l]=f}function vo(o,l){var f=o.pendingLanes&~l;o.pendingLanes=l,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=l,o.mutableReadLanes&=l,o.entangledLanes&=l,l=o.entanglements;var m=o.eventTimes;for(o=o.expirationTimes;0<f;){var E=31-jr(f),b=1<<E;l[E]=0,m[E]=-1,o[E]=-1,f&=~b}}function sa(o,l){var f=o.entangledLanes|=l;for(o=o.entanglements;f;){var m=31-jr(f),E=1<<m;E&l|o[m]&l&&(o[m]|=l),f&=~E}}var Ht=0;function Ws(o){return o&=-o,1<o?4<o?o&268435455?16:536870912:4:1}var Za,el,yi,Fu,Ui,xo=!1,oa=[],Gr=null,vi=null,Vr=null,So=new Map,Eo=new Map,ji=[],To="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $u(o,l){switch(o){case"focusin":case"focusout":Gr=null;break;case"dragenter":case"dragleave":vi=null;break;case"mouseover":case"mouseout":Vr=null;break;case"pointerover":case"pointerout":So.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Eo.delete(l.pointerId)}}function bo(o,l,f,m,E,b){return o===null||o.nativeEvent!==b?(o={blockedOn:l,domEventName:f,eventSystemFlags:m,nativeEvent:b,targetContainers:[E]},l!==null&&(l=no(l),l!==null&&el(l)),o):(o.eventSystemFlags|=m,l=o.targetContainers,E!==null&&l.indexOf(E)===-1&&l.push(E),o)}function cc(o,l,f,m,E){switch(l){case"focusin":return Gr=bo(Gr,o,l,f,m,E),!0;case"dragenter":return vi=bo(vi,o,l,f,m,E),!0;case"mouseover":return Vr=bo(Vr,o,l,f,m,E),!0;case"pointerover":var b=E.pointerId;return So.set(b,bo(So.get(b)||null,o,l,f,m,E)),!0;case"gotpointercapture":return b=E.pointerId,Eo.set(b,bo(Eo.get(b)||null,o,l,f,m,E)),!0}return!1}function aa(o){var l=vs(o.target);if(l!==null){var f=wt(l);if(f!==null){if(l=f.tag,l===13){if(l=xt(f),l!==null){o.blockedOn=l,Ui(o.priority,function(){yi(f)});return}}else if(l===3&&f.stateNode.current.memoizedState.isDehydrated){o.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}o.blockedOn=null}function wo(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var f=nl(o.domEventName,o.eventSystemFlags,l[0],o.nativeEvent);if(f===null){f=o.nativeEvent;var m=new f.constructor(f.type,f);Nt=m,f.target.dispatchEvent(m),Nt=null}else return l=no(f),l!==null&&el(l),o.blockedOn=f,!1;l.shift()}return!0}function Bu(o,l,f){wo(o)&&f.delete(l)}function tl(){xo=!1,Gr!==null&&wo(Gr)&&(Gr=null),vi!==null&&wo(vi)&&(vi=null),Vr!==null&&wo(Vr)&&(Vr=null),So.forEach(Bu),Eo.forEach(Bu)}function la(o,l){o.blockedOn===l&&(o.blockedOn=null,xo||(xo=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,tl)))}function _o(o){function l(E){return la(E,o)}if(0<oa.length){la(oa[0],o);for(var f=1;f<oa.length;f++){var m=oa[f];m.blockedOn===o&&(m.blockedOn=null)}}for(Gr!==null&&la(Gr,o),vi!==null&&la(vi,o),Vr!==null&&la(Vr,o),So.forEach(l),Eo.forEach(l),f=0;f<ji.length;f++)m=ji[f],m.blockedOn===o&&(m.blockedOn=null);for(;0<ji.length&&(f=ji[0],f.blockedOn===null);)aa(f),f.blockedOn===null&&ji.shift()}var ds=O.ReactCurrentBatchConfig,Lo=!0;function uc(o,l,f,m){var E=Ht,b=ds.transition;ds.transition=null;try{Ht=1,Ys(o,l,f,m)}finally{Ht=E,ds.transition=b}}function Uu(o,l,f,m){var E=Ht,b=ds.transition;ds.transition=null;try{Ht=4,Ys(o,l,f,m)}finally{Ht=E,ds.transition=b}}function Ys(o,l,f,m){if(Lo){var E=nl(o,l,f,m);if(E===null)_c(o,l,m,Co,f),$u(o,m);else if(cc(E,o,l,f,m))m.stopPropagation();else if($u(o,m),l&4&&-1<To.indexOf(o)){for(;E!==null;){var b=no(E);if(b!==null&&Za(b),b=nl(o,l,f,m),b===null&&_c(o,l,m,Co,f),b===E)break;E=b}E!==null&&m.stopPropagation()}else _c(o,l,m,null,f)}}var Co=null;function nl(o,l,f,m){if(Co=null,o=jt(m),o=vs(o),o!==null)if(l=wt(o),l===null)o=null;else if(f=l.tag,f===13){if(o=xt(l),o!==null)return o;o=null}else if(f===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null);return Co=o,null}function dc(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(si()){case Ft:return 1;case xn:return 4;case oi:case cs:return 16;case hn:return 536870912;default:return 16}default:return 16}}var Ar=null,fc=null,ca=null;function hc(){if(ca)return ca;var o,l=fc,f=l.length,m,E="value"in Ar?Ar.value:Ar.textContent,b=E.length;for(o=0;o<f&&l[o]===E[o];o++);var D=f-o;for(m=1;m<=D&&l[f-m]===E[b-m];m++);return ca=E.slice(o,1<m?1-m:void 0)}function ua(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function da(){return!0}function pc(){return!1}function cr(o){function l(f,m,E,b,D){this._reactName=f,this._targetInst=E,this.type=m,this.nativeEvent=b,this.target=D,this.currentTarget=null;for(var j in o)o.hasOwnProperty(j)&&(f=o[j],this[j]=f?f(b):b[j]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?da:pc,this.isPropagationStopped=pc,this}return B(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=da)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=da)},persist:function(){},isPersistent:da}),l}var qs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mc=cr(qs),fa=B({},qs,{view:0,detail:0}),ju=cr(fa),rl,Ro,ha,il=B({},fa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hi,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==ha&&(ha&&o.type==="mousemove"?(rl=o.screenX-ha.screenX,Ro=o.screenY-ha.screenY):Ro=rl=0,ha=o),rl)},movementY:function(o){return"movementY"in o?o.movementY:Ro}}),sl=cr(il),Hu=B({},il,{dataTransfer:0}),Gu=cr(Hu),Xs=B({},fa,{relatedTarget:0}),pa=cr(Xs),zh=B({},qs,{animationName:0,elapsedTime:0,pseudoElement:0}),Vu=cr(zh),Kh=B({},qs,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Wh=cr(Kh),Yh=B({},qs,{data:0}),zu=cr(Yh),Ku={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ao(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=qh[o])?!!l[o]:!1}function Hi(){return Ao}var Xh=B({},fa,{key:function(o){if(o.key){var l=Ku[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=ua(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Wu[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hi,charCode:function(o){return o.type==="keypress"?ua(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?ua(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),ol=cr(Xh),Qh=B({},il,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yu=cr(Qh),Jh=B({},fa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hi}),Zh=cr(Jh),ep=B({},qs,{propertyName:0,elapsedTime:0,pseudoElement:0}),tp=cr(ep),np=B({},il,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),rp=cr(np),li=[9,13,27,32],al=c&&"CompositionEvent"in window,ko=null;c&&"documentMode"in document&&(ko=document.documentMode);var qu=c&&"TextEvent"in window&&!ko,Xu=c&&(!al||ko&&8<ko&&11>=ko),Qu=" ",gc=!1;function ma(o,l){switch(o){case"keyup":return li.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ju(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Io=!1;function Zu(o,l){switch(o){case"compositionend":return Ju(l);case"keypress":return l.which!==32?null:(gc=!0,Qu);case"textInput":return o=l.data,o===Qu&&gc?null:o;default:return null}}function ip(o,l){if(Io)return o==="compositionend"||!al&&ma(o,l)?(o=hc(),ca=fc=Ar=null,Io=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Xu&&l.locale!=="ko"?null:l.data;default:return null}}var sp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yc(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!sp[o.type]:l==="textarea"}function vc(o,l,f,m){gr(m),l=Ei(l,"onChange"),0<l.length&&(f=new mc("onChange","change",null,f,m),o.push({event:f,listeners:l}))}var Po=null,fs=null;function ed(o){ya(o,0)}function Do(o){var l=ro(o);if(Bn(l))return o}function zr(o,l){if(o==="change")return l}var td=!1;if(c){var xc;if(c){var ll="oninput"in document;if(!ll){var Sc=document.createElement("div");Sc.setAttribute("oninput","return;"),ll=typeof Sc.oninput=="function"}xc=ll}else xc=!1;td=xc&&(!document.documentMode||9<document.documentMode)}function nd(){Po&&(Po.detachEvent("onpropertychange",rd),fs=Po=null)}function rd(o){if(o.propertyName==="value"&&Do(fs)){var l=[];vc(l,fs,o,jt(o)),ce(ed,l)}}function op(o,l,f){o==="focusin"?(nd(),Po=l,fs=f,Po.attachEvent("onpropertychange",rd)):o==="focusout"&&nd()}function ap(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Do(fs)}function lp(o,l){if(o==="click")return Do(l)}function cp(o,l){if(o==="input"||o==="change")return Do(l)}function id(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var Kr=typeof Object.is=="function"?Object.is:id;function Qs(o,l){if(Kr(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var f=Object.keys(o),m=Object.keys(l);if(f.length!==m.length)return!1;for(m=0;m<f.length;m++){var E=f[m];if(!u.call(l,E)||!Kr(o[E],l[E]))return!1}return!0}function sd(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function od(o,l){var f=sd(o);o=0;for(var m;f;){if(f.nodeType===3){if(m=o+f.textContent.length,o<=l&&m>=l)return{node:f,offset:l-o};o=m}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=sd(f)}}function hs(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?hs(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function xi(){for(var o=window,l=Ot();l instanceof o.HTMLIFrameElement;){try{var f=typeof l.contentWindow.location.href=="string"}catch{f=!1}if(f)o=l.contentWindow;else break;l=Ot(o.document)}return l}function cl(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}function up(o){var l=xi(),f=o.focusedElem,m=o.selectionRange;if(l!==f&&f&&f.ownerDocument&&hs(f.ownerDocument.documentElement,f)){if(m!==null&&cl(f)){if(l=m.start,o=m.end,o===void 0&&(o=l),"selectionStart"in f)f.selectionStart=l,f.selectionEnd=Math.min(o,f.value.length);else if(o=(l=f.ownerDocument||document)&&l.defaultView||window,o.getSelection){o=o.getSelection();var E=f.textContent.length,b=Math.min(m.start,E);m=m.end===void 0?b:Math.min(m.end,E),!o.extend&&b>m&&(E=m,m=b,b=E),E=od(f,b);var D=od(f,m);E&&D&&(o.rangeCount!==1||o.anchorNode!==E.node||o.anchorOffset!==E.offset||o.focusNode!==D.node||o.focusOffset!==D.offset)&&(l=l.createRange(),l.setStart(E.node,E.offset),o.removeAllRanges(),b>m?(o.addRange(l),o.extend(D.node,D.offset)):(l.setEnd(D.node,D.offset),o.addRange(l)))}}for(l=[],o=f;o=o.parentNode;)o.nodeType===1&&l.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof f.focus=="function"&&f.focus(),f=0;f<l.length;f++)o=l[f],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var ad=c&&"documentMode"in document&&11>=document.documentMode,Js=null,ul=null,Oo=null,Ec=!1;function ld(o,l,f){var m=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;Ec||Js==null||Js!==Ot(m)||(m=Js,"selectionStart"in m&&cl(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Oo&&Qs(Oo,m)||(Oo=m,m=Ei(ul,"onSelect"),0<m.length&&(l=new mc("onSelect","select",null,l,f),o.push({event:l,listeners:m}),l.target=Js)))}function dl(o,l){var f={};return f[o.toLowerCase()]=l.toLowerCase(),f["Webkit"+o]="webkit"+l,f["Moz"+o]="moz"+l,f}var Zs={animationend:dl("Animation","AnimationEnd"),animationiteration:dl("Animation","AnimationIteration"),animationstart:dl("Animation","AnimationStart"),transitionend:dl("Transition","TransitionEnd")},fl={},cd={};c&&(cd=document.createElement("div").style,"AnimationEvent"in window||(delete Zs.animationend.animation,delete Zs.animationiteration.animation,delete Zs.animationstart.animation),"TransitionEvent"in window||delete Zs.transitionend.transition);function hl(o){if(fl[o])return fl[o];if(!Zs[o])return o;var l=Zs[o],f;for(f in l)if(l.hasOwnProperty(f)&&f in cd)return fl[o]=l[f];return o}var ud=hl("animationend"),dd=hl("animationiteration"),fd=hl("animationstart"),Si=hl("transitionend"),Tc=new Map,hd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ps(o,l){Tc.set(o,l),s(l,[o])}for(var bc=0;bc<hd.length;bc++){var wc=hd[bc],dp=wc.toLowerCase(),fp=wc[0].toUpperCase()+wc.slice(1);ps(dp,"on"+fp)}ps(ud,"onAnimationEnd"),ps(dd,"onAnimationIteration"),ps(fd,"onAnimationStart"),ps("dblclick","onDoubleClick"),ps("focusin","onFocus"),ps("focusout","onBlur"),ps(Si,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ga="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hp=new Set("cancel close invalid load scroll toggle".split(" ").concat(ga));function pl(o,l,f){var m=o.type||"unknown-event";o.currentTarget=f,kn(m,l,void 0,o),o.currentTarget=null}function ya(o,l){l=(l&4)!==0;for(var f=0;f<o.length;f++){var m=o[f],E=m.event;m=m.listeners;e:{var b=void 0;if(l)for(var D=m.length-1;0<=D;D--){var j=m[D],z=j.instance,re=j.currentTarget;if(j=j.listener,z!==b&&E.isPropagationStopped())break e;pl(E,j,re),b=z}else for(D=0;D<m.length;D++){if(j=m[D],z=j.instance,re=j.currentTarget,j=j.listener,z!==b&&E.isPropagationStopped())break e;pl(E,j,re),b=z}}}if(De)throw o=dt,De=!1,dt=null,o}function on(o,l){var f=l[Ac];f===void 0&&(f=l[Ac]=new Set);var m=o+"__bubble";f.has(m)||(pd(l,o,2,!1),f.add(m))}function ml(o,l,f){var m=0;l&&(m|=4),pd(f,o,m,l)}var ms="_reactListening"+Math.random().toString(36).slice(2);function eo(o){if(!o[ms]){o[ms]=!0,r.forEach(function(f){f!=="selectionchange"&&(hp.has(f)||ml(f,!1,o),ml(f,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[ms]||(l[ms]=!0,ml("selectionchange",!1,l))}}function pd(o,l,f,m){switch(dc(l)){case 1:var E=uc;break;case 4:E=Uu;break;default:E=Ys}f=E.bind(null,l,f,o),E=void 0,!He||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(E=!0),m?E!==void 0?o.addEventListener(l,f,{capture:!0,passive:E}):o.addEventListener(l,f,!0):E!==void 0?o.addEventListener(l,f,{passive:E}):o.addEventListener(l,f,!1)}function _c(o,l,f,m,E){var b=m;if(!(l&1)&&!(l&2)&&m!==null)e:for(;;){if(m===null)return;var D=m.tag;if(D===3||D===4){var j=m.stateNode.containerInfo;if(j===E||j.nodeType===8&&j.parentNode===E)break;if(D===4)for(D=m.return;D!==null;){var z=D.tag;if((z===3||z===4)&&(z=D.stateNode.containerInfo,z===E||z.nodeType===8&&z.parentNode===E))return;D=D.return}for(;j!==null;){if(D=vs(j),D===null)return;if(z=D.tag,z===5||z===6){m=b=D;continue e}j=j.parentNode}}m=m.return}ce(function(){var re=b,Le=jt(f),Re=[];e:{var _e=Tc.get(o);if(_e!==void 0){var je=mc,qe=o;switch(o){case"keypress":if(ua(f)===0)break e;case"keydown":case"keyup":je=ol;break;case"focusin":qe="focus",je=pa;break;case"focusout":qe="blur",je=pa;break;case"beforeblur":case"afterblur":je=pa;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":je=sl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":je=Gu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":je=Zh;break;case ud:case dd:case fd:je=Vu;break;case Si:je=tp;break;case"scroll":je=ju;break;case"wheel":je=rp;break;case"copy":case"cut":case"paste":je=Wh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":je=Yu}var Je=(l&4)!==0,Pn=!Je&&o==="scroll",ee=Je?_e!==null?_e+"Capture":null:_e;Je=[];for(var Y=re,ne;Y!==null;){ne=Y;var Ie=ne.stateNode;if(ne.tag===5&&Ie!==null&&(ne=Ie,ee!==null&&(Ie=be(Y,ee),Ie!=null&&Je.push(va(Y,Ie,ne)))),Pn)break;Y=Y.return}0<Je.length&&(_e=new je(_e,qe,null,f,Le),Re.push({event:_e,listeners:Je}))}}if(!(l&7)){e:{if(_e=o==="mouseover"||o==="pointerover",je=o==="mouseout"||o==="pointerout",_e&&f!==Nt&&(qe=f.relatedTarget||f.fromElement)&&(vs(qe)||qe[Gi]))break e;if((je||_e)&&(_e=Le.window===Le?Le:(_e=Le.ownerDocument)?_e.defaultView||_e.parentWindow:window,je?(qe=f.relatedTarget||f.toElement,je=re,qe=qe?vs(qe):null,qe!==null&&(Pn=wt(qe),qe!==Pn||qe.tag!==5&&qe.tag!==6)&&(qe=null)):(je=null,qe=re),je!==qe)){if(Je=sl,Ie="onMouseLeave",ee="onMouseEnter",Y="mouse",(o==="pointerout"||o==="pointerover")&&(Je=Yu,Ie="onPointerLeave",ee="onPointerEnter",Y="pointer"),Pn=je==null?_e:ro(je),ne=qe==null?_e:ro(qe),_e=new Je(Ie,Y+"leave",je,f,Le),_e.target=Pn,_e.relatedTarget=ne,Ie=null,vs(Le)===re&&(Je=new Je(ee,Y+"enter",qe,f,Le),Je.target=ne,Je.relatedTarget=Pn,Ie=Je),Pn=Ie,je&&qe)t:{for(Je=je,ee=qe,Y=0,ne=Je;ne;ne=No(ne))Y++;for(ne=0,Ie=ee;Ie;Ie=No(Ie))ne++;for(;0<Y-ne;)Je=No(Je),Y--;for(;0<ne-Y;)ee=No(ee),ne--;for(;Y--;){if(Je===ee||ee!==null&&Je===ee.alternate)break t;Je=No(Je),ee=No(ee)}Je=null}else Je=null;je!==null&&md(Re,_e,je,Je,!1),qe!==null&&Pn!==null&&md(Re,Pn,qe,Je,!0)}}e:{if(_e=re?ro(re):window,je=_e.nodeName&&_e.nodeName.toLowerCase(),je==="select"||je==="input"&&_e.type==="file")var Ze=zr;else if(yc(_e))if(td)Ze=cp;else{Ze=ap;var it=op}else(je=_e.nodeName)&&je.toLowerCase()==="input"&&(_e.type==="checkbox"||_e.type==="radio")&&(Ze=lp);if(Ze&&(Ze=Ze(o,re))){vc(Re,Ze,f,Le);break e}it&&it(o,_e,re),o==="focusout"&&(it=_e._wrapperState)&&it.controlled&&_e.type==="number"&&Ks(_e,"number",_e.value)}switch(it=re?ro(re):window,o){case"focusin":(yc(it)||it.contentEditable==="true")&&(Js=it,ul=re,Oo=null);break;case"focusout":Oo=ul=Js=null;break;case"mousedown":Ec=!0;break;case"contextmenu":case"mouseup":case"dragend":Ec=!1,ld(Re,f,Le);break;case"selectionchange":if(ad)break;case"keydown":case"keyup":ld(Re,f,Le)}var st;if(al)e:{switch(o){case"compositionstart":var pt="onCompositionStart";break e;case"compositionend":pt="onCompositionEnd";break e;case"compositionupdate":pt="onCompositionUpdate";break e}pt=void 0}else Io?ma(o,f)&&(pt="onCompositionEnd"):o==="keydown"&&f.keyCode===229&&(pt="onCompositionStart");pt&&(Xu&&f.locale!=="ko"&&(Io||pt!=="onCompositionStart"?pt==="onCompositionEnd"&&Io&&(st=hc()):(Ar=Le,fc="value"in Ar?Ar.value:Ar.textContent,Io=!0)),it=Ei(re,pt),0<it.length&&(pt=new zu(pt,o,null,f,Le),Re.push({event:pt,listeners:it}),st?pt.data=st:(st=Ju(f),st!==null&&(pt.data=st)))),(st=qu?Zu(o,f):ip(o,f))&&(re=Ei(re,"onBeforeInput"),0<re.length&&(Le=new zu("onBeforeInput","beforeinput",null,f,Le),Re.push({event:Le,listeners:re}),Le.data=st))}ya(Re,l)})}function va(o,l,f){return{instance:o,listener:l,currentTarget:f}}function Ei(o,l){for(var f=l+"Capture",m=[];o!==null;){var E=o,b=E.stateNode;E.tag===5&&b!==null&&(E=b,b=be(o,f),b!=null&&m.unshift(va(o,b,E)),b=be(o,l),b!=null&&m.push(va(o,b,E))),o=o.return}return m}function No(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function md(o,l,f,m,E){for(var b=l._reactName,D=[];f!==null&&f!==m;){var j=f,z=j.alternate,re=j.stateNode;if(z!==null&&z===m)break;j.tag===5&&re!==null&&(j=re,E?(z=be(f,b),z!=null&&D.unshift(va(f,z,j))):E||(z=be(f,b),z!=null&&D.push(va(f,z,j)))),f=f.return}D.length!==0&&o.push({event:l,listeners:D})}var gl=/\r\n?/g,Lc=/\u0000|\uFFFD/g;function gd(o){return(typeof o=="string"?o:""+o).replace(gl,`
`).replace(Lc,"")}function xa(o,l,f){if(l=gd(l),gd(o)!==l&&f)throw Error(t(425))}function yl(){}var gs=null,Sa=null;function vl(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Cc=typeof setTimeout=="function"?setTimeout:void 0,pp=typeof clearTimeout=="function"?clearTimeout:void 0,yd=typeof Promise=="function"?Promise:void 0,Ea=typeof queueMicrotask=="function"?queueMicrotask:typeof yd<"u"?function(o){return yd.resolve(null).then(o).catch(to)}:Cc;function to(o){setTimeout(function(){throw o})}function Rc(o,l){var f=l,m=0;do{var E=f.nextSibling;if(o.removeChild(f),E&&E.nodeType===8)if(f=E.data,f==="/$"){if(m===0){o.removeChild(E),_o(l);return}m--}else f!=="$"&&f!=="$?"&&f!=="$!"||m++;f=E}while(f);_o(l)}function ys(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return o}function vd(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var f=o.data;if(f==="$"||f==="$!"||f==="$?"){if(l===0)return o;l--}else f==="/$"&&l++}o=o.previousSibling}return null}var Mo=Math.random().toString(36).slice(2),Ti="__reactFiber$"+Mo,Ta="__reactProps$"+Mo,Gi="__reactContainer$"+Mo,Ac="__reactEvents$"+Mo,xd="__reactListeners$"+Mo,mp="__reactHandles$"+Mo;function vs(o){var l=o[Ti];if(l)return l;for(var f=o.parentNode;f;){if(l=f[Gi]||f[Ti]){if(f=l.alternate,l.child!==null||f!==null&&f.child!==null)for(o=vd(o);o!==null;){if(f=o[Ti])return f;o=vd(o)}return l}o=f,f=o.parentNode}return null}function no(o){return o=o[Ti]||o[Gi],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function ro(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(t(33))}function bi(o){return o[Ta]||null}var xl=[],xs=-1;function Vi(o){return{current:o}}function tn(o){0>xs||(o.current=xl[xs],xl[xs]=null,xs--)}function nn(o,l){xs++,xl[xs]=o.current,o.current=l}var wi={},Yn=Vi(wi),wn=Vi(!1),vr=wi;function Fo(o,l){var f=o.type.contextTypes;if(!f)return wi;var m=o.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===l)return m.__reactInternalMemoizedMaskedChildContext;var E={},b;for(b in f)E[b]=l[b];return m&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=l,o.__reactInternalMemoizedMaskedChildContext=E),E}function xr(o){return o=o.childContextTypes,o!=null}function Sl(){tn(wn),tn(Yn)}function Sd(o,l,f){if(Yn.current!==wi)throw Error(t(168));nn(Yn,l),nn(wn,f)}function Ed(o,l,f){var m=o.stateNode;if(l=l.childContextTypes,typeof m.getChildContext!="function")return f;m=m.getChildContext();for(var E in m)if(!(E in l))throw Error(t(108,ct(o)||"Unknown",E));return B({},f,m)}function El(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||wi,vr=Yn.current,nn(Yn,o),nn(wn,wn.current),!0}function Td(o,l,f){var m=o.stateNode;if(!m)throw Error(t(169));f?(o=Ed(o,l,vr),m.__reactInternalMemoizedMergedChildContext=o,tn(wn),tn(Yn),nn(Yn,o)):tn(wn),nn(wn,f)}var zi=null,ba=!1,$o=!1;function wa(o){zi===null?zi=[o]:zi.push(o)}function gp(o){ba=!0,wa(o)}function Ss(){if(!$o&&zi!==null){$o=!0;var o=0,l=Ht;try{var f=zi;for(Ht=1;o<f.length;o++){var m=f[o];do m=m(!0);while(m!==null)}zi=null,ba=!1}catch(E){throw zi!==null&&(zi=zi.slice(o+1)),Nn(Ft,Ss),E}finally{Ht=l,$o=!1}}return null}var _i=[],I=0,y=null,L=0,N=[],K=0,q=null,oe=1,me="";function ke(o,l){_i[I++]=L,_i[I++]=y,y=o,L=l}function Ge(o,l,f){N[K++]=oe,N[K++]=me,N[K++]=q,q=o;var m=oe;o=me;var E=32-jr(m)-1;m&=~(1<<E),f+=1;var b=32-jr(l)+E;if(30<b){var D=E-E%5;b=(m&(1<<D)-1).toString(32),m>>=D,E-=D,oe=1<<32-jr(l)+E|f<<E|m,me=b+o}else oe=1<<b|f<<E|m,me=o}function Ve(o){o.return!==null&&(ke(o,1),Ge(o,1,0))}function Ne(o){for(;o===y;)y=_i[--I],_i[I]=null,L=_i[--I],_i[I]=null;for(;o===q;)q=N[--K],N[K]=null,me=N[--K],N[K]=null,oe=N[--K],N[K]=null}var rt=null,Xe=null,ze=!1,et=null;function ht(o,l){var f=Ai(5,null,null,0);f.elementType="DELETED",f.stateNode=l,f.return=o,l=o.deletions,l===null?(o.deletions=[f],o.flags|=16):l.push(f)}function zt(o,l){switch(o.tag){case 5:var f=o.type;return l=l.nodeType!==1||f.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(o.stateNode=l,rt=o,Xe=ys(l.firstChild),!0):!1;case 6:return l=o.pendingProps===""||l.nodeType!==3?null:l,l!==null?(o.stateNode=l,rt=o,Xe=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(f=q!==null?{id:oe,overflow:me}:null,o.memoizedState={dehydrated:l,treeContext:f,retryLane:1073741824},f=Ai(18,null,null,0),f.stateNode=l,f.return=o,o.child=f,rt=o,Xe=null,!0):!1;default:return!1}}function Qt(o){return(o.mode&1)!==0&&(o.flags&128)===0}function Et(o){if(ze){var l=Xe;if(l){var f=l;if(!zt(o,l)){if(Qt(o))throw Error(t(418));l=ys(f.nextSibling);var m=rt;l&&zt(o,l)?ht(m,f):(o.flags=o.flags&-4097|2,ze=!1,rt=o)}}else{if(Qt(o))throw Error(t(418));o.flags=o.flags&-4097|2,ze=!1,rt=o}}}function Pt(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;rt=o}function gt(o){if(o!==rt)return!1;if(!ze)return Pt(o),ze=!0,!1;var l;if((l=o.tag!==3)&&!(l=o.tag!==5)&&(l=o.type,l=l!=="head"&&l!=="body"&&!vl(o.type,o.memoizedProps)),l&&(l=Xe)){if(Qt(o))throw _t(),Error(t(418));for(;l;)ht(o,l),l=ys(l.nextSibling)}if(Pt(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(t(317));e:{for(o=o.nextSibling,l=0;o;){if(o.nodeType===8){var f=o.data;if(f==="/$"){if(l===0){Xe=ys(o.nextSibling);break e}l--}else f!=="$"&&f!=="$!"&&f!=="$?"||l++}o=o.nextSibling}Xe=null}}else Xe=rt?ys(o.stateNode.nextSibling):null;return!0}function _t(){for(var o=Xe;o;)o=ys(o.nextSibling)}function At(){Xe=rt=null,ze=!1}function Gt(o){et===null?et=[o]:et.push(o)}var Kt=O.ReactCurrentBatchConfig;function ln(o,l,f){if(o=f.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(f._owner){if(f=f._owner,f){if(f.tag!==1)throw Error(t(309));var m=f.stateNode}if(!m)throw Error(t(147,o));var E=m,b=""+o;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===b?l.ref:(l=function(D){var j=E.refs;D===null?delete j[b]:j[b]=D},l._stringRef=b,l)}if(typeof o!="string")throw Error(t(284));if(!f._owner)throw Error(t(290,o))}return o}function qn(o,l){throw o=Object.prototype.toString.call(l),Error(t(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o))}function Wr(o){var l=o._init;return l(o._payload)}function Xn(o){function l(ee,Y){if(o){var ne=ee.deletions;ne===null?(ee.deletions=[Y],ee.flags|=16):ne.push(Y)}}function f(ee,Y){if(!o)return null;for(;Y!==null;)l(ee,Y),Y=Y.sibling;return null}function m(ee,Y){for(ee=new Map;Y!==null;)Y.key!==null?ee.set(Y.key,Y):ee.set(Y.index,Y),Y=Y.sibling;return ee}function E(ee,Y){return ee=zo(ee,Y),ee.index=0,ee.sibling=null,ee}function b(ee,Y,ne){return ee.index=ne,o?(ne=ee.alternate,ne!==null?(ne=ne.index,ne<Y?(ee.flags|=2,Y):ne):(ee.flags|=2,Y)):(ee.flags|=1048576,Y)}function D(ee){return o&&ee.alternate===null&&(ee.flags|=2),ee}function j(ee,Y,ne,Ie){return Y===null||Y.tag!==6?(Y=Qp(ne,ee.mode,Ie),Y.return=ee,Y):(Y=E(Y,ne),Y.return=ee,Y)}function z(ee,Y,ne,Ie){var Ze=ne.type;return Ze===M?Le(ee,Y,ne.props.children,Ie,ne.key):Y!==null&&(Y.elementType===Ze||typeof Ze=="object"&&Ze!==null&&Ze.$$typeof===Ee&&Wr(Ze)===Y.type)?(Ie=E(Y,ne.props),Ie.ref=ln(ee,Y,ne),Ie.return=ee,Ie):(Ie=jd(ne.type,ne.key,ne.props,null,ee.mode,Ie),Ie.ref=ln(ee,Y,ne),Ie.return=ee,Ie)}function re(ee,Y,ne,Ie){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==ne.containerInfo||Y.stateNode.implementation!==ne.implementation?(Y=Jp(ne,ee.mode,Ie),Y.return=ee,Y):(Y=E(Y,ne.children||[]),Y.return=ee,Y)}function Le(ee,Y,ne,Ie,Ze){return Y===null||Y.tag!==7?(Y=Na(ne,ee.mode,Ie,Ze),Y.return=ee,Y):(Y=E(Y,ne),Y.return=ee,Y)}function Re(ee,Y,ne){if(typeof Y=="string"&&Y!==""||typeof Y=="number")return Y=Qp(""+Y,ee.mode,ne),Y.return=ee,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case w:return ne=jd(Y.type,Y.key,Y.props,null,ee.mode,ne),ne.ref=ln(ee,null,Y),ne.return=ee,ne;case $:return Y=Jp(Y,ee.mode,ne),Y.return=ee,Y;case Ee:var Ie=Y._init;return Re(ee,Ie(Y._payload),ne)}if(pi(Y)||se(Y))return Y=Na(Y,ee.mode,ne,null),Y.return=ee,Y;qn(ee,Y)}return null}function _e(ee,Y,ne,Ie){var Ze=Y!==null?Y.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number")return Ze!==null?null:j(ee,Y,""+ne,Ie);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case w:return ne.key===Ze?z(ee,Y,ne,Ie):null;case $:return ne.key===Ze?re(ee,Y,ne,Ie):null;case Ee:return Ze=ne._init,_e(ee,Y,Ze(ne._payload),Ie)}if(pi(ne)||se(ne))return Ze!==null?null:Le(ee,Y,ne,Ie,null);qn(ee,ne)}return null}function je(ee,Y,ne,Ie,Ze){if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number")return ee=ee.get(ne)||null,j(Y,ee,""+Ie,Ze);if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case w:return ee=ee.get(Ie.key===null?ne:Ie.key)||null,z(Y,ee,Ie,Ze);case $:return ee=ee.get(Ie.key===null?ne:Ie.key)||null,re(Y,ee,Ie,Ze);case Ee:var it=Ie._init;return je(ee,Y,ne,it(Ie._payload),Ze)}if(pi(Ie)||se(Ie))return ee=ee.get(ne)||null,Le(Y,ee,Ie,Ze,null);qn(Y,Ie)}return null}function qe(ee,Y,ne,Ie){for(var Ze=null,it=null,st=Y,pt=Y=0,er=null;st!==null&&pt<ne.length;pt++){st.index>pt?(er=st,st=null):er=st.sibling;var Vt=_e(ee,st,ne[pt],Ie);if(Vt===null){st===null&&(st=er);break}o&&st&&Vt.alternate===null&&l(ee,st),Y=b(Vt,Y,pt),it===null?Ze=Vt:it.sibling=Vt,it=Vt,st=er}if(pt===ne.length)return f(ee,st),ze&&ke(ee,pt),Ze;if(st===null){for(;pt<ne.length;pt++)st=Re(ee,ne[pt],Ie),st!==null&&(Y=b(st,Y,pt),it===null?Ze=st:it.sibling=st,it=st);return ze&&ke(ee,pt),Ze}for(st=m(ee,st);pt<ne.length;pt++)er=je(st,ee,pt,ne[pt],Ie),er!==null&&(o&&er.alternate!==null&&st.delete(er.key===null?pt:er.key),Y=b(er,Y,pt),it===null?Ze=er:it.sibling=er,it=er);return o&&st.forEach(function(Ko){return l(ee,Ko)}),ze&&ke(ee,pt),Ze}function Je(ee,Y,ne,Ie){var Ze=se(ne);if(typeof Ze!="function")throw Error(t(150));if(ne=Ze.call(ne),ne==null)throw Error(t(151));for(var it=Ze=null,st=Y,pt=Y=0,er=null,Vt=ne.next();st!==null&&!Vt.done;pt++,Vt=ne.next()){st.index>pt?(er=st,st=null):er=st.sibling;var Ko=_e(ee,st,Vt.value,Ie);if(Ko===null){st===null&&(st=er);break}o&&st&&Ko.alternate===null&&l(ee,st),Y=b(Ko,Y,pt),it===null?Ze=Ko:it.sibling=Ko,it=Ko,st=er}if(Vt.done)return f(ee,st),ze&&ke(ee,pt),Ze;if(st===null){for(;!Vt.done;pt++,Vt=ne.next())Vt=Re(ee,Vt.value,Ie),Vt!==null&&(Y=b(Vt,Y,pt),it===null?Ze=Vt:it.sibling=Vt,it=Vt);return ze&&ke(ee,pt),Ze}for(st=m(ee,st);!Vt.done;pt++,Vt=ne.next())Vt=je(st,ee,pt,Vt.value,Ie),Vt!==null&&(o&&Vt.alternate!==null&&st.delete(Vt.key===null?pt:Vt.key),Y=b(Vt,Y,pt),it===null?Ze=Vt:it.sibling=Vt,it=Vt);return o&&st.forEach(function(Gw){return l(ee,Gw)}),ze&&ke(ee,pt),Ze}function Pn(ee,Y,ne,Ie){if(typeof ne=="object"&&ne!==null&&ne.type===M&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case w:e:{for(var Ze=ne.key,it=Y;it!==null;){if(it.key===Ze){if(Ze=ne.type,Ze===M){if(it.tag===7){f(ee,it.sibling),Y=E(it,ne.props.children),Y.return=ee,ee=Y;break e}}else if(it.elementType===Ze||typeof Ze=="object"&&Ze!==null&&Ze.$$typeof===Ee&&Wr(Ze)===it.type){f(ee,it.sibling),Y=E(it,ne.props),Y.ref=ln(ee,it,ne),Y.return=ee,ee=Y;break e}f(ee,it);break}else l(ee,it);it=it.sibling}ne.type===M?(Y=Na(ne.props.children,ee.mode,Ie,ne.key),Y.return=ee,ee=Y):(Ie=jd(ne.type,ne.key,ne.props,null,ee.mode,Ie),Ie.ref=ln(ee,Y,ne),Ie.return=ee,ee=Ie)}return D(ee);case $:e:{for(it=ne.key;Y!==null;){if(Y.key===it)if(Y.tag===4&&Y.stateNode.containerInfo===ne.containerInfo&&Y.stateNode.implementation===ne.implementation){f(ee,Y.sibling),Y=E(Y,ne.children||[]),Y.return=ee,ee=Y;break e}else{f(ee,Y);break}else l(ee,Y);Y=Y.sibling}Y=Jp(ne,ee.mode,Ie),Y.return=ee,ee=Y}return D(ee);case Ee:return it=ne._init,Pn(ee,Y,it(ne._payload),Ie)}if(pi(ne))return qe(ee,Y,ne,Ie);if(se(ne))return Je(ee,Y,ne,Ie);qn(ee,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"?(ne=""+ne,Y!==null&&Y.tag===6?(f(ee,Y.sibling),Y=E(Y,ne),Y.return=ee,ee=Y):(f(ee,Y),Y=Qp(ne,ee.mode,Ie),Y.return=ee,ee=Y),D(ee)):f(ee,Y)}return Pn}var jn=Xn(!0),kr=Xn(!1),cn=Vi(null),Ir=null,ur=null,Es=null;function _n(){Es=ur=Ir=null}function Wt(o){var l=cn.current;tn(cn),o._currentValue=l}function Hn(o,l,f){for(;o!==null;){var m=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,m!==null&&(m.childLanes|=l)):m!==null&&(m.childLanes&l)!==l&&(m.childLanes|=l),o===f)break;o=o.return}}function Gn(o,l){Ir=o,Es=ur=null,o=o.dependencies,o!==null&&o.firstContext!==null&&(o.lanes&l&&(qr=!0),o.firstContext=null)}function In(o){var l=o._currentValue;if(Es!==o)if(o={context:o,memoizedValue:l,next:null},ur===null){if(Ir===null)throw Error(t(308));ur=o,Ir.dependencies={lanes:0,firstContext:o}}else ur=ur.next=o;return l}var Li=null;function Tl(o){Li===null?Li=[o]:Li.push(o)}function kc(o,l,f,m){var E=l.interleaved;return E===null?(f.next=f,Tl(l)):(f.next=E.next,E.next=f),l.interleaved=f,Yr(o,m)}function Yr(o,l){o.lanes|=l;var f=o.alternate;for(f!==null&&(f.lanes|=l),f=o,o=o.return;o!==null;)o.childLanes|=l,f=o.alternate,f!==null&&(f.childLanes|=l),f=o,o=o.return;return f.tag===3?f.stateNode:null}var Ts=!1;function Ic(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bl(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function Ki(o,l){return{eventTime:o,lane:l,tag:0,payload:null,callback:null,next:null}}function Wi(o,l,f){var m=o.updateQueue;if(m===null)return null;if(m=m.shared,$t&2){var E=m.pending;return E===null?l.next=l:(l.next=E.next,E.next=l),m.pending=l,Yr(o,f)}return E=m.interleaved,E===null?(l.next=l,Tl(m)):(l.next=E.next,E.next=l),m.interleaved=l,Yr(o,f)}function wl(o,l,f){if(l=l.updateQueue,l!==null&&(l=l.shared,(f&4194240)!==0)){var m=l.lanes;m&=o.pendingLanes,f|=m,l.lanes=f,sa(o,f)}}function Pc(o,l){var f=o.updateQueue,m=o.alternate;if(m!==null&&(m=m.updateQueue,f===m)){var E=null,b=null;if(f=f.firstBaseUpdate,f!==null){do{var D={eventTime:f.eventTime,lane:f.lane,tag:f.tag,payload:f.payload,callback:f.callback,next:null};b===null?E=b=D:b=b.next=D,f=f.next}while(f!==null);b===null?E=b=l:b=b.next=l}else E=b=l;f={baseState:m.baseState,firstBaseUpdate:E,lastBaseUpdate:b,shared:m.shared,effects:m.effects},o.updateQueue=f;return}o=f.lastBaseUpdate,o===null?f.firstBaseUpdate=l:o.next=l,f.lastBaseUpdate=l}function _a(o,l,f,m){var E=o.updateQueue;Ts=!1;var b=E.firstBaseUpdate,D=E.lastBaseUpdate,j=E.shared.pending;if(j!==null){E.shared.pending=null;var z=j,re=z.next;z.next=null,D===null?b=re:D.next=re,D=z;var Le=o.alternate;Le!==null&&(Le=Le.updateQueue,j=Le.lastBaseUpdate,j!==D&&(j===null?Le.firstBaseUpdate=re:j.next=re,Le.lastBaseUpdate=z))}if(b!==null){var Re=E.baseState;D=0,Le=re=z=null,j=b;do{var _e=j.lane,je=j.eventTime;if((m&_e)===_e){Le!==null&&(Le=Le.next={eventTime:je,lane:0,tag:j.tag,payload:j.payload,callback:j.callback,next:null});e:{var qe=o,Je=j;switch(_e=l,je=f,Je.tag){case 1:if(qe=Je.payload,typeof qe=="function"){Re=qe.call(je,Re,_e);break e}Re=qe;break e;case 3:qe.flags=qe.flags&-65537|128;case 0:if(qe=Je.payload,_e=typeof qe=="function"?qe.call(je,Re,_e):qe,_e==null)break e;Re=B({},Re,_e);break e;case 2:Ts=!0}}j.callback!==null&&j.lane!==0&&(o.flags|=64,_e=E.effects,_e===null?E.effects=[j]:_e.push(j))}else je={eventTime:je,lane:_e,tag:j.tag,payload:j.payload,callback:j.callback,next:null},Le===null?(re=Le=je,z=Re):Le=Le.next=je,D|=_e;if(j=j.next,j===null){if(j=E.shared.pending,j===null)break;_e=j,j=_e.next,_e.next=null,E.lastBaseUpdate=_e,E.shared.pending=null}}while(!0);if(Le===null&&(z=Re),E.baseState=z,E.firstBaseUpdate=re,E.lastBaseUpdate=Le,l=E.shared.interleaved,l!==null){E=l;do D|=E.lane,E=E.next;while(E!==l)}else b===null&&(E.shared.lanes=0);Ia|=D,o.lanes=D,o.memoizedState=Re}}function bd(o,l,f){if(o=l.effects,l.effects=null,o!==null)for(l=0;l<o.length;l++){var m=o[l],E=m.callback;if(E!==null){if(m.callback=null,m=f,typeof E!="function")throw Error(t(191,E));E.call(m)}}}var La={},Qn=Vi(La),bs=Vi(La),Bo=Vi(La);function ws(o){if(o===La)throw Error(t(174));return o}function Ca(o,l){switch(nn(Bo,l),nn(bs,o),nn(Qn,La),o=l.nodeType,o){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:Te(null,"");break;default:o=o===8?l.parentNode:l,l=o.namespaceURI||null,o=o.tagName,l=Te(l,o)}tn(Qn),nn(Qn,l)}function io(){tn(Qn),tn(bs),tn(Bo)}function Dc(o){ws(Bo.current);var l=ws(Qn.current),f=Te(l,o.type);l!==f&&(nn(bs,o),nn(Qn,f))}function _l(o){bs.current===o&&(tn(Qn),tn(bs))}var pn=Vi(0);function Ll(o){for(var l=o;l!==null;){if(l.tag===13){var f=l.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||f.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if(l.flags&128)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Oc=[];function Ra(){for(var o=0;o<Oc.length;o++)Oc[o]._workInProgressVersionPrimary=null;Oc.length=0}var Aa=O.ReactCurrentDispatcher,yp=O.ReactCurrentBatchConfig,ka=0,Sn=null,Vn=null,Jn=null,wd=!1,Nc=!1,Mc=0,dw=0;function Sr(){throw Error(t(321))}function vp(o,l){if(l===null)return!1;for(var f=0;f<l.length&&f<o.length;f++)if(!Kr(o[f],l[f]))return!1;return!0}function xp(o,l,f,m,E,b){if(ka=b,Sn=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Aa.current=o===null||o.memoizedState===null?mw:gw,o=f(m,E),Nc){b=0;do{if(Nc=!1,Mc=0,25<=b)throw Error(t(301));b+=1,Jn=Vn=null,l.updateQueue=null,Aa.current=yw,o=f(m,E)}while(Nc)}if(Aa.current=Cd,l=Vn!==null&&Vn.next!==null,ka=0,Jn=Vn=Sn=null,wd=!1,l)throw Error(t(300));return o}function Sp(){var o=Mc!==0;return Mc=0,o}function _s(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jn===null?Sn.memoizedState=Jn=o:Jn=Jn.next=o,Jn}function Ci(){if(Vn===null){var o=Sn.alternate;o=o!==null?o.memoizedState:null}else o=Vn.next;var l=Jn===null?Sn.memoizedState:Jn.next;if(l!==null)Jn=l,Vn=o;else{if(o===null)throw Error(t(310));Vn=o,o={memoizedState:Vn.memoizedState,baseState:Vn.baseState,baseQueue:Vn.baseQueue,queue:Vn.queue,next:null},Jn===null?Sn.memoizedState=Jn=o:Jn=Jn.next=o}return Jn}function Fc(o,l){return typeof l=="function"?l(o):l}function Ep(o){var l=Ci(),f=l.queue;if(f===null)throw Error(t(311));f.lastRenderedReducer=o;var m=Vn,E=m.baseQueue,b=f.pending;if(b!==null){if(E!==null){var D=E.next;E.next=b.next,b.next=D}m.baseQueue=E=b,f.pending=null}if(E!==null){b=E.next,m=m.baseState;var j=D=null,z=null,re=b;do{var Le=re.lane;if((ka&Le)===Le)z!==null&&(z=z.next={lane:0,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null}),m=re.hasEagerState?re.eagerState:o(m,re.action);else{var Re={lane:Le,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null};z===null?(j=z=Re,D=m):z=z.next=Re,Sn.lanes|=Le,Ia|=Le}re=re.next}while(re!==null&&re!==b);z===null?D=m:z.next=j,Kr(m,l.memoizedState)||(qr=!0),l.memoizedState=m,l.baseState=D,l.baseQueue=z,f.lastRenderedState=m}if(o=f.interleaved,o!==null){E=o;do b=E.lane,Sn.lanes|=b,Ia|=b,E=E.next;while(E!==o)}else E===null&&(f.lanes=0);return[l.memoizedState,f.dispatch]}function Tp(o){var l=Ci(),f=l.queue;if(f===null)throw Error(t(311));f.lastRenderedReducer=o;var m=f.dispatch,E=f.pending,b=l.memoizedState;if(E!==null){f.pending=null;var D=E=E.next;do b=o(b,D.action),D=D.next;while(D!==E);Kr(b,l.memoizedState)||(qr=!0),l.memoizedState=b,l.baseQueue===null&&(l.baseState=b),f.lastRenderedState=b}return[b,m]}function ly(){}function cy(o,l){var f=Sn,m=Ci(),E=l(),b=!Kr(m.memoizedState,E);if(b&&(m.memoizedState=E,qr=!0),m=m.queue,bp(fy.bind(null,f,m,o),[o]),m.getSnapshot!==l||b||Jn!==null&&Jn.memoizedState.tag&1){if(f.flags|=2048,$c(9,dy.bind(null,f,m,E,l),void 0,null),Zn===null)throw Error(t(349));ka&30||uy(f,l,E)}return E}function uy(o,l,f){o.flags|=16384,o={getSnapshot:l,value:f},l=Sn.updateQueue,l===null?(l={lastEffect:null,stores:null},Sn.updateQueue=l,l.stores=[o]):(f=l.stores,f===null?l.stores=[o]:f.push(o))}function dy(o,l,f,m){l.value=f,l.getSnapshot=m,hy(l)&&py(o)}function fy(o,l,f){return f(function(){hy(l)&&py(o)})}function hy(o){var l=o.getSnapshot;o=o.value;try{var f=l();return!Kr(o,f)}catch{return!0}}function py(o){var l=Yr(o,1);l!==null&&Qi(l,o,1,-1)}function my(o){var l=_s();return typeof o=="function"&&(o=o()),l.memoizedState=l.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fc,lastRenderedState:o},l.queue=o,o=o.dispatch=pw.bind(null,Sn,o),[l.memoizedState,o]}function $c(o,l,f,m){return o={tag:o,create:l,destroy:f,deps:m,next:null},l=Sn.updateQueue,l===null?(l={lastEffect:null,stores:null},Sn.updateQueue=l,l.lastEffect=o.next=o):(f=l.lastEffect,f===null?l.lastEffect=o.next=o:(m=f.next,f.next=o,o.next=m,l.lastEffect=o)),o}function gy(){return Ci().memoizedState}function _d(o,l,f,m){var E=_s();Sn.flags|=o,E.memoizedState=$c(1|l,f,void 0,m===void 0?null:m)}function Ld(o,l,f,m){var E=Ci();m=m===void 0?null:m;var b=void 0;if(Vn!==null){var D=Vn.memoizedState;if(b=D.destroy,m!==null&&vp(m,D.deps)){E.memoizedState=$c(l,f,b,m);return}}Sn.flags|=o,E.memoizedState=$c(1|l,f,b,m)}function yy(o,l){return _d(8390656,8,o,l)}function bp(o,l){return Ld(2048,8,o,l)}function vy(o,l){return Ld(4,2,o,l)}function xy(o,l){return Ld(4,4,o,l)}function Sy(o,l){if(typeof l=="function")return o=o(),l(o),function(){l(null)};if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function Ey(o,l,f){return f=f!=null?f.concat([o]):null,Ld(4,4,Sy.bind(null,l,o),f)}function wp(){}function Ty(o,l){var f=Ci();l=l===void 0?null:l;var m=f.memoizedState;return m!==null&&l!==null&&vp(l,m[1])?m[0]:(f.memoizedState=[o,l],o)}function by(o,l){var f=Ci();l=l===void 0?null:l;var m=f.memoizedState;return m!==null&&l!==null&&vp(l,m[1])?m[0]:(o=o(),f.memoizedState=[o,l],o)}function wy(o,l,f){return ka&21?(Kr(f,l)||(f=ai(),Sn.lanes|=f,Ia|=f,o.baseState=!0),l):(o.baseState&&(o.baseState=!1,qr=!0),o.memoizedState=f)}function fw(o,l){var f=Ht;Ht=f!==0&&4>f?f:4,o(!0);var m=yp.transition;yp.transition={};try{o(!1),l()}finally{Ht=f,yp.transition=m}}function _y(){return Ci().memoizedState}function hw(o,l,f){var m=Go(o);if(f={lane:m,action:f,hasEagerState:!1,eagerState:null,next:null},Ly(o))Cy(l,f);else if(f=kc(o,l,f,m),f!==null){var E=Dr();Qi(f,o,m,E),Ry(f,l,m)}}function pw(o,l,f){var m=Go(o),E={lane:m,action:f,hasEagerState:!1,eagerState:null,next:null};if(Ly(o))Cy(l,E);else{var b=o.alternate;if(o.lanes===0&&(b===null||b.lanes===0)&&(b=l.lastRenderedReducer,b!==null))try{var D=l.lastRenderedState,j=b(D,f);if(E.hasEagerState=!0,E.eagerState=j,Kr(j,D)){var z=l.interleaved;z===null?(E.next=E,Tl(l)):(E.next=z.next,z.next=E),l.interleaved=E;return}}catch{}finally{}f=kc(o,l,E,m),f!==null&&(E=Dr(),Qi(f,o,m,E),Ry(f,l,m))}}function Ly(o){var l=o.alternate;return o===Sn||l!==null&&l===Sn}function Cy(o,l){Nc=wd=!0;var f=o.pending;f===null?l.next=l:(l.next=f.next,f.next=l),o.pending=l}function Ry(o,l,f){if(f&4194240){var m=l.lanes;m&=o.pendingLanes,f|=m,l.lanes=f,sa(o,f)}}var Cd={readContext:In,useCallback:Sr,useContext:Sr,useEffect:Sr,useImperativeHandle:Sr,useInsertionEffect:Sr,useLayoutEffect:Sr,useMemo:Sr,useReducer:Sr,useRef:Sr,useState:Sr,useDebugValue:Sr,useDeferredValue:Sr,useTransition:Sr,useMutableSource:Sr,useSyncExternalStore:Sr,useId:Sr,unstable_isNewReconciler:!1},mw={readContext:In,useCallback:function(o,l){return _s().memoizedState=[o,l===void 0?null:l],o},useContext:In,useEffect:yy,useImperativeHandle:function(o,l,f){return f=f!=null?f.concat([o]):null,_d(4194308,4,Sy.bind(null,l,o),f)},useLayoutEffect:function(o,l){return _d(4194308,4,o,l)},useInsertionEffect:function(o,l){return _d(4,2,o,l)},useMemo:function(o,l){var f=_s();return l=l===void 0?null:l,o=o(),f.memoizedState=[o,l],o},useReducer:function(o,l,f){var m=_s();return l=f!==void 0?f(l):l,m.memoizedState=m.baseState=l,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:l},m.queue=o,o=o.dispatch=hw.bind(null,Sn,o),[m.memoizedState,o]},useRef:function(o){var l=_s();return o={current:o},l.memoizedState=o},useState:my,useDebugValue:wp,useDeferredValue:function(o){return _s().memoizedState=o},useTransition:function(){var o=my(!1),l=o[0];return o=fw.bind(null,o[1]),_s().memoizedState=o,[l,o]},useMutableSource:function(){},useSyncExternalStore:function(o,l,f){var m=Sn,E=_s();if(ze){if(f===void 0)throw Error(t(407));f=f()}else{if(f=l(),Zn===null)throw Error(t(349));ka&30||uy(m,l,f)}E.memoizedState=f;var b={value:f,getSnapshot:l};return E.queue=b,yy(fy.bind(null,m,b,o),[o]),m.flags|=2048,$c(9,dy.bind(null,m,b,f,l),void 0,null),f},useId:function(){var o=_s(),l=Zn.identifierPrefix;if(ze){var f=me,m=oe;f=(m&~(1<<32-jr(m)-1)).toString(32)+f,l=":"+l+"R"+f,f=Mc++,0<f&&(l+="H"+f.toString(32)),l+=":"}else f=dw++,l=":"+l+"r"+f.toString(32)+":";return o.memoizedState=l},unstable_isNewReconciler:!1},gw={readContext:In,useCallback:Ty,useContext:In,useEffect:bp,useImperativeHandle:Ey,useInsertionEffect:vy,useLayoutEffect:xy,useMemo:by,useReducer:Ep,useRef:gy,useState:function(){return Ep(Fc)},useDebugValue:wp,useDeferredValue:function(o){var l=Ci();return wy(l,Vn.memoizedState,o)},useTransition:function(){var o=Ep(Fc)[0],l=Ci().memoizedState;return[o,l]},useMutableSource:ly,useSyncExternalStore:cy,useId:_y,unstable_isNewReconciler:!1},yw={readContext:In,useCallback:Ty,useContext:In,useEffect:bp,useImperativeHandle:Ey,useInsertionEffect:vy,useLayoutEffect:xy,useMemo:by,useReducer:Tp,useRef:gy,useState:function(){return Tp(Fc)},useDebugValue:wp,useDeferredValue:function(o){var l=Ci();return Vn===null?l.memoizedState=o:wy(l,Vn.memoizedState,o)},useTransition:function(){var o=Tp(Fc)[0],l=Ci().memoizedState;return[o,l]},useMutableSource:ly,useSyncExternalStore:cy,useId:_y,unstable_isNewReconciler:!1};function Yi(o,l){if(o&&o.defaultProps){l=B({},l),o=o.defaultProps;for(var f in o)l[f]===void 0&&(l[f]=o[f]);return l}return l}function _p(o,l,f,m){l=o.memoizedState,f=f(m,l),f=f==null?l:B({},l,f),o.memoizedState=f,o.lanes===0&&(o.updateQueue.baseState=f)}var Rd={isMounted:function(o){return(o=o._reactInternals)?wt(o)===o:!1},enqueueSetState:function(o,l,f){o=o._reactInternals;var m=Dr(),E=Go(o),b=Ki(m,E);b.payload=l,f!=null&&(b.callback=f),l=Wi(o,b,E),l!==null&&(Qi(l,o,E,m),wl(l,o,E))},enqueueReplaceState:function(o,l,f){o=o._reactInternals;var m=Dr(),E=Go(o),b=Ki(m,E);b.tag=1,b.payload=l,f!=null&&(b.callback=f),l=Wi(o,b,E),l!==null&&(Qi(l,o,E,m),wl(l,o,E))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var f=Dr(),m=Go(o),E=Ki(f,m);E.tag=2,l!=null&&(E.callback=l),l=Wi(o,E,m),l!==null&&(Qi(l,o,m,f),wl(l,o,m))}};function Ay(o,l,f,m,E,b,D){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(m,b,D):l.prototype&&l.prototype.isPureReactComponent?!Qs(f,m)||!Qs(E,b):!0}function ky(o,l,f){var m=!1,E=wi,b=l.contextType;return typeof b=="object"&&b!==null?b=In(b):(E=xr(l)?vr:Yn.current,m=l.contextTypes,b=(m=m!=null)?Fo(o,E):wi),l=new l(f,b),o.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Rd,o.stateNode=l,l._reactInternals=o,m&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=E,o.__reactInternalMemoizedMaskedChildContext=b),l}function Iy(o,l,f,m){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(f,m),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(f,m),l.state!==o&&Rd.enqueueReplaceState(l,l.state,null)}function Lp(o,l,f,m){var E=o.stateNode;E.props=f,E.state=o.memoizedState,E.refs={},Ic(o);var b=l.contextType;typeof b=="object"&&b!==null?E.context=In(b):(b=xr(l)?vr:Yn.current,E.context=Fo(o,b)),E.state=o.memoizedState,b=l.getDerivedStateFromProps,typeof b=="function"&&(_p(o,l,b,f),E.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(l=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),l!==E.state&&Rd.enqueueReplaceState(E,E.state,null),_a(o,f,E,m),E.state=o.memoizedState),typeof E.componentDidMount=="function"&&(o.flags|=4194308)}function Cl(o,l){try{var f="",m=l;do f+=Oe(m),m=m.return;while(m);var E=f}catch(b){E=`
Error generating stack: `+b.message+`
`+b.stack}return{value:o,source:l,stack:E,digest:null}}function Cp(o,l,f){return{value:o,source:null,stack:f??null,digest:l??null}}function Rp(o,l){try{console.error(l.value)}catch(f){setTimeout(function(){throw f})}}var vw=typeof WeakMap=="function"?WeakMap:Map;function Py(o,l,f){f=Ki(-1,f),f.tag=3,f.payload={element:null};var m=l.value;return f.callback=function(){Nd||(Nd=!0,Gp=m),Rp(o,l)},f}function Dy(o,l,f){f=Ki(-1,f),f.tag=3;var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var E=l.value;f.payload=function(){return m(E)},f.callback=function(){Rp(o,l)}}var b=o.stateNode;return b!==null&&typeof b.componentDidCatch=="function"&&(f.callback=function(){Rp(o,l),typeof m!="function"&&(jo===null?jo=new Set([this]):jo.add(this));var D=l.stack;this.componentDidCatch(l.value,{componentStack:D!==null?D:""})}),f}function Oy(o,l,f){var m=o.pingCache;if(m===null){m=o.pingCache=new vw;var E=new Set;m.set(l,E)}else E=m.get(l),E===void 0&&(E=new Set,m.set(l,E));E.has(f)||(E.add(f),o=Pw.bind(null,o,l,f),l.then(o,o))}function Ny(o){do{var l;if((l=o.tag===13)&&(l=o.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return o;o=o.return}while(o!==null);return null}function My(o,l,f,m,E){return o.mode&1?(o.flags|=65536,o.lanes=E,o):(o===l?o.flags|=65536:(o.flags|=128,f.flags|=131072,f.flags&=-52805,f.tag===1&&(f.alternate===null?f.tag=17:(l=Ki(-1,1),l.tag=2,Wi(f,l,1))),f.lanes|=1),o)}var xw=O.ReactCurrentOwner,qr=!1;function Pr(o,l,f,m){l.child=o===null?kr(l,null,f,m):jn(l,o.child,f,m)}function Fy(o,l,f,m,E){f=f.render;var b=l.ref;return Gn(l,E),m=xp(o,l,f,m,b,E),f=Sp(),o!==null&&!qr?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~E,so(o,l,E)):(ze&&f&&Ve(l),l.flags|=1,Pr(o,l,m,E),l.child)}function $y(o,l,f,m,E){if(o===null){var b=f.type;return typeof b=="function"&&!Xp(b)&&b.defaultProps===void 0&&f.compare===null&&f.defaultProps===void 0?(l.tag=15,l.type=b,By(o,l,b,m,E)):(o=jd(f.type,null,m,l,l.mode,E),o.ref=l.ref,o.return=l,l.child=o)}if(b=o.child,!(o.lanes&E)){var D=b.memoizedProps;if(f=f.compare,f=f!==null?f:Qs,f(D,m)&&o.ref===l.ref)return so(o,l,E)}return l.flags|=1,o=zo(b,m),o.ref=l.ref,o.return=l,l.child=o}function By(o,l,f,m,E){if(o!==null){var b=o.memoizedProps;if(Qs(b,m)&&o.ref===l.ref)if(qr=!1,l.pendingProps=m=b,(o.lanes&E)!==0)o.flags&131072&&(qr=!0);else return l.lanes=o.lanes,so(o,l,E)}return Ap(o,l,f,m,E)}function Uy(o,l,f){var m=l.pendingProps,E=m.children,b=o!==null?o.memoizedState:null;if(m.mode==="hidden")if(!(l.mode&1))l.memoizedState={baseLanes:0,cachePool:null,transitions:null},nn(Al,ci),ci|=f;else{if(!(f&1073741824))return o=b!==null?b.baseLanes|f:f,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:o,cachePool:null,transitions:null},l.updateQueue=null,nn(Al,ci),ci|=o,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=b!==null?b.baseLanes:f,nn(Al,ci),ci|=m}else b!==null?(m=b.baseLanes|f,l.memoizedState=null):m=f,nn(Al,ci),ci|=m;return Pr(o,l,E,f),l.child}function jy(o,l){var f=l.ref;(o===null&&f!==null||o!==null&&o.ref!==f)&&(l.flags|=512,l.flags|=2097152)}function Ap(o,l,f,m,E){var b=xr(f)?vr:Yn.current;return b=Fo(l,b),Gn(l,E),f=xp(o,l,f,m,b,E),m=Sp(),o!==null&&!qr?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~E,so(o,l,E)):(ze&&m&&Ve(l),l.flags|=1,Pr(o,l,f,E),l.child)}function Hy(o,l,f,m,E){if(xr(f)){var b=!0;El(l)}else b=!1;if(Gn(l,E),l.stateNode===null)kd(o,l),ky(l,f,m),Lp(l,f,m,E),m=!0;else if(o===null){var D=l.stateNode,j=l.memoizedProps;D.props=j;var z=D.context,re=f.contextType;typeof re=="object"&&re!==null?re=In(re):(re=xr(f)?vr:Yn.current,re=Fo(l,re));var Le=f.getDerivedStateFromProps,Re=typeof Le=="function"||typeof D.getSnapshotBeforeUpdate=="function";Re||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(j!==m||z!==re)&&Iy(l,D,m,re),Ts=!1;var _e=l.memoizedState;D.state=_e,_a(l,m,D,E),z=l.memoizedState,j!==m||_e!==z||wn.current||Ts?(typeof Le=="function"&&(_p(l,f,Le,m),z=l.memoizedState),(j=Ts||Ay(l,f,j,m,_e,z,re))?(Re||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount()),typeof D.componentDidMount=="function"&&(l.flags|=4194308)):(typeof D.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=m,l.memoizedState=z),D.props=m,D.state=z,D.context=re,m=j):(typeof D.componentDidMount=="function"&&(l.flags|=4194308),m=!1)}else{D=l.stateNode,bl(o,l),j=l.memoizedProps,re=l.type===l.elementType?j:Yi(l.type,j),D.props=re,Re=l.pendingProps,_e=D.context,z=f.contextType,typeof z=="object"&&z!==null?z=In(z):(z=xr(f)?vr:Yn.current,z=Fo(l,z));var je=f.getDerivedStateFromProps;(Le=typeof je=="function"||typeof D.getSnapshotBeforeUpdate=="function")||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(j!==Re||_e!==z)&&Iy(l,D,m,z),Ts=!1,_e=l.memoizedState,D.state=_e,_a(l,m,D,E);var qe=l.memoizedState;j!==Re||_e!==qe||wn.current||Ts?(typeof je=="function"&&(_p(l,f,je,m),qe=l.memoizedState),(re=Ts||Ay(l,f,re,m,_e,qe,z)||!1)?(Le||typeof D.UNSAFE_componentWillUpdate!="function"&&typeof D.componentWillUpdate!="function"||(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(m,qe,z),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(m,qe,z)),typeof D.componentDidUpdate=="function"&&(l.flags|=4),typeof D.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof D.componentDidUpdate!="function"||j===o.memoizedProps&&_e===o.memoizedState||(l.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||j===o.memoizedProps&&_e===o.memoizedState||(l.flags|=1024),l.memoizedProps=m,l.memoizedState=qe),D.props=m,D.state=qe,D.context=z,m=re):(typeof D.componentDidUpdate!="function"||j===o.memoizedProps&&_e===o.memoizedState||(l.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||j===o.memoizedProps&&_e===o.memoizedState||(l.flags|=1024),m=!1)}return kp(o,l,f,m,b,E)}function kp(o,l,f,m,E,b){jy(o,l);var D=(l.flags&128)!==0;if(!m&&!D)return E&&Td(l,f,!1),so(o,l,b);m=l.stateNode,xw.current=l;var j=D&&typeof f.getDerivedStateFromError!="function"?null:m.render();return l.flags|=1,o!==null&&D?(l.child=jn(l,o.child,null,b),l.child=jn(l,null,j,b)):Pr(o,l,j,b),l.memoizedState=m.state,E&&Td(l,f,!0),l.child}function Gy(o){var l=o.stateNode;l.pendingContext?Sd(o,l.pendingContext,l.pendingContext!==l.context):l.context&&Sd(o,l.context,!1),Ca(o,l.containerInfo)}function Vy(o,l,f,m,E){return At(),Gt(E),l.flags|=256,Pr(o,l,f,m),l.child}var Ip={dehydrated:null,treeContext:null,retryLane:0};function Pp(o){return{baseLanes:o,cachePool:null,transitions:null}}function zy(o,l,f){var m=l.pendingProps,E=pn.current,b=!1,D=(l.flags&128)!==0,j;if((j=D)||(j=o!==null&&o.memoizedState===null?!1:(E&2)!==0),j?(b=!0,l.flags&=-129):(o===null||o.memoizedState!==null)&&(E|=1),nn(pn,E&1),o===null)return Et(l),o=l.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?(l.mode&1?o.data==="$!"?l.lanes=8:l.lanes=1073741824:l.lanes=1,null):(D=m.children,o=m.fallback,b?(m=l.mode,b=l.child,D={mode:"hidden",children:D},!(m&1)&&b!==null?(b.childLanes=0,b.pendingProps=D):b=Hd(D,m,0,null),o=Na(o,m,f,null),b.return=l,o.return=l,b.sibling=o,l.child=b,l.child.memoizedState=Pp(f),l.memoizedState=Ip,o):Dp(l,D));if(E=o.memoizedState,E!==null&&(j=E.dehydrated,j!==null))return Sw(o,l,D,m,j,E,f);if(b){b=m.fallback,D=l.mode,E=o.child,j=E.sibling;var z={mode:"hidden",children:m.children};return!(D&1)&&l.child!==E?(m=l.child,m.childLanes=0,m.pendingProps=z,l.deletions=null):(m=zo(E,z),m.subtreeFlags=E.subtreeFlags&14680064),j!==null?b=zo(j,b):(b=Na(b,D,f,null),b.flags|=2),b.return=l,m.return=l,m.sibling=b,l.child=m,m=b,b=l.child,D=o.child.memoizedState,D=D===null?Pp(f):{baseLanes:D.baseLanes|f,cachePool:null,transitions:D.transitions},b.memoizedState=D,b.childLanes=o.childLanes&~f,l.memoizedState=Ip,m}return b=o.child,o=b.sibling,m=zo(b,{mode:"visible",children:m.children}),!(l.mode&1)&&(m.lanes=f),m.return=l,m.sibling=null,o!==null&&(f=l.deletions,f===null?(l.deletions=[o],l.flags|=16):f.push(o)),l.child=m,l.memoizedState=null,m}function Dp(o,l){return l=Hd({mode:"visible",children:l},o.mode,0,null),l.return=o,o.child=l}function Ad(o,l,f,m){return m!==null&&Gt(m),jn(l,o.child,null,f),o=Dp(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function Sw(o,l,f,m,E,b,D){if(f)return l.flags&256?(l.flags&=-257,m=Cp(Error(t(422))),Ad(o,l,D,m)):l.memoizedState!==null?(l.child=o.child,l.flags|=128,null):(b=m.fallback,E=l.mode,m=Hd({mode:"visible",children:m.children},E,0,null),b=Na(b,E,D,null),b.flags|=2,m.return=l,b.return=l,m.sibling=b,l.child=m,l.mode&1&&jn(l,o.child,null,D),l.child.memoizedState=Pp(D),l.memoizedState=Ip,b);if(!(l.mode&1))return Ad(o,l,D,null);if(E.data==="$!"){if(m=E.nextSibling&&E.nextSibling.dataset,m)var j=m.dgst;return m=j,b=Error(t(419)),m=Cp(b,m,void 0),Ad(o,l,D,m)}if(j=(D&o.childLanes)!==0,qr||j){if(m=Zn,m!==null){switch(D&-D){case 4:E=2;break;case 16:E=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:E=32;break;case 536870912:E=268435456;break;default:E=0}E=E&(m.suspendedLanes|D)?0:E,E!==0&&E!==b.retryLane&&(b.retryLane=E,Yr(o,E),Qi(m,o,E,-1))}return qp(),m=Cp(Error(t(421))),Ad(o,l,D,m)}return E.data==="$?"?(l.flags|=128,l.child=o.child,l=Dw.bind(null,o),E._reactRetry=l,null):(o=b.treeContext,Xe=ys(E.nextSibling),rt=l,ze=!0,et=null,o!==null&&(N[K++]=oe,N[K++]=me,N[K++]=q,oe=o.id,me=o.overflow,q=l),l=Dp(l,m.children),l.flags|=4096,l)}function Ky(o,l,f){o.lanes|=l;var m=o.alternate;m!==null&&(m.lanes|=l),Hn(o.return,l,f)}function Op(o,l,f,m,E){var b=o.memoizedState;b===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:m,tail:f,tailMode:E}:(b.isBackwards=l,b.rendering=null,b.renderingStartTime=0,b.last=m,b.tail=f,b.tailMode=E)}function Wy(o,l,f){var m=l.pendingProps,E=m.revealOrder,b=m.tail;if(Pr(o,l,m.children,f),m=pn.current,m&2)m=m&1|2,l.flags|=128;else{if(o!==null&&o.flags&128)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&Ky(o,f,l);else if(o.tag===19)Ky(o,f,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}m&=1}if(nn(pn,m),!(l.mode&1))l.memoizedState=null;else switch(E){case"forwards":for(f=l.child,E=null;f!==null;)o=f.alternate,o!==null&&Ll(o)===null&&(E=f),f=f.sibling;f=E,f===null?(E=l.child,l.child=null):(E=f.sibling,f.sibling=null),Op(l,!1,E,f,b);break;case"backwards":for(f=null,E=l.child,l.child=null;E!==null;){if(o=E.alternate,o!==null&&Ll(o)===null){l.child=E;break}o=E.sibling,E.sibling=f,f=E,E=o}Op(l,!0,f,null,b);break;case"together":Op(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function kd(o,l){!(l.mode&1)&&o!==null&&(o.alternate=null,l.alternate=null,l.flags|=2)}function so(o,l,f){if(o!==null&&(l.dependencies=o.dependencies),Ia|=l.lanes,!(f&l.childLanes))return null;if(o!==null&&l.child!==o.child)throw Error(t(153));if(l.child!==null){for(o=l.child,f=zo(o,o.pendingProps),l.child=f,f.return=l;o.sibling!==null;)o=o.sibling,f=f.sibling=zo(o,o.pendingProps),f.return=l;f.sibling=null}return l.child}function Ew(o,l,f){switch(l.tag){case 3:Gy(l),At();break;case 5:Dc(l);break;case 1:xr(l.type)&&El(l);break;case 4:Ca(l,l.stateNode.containerInfo);break;case 10:var m=l.type._context,E=l.memoizedProps.value;nn(cn,m._currentValue),m._currentValue=E;break;case 13:if(m=l.memoizedState,m!==null)return m.dehydrated!==null?(nn(pn,pn.current&1),l.flags|=128,null):f&l.child.childLanes?zy(o,l,f):(nn(pn,pn.current&1),o=so(o,l,f),o!==null?o.sibling:null);nn(pn,pn.current&1);break;case 19:if(m=(f&l.childLanes)!==0,o.flags&128){if(m)return Wy(o,l,f);l.flags|=128}if(E=l.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),nn(pn,pn.current),m)break;return null;case 22:case 23:return l.lanes=0,Uy(o,l,f)}return so(o,l,f)}var Yy,Np,qy,Xy;Yy=function(o,l){for(var f=l.child;f!==null;){if(f.tag===5||f.tag===6)o.appendChild(f.stateNode);else if(f.tag!==4&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===l)break;for(;f.sibling===null;){if(f.return===null||f.return===l)return;f=f.return}f.sibling.return=f.return,f=f.sibling}},Np=function(){},qy=function(o,l,f,m){var E=o.memoizedProps;if(E!==m){o=l.stateNode,ws(Qn.current);var b=null;switch(f){case"input":E=ls(o,E),m=ls(o,m),b=[];break;case"select":E=B({},E,{value:void 0}),m=B({},m,{value:void 0}),b=[];break;case"textarea":E=mr(o,E),m=mr(o,m),b=[];break;default:typeof E.onClick!="function"&&typeof m.onClick=="function"&&(o.onclick=yl)}Fe(f,m);var D;f=null;for(re in E)if(!m.hasOwnProperty(re)&&E.hasOwnProperty(re)&&E[re]!=null)if(re==="style"){var j=E[re];for(D in j)j.hasOwnProperty(D)&&(f||(f={}),f[D]="")}else re!=="dangerouslySetInnerHTML"&&re!=="children"&&re!=="suppressContentEditableWarning"&&re!=="suppressHydrationWarning"&&re!=="autoFocus"&&(i.hasOwnProperty(re)?b||(b=[]):(b=b||[]).push(re,null));for(re in m){var z=m[re];if(j=E!=null?E[re]:void 0,m.hasOwnProperty(re)&&z!==j&&(z!=null||j!=null))if(re==="style")if(j){for(D in j)!j.hasOwnProperty(D)||z&&z.hasOwnProperty(D)||(f||(f={}),f[D]="");for(D in z)z.hasOwnProperty(D)&&j[D]!==z[D]&&(f||(f={}),f[D]=z[D])}else f||(b||(b=[]),b.push(re,f)),f=z;else re==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,j=j?j.__html:void 0,z!=null&&j!==z&&(b=b||[]).push(re,z)):re==="children"?typeof z!="string"&&typeof z!="number"||(b=b||[]).push(re,""+z):re!=="suppressContentEditableWarning"&&re!=="suppressHydrationWarning"&&(i.hasOwnProperty(re)?(z!=null&&re==="onScroll"&&on("scroll",o),b||j===z||(b=[])):(b=b||[]).push(re,z))}f&&(b=b||[]).push("style",f);var re=b;(l.updateQueue=re)&&(l.flags|=4)}},Xy=function(o,l,f,m){f!==m&&(l.flags|=4)};function Bc(o,l){if(!ze)switch(o.tailMode){case"hidden":l=o.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?o.tail=null:f.sibling=null;break;case"collapsed":f=o.tail;for(var m=null;f!==null;)f.alternate!==null&&(m=f),f=f.sibling;m===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:m.sibling=null}}function Er(o){var l=o.alternate!==null&&o.alternate.child===o.child,f=0,m=0;if(l)for(var E=o.child;E!==null;)f|=E.lanes|E.childLanes,m|=E.subtreeFlags&14680064,m|=E.flags&14680064,E.return=o,E=E.sibling;else for(E=o.child;E!==null;)f|=E.lanes|E.childLanes,m|=E.subtreeFlags,m|=E.flags,E.return=o,E=E.sibling;return o.subtreeFlags|=m,o.childLanes=f,l}function Tw(o,l,f){var m=l.pendingProps;switch(Ne(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Er(l),null;case 1:return xr(l.type)&&Sl(),Er(l),null;case 3:return m=l.stateNode,io(),tn(wn),tn(Yn),Ra(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(o===null||o.child===null)&&(gt(l)?l.flags|=4:o===null||o.memoizedState.isDehydrated&&!(l.flags&256)||(l.flags|=1024,et!==null&&(Kp(et),et=null))),Np(o,l),Er(l),null;case 5:_l(l);var E=ws(Bo.current);if(f=l.type,o!==null&&l.stateNode!=null)qy(o,l,f,m,E),o.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!m){if(l.stateNode===null)throw Error(t(166));return Er(l),null}if(o=ws(Qn.current),gt(l)){m=l.stateNode,f=l.type;var b=l.memoizedProps;switch(m[Ti]=l,m[Ta]=b,o=(l.mode&1)!==0,f){case"dialog":on("cancel",m),on("close",m);break;case"iframe":case"object":case"embed":on("load",m);break;case"video":case"audio":for(E=0;E<ga.length;E++)on(ga[E],m);break;case"source":on("error",m);break;case"img":case"image":case"link":on("error",m),on("load",m);break;case"details":on("toggle",m);break;case"input":ri(m,b),on("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!b.multiple},on("invalid",m);break;case"textarea":Fi(m,b),on("invalid",m)}Fe(f,b),E=null;for(var D in b)if(b.hasOwnProperty(D)){var j=b[D];D==="children"?typeof j=="string"?m.textContent!==j&&(b.suppressHydrationWarning!==!0&&xa(m.textContent,j,o),E=["children",j]):typeof j=="number"&&m.textContent!==""+j&&(b.suppressHydrationWarning!==!0&&xa(m.textContent,j,o),E=["children",""+j]):i.hasOwnProperty(D)&&j!=null&&D==="onScroll"&&on("scroll",m)}switch(f){case"input":an(m),Mi(m,b,!0);break;case"textarea":an(m),pe(m);break;case"select":case"option":break;default:typeof b.onClick=="function"&&(m.onclick=yl)}m=E,l.updateQueue=m,m!==null&&(l.flags|=4)}else{D=E.nodeType===9?E:E.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=Z(f)),o==="http://www.w3.org/1999/xhtml"?f==="script"?(o=D.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof m.is=="string"?o=D.createElement(f,{is:m.is}):(o=D.createElement(f),f==="select"&&(D=o,m.multiple?D.multiple=!0:m.size&&(D.size=m.size))):o=D.createElementNS(o,f),o[Ti]=l,o[Ta]=m,Yy(o,l,!1,!1),l.stateNode=o;e:{switch(D=mt(f,m),f){case"dialog":on("cancel",o),on("close",o),E=m;break;case"iframe":case"object":case"embed":on("load",o),E=m;break;case"video":case"audio":for(E=0;E<ga.length;E++)on(ga[E],o);E=m;break;case"source":on("error",o),E=m;break;case"img":case"image":case"link":on("error",o),on("load",o),E=m;break;case"details":on("toggle",o),E=m;break;case"input":ri(o,m),E=ls(o,m),on("invalid",o);break;case"option":E=m;break;case"select":o._wrapperState={wasMultiple:!!m.multiple},E=B({},m,{value:void 0}),on("invalid",o);break;case"textarea":Fi(o,m),E=mr(o,m),on("invalid",o);break;default:E=m}Fe(f,E),j=E;for(b in j)if(j.hasOwnProperty(b)){var z=j[b];b==="style"?Ke(o,z):b==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,z!=null&&lt(o,z)):b==="children"?typeof z=="string"?(f!=="textarea"||z!=="")&&tt(o,z):typeof z=="number"&&tt(o,""+z):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(i.hasOwnProperty(b)?z!=null&&b==="onScroll"&&on("scroll",o):z!=null&&k(o,b,z,D))}switch(f){case"input":an(o),Mi(o,m,!1);break;case"textarea":an(o),pe(o);break;case"option":m.value!=null&&o.setAttribute("value",""+Ce(m.value));break;case"select":o.multiple=!!m.multiple,b=m.value,b!=null?On(o,!!m.multiple,b,!1):m.defaultValue!=null&&On(o,!!m.multiple,m.defaultValue,!0);break;default:typeof E.onClick=="function"&&(o.onclick=yl)}switch(f){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return Er(l),null;case 6:if(o&&l.stateNode!=null)Xy(o,l,o.memoizedProps,m);else{if(typeof m!="string"&&l.stateNode===null)throw Error(t(166));if(f=ws(Bo.current),ws(Qn.current),gt(l)){if(m=l.stateNode,f=l.memoizedProps,m[Ti]=l,(b=m.nodeValue!==f)&&(o=rt,o!==null))switch(o.tag){case 3:xa(m.nodeValue,f,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&xa(m.nodeValue,f,(o.mode&1)!==0)}b&&(l.flags|=4)}else m=(f.nodeType===9?f:f.ownerDocument).createTextNode(m),m[Ti]=l,l.stateNode=m}return Er(l),null;case 13:if(tn(pn),m=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(ze&&Xe!==null&&l.mode&1&&!(l.flags&128))_t(),At(),l.flags|=98560,b=!1;else if(b=gt(l),m!==null&&m.dehydrated!==null){if(o===null){if(!b)throw Error(t(318));if(b=l.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(t(317));b[Ti]=l}else At(),!(l.flags&128)&&(l.memoizedState=null),l.flags|=4;Er(l),b=!1}else et!==null&&(Kp(et),et=null),b=!0;if(!b)return l.flags&65536?l:null}return l.flags&128?(l.lanes=f,l):(m=m!==null,m!==(o!==null&&o.memoizedState!==null)&&m&&(l.child.flags|=8192,l.mode&1&&(o===null||pn.current&1?zn===0&&(zn=3):qp())),l.updateQueue!==null&&(l.flags|=4),Er(l),null);case 4:return io(),Np(o,l),o===null&&eo(l.stateNode.containerInfo),Er(l),null;case 10:return Wt(l.type._context),Er(l),null;case 17:return xr(l.type)&&Sl(),Er(l),null;case 19:if(tn(pn),b=l.memoizedState,b===null)return Er(l),null;if(m=(l.flags&128)!==0,D=b.rendering,D===null)if(m)Bc(b,!1);else{if(zn!==0||o!==null&&o.flags&128)for(o=l.child;o!==null;){if(D=Ll(o),D!==null){for(l.flags|=128,Bc(b,!1),m=D.updateQueue,m!==null&&(l.updateQueue=m,l.flags|=4),l.subtreeFlags=0,m=f,f=l.child;f!==null;)b=f,o=m,b.flags&=14680066,D=b.alternate,D===null?(b.childLanes=0,b.lanes=o,b.child=null,b.subtreeFlags=0,b.memoizedProps=null,b.memoizedState=null,b.updateQueue=null,b.dependencies=null,b.stateNode=null):(b.childLanes=D.childLanes,b.lanes=D.lanes,b.child=D.child,b.subtreeFlags=0,b.deletions=null,b.memoizedProps=D.memoizedProps,b.memoizedState=D.memoizedState,b.updateQueue=D.updateQueue,b.type=D.type,o=D.dependencies,b.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),f=f.sibling;return nn(pn,pn.current&1|2),l.child}o=o.sibling}b.tail!==null&&Xt()>kl&&(l.flags|=128,m=!0,Bc(b,!1),l.lanes=4194304)}else{if(!m)if(o=Ll(D),o!==null){if(l.flags|=128,m=!0,f=o.updateQueue,f!==null&&(l.updateQueue=f,l.flags|=4),Bc(b,!0),b.tail===null&&b.tailMode==="hidden"&&!D.alternate&&!ze)return Er(l),null}else 2*Xt()-b.renderingStartTime>kl&&f!==1073741824&&(l.flags|=128,m=!0,Bc(b,!1),l.lanes=4194304);b.isBackwards?(D.sibling=l.child,l.child=D):(f=b.last,f!==null?f.sibling=D:l.child=D,b.last=D)}return b.tail!==null?(l=b.tail,b.rendering=l,b.tail=l.sibling,b.renderingStartTime=Xt(),l.sibling=null,f=pn.current,nn(pn,m?f&1|2:f&1),l):(Er(l),null);case 22:case 23:return Yp(),m=l.memoizedState!==null,o!==null&&o.memoizedState!==null!==m&&(l.flags|=8192),m&&l.mode&1?ci&1073741824&&(Er(l),l.subtreeFlags&6&&(l.flags|=8192)):Er(l),null;case 24:return null;case 25:return null}throw Error(t(156,l.tag))}function bw(o,l){switch(Ne(l),l.tag){case 1:return xr(l.type)&&Sl(),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return io(),tn(wn),tn(Yn),Ra(),o=l.flags,o&65536&&!(o&128)?(l.flags=o&-65537|128,l):null;case 5:return _l(l),null;case 13:if(tn(pn),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(t(340));At()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return tn(pn),null;case 4:return io(),null;case 10:return Wt(l.type._context),null;case 22:case 23:return Yp(),null;case 24:return null;default:return null}}var Id=!1,Tr=!1,ww=typeof WeakSet=="function"?WeakSet:Set,We=null;function Rl(o,l){var f=o.ref;if(f!==null)if(typeof f=="function")try{f(null)}catch(m){Ln(o,l,m)}else f.current=null}function Mp(o,l,f){try{f()}catch(m){Ln(o,l,m)}}var Qy=!1;function _w(o,l){if(gs=Lo,o=xi(),cl(o)){if("selectionStart"in o)var f={start:o.selectionStart,end:o.selectionEnd};else e:{f=(f=o.ownerDocument)&&f.defaultView||window;var m=f.getSelection&&f.getSelection();if(m&&m.rangeCount!==0){f=m.anchorNode;var E=m.anchorOffset,b=m.focusNode;m=m.focusOffset;try{f.nodeType,b.nodeType}catch{f=null;break e}var D=0,j=-1,z=-1,re=0,Le=0,Re=o,_e=null;t:for(;;){for(var je;Re!==f||E!==0&&Re.nodeType!==3||(j=D+E),Re!==b||m!==0&&Re.nodeType!==3||(z=D+m),Re.nodeType===3&&(D+=Re.nodeValue.length),(je=Re.firstChild)!==null;)_e=Re,Re=je;for(;;){if(Re===o)break t;if(_e===f&&++re===E&&(j=D),_e===b&&++Le===m&&(z=D),(je=Re.nextSibling)!==null)break;Re=_e,_e=Re.parentNode}Re=je}f=j===-1||z===-1?null:{start:j,end:z}}else f=null}f=f||{start:0,end:0}}else f=null;for(Sa={focusedElem:o,selectionRange:f},Lo=!1,We=l;We!==null;)if(l=We,o=l.child,(l.subtreeFlags&1028)!==0&&o!==null)o.return=l,We=o;else for(;We!==null;){l=We;try{var qe=l.alternate;if(l.flags&1024)switch(l.tag){case 0:case 11:case 15:break;case 1:if(qe!==null){var Je=qe.memoizedProps,Pn=qe.memoizedState,ee=l.stateNode,Y=ee.getSnapshotBeforeUpdate(l.elementType===l.type?Je:Yi(l.type,Je),Pn);ee.__reactInternalSnapshotBeforeUpdate=Y}break;case 3:var ne=l.stateNode.containerInfo;ne.nodeType===1?ne.textContent="":ne.nodeType===9&&ne.documentElement&&ne.removeChild(ne.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Ie){Ln(l,l.return,Ie)}if(o=l.sibling,o!==null){o.return=l.return,We=o;break}We=l.return}return qe=Qy,Qy=!1,qe}function Uc(o,l,f){var m=l.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var E=m=m.next;do{if((E.tag&o)===o){var b=E.destroy;E.destroy=void 0,b!==void 0&&Mp(l,f,b)}E=E.next}while(E!==m)}}function Pd(o,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var f=l=l.next;do{if((f.tag&o)===o){var m=f.create;f.destroy=m()}f=f.next}while(f!==l)}}function Fp(o){var l=o.ref;if(l!==null){var f=o.stateNode;switch(o.tag){case 5:o=f;break;default:o=f}typeof l=="function"?l(o):l.current=o}}function Jy(o){var l=o.alternate;l!==null&&(o.alternate=null,Jy(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&(delete l[Ti],delete l[Ta],delete l[Ac],delete l[xd],delete l[mp])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function Zy(o){return o.tag===5||o.tag===3||o.tag===4}function ev(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Zy(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function $p(o,l,f){var m=o.tag;if(m===5||m===6)o=o.stateNode,l?f.nodeType===8?f.parentNode.insertBefore(o,l):f.insertBefore(o,l):(f.nodeType===8?(l=f.parentNode,l.insertBefore(o,f)):(l=f,l.appendChild(o)),f=f._reactRootContainer,f!=null||l.onclick!==null||(l.onclick=yl));else if(m!==4&&(o=o.child,o!==null))for($p(o,l,f),o=o.sibling;o!==null;)$p(o,l,f),o=o.sibling}function Bp(o,l,f){var m=o.tag;if(m===5||m===6)o=o.stateNode,l?f.insertBefore(o,l):f.appendChild(o);else if(m!==4&&(o=o.child,o!==null))for(Bp(o,l,f),o=o.sibling;o!==null;)Bp(o,l,f),o=o.sibling}var dr=null,qi=!1;function Uo(o,l,f){for(f=f.child;f!==null;)tv(o,l,f),f=f.sibling}function tv(o,l,f){if(yr&&typeof yr.onCommitFiberUnmount=="function")try{yr.onCommitFiberUnmount(Ur,f)}catch{}switch(f.tag){case 5:Tr||Rl(f,l);case 6:var m=dr,E=qi;dr=null,Uo(o,l,f),dr=m,qi=E,dr!==null&&(qi?(o=dr,f=f.stateNode,o.nodeType===8?o.parentNode.removeChild(f):o.removeChild(f)):dr.removeChild(f.stateNode));break;case 18:dr!==null&&(qi?(o=dr,f=f.stateNode,o.nodeType===8?Rc(o.parentNode,f):o.nodeType===1&&Rc(o,f),_o(o)):Rc(dr,f.stateNode));break;case 4:m=dr,E=qi,dr=f.stateNode.containerInfo,qi=!0,Uo(o,l,f),dr=m,qi=E;break;case 0:case 11:case 14:case 15:if(!Tr&&(m=f.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){E=m=m.next;do{var b=E,D=b.destroy;b=b.tag,D!==void 0&&(b&2||b&4)&&Mp(f,l,D),E=E.next}while(E!==m)}Uo(o,l,f);break;case 1:if(!Tr&&(Rl(f,l),m=f.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=f.memoizedProps,m.state=f.memoizedState,m.componentWillUnmount()}catch(j){Ln(f,l,j)}Uo(o,l,f);break;case 21:Uo(o,l,f);break;case 22:f.mode&1?(Tr=(m=Tr)||f.memoizedState!==null,Uo(o,l,f),Tr=m):Uo(o,l,f);break;default:Uo(o,l,f)}}function nv(o){var l=o.updateQueue;if(l!==null){o.updateQueue=null;var f=o.stateNode;f===null&&(f=o.stateNode=new ww),l.forEach(function(m){var E=Ow.bind(null,o,m);f.has(m)||(f.add(m),m.then(E,E))})}}function Xi(o,l){var f=l.deletions;if(f!==null)for(var m=0;m<f.length;m++){var E=f[m];try{var b=o,D=l,j=D;e:for(;j!==null;){switch(j.tag){case 5:dr=j.stateNode,qi=!1;break e;case 3:dr=j.stateNode.containerInfo,qi=!0;break e;case 4:dr=j.stateNode.containerInfo,qi=!0;break e}j=j.return}if(dr===null)throw Error(t(160));tv(b,D,E),dr=null,qi=!1;var z=E.alternate;z!==null&&(z.return=null),E.return=null}catch(re){Ln(E,l,re)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)rv(l,o),l=l.sibling}function rv(o,l){var f=o.alternate,m=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(Xi(l,o),Ls(o),m&4){try{Uc(3,o,o.return),Pd(3,o)}catch(Je){Ln(o,o.return,Je)}try{Uc(5,o,o.return)}catch(Je){Ln(o,o.return,Je)}}break;case 1:Xi(l,o),Ls(o),m&512&&f!==null&&Rl(f,f.return);break;case 5:if(Xi(l,o),Ls(o),m&512&&f!==null&&Rl(f,f.return),o.flags&32){var E=o.stateNode;try{tt(E,"")}catch(Je){Ln(o,o.return,Je)}}if(m&4&&(E=o.stateNode,E!=null)){var b=o.memoizedProps,D=f!==null?f.memoizedProps:b,j=o.type,z=o.updateQueue;if(o.updateQueue=null,z!==null)try{j==="input"&&b.type==="radio"&&b.name!=null&&Cr(E,b),mt(j,D);var re=mt(j,b);for(D=0;D<z.length;D+=2){var Le=z[D],Re=z[D+1];Le==="style"?Ke(E,Re):Le==="dangerouslySetInnerHTML"?lt(E,Re):Le==="children"?tt(E,Re):k(E,Le,Re,re)}switch(j){case"input":zs(E,b);break;case"textarea":ii(E,b);break;case"select":var _e=E._wrapperState.wasMultiple;E._wrapperState.wasMultiple=!!b.multiple;var je=b.value;je!=null?On(E,!!b.multiple,je,!1):_e!==!!b.multiple&&(b.defaultValue!=null?On(E,!!b.multiple,b.defaultValue,!0):On(E,!!b.multiple,b.multiple?[]:"",!1))}E[Ta]=b}catch(Je){Ln(o,o.return,Je)}}break;case 6:if(Xi(l,o),Ls(o),m&4){if(o.stateNode===null)throw Error(t(162));E=o.stateNode,b=o.memoizedProps;try{E.nodeValue=b}catch(Je){Ln(o,o.return,Je)}}break;case 3:if(Xi(l,o),Ls(o),m&4&&f!==null&&f.memoizedState.isDehydrated)try{_o(l.containerInfo)}catch(Je){Ln(o,o.return,Je)}break;case 4:Xi(l,o),Ls(o);break;case 13:Xi(l,o),Ls(o),E=o.child,E.flags&8192&&(b=E.memoizedState!==null,E.stateNode.isHidden=b,!b||E.alternate!==null&&E.alternate.memoizedState!==null||(Hp=Xt())),m&4&&nv(o);break;case 22:if(Le=f!==null&&f.memoizedState!==null,o.mode&1?(Tr=(re=Tr)||Le,Xi(l,o),Tr=re):Xi(l,o),Ls(o),m&8192){if(re=o.memoizedState!==null,(o.stateNode.isHidden=re)&&!Le&&o.mode&1)for(We=o,Le=o.child;Le!==null;){for(Re=We=Le;We!==null;){switch(_e=We,je=_e.child,_e.tag){case 0:case 11:case 14:case 15:Uc(4,_e,_e.return);break;case 1:Rl(_e,_e.return);var qe=_e.stateNode;if(typeof qe.componentWillUnmount=="function"){m=_e,f=_e.return;try{l=m,qe.props=l.memoizedProps,qe.state=l.memoizedState,qe.componentWillUnmount()}catch(Je){Ln(m,f,Je)}}break;case 5:Rl(_e,_e.return);break;case 22:if(_e.memoizedState!==null){ov(Re);continue}}je!==null?(je.return=_e,We=je):ov(Re)}Le=Le.sibling}e:for(Le=null,Re=o;;){if(Re.tag===5){if(Le===null){Le=Re;try{E=Re.stateNode,re?(b=E.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none"):(j=Re.stateNode,z=Re.memoizedProps.style,D=z!=null&&z.hasOwnProperty("display")?z.display:null,j.style.display=ge("display",D))}catch(Je){Ln(o,o.return,Je)}}}else if(Re.tag===6){if(Le===null)try{Re.stateNode.nodeValue=re?"":Re.memoizedProps}catch(Je){Ln(o,o.return,Je)}}else if((Re.tag!==22&&Re.tag!==23||Re.memoizedState===null||Re===o)&&Re.child!==null){Re.child.return=Re,Re=Re.child;continue}if(Re===o)break e;for(;Re.sibling===null;){if(Re.return===null||Re.return===o)break e;Le===Re&&(Le=null),Re=Re.return}Le===Re&&(Le=null),Re.sibling.return=Re.return,Re=Re.sibling}}break;case 19:Xi(l,o),Ls(o),m&4&&nv(o);break;case 21:break;default:Xi(l,o),Ls(o)}}function Ls(o){var l=o.flags;if(l&2){try{e:{for(var f=o.return;f!==null;){if(Zy(f)){var m=f;break e}f=f.return}throw Error(t(160))}switch(m.tag){case 5:var E=m.stateNode;m.flags&32&&(tt(E,""),m.flags&=-33);var b=ev(o);Bp(o,b,E);break;case 3:case 4:var D=m.stateNode.containerInfo,j=ev(o);$p(o,j,D);break;default:throw Error(t(161))}}catch(z){Ln(o,o.return,z)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function Lw(o,l,f){We=o,iv(o)}function iv(o,l,f){for(var m=(o.mode&1)!==0;We!==null;){var E=We,b=E.child;if(E.tag===22&&m){var D=E.memoizedState!==null||Id;if(!D){var j=E.alternate,z=j!==null&&j.memoizedState!==null||Tr;j=Id;var re=Tr;if(Id=D,(Tr=z)&&!re)for(We=E;We!==null;)D=We,z=D.child,D.tag===22&&D.memoizedState!==null?av(E):z!==null?(z.return=D,We=z):av(E);for(;b!==null;)We=b,iv(b),b=b.sibling;We=E,Id=j,Tr=re}sv(o)}else E.subtreeFlags&8772&&b!==null?(b.return=E,We=b):sv(o)}}function sv(o){for(;We!==null;){var l=We;if(l.flags&8772){var f=l.alternate;try{if(l.flags&8772)switch(l.tag){case 0:case 11:case 15:Tr||Pd(5,l);break;case 1:var m=l.stateNode;if(l.flags&4&&!Tr)if(f===null)m.componentDidMount();else{var E=l.elementType===l.type?f.memoizedProps:Yi(l.type,f.memoizedProps);m.componentDidUpdate(E,f.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var b=l.updateQueue;b!==null&&bd(l,b,m);break;case 3:var D=l.updateQueue;if(D!==null){if(f=null,l.child!==null)switch(l.child.tag){case 5:f=l.child.stateNode;break;case 1:f=l.child.stateNode}bd(l,D,f)}break;case 5:var j=l.stateNode;if(f===null&&l.flags&4){f=j;var z=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":z.autoFocus&&f.focus();break;case"img":z.src&&(f.src=z.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var re=l.alternate;if(re!==null){var Le=re.memoizedState;if(Le!==null){var Re=Le.dehydrated;Re!==null&&_o(Re)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Tr||l.flags&512&&Fp(l)}catch(_e){Ln(l,l.return,_e)}}if(l===o){We=null;break}if(f=l.sibling,f!==null){f.return=l.return,We=f;break}We=l.return}}function ov(o){for(;We!==null;){var l=We;if(l===o){We=null;break}var f=l.sibling;if(f!==null){f.return=l.return,We=f;break}We=l.return}}function av(o){for(;We!==null;){var l=We;try{switch(l.tag){case 0:case 11:case 15:var f=l.return;try{Pd(4,l)}catch(z){Ln(l,f,z)}break;case 1:var m=l.stateNode;if(typeof m.componentDidMount=="function"){var E=l.return;try{m.componentDidMount()}catch(z){Ln(l,E,z)}}var b=l.return;try{Fp(l)}catch(z){Ln(l,b,z)}break;case 5:var D=l.return;try{Fp(l)}catch(z){Ln(l,D,z)}}}catch(z){Ln(l,l.return,z)}if(l===o){We=null;break}var j=l.sibling;if(j!==null){j.return=l.return,We=j;break}We=l.return}}var Cw=Math.ceil,Dd=O.ReactCurrentDispatcher,Up=O.ReactCurrentOwner,Ri=O.ReactCurrentBatchConfig,$t=0,Zn=null,Mn=null,fr=0,ci=0,Al=Vi(0),zn=0,jc=null,Ia=0,Od=0,jp=0,Hc=null,Xr=null,Hp=0,kl=1/0,oo=null,Nd=!1,Gp=null,jo=null,Md=!1,Ho=null,Fd=0,Gc=0,Vp=null,$d=-1,Bd=0;function Dr(){return $t&6?Xt():$d!==-1?$d:$d=Xt()}function Go(o){return o.mode&1?$t&2&&fr!==0?fr&-fr:Kt.transition!==null?(Bd===0&&(Bd=ai()),Bd):(o=Ht,o!==0||(o=window.event,o=o===void 0?16:dc(o.type)),o):1}function Qi(o,l,f,m){if(50<Gc)throw Gc=0,Vp=null,Error(t(185));us(o,f,m),(!($t&2)||o!==Zn)&&(o===Zn&&(!($t&2)&&(Od|=f),zn===4&&Vo(o,fr)),Qr(o,m),f===1&&$t===0&&!(l.mode&1)&&(kl=Xt()+500,ba&&Ss()))}function Qr(o,l){var f=o.callbackNode;lc(o,l);var m=gi(o,o===Zn?fr:0);if(m===0)f!==null&&$r(f),o.callbackNode=null,o.callbackPriority=0;else if(l=m&-m,o.callbackPriority!==l){if(f!=null&&$r(f),l===1)o.tag===0?gp(cv.bind(null,o)):wa(cv.bind(null,o)),Ea(function(){!($t&6)&&Ss()}),f=null;else{switch(Ws(m)){case 1:f=Ft;break;case 4:f=xn;break;case 16:f=oi;break;case 536870912:f=hn;break;default:f=oi}f=yv(f,lv.bind(null,o))}o.callbackPriority=l,o.callbackNode=f}}function lv(o,l){if($d=-1,Bd=0,$t&6)throw Error(t(327));var f=o.callbackNode;if(Il()&&o.callbackNode!==f)return null;var m=gi(o,o===Zn?fr:0);if(m===0)return null;if(m&30||m&o.expiredLanes||l)l=Ud(o,m);else{l=m;var E=$t;$t|=2;var b=dv();(Zn!==o||fr!==l)&&(oo=null,kl=Xt()+500,Da(o,l));do try{kw();break}catch(j){uv(o,j)}while(!0);_n(),Dd.current=b,$t=E,Mn!==null?l=0:(Zn=null,fr=0,l=zn)}if(l!==0){if(l===2&&(E=ia(o),E!==0&&(m=E,l=zp(o,E))),l===1)throw f=jc,Da(o,0),Vo(o,m),Qr(o,Xt()),f;if(l===6)Vo(o,m);else{if(E=o.current.alternate,!(m&30)&&!Rw(E)&&(l=Ud(o,m),l===2&&(b=ia(o),b!==0&&(m=b,l=zp(o,b))),l===1))throw f=jc,Da(o,0),Vo(o,m),Qr(o,Xt()),f;switch(o.finishedWork=E,o.finishedLanes=m,l){case 0:case 1:throw Error(t(345));case 2:Oa(o,Xr,oo);break;case 3:if(Vo(o,m),(m&130023424)===m&&(l=Hp+500-Xt(),10<l)){if(gi(o,0)!==0)break;if(E=o.suspendedLanes,(E&m)!==m){Dr(),o.pingedLanes|=o.suspendedLanes&E;break}o.timeoutHandle=Cc(Oa.bind(null,o,Xr,oo),l);break}Oa(o,Xr,oo);break;case 4:if(Vo(o,m),(m&4194240)===m)break;for(l=o.eventTimes,E=-1;0<m;){var D=31-jr(m);b=1<<D,D=l[D],D>E&&(E=D),m&=~b}if(m=E,m=Xt()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*Cw(m/1960))-m,10<m){o.timeoutHandle=Cc(Oa.bind(null,o,Xr,oo),m);break}Oa(o,Xr,oo);break;case 5:Oa(o,Xr,oo);break;default:throw Error(t(329))}}}return Qr(o,Xt()),o.callbackNode===f?lv.bind(null,o):null}function zp(o,l){var f=Hc;return o.current.memoizedState.isDehydrated&&(Da(o,l).flags|=256),o=Ud(o,l),o!==2&&(l=Xr,Xr=f,l!==null&&Kp(l)),o}function Kp(o){Xr===null?Xr=o:Xr.push.apply(Xr,o)}function Rw(o){for(var l=o;;){if(l.flags&16384){var f=l.updateQueue;if(f!==null&&(f=f.stores,f!==null))for(var m=0;m<f.length;m++){var E=f[m],b=E.getSnapshot;E=E.value;try{if(!Kr(b(),E))return!1}catch{return!1}}}if(f=l.child,l.subtreeFlags&16384&&f!==null)f.return=l,l=f;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Vo(o,l){for(l&=~jp,l&=~Od,o.suspendedLanes|=l,o.pingedLanes&=~l,o=o.expirationTimes;0<l;){var f=31-jr(l),m=1<<f;o[f]=-1,l&=~m}}function cv(o){if($t&6)throw Error(t(327));Il();var l=gi(o,0);if(!(l&1))return Qr(o,Xt()),null;var f=Ud(o,l);if(o.tag!==0&&f===2){var m=ia(o);m!==0&&(l=m,f=zp(o,m))}if(f===1)throw f=jc,Da(o,0),Vo(o,l),Qr(o,Xt()),f;if(f===6)throw Error(t(345));return o.finishedWork=o.current.alternate,o.finishedLanes=l,Oa(o,Xr,oo),Qr(o,Xt()),null}function Wp(o,l){var f=$t;$t|=1;try{return o(l)}finally{$t=f,$t===0&&(kl=Xt()+500,ba&&Ss())}}function Pa(o){Ho!==null&&Ho.tag===0&&!($t&6)&&Il();var l=$t;$t|=1;var f=Ri.transition,m=Ht;try{if(Ri.transition=null,Ht=1,o)return o()}finally{Ht=m,Ri.transition=f,$t=l,!($t&6)&&Ss()}}function Yp(){ci=Al.current,tn(Al)}function Da(o,l){o.finishedWork=null,o.finishedLanes=0;var f=o.timeoutHandle;if(f!==-1&&(o.timeoutHandle=-1,pp(f)),Mn!==null)for(f=Mn.return;f!==null;){var m=f;switch(Ne(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&Sl();break;case 3:io(),tn(wn),tn(Yn),Ra();break;case 5:_l(m);break;case 4:io();break;case 13:tn(pn);break;case 19:tn(pn);break;case 10:Wt(m.type._context);break;case 22:case 23:Yp()}f=f.return}if(Zn=o,Mn=o=zo(o.current,null),fr=ci=l,zn=0,jc=null,jp=Od=Ia=0,Xr=Hc=null,Li!==null){for(l=0;l<Li.length;l++)if(f=Li[l],m=f.interleaved,m!==null){f.interleaved=null;var E=m.next,b=f.pending;if(b!==null){var D=b.next;b.next=E,m.next=D}f.pending=m}Li=null}return o}function uv(o,l){do{var f=Mn;try{if(_n(),Aa.current=Cd,wd){for(var m=Sn.memoizedState;m!==null;){var E=m.queue;E!==null&&(E.pending=null),m=m.next}wd=!1}if(ka=0,Jn=Vn=Sn=null,Nc=!1,Mc=0,Up.current=null,f===null||f.return===null){zn=1,jc=l,Mn=null;break}e:{var b=o,D=f.return,j=f,z=l;if(l=fr,j.flags|=32768,z!==null&&typeof z=="object"&&typeof z.then=="function"){var re=z,Le=j,Re=Le.tag;if(!(Le.mode&1)&&(Re===0||Re===11||Re===15)){var _e=Le.alternate;_e?(Le.updateQueue=_e.updateQueue,Le.memoizedState=_e.memoizedState,Le.lanes=_e.lanes):(Le.updateQueue=null,Le.memoizedState=null)}var je=Ny(D);if(je!==null){je.flags&=-257,My(je,D,j,b,l),je.mode&1&&Oy(b,re,l),l=je,z=re;var qe=l.updateQueue;if(qe===null){var Je=new Set;Je.add(z),l.updateQueue=Je}else qe.add(z);break e}else{if(!(l&1)){Oy(b,re,l),qp();break e}z=Error(t(426))}}else if(ze&&j.mode&1){var Pn=Ny(D);if(Pn!==null){!(Pn.flags&65536)&&(Pn.flags|=256),My(Pn,D,j,b,l),Gt(Cl(z,j));break e}}b=z=Cl(z,j),zn!==4&&(zn=2),Hc===null?Hc=[b]:Hc.push(b),b=D;do{switch(b.tag){case 3:b.flags|=65536,l&=-l,b.lanes|=l;var ee=Py(b,z,l);Pc(b,ee);break e;case 1:j=z;var Y=b.type,ne=b.stateNode;if(!(b.flags&128)&&(typeof Y.getDerivedStateFromError=="function"||ne!==null&&typeof ne.componentDidCatch=="function"&&(jo===null||!jo.has(ne)))){b.flags|=65536,l&=-l,b.lanes|=l;var Ie=Dy(b,j,l);Pc(b,Ie);break e}}b=b.return}while(b!==null)}hv(f)}catch(Ze){l=Ze,Mn===f&&f!==null&&(Mn=f=f.return);continue}break}while(!0)}function dv(){var o=Dd.current;return Dd.current=Cd,o===null?Cd:o}function qp(){(zn===0||zn===3||zn===2)&&(zn=4),Zn===null||!(Ia&268435455)&&!(Od&268435455)||Vo(Zn,fr)}function Ud(o,l){var f=$t;$t|=2;var m=dv();(Zn!==o||fr!==l)&&(oo=null,Da(o,l));do try{Aw();break}catch(E){uv(o,E)}while(!0);if(_n(),$t=f,Dd.current=m,Mn!==null)throw Error(t(261));return Zn=null,fr=0,zn}function Aw(){for(;Mn!==null;)fv(Mn)}function kw(){for(;Mn!==null&&!Br();)fv(Mn)}function fv(o){var l=gv(o.alternate,o,ci);o.memoizedProps=o.pendingProps,l===null?hv(o):Mn=l,Up.current=null}function hv(o){var l=o;do{var f=l.alternate;if(o=l.return,l.flags&32768){if(f=bw(f,l),f!==null){f.flags&=32767,Mn=f;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{zn=6,Mn=null;return}}else if(f=Tw(f,l,ci),f!==null){Mn=f;return}if(l=l.sibling,l!==null){Mn=l;return}Mn=l=o}while(l!==null);zn===0&&(zn=5)}function Oa(o,l,f){var m=Ht,E=Ri.transition;try{Ri.transition=null,Ht=1,Iw(o,l,f,m)}finally{Ri.transition=E,Ht=m}return null}function Iw(o,l,f,m){do Il();while(Ho!==null);if($t&6)throw Error(t(327));f=o.finishedWork;var E=o.finishedLanes;if(f===null)return null;if(o.finishedWork=null,o.finishedLanes=0,f===o.current)throw Error(t(177));o.callbackNode=null,o.callbackPriority=0;var b=f.lanes|f.childLanes;if(vo(o,b),o===Zn&&(Mn=Zn=null,fr=0),!(f.subtreeFlags&2064)&&!(f.flags&2064)||Md||(Md=!0,yv(oi,function(){return Il(),null})),b=(f.flags&15990)!==0,f.subtreeFlags&15990||b){b=Ri.transition,Ri.transition=null;var D=Ht;Ht=1;var j=$t;$t|=4,Up.current=null,_w(o,f),rv(f,o),up(Sa),Lo=!!gs,Sa=gs=null,o.current=f,Lw(f),mi(),$t=j,Ht=D,Ri.transition=b}else o.current=f;if(Md&&(Md=!1,Ho=o,Fd=E),b=o.pendingLanes,b===0&&(jo=null),Ja(f.stateNode),Qr(o,Xt()),l!==null)for(m=o.onRecoverableError,f=0;f<l.length;f++)E=l[f],m(E.value,{componentStack:E.stack,digest:E.digest});if(Nd)throw Nd=!1,o=Gp,Gp=null,o;return Fd&1&&o.tag!==0&&Il(),b=o.pendingLanes,b&1?o===Vp?Gc++:(Gc=0,Vp=o):Gc=0,Ss(),null}function Il(){if(Ho!==null){var o=Ws(Fd),l=Ri.transition,f=Ht;try{if(Ri.transition=null,Ht=16>o?16:o,Ho===null)var m=!1;else{if(o=Ho,Ho=null,Fd=0,$t&6)throw Error(t(331));var E=$t;for($t|=4,We=o.current;We!==null;){var b=We,D=b.child;if(We.flags&16){var j=b.deletions;if(j!==null){for(var z=0;z<j.length;z++){var re=j[z];for(We=re;We!==null;){var Le=We;switch(Le.tag){case 0:case 11:case 15:Uc(8,Le,b)}var Re=Le.child;if(Re!==null)Re.return=Le,We=Re;else for(;We!==null;){Le=We;var _e=Le.sibling,je=Le.return;if(Jy(Le),Le===re){We=null;break}if(_e!==null){_e.return=je,We=_e;break}We=je}}}var qe=b.alternate;if(qe!==null){var Je=qe.child;if(Je!==null){qe.child=null;do{var Pn=Je.sibling;Je.sibling=null,Je=Pn}while(Je!==null)}}We=b}}if(b.subtreeFlags&2064&&D!==null)D.return=b,We=D;else e:for(;We!==null;){if(b=We,b.flags&2048)switch(b.tag){case 0:case 11:case 15:Uc(9,b,b.return)}var ee=b.sibling;if(ee!==null){ee.return=b.return,We=ee;break e}We=b.return}}var Y=o.current;for(We=Y;We!==null;){D=We;var ne=D.child;if(D.subtreeFlags&2064&&ne!==null)ne.return=D,We=ne;else e:for(D=Y;We!==null;){if(j=We,j.flags&2048)try{switch(j.tag){case 0:case 11:case 15:Pd(9,j)}}catch(Ze){Ln(j,j.return,Ze)}if(j===D){We=null;break e}var Ie=j.sibling;if(Ie!==null){Ie.return=j.return,We=Ie;break e}We=j.return}}if($t=E,Ss(),yr&&typeof yr.onPostCommitFiberRoot=="function")try{yr.onPostCommitFiberRoot(Ur,o)}catch{}m=!0}return m}finally{Ht=f,Ri.transition=l}}return!1}function pv(o,l,f){l=Cl(f,l),l=Py(o,l,1),o=Wi(o,l,1),l=Dr(),o!==null&&(us(o,1,l),Qr(o,l))}function Ln(o,l,f){if(o.tag===3)pv(o,o,f);else for(;l!==null;){if(l.tag===3){pv(l,o,f);break}else if(l.tag===1){var m=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(jo===null||!jo.has(m))){o=Cl(f,o),o=Dy(l,o,1),l=Wi(l,o,1),o=Dr(),l!==null&&(us(l,1,o),Qr(l,o));break}}l=l.return}}function Pw(o,l,f){var m=o.pingCache;m!==null&&m.delete(l),l=Dr(),o.pingedLanes|=o.suspendedLanes&f,Zn===o&&(fr&f)===f&&(zn===4||zn===3&&(fr&130023424)===fr&&500>Xt()-Hp?Da(o,0):jp|=f),Qr(o,l)}function mv(o,l){l===0&&(o.mode&1?(l=Rr,Rr<<=1,!(Rr&130023424)&&(Rr=4194304)):l=1);var f=Dr();o=Yr(o,l),o!==null&&(us(o,l,f),Qr(o,f))}function Dw(o){var l=o.memoizedState,f=0;l!==null&&(f=l.retryLane),mv(o,f)}function Ow(o,l){var f=0;switch(o.tag){case 13:var m=o.stateNode,E=o.memoizedState;E!==null&&(f=E.retryLane);break;case 19:m=o.stateNode;break;default:throw Error(t(314))}m!==null&&m.delete(l),mv(o,f)}var gv;gv=function(o,l,f){if(o!==null)if(o.memoizedProps!==l.pendingProps||wn.current)qr=!0;else{if(!(o.lanes&f)&&!(l.flags&128))return qr=!1,Ew(o,l,f);qr=!!(o.flags&131072)}else qr=!1,ze&&l.flags&1048576&&Ge(l,L,l.index);switch(l.lanes=0,l.tag){case 2:var m=l.type;kd(o,l),o=l.pendingProps;var E=Fo(l,Yn.current);Gn(l,f),E=xp(null,l,m,o,E,f);var b=Sp();return l.flags|=1,typeof E=="object"&&E!==null&&typeof E.render=="function"&&E.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,xr(m)?(b=!0,El(l)):b=!1,l.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,Ic(l),E.updater=Rd,l.stateNode=E,E._reactInternals=l,Lp(l,m,o,f),l=kp(null,l,m,!0,b,f)):(l.tag=0,ze&&b&&Ve(l),Pr(null,l,E,f),l=l.child),l;case 16:m=l.elementType;e:{switch(kd(o,l),o=l.pendingProps,E=m._init,m=E(m._payload),l.type=m,E=l.tag=Mw(m),o=Yi(m,o),E){case 0:l=Ap(null,l,m,o,f);break e;case 1:l=Hy(null,l,m,o,f);break e;case 11:l=Fy(null,l,m,o,f);break e;case 14:l=$y(null,l,m,Yi(m.type,o),f);break e}throw Error(t(306,m,""))}return l;case 0:return m=l.type,E=l.pendingProps,E=l.elementType===m?E:Yi(m,E),Ap(o,l,m,E,f);case 1:return m=l.type,E=l.pendingProps,E=l.elementType===m?E:Yi(m,E),Hy(o,l,m,E,f);case 3:e:{if(Gy(l),o===null)throw Error(t(387));m=l.pendingProps,b=l.memoizedState,E=b.element,bl(o,l),_a(l,m,null,f);var D=l.memoizedState;if(m=D.element,b.isDehydrated)if(b={element:m,isDehydrated:!1,cache:D.cache,pendingSuspenseBoundaries:D.pendingSuspenseBoundaries,transitions:D.transitions},l.updateQueue.baseState=b,l.memoizedState=b,l.flags&256){E=Cl(Error(t(423)),l),l=Vy(o,l,m,f,E);break e}else if(m!==E){E=Cl(Error(t(424)),l),l=Vy(o,l,m,f,E);break e}else for(Xe=ys(l.stateNode.containerInfo.firstChild),rt=l,ze=!0,et=null,f=kr(l,null,m,f),l.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(At(),m===E){l=so(o,l,f);break e}Pr(o,l,m,f)}l=l.child}return l;case 5:return Dc(l),o===null&&Et(l),m=l.type,E=l.pendingProps,b=o!==null?o.memoizedProps:null,D=E.children,vl(m,E)?D=null:b!==null&&vl(m,b)&&(l.flags|=32),jy(o,l),Pr(o,l,D,f),l.child;case 6:return o===null&&Et(l),null;case 13:return zy(o,l,f);case 4:return Ca(l,l.stateNode.containerInfo),m=l.pendingProps,o===null?l.child=jn(l,null,m,f):Pr(o,l,m,f),l.child;case 11:return m=l.type,E=l.pendingProps,E=l.elementType===m?E:Yi(m,E),Fy(o,l,m,E,f);case 7:return Pr(o,l,l.pendingProps,f),l.child;case 8:return Pr(o,l,l.pendingProps.children,f),l.child;case 12:return Pr(o,l,l.pendingProps.children,f),l.child;case 10:e:{if(m=l.type._context,E=l.pendingProps,b=l.memoizedProps,D=E.value,nn(cn,m._currentValue),m._currentValue=D,b!==null)if(Kr(b.value,D)){if(b.children===E.children&&!wn.current){l=so(o,l,f);break e}}else for(b=l.child,b!==null&&(b.return=l);b!==null;){var j=b.dependencies;if(j!==null){D=b.child;for(var z=j.firstContext;z!==null;){if(z.context===m){if(b.tag===1){z=Ki(-1,f&-f),z.tag=2;var re=b.updateQueue;if(re!==null){re=re.shared;var Le=re.pending;Le===null?z.next=z:(z.next=Le.next,Le.next=z),re.pending=z}}b.lanes|=f,z=b.alternate,z!==null&&(z.lanes|=f),Hn(b.return,f,l),j.lanes|=f;break}z=z.next}}else if(b.tag===10)D=b.type===l.type?null:b.child;else if(b.tag===18){if(D=b.return,D===null)throw Error(t(341));D.lanes|=f,j=D.alternate,j!==null&&(j.lanes|=f),Hn(D,f,l),D=b.sibling}else D=b.child;if(D!==null)D.return=b;else for(D=b;D!==null;){if(D===l){D=null;break}if(b=D.sibling,b!==null){b.return=D.return,D=b;break}D=D.return}b=D}Pr(o,l,E.children,f),l=l.child}return l;case 9:return E=l.type,m=l.pendingProps.children,Gn(l,f),E=In(E),m=m(E),l.flags|=1,Pr(o,l,m,f),l.child;case 14:return m=l.type,E=Yi(m,l.pendingProps),E=Yi(m.type,E),$y(o,l,m,E,f);case 15:return By(o,l,l.type,l.pendingProps,f);case 17:return m=l.type,E=l.pendingProps,E=l.elementType===m?E:Yi(m,E),kd(o,l),l.tag=1,xr(m)?(o=!0,El(l)):o=!1,Gn(l,f),ky(l,m,E),Lp(l,m,E,f),kp(null,l,m,!0,o,f);case 19:return Wy(o,l,f);case 22:return Uy(o,l,f)}throw Error(t(156,l.tag))};function yv(o,l){return Nn(o,l)}function Nw(o,l,f,m){this.tag=o,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ai(o,l,f,m){return new Nw(o,l,f,m)}function Xp(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Mw(o){if(typeof o=="function")return Xp(o)?1:0;if(o!=null){if(o=o.$$typeof,o===fe)return 11;if(o===ye)return 14}return 2}function zo(o,l){var f=o.alternate;return f===null?(f=Ai(o.tag,l,o.key,o.mode),f.elementType=o.elementType,f.type=o.type,f.stateNode=o.stateNode,f.alternate=o,o.alternate=f):(f.pendingProps=l,f.type=o.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=o.flags&14680064,f.childLanes=o.childLanes,f.lanes=o.lanes,f.child=o.child,f.memoizedProps=o.memoizedProps,f.memoizedState=o.memoizedState,f.updateQueue=o.updateQueue,l=o.dependencies,f.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},f.sibling=o.sibling,f.index=o.index,f.ref=o.ref,f}function jd(o,l,f,m,E,b){var D=2;if(m=o,typeof o=="function")Xp(o)&&(D=1);else if(typeof o=="string")D=5;else e:switch(o){case M:return Na(f.children,E,b,l);case U:D=8,E|=8;break;case W:return o=Ai(12,f,l,E|2),o.elementType=W,o.lanes=b,o;case ae:return o=Ai(13,f,l,E),o.elementType=ae,o.lanes=b,o;case xe:return o=Ai(19,f,l,E),o.elementType=xe,o.lanes=b,o;case Pe:return Hd(f,E,b,l);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case R:D=10;break e;case G:D=9;break e;case fe:D=11;break e;case ye:D=14;break e;case Ee:D=16,m=null;break e}throw Error(t(130,o==null?o:typeof o,""))}return l=Ai(D,f,l,E),l.elementType=o,l.type=m,l.lanes=b,l}function Na(o,l,f,m){return o=Ai(7,o,m,l),o.lanes=f,o}function Hd(o,l,f,m){return o=Ai(22,o,m,l),o.elementType=Pe,o.lanes=f,o.stateNode={isHidden:!1},o}function Qp(o,l,f){return o=Ai(6,o,null,l),o.lanes=f,o}function Jp(o,l,f){return l=Ai(4,o.children!==null?o.children:[],o.key,l),l.lanes=f,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}function Fw(o,l,f,m,E){this.tag=l,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bi(0),this.expirationTimes=Bi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bi(0),this.identifierPrefix=m,this.onRecoverableError=E,this.mutableSourceEagerHydrationData=null}function Zp(o,l,f,m,E,b,D,j,z){return o=new Fw(o,l,f,j,z),l===1?(l=1,b===!0&&(l|=8)):l=0,b=Ai(3,null,null,l),o.current=b,b.stateNode=o,b.memoizedState={element:m,isDehydrated:f,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ic(b),o}function $w(o,l,f){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$,key:m==null?null:""+m,children:o,containerInfo:l,implementation:f}}function vv(o){if(!o)return wi;o=o._reactInternals;e:{if(wt(o)!==o||o.tag!==1)throw Error(t(170));var l=o;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(xr(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(t(171))}if(o.tag===1){var f=o.type;if(xr(f))return Ed(o,f,l)}return l}function xv(o,l,f,m,E,b,D,j,z){return o=Zp(f,m,!0,o,E,b,D,j,z),o.context=vv(null),f=o.current,m=Dr(),E=Go(f),b=Ki(m,E),b.callback=l??null,Wi(f,b,E),o.current.lanes=E,us(o,E,m),Qr(o,m),o}function Gd(o,l,f,m){var E=l.current,b=Dr(),D=Go(E);return f=vv(f),l.context===null?l.context=f:l.pendingContext=f,l=Ki(b,D),l.payload={element:o},m=m===void 0?null:m,m!==null&&(l.callback=m),o=Wi(E,l,D),o!==null&&(Qi(o,E,D,b),wl(o,E,D)),D}function Vd(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function Sv(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var f=o.retryLane;o.retryLane=f!==0&&f<l?f:l}}function em(o,l){Sv(o,l),(o=o.alternate)&&Sv(o,l)}function Bw(){return null}var Ev=typeof reportError=="function"?reportError:function(o){console.error(o)};function tm(o){this._internalRoot=o}zd.prototype.render=tm.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(t(409));Gd(o,l,null,null)},zd.prototype.unmount=tm.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;Pa(function(){Gd(null,o,null,null)}),l[Gi]=null}};function zd(o){this._internalRoot=o}zd.prototype.unstable_scheduleHydration=function(o){if(o){var l=Fu();o={blockedOn:null,target:o,priority:l};for(var f=0;f<ji.length&&l!==0&&l<ji[f].priority;f++);ji.splice(f,0,o),f===0&&aa(o)}};function nm(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function Kd(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function Tv(){}function Uw(o,l,f,m,E){if(E){if(typeof m=="function"){var b=m;m=function(){var re=Vd(D);b.call(re)}}var D=xv(l,m,o,0,null,!1,!1,"",Tv);return o._reactRootContainer=D,o[Gi]=D.current,eo(o.nodeType===8?o.parentNode:o),Pa(),D}for(;E=o.lastChild;)o.removeChild(E);if(typeof m=="function"){var j=m;m=function(){var re=Vd(z);j.call(re)}}var z=Zp(o,0,!1,null,null,!1,!1,"",Tv);return o._reactRootContainer=z,o[Gi]=z.current,eo(o.nodeType===8?o.parentNode:o),Pa(function(){Gd(l,z,f,m)}),z}function Wd(o,l,f,m,E){var b=f._reactRootContainer;if(b){var D=b;if(typeof E=="function"){var j=E;E=function(){var z=Vd(D);j.call(z)}}Gd(l,D,o,E)}else D=Uw(f,l,o,E,m);return Vd(D)}Za=function(o){switch(o.tag){case 3:var l=o.stateNode;if(l.current.memoizedState.isDehydrated){var f=Un(l.pendingLanes);f!==0&&(sa(l,f|1),Qr(l,Xt()),!($t&6)&&(kl=Xt()+500,Ss()))}break;case 13:Pa(function(){var m=Yr(o,1);if(m!==null){var E=Dr();Qi(m,o,1,E)}}),em(o,1)}},el=function(o){if(o.tag===13){var l=Yr(o,134217728);if(l!==null){var f=Dr();Qi(l,o,134217728,f)}em(o,134217728)}},yi=function(o){if(o.tag===13){var l=Go(o),f=Yr(o,l);if(f!==null){var m=Dr();Qi(f,o,l,m)}em(o,l)}},Fu=function(){return Ht},Ui=function(o,l){var f=Ht;try{return Ht=o,l()}finally{Ht=f}},Ct=function(o,l,f){switch(l){case"input":if(zs(o,f),l=f.name,f.type==="radio"&&l!=null){for(f=o;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<f.length;l++){var m=f[l];if(m!==o&&m.form===o.form){var E=bi(m);if(!E)throw Error(t(90));Bn(m),zs(m,E)}}}break;case"textarea":ii(o,f);break;case"select":l=f.value,l!=null&&On(o,!!f.multiple,l,!1)}},$i=Wp,V=Pa;var jw={usingClientEntryPoint:!1,Events:[no,ro,bi,gr,Fr,Wp]},Vc={findFiberByHostInstance:vs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Hw={bundleType:Vc.bundleType,version:Vc.version,rendererPackageName:Vc.rendererPackageName,rendererConfig:Vc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:O.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=yn(o),o===null?null:o.stateNode},findFiberByHostInstance:Vc.findFiberByHostInstance||Bw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yd.isDisabled&&Yd.supportsFiber)try{Ur=Yd.inject(Hw),yr=Yd}catch{}}return Jr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jw,Jr.createPortal=function(o,l){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nm(l))throw Error(t(200));return $w(o,l,null,f)},Jr.createRoot=function(o,l){if(!nm(o))throw Error(t(299));var f=!1,m="",E=Ev;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onRecoverableError!==void 0&&(E=l.onRecoverableError)),l=Zp(o,1,!1,null,null,f,!1,m,E),o[Gi]=l.current,eo(o.nodeType===8?o.parentNode:o),new tm(l)},Jr.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(t(188)):(o=Object.keys(o).join(","),Error(t(268,o)));return o=yn(l),o=o===null?null:o.stateNode,o},Jr.flushSync=function(o){return Pa(o)},Jr.hydrate=function(o,l,f){if(!Kd(l))throw Error(t(200));return Wd(null,o,l,!0,f)},Jr.hydrateRoot=function(o,l,f){if(!nm(o))throw Error(t(405));var m=f!=null&&f.hydratedSources||null,E=!1,b="",D=Ev;if(f!=null&&(f.unstable_strictMode===!0&&(E=!0),f.identifierPrefix!==void 0&&(b=f.identifierPrefix),f.onRecoverableError!==void 0&&(D=f.onRecoverableError)),l=xv(l,null,o,1,f??null,E,!1,b,D),o[Gi]=l.current,eo(o),m)for(o=0;o<m.length;o++)f=m[o],E=f._getVersion,E=E(f._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[f,E]:l.mutableSourceEagerHydrationData.push(f,E);return new zd(l)},Jr.render=function(o,l,f){if(!Kd(l))throw Error(t(200));return Wd(null,o,l,!1,f)},Jr.unmountComponentAtNode=function(o){if(!Kd(o))throw Error(t(40));return o._reactRootContainer?(Pa(function(){Wd(null,null,o,!1,function(){o._reactRootContainer=null,o[Gi]=null})}),!0):!1},Jr.unstable_batchedUpdates=Wp,Jr.unstable_renderSubtreeIntoContainer=function(o,l,f,m){if(!Kd(f))throw Error(t(200));if(o==null||o._reactInternals===void 0)throw Error(t(38));return Wd(o,l,f,!1,m)},Jr.version="18.3.1-next-f1338f8080-20240426",Jr}var kv;function bS(){if(kv)return sm.exports;kv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),sm.exports=Xw(),sm.exports}var Iv;function Qw(){if(Iv)return qd;Iv=1;var n=bS();return qd.createRoot=n.createRoot,qd.hydrateRoot=n.hydrateRoot,qd}var Jw=Qw(),vf={exports:{}};/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var Zw=vf.exports,Pv;function e_(){return Pv||(Pv=1,function(n,e){(function(t,r){n.exports=r()})(Zw,function(){const t=new Map,r={set(I,y,L){t.has(I)||t.set(I,new Map);const N=t.get(I);N.has(y)||N.size===0?N.set(y,L):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(N.keys())[0]}.`)},get:(I,y)=>t.has(I)&&t.get(I).get(y)||null,remove(I,y){if(!t.has(I))return;const L=t.get(I);L.delete(y),L.size===0&&t.delete(I)}},i="transitionend",s=I=>(I&&window.CSS&&window.CSS.escape&&(I=I.replace(/#([^\s"#']+)/g,(y,L)=>`#${CSS.escape(L)}`)),I),a=I=>{I.dispatchEvent(new Event(i))},c=I=>!(!I||typeof I!="object")&&(I.jquery!==void 0&&(I=I[0]),I.nodeType!==void 0),u=I=>c(I)?I.jquery?I[0]:I:typeof I=="string"&&I.length>0?document.querySelector(s(I)):null,d=I=>{if(!c(I)||I.getClientRects().length===0)return!1;const y=getComputedStyle(I).getPropertyValue("visibility")==="visible",L=I.closest("details:not([open])");if(!L)return y;if(L!==I){const N=I.closest("summary");if(N&&N.parentNode!==L||N===null)return!1}return y},h=I=>!I||I.nodeType!==Node.ELEMENT_NODE||!!I.classList.contains("disabled")||(I.disabled!==void 0?I.disabled:I.hasAttribute("disabled")&&I.getAttribute("disabled")!=="false"),p=I=>{if(!document.documentElement.attachShadow)return null;if(typeof I.getRootNode=="function"){const y=I.getRootNode();return y instanceof ShadowRoot?y:null}return I instanceof ShadowRoot?I:I.parentNode?p(I.parentNode):null},g=()=>{},x=I=>{I.offsetHeight},v=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,S=[],T=()=>document.documentElement.dir==="rtl",_=I=>{var y;y=()=>{const L=v();if(L){const N=I.NAME,K=L.fn[N];L.fn[N]=I.jQueryInterface,L.fn[N].Constructor=I,L.fn[N].noConflict=()=>(L.fn[N]=K,I.jQueryInterface)}},document.readyState==="loading"?(S.length||document.addEventListener("DOMContentLoaded",()=>{for(const L of S)L()}),S.push(y)):y()},C=(I,y=[],L=I)=>typeof I=="function"?I(...y):L,k=(I,y,L=!0)=>{if(!L)return void C(I);const N=(oe=>{if(!oe)return 0;let{transitionDuration:me,transitionDelay:ke}=window.getComputedStyle(oe);const Ge=Number.parseFloat(me),Ve=Number.parseFloat(ke);return Ge||Ve?(me=me.split(",")[0],ke=ke.split(",")[0],1e3*(Number.parseFloat(me)+Number.parseFloat(ke))):0})(y)+5;let K=!1;const q=({target:oe})=>{oe===y&&(K=!0,y.removeEventListener(i,q),C(I))};y.addEventListener(i,q),setTimeout(()=>{K||a(y)},N)},O=(I,y,L,N)=>{const K=I.length;let q=I.indexOf(y);return q===-1?!L&&N?I[K-1]:I[0]:(q+=L?1:-1,N&&(q=(q+K)%K),I[Math.max(0,Math.min(q,K-1))])},w=/[^.]*(?=\..*)\.|.*/,$=/\..*/,M=/::\d+$/,U={};let W=1;const R={mouseenter:"mouseover",mouseleave:"mouseout"},G=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function fe(I,y){return y&&`${y}::${W++}`||I.uidEvent||W++}function ae(I){const y=fe(I);return I.uidEvent=y,U[y]=U[y]||{},U[y]}function xe(I,y,L=null){return Object.values(I).find(N=>N.callable===y&&N.delegationSelector===L)}function ye(I,y,L){const N=typeof y=="string",K=N?L:y||L;let q=se(I);return G.has(q)||(q=I),[N,K,q]}function Ee(I,y,L,N,K){if(typeof y!="string"||!I)return;let[q,oe,me]=ye(y,L,N);y in R&&(oe=(ze=>function(et){if(!et.relatedTarget||et.relatedTarget!==et.delegateTarget&&!et.delegateTarget.contains(et.relatedTarget))return ze.call(this,et)})(oe));const ke=ae(I),Ge=ke[me]||(ke[me]={}),Ve=xe(Ge,oe,q?L:null);if(Ve)return void(Ve.oneOff=Ve.oneOff&&K);const Ne=fe(oe,y.replace(w,"")),rt=q?function(Xe,ze,et){return function ht(zt){const Qt=Xe.querySelectorAll(ze);for(let{target:Et}=zt;Et&&Et!==this;Et=Et.parentNode)for(const Pt of Qt)if(Pt===Et)return H(zt,{delegateTarget:Et}),ht.oneOff&&B.off(Xe,zt.type,ze,et),et.apply(Et,[zt])}}(I,L,oe):function(Xe,ze){return function et(ht){return H(ht,{delegateTarget:Xe}),et.oneOff&&B.off(Xe,ht.type,ze),ze.apply(Xe,[ht])}}(I,oe);rt.delegationSelector=q?L:null,rt.callable=oe,rt.oneOff=K,rt.uidEvent=Ne,Ge[Ne]=rt,I.addEventListener(me,rt,q)}function Pe(I,y,L,N,K){const q=xe(y[L],N,K);q&&(I.removeEventListener(L,q,!!K),delete y[L][q.uidEvent])}function ie(I,y,L,N){const K=y[L]||{};for(const[q,oe]of Object.entries(K))q.includes(N)&&Pe(I,y,L,oe.callable,oe.delegationSelector)}function se(I){return I=I.replace($,""),R[I]||I}const B={on(I,y,L,N){Ee(I,y,L,N,!1)},one(I,y,L,N){Ee(I,y,L,N,!0)},off(I,y,L,N){if(typeof y!="string"||!I)return;const[K,q,oe]=ye(y,L,N),me=oe!==y,ke=ae(I),Ge=ke[oe]||{},Ve=y.startsWith(".");if(q===void 0){if(Ve)for(const Ne of Object.keys(ke))ie(I,ke,Ne,y.slice(1));for(const[Ne,rt]of Object.entries(Ge)){const Xe=Ne.replace(M,"");me&&!y.includes(Xe)||Pe(I,ke,oe,rt.callable,rt.delegationSelector)}}else{if(!Object.keys(Ge).length)return;Pe(I,ke,oe,q,K?L:null)}},trigger(I,y,L){if(typeof y!="string"||!I)return null;const N=v();let K=null,q=!0,oe=!0,me=!1;y!==se(y)&&N&&(K=N.Event(y,L),N(I).trigger(K),q=!K.isPropagationStopped(),oe=!K.isImmediatePropagationStopped(),me=K.isDefaultPrevented());const ke=H(new Event(y,{bubbles:q,cancelable:!0}),L);return me&&ke.preventDefault(),oe&&I.dispatchEvent(ke),ke.defaultPrevented&&K&&K.preventDefault(),ke}};function H(I,y={}){for(const[L,N]of Object.entries(y))try{I[L]=N}catch{Object.defineProperty(I,L,{configurable:!0,get:()=>N})}return I}function Q(I){if(I==="true")return!0;if(I==="false")return!1;if(I===Number(I).toString())return Number(I);if(I===""||I==="null")return null;if(typeof I!="string")return I;try{return JSON.parse(decodeURIComponent(I))}catch{return I}}function we(I){return I.replace(/[A-Z]/g,y=>`-${y.toLowerCase()}`)}const Ae={setDataAttribute(I,y,L){I.setAttribute(`data-bs-${we(y)}`,L)},removeDataAttribute(I,y){I.removeAttribute(`data-bs-${we(y)}`)},getDataAttributes(I){if(!I)return{};const y={},L=Object.keys(I.dataset).filter(N=>N.startsWith("bs")&&!N.startsWith("bsConfig"));for(const N of L){let K=N.replace(/^bs/,"");K=K.charAt(0).toLowerCase()+K.slice(1,K.length),y[K]=Q(I.dataset[N])}return y},getDataAttribute:(I,y)=>Q(I.getAttribute(`data-bs-${we(y)}`))};class Oe{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(y){return y=this._mergeConfigObj(y),y=this._configAfterMerge(y),this._typeCheckConfig(y),y}_configAfterMerge(y){return y}_mergeConfigObj(y,L){const N=c(L)?Ae.getDataAttribute(L,"config"):{};return{...this.constructor.Default,...typeof N=="object"?N:{},...c(L)?Ae.getDataAttributes(L):{},...typeof y=="object"?y:{}}}_typeCheckConfig(y,L=this.constructor.DefaultType){for(const[K,q]of Object.entries(L)){const oe=y[K],me=c(oe)?"element":(N=oe)==null?`${N}`:Object.prototype.toString.call(N).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(q).test(me))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${K}" provided type "${me}" but expected type "${q}".`)}var N}}class Me extends Oe{constructor(y,L){super(),(y=u(y))&&(this._element=y,this._config=this._getConfig(L),r.set(this._element,this.constructor.DATA_KEY,this))}dispose(){r.remove(this._element,this.constructor.DATA_KEY),B.off(this._element,this.constructor.EVENT_KEY);for(const y of Object.getOwnPropertyNames(this))this[y]=null}_queueCallback(y,L,N=!0){k(y,L,N)}_getConfig(y){return y=this._mergeConfigObj(y,this._element),y=this._configAfterMerge(y),this._typeCheckConfig(y),y}static getInstance(y){return r.get(u(y),this.DATA_KEY)}static getOrCreateInstance(y,L={}){return this.getInstance(y)||new this(y,typeof L=="object"?L:null)}static get VERSION(){return"5.3.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(y){return`${y}${this.EVENT_KEY}`}}const ct=I=>{let y=I.getAttribute("data-bs-target");if(!y||y==="#"){let L=I.getAttribute("href");if(!L||!L.includes("#")&&!L.startsWith("."))return null;L.includes("#")&&!L.startsWith("#")&&(L=`#${L.split("#")[1]}`),y=L&&L!=="#"?L.trim():null}return y?y.split(",").map(L=>s(L)).join(","):null},Ce={find:(I,y=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(y,I)),findOne:(I,y=document.documentElement)=>Element.prototype.querySelector.call(y,I),children:(I,y)=>[].concat(...I.children).filter(L=>L.matches(y)),parents(I,y){const L=[];let N=I.parentNode.closest(y);for(;N;)L.push(N),N=N.parentNode.closest(y);return L},prev(I,y){let L=I.previousElementSibling;for(;L;){if(L.matches(y))return[L];L=L.previousElementSibling}return[]},next(I,y){let L=I.nextElementSibling;for(;L;){if(L.matches(y))return[L];L=L.nextElementSibling}return[]},focusableChildren(I){const y=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(L=>`${L}:not([tabindex^="-"])`).join(",");return this.find(y,I).filter(L=>!h(L)&&d(L))},getSelectorFromElement(I){const y=ct(I);return y&&Ce.findOne(y)?y:null},getElementFromSelector(I){const y=ct(I);return y?Ce.findOne(y):null},getMultipleElementsFromSelector(I){const y=ct(I);return y?Ce.find(y):[]}},nt=(I,y="hide")=>{const L=`click.dismiss${I.EVENT_KEY}`,N=I.NAME;B.on(document,L,`[data-bs-dismiss="${N}"]`,function(K){if(["A","AREA"].includes(this.tagName)&&K.preventDefault(),h(this))return;const q=Ce.getElementFromSelector(this)||this.closest(`.${N}`);I.getOrCreateInstance(q)[y]()})},Ut=".bs.alert",an=`close${Ut}`,Bn=`closed${Ut}`;class Ot extends Me{static get NAME(){return"alert"}close(){if(B.trigger(this._element,an).defaultPrevented)return;this._element.classList.remove("show");const y=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,y)}_destroyElement(){this._element.remove(),B.trigger(this._element,Bn),this.dispose()}static jQueryInterface(y){return this.each(function(){const L=Ot.getOrCreateInstance(this);if(typeof y=="string"){if(L[y]===void 0||y.startsWith("_")||y==="constructor")throw new TypeError(`No method named "${y}"`);L[y](this)}})}}nt(Ot,"close"),_(Ot);const ls='[data-bs-toggle="button"]';class ri extends Me{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(y){return this.each(function(){const L=ri.getOrCreateInstance(this);y==="toggle"&&L[y]()})}}B.on(document,"click.bs.button.data-api",ls,I=>{I.preventDefault();const y=I.target.closest(ls);ri.getOrCreateInstance(y).toggle()}),_(ri);const Cr=".bs.swipe",zs=`touchstart${Cr}`,Mi=`touchmove${Cr}`,Ks=`touchend${Cr}`,pi=`pointerdown${Cr}`,On=`pointerup${Cr}`,mr={endCallback:null,leftCallback:null,rightCallback:null},Fi={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class ii extends Oe{constructor(y,L){super(),this._element=y,y&&ii.isSupported()&&(this._config=this._getConfig(L),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return mr}static get DefaultType(){return Fi}static get NAME(){return"swipe"}dispose(){B.off(this._element,Cr)}_start(y){this._supportPointerEvents?this._eventIsPointerPenTouch(y)&&(this._deltaX=y.clientX):this._deltaX=y.touches[0].clientX}_end(y){this._eventIsPointerPenTouch(y)&&(this._deltaX=y.clientX-this._deltaX),this._handleSwipe(),C(this._config.endCallback)}_move(y){this._deltaX=y.touches&&y.touches.length>1?0:y.touches[0].clientX-this._deltaX}_handleSwipe(){const y=Math.abs(this._deltaX);if(y<=40)return;const L=y/this._deltaX;this._deltaX=0,L&&C(L>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(B.on(this._element,pi,y=>this._start(y)),B.on(this._element,On,y=>this._end(y)),this._element.classList.add("pointer-event")):(B.on(this._element,zs,y=>this._start(y)),B.on(this._element,Mi,y=>this._move(y)),B.on(this._element,Ks,y=>this._end(y)))}_eventIsPointerPenTouch(y){return this._supportPointerEvents&&(y.pointerType==="pen"||y.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const pe=".bs.carousel",Z=".data-api",Te="next",Se="prev",lt="left",tt="right",bt=`slide${pe}`,ue=`slid${pe}`,ge=`keydown${pe}`,Ke=`mouseenter${pe}`,Be=`mouseleave${pe}`,Fe=`dragstart${pe}`,mt=`load${pe}${Z}`,Nt=`click${pe}${Z}`,jt="carousel",Ct="active",en=".active",Mt=".carousel-item",fn=en+Mt,gr={ArrowLeft:tt,ArrowRight:lt},Fr={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},$i={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class V extends Me{constructor(y,L){super(y,L),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Ce.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===jt&&this.cycle()}static get Default(){return Fr}static get DefaultType(){return $i}static get NAME(){return"carousel"}next(){this._slide(Te)}nextWhenVisible(){!document.hidden&&d(this._element)&&this.next()}prev(){this._slide(Se)}pause(){this._isSliding&&a(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?B.one(this._element,ue,()=>this.cycle()):this.cycle())}to(y){const L=this._getItems();if(y>L.length-1||y<0)return;if(this._isSliding)return void B.one(this._element,ue,()=>this.to(y));const N=this._getItemIndex(this._getActive());if(N===y)return;const K=y>N?Te:Se;this._slide(K,L[y])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(y){return y.defaultInterval=y.interval,y}_addEventListeners(){this._config.keyboard&&B.on(this._element,ge,y=>this._keydown(y)),this._config.pause==="hover"&&(B.on(this._element,Ke,()=>this.pause()),B.on(this._element,Be,()=>this._maybeEnableCycle())),this._config.touch&&ii.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const L of Ce.find(".carousel-item img",this._element))B.on(L,Fe,N=>N.preventDefault());const y={leftCallback:()=>this._slide(this._directionToOrder(lt)),rightCallback:()=>this._slide(this._directionToOrder(tt)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new ii(this._element,y)}_keydown(y){if(/input|textarea/i.test(y.target.tagName))return;const L=gr[y.key];L&&(y.preventDefault(),this._slide(this._directionToOrder(L)))}_getItemIndex(y){return this._getItems().indexOf(y)}_setActiveIndicatorElement(y){if(!this._indicatorsElement)return;const L=Ce.findOne(en,this._indicatorsElement);L.classList.remove(Ct),L.removeAttribute("aria-current");const N=Ce.findOne(`[data-bs-slide-to="${y}"]`,this._indicatorsElement);N&&(N.classList.add(Ct),N.setAttribute("aria-current","true"))}_updateInterval(){const y=this._activeElement||this._getActive();if(!y)return;const L=Number.parseInt(y.getAttribute("data-bs-interval"),10);this._config.interval=L||this._config.defaultInterval}_slide(y,L=null){if(this._isSliding)return;const N=this._getActive(),K=y===Te,q=L||O(this._getItems(),N,K,this._config.wrap);if(q===N)return;const oe=this._getItemIndex(q),me=Ne=>B.trigger(this._element,Ne,{relatedTarget:q,direction:this._orderToDirection(y),from:this._getItemIndex(N),to:oe});if(me(bt).defaultPrevented||!N||!q)return;const ke=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(oe),this._activeElement=q;const Ge=K?"carousel-item-start":"carousel-item-end",Ve=K?"carousel-item-next":"carousel-item-prev";q.classList.add(Ve),x(q),N.classList.add(Ge),q.classList.add(Ge),this._queueCallback(()=>{q.classList.remove(Ge,Ve),q.classList.add(Ct),N.classList.remove(Ct,Ve,Ge),this._isSliding=!1,me(ue)},N,this._isAnimated()),ke&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return Ce.findOne(fn,this._element)}_getItems(){return Ce.find(Mt,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(y){return T()?y===lt?Se:Te:y===lt?Te:Se}_orderToDirection(y){return T()?y===Se?lt:tt:y===Se?tt:lt}static jQueryInterface(y){return this.each(function(){const L=V.getOrCreateInstance(this,y);if(typeof y!="number"){if(typeof y=="string"){if(L[y]===void 0||y.startsWith("_")||y==="constructor")throw new TypeError(`No method named "${y}"`);L[y]()}}else L.to(y)})}}B.on(document,Nt,"[data-bs-slide], [data-bs-slide-to]",function(I){const y=Ce.getElementFromSelector(this);if(!y||!y.classList.contains(jt))return;I.preventDefault();const L=V.getOrCreateInstance(y),N=this.getAttribute("data-bs-slide-to");return N?(L.to(N),void L._maybeEnableCycle()):Ae.getDataAttribute(this,"slide")==="next"?(L.next(),void L._maybeEnableCycle()):(L.prev(),void L._maybeEnableCycle())}),B.on(window,mt,()=>{const I=Ce.find('[data-bs-ride="carousel"]');for(const y of I)V.getOrCreateInstance(y)}),_(V);const X=".bs.collapse",ce=`show${X}`,be=`shown${X}`,He=`hide${X}`,Qe=`hidden${X}`,ut=`click${X}.data-api`,$e="show",Ue="collapse",De="collapsing",dt=`:scope .${Ue} .${Ue}`,vt='[data-bs-toggle="collapse"]',sn={parent:null,toggle:!0},kn={parent:"(null|element)",toggle:"boolean"};class wt extends Me{constructor(y,L){super(y,L),this._isTransitioning=!1,this._triggerArray=[];const N=Ce.find(vt);for(const K of N){const q=Ce.getSelectorFromElement(K),oe=Ce.find(q).filter(me=>me===this._element);q!==null&&oe.length&&this._triggerArray.push(K)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return sn}static get DefaultType(){return kn}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let y=[];if(this._config.parent&&(y=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(K=>K!==this._element).map(K=>wt.getOrCreateInstance(K,{toggle:!1}))),y.length&&y[0]._isTransitioning||B.trigger(this._element,ce).defaultPrevented)return;for(const K of y)K.hide();const L=this._getDimension();this._element.classList.remove(Ue),this._element.classList.add(De),this._element.style[L]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const N=`scroll${L[0].toUpperCase()+L.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(De),this._element.classList.add(Ue,$e),this._element.style[L]="",B.trigger(this._element,be)},this._element,!0),this._element.style[L]=`${this._element[N]}px`}hide(){if(this._isTransitioning||!this._isShown()||B.trigger(this._element,He).defaultPrevented)return;const y=this._getDimension();this._element.style[y]=`${this._element.getBoundingClientRect()[y]}px`,x(this._element),this._element.classList.add(De),this._element.classList.remove(Ue,$e);for(const L of this._triggerArray){const N=Ce.getElementFromSelector(L);N&&!this._isShown(N)&&this._addAriaAndCollapsedClass([L],!1)}this._isTransitioning=!0,this._element.style[y]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(De),this._element.classList.add(Ue),B.trigger(this._element,Qe)},this._element,!0)}_isShown(y=this._element){return y.classList.contains($e)}_configAfterMerge(y){return y.toggle=!!y.toggle,y.parent=u(y.parent),y}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const y=this._getFirstLevelChildren(vt);for(const L of y){const N=Ce.getElementFromSelector(L);N&&this._addAriaAndCollapsedClass([L],this._isShown(N))}}_getFirstLevelChildren(y){const L=Ce.find(dt,this._config.parent);return Ce.find(y,this._config.parent).filter(N=>!L.includes(N))}_addAriaAndCollapsedClass(y,L){if(y.length)for(const N of y)N.classList.toggle("collapsed",!L),N.setAttribute("aria-expanded",L)}static jQueryInterface(y){const L={};return typeof y=="string"&&/show|hide/.test(y)&&(L.toggle=!1),this.each(function(){const N=wt.getOrCreateInstance(this,L);if(typeof y=="string"){if(N[y]===void 0)throw new TypeError(`No method named "${y}"`);N[y]()}})}}B.on(document,ut,vt,function(I){(I.target.tagName==="A"||I.delegateTarget&&I.delegateTarget.tagName==="A")&&I.preventDefault();for(const y of Ce.getMultipleElementsFromSelector(this))wt.getOrCreateInstance(y,{toggle:!1}).toggle()}),_(wt);var xt="top",Rt="bottom",bn="right",yn="left",lr="auto",Nn=[xt,Rt,bn,yn],$r="start",Br="end",mi="clippingParents",Xt="viewport",si="popper",Ft="reference",xn=Nn.reduce(function(I,y){return I.concat([y+"-"+$r,y+"-"+Br])},[]),oi=[].concat(Nn,[lr]).reduce(function(I,y){return I.concat([y,y+"-"+$r,y+"-"+Br])},[]),cs="beforeRead",hn="read",Ur="afterRead",yr="beforeMain",Ja="main",jr="afterMain",Ou="beforeWrite",Nu="write",Mu="afterWrite",ra=[cs,hn,Ur,yr,Ja,jr,Ou,Nu,Mu];function Rr(I){return I?(I.nodeName||"").toLowerCase():null}function Un(I){if(I==null)return window;if(I.toString()!=="[object Window]"){var y=I.ownerDocument;return y&&y.defaultView||window}return I}function gi(I){return I instanceof Un(I).Element||I instanceof Element}function Hr(I){return I instanceof Un(I).HTMLElement||I instanceof HTMLElement}function lc(I){return typeof ShadowRoot<"u"&&(I instanceof Un(I).ShadowRoot||I instanceof ShadowRoot)}const ia={name:"applyStyles",enabled:!0,phase:"write",fn:function(I){var y=I.state;Object.keys(y.elements).forEach(function(L){var N=y.styles[L]||{},K=y.attributes[L]||{},q=y.elements[L];Hr(q)&&Rr(q)&&(Object.assign(q.style,N),Object.keys(K).forEach(function(oe){var me=K[oe];me===!1?q.removeAttribute(oe):q.setAttribute(oe,me===!0?"":me)}))})},effect:function(I){var y=I.state,L={popper:{position:y.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(y.elements.popper.style,L.popper),y.styles=L,y.elements.arrow&&Object.assign(y.elements.arrow.style,L.arrow),function(){Object.keys(y.elements).forEach(function(N){var K=y.elements[N],q=y.attributes[N]||{},oe=Object.keys(y.styles.hasOwnProperty(N)?y.styles[N]:L[N]).reduce(function(me,ke){return me[ke]="",me},{});Hr(K)&&Rr(K)&&(Object.assign(K.style,oe),Object.keys(q).forEach(function(me){K.removeAttribute(me)}))})}},requires:["computeStyles"]};function ai(I){return I.split("-")[0]}var Bi=Math.max,us=Math.min,vo=Math.round;function sa(){var I=navigator.userAgentData;return I!=null&&I.brands&&Array.isArray(I.brands)?I.brands.map(function(y){return y.brand+"/"+y.version}).join(" "):navigator.userAgent}function Ht(){return!/^((?!chrome|android).)*safari/i.test(sa())}function Ws(I,y,L){y===void 0&&(y=!1),L===void 0&&(L=!1);var N=I.getBoundingClientRect(),K=1,q=1;y&&Hr(I)&&(K=I.offsetWidth>0&&vo(N.width)/I.offsetWidth||1,q=I.offsetHeight>0&&vo(N.height)/I.offsetHeight||1);var oe=(gi(I)?Un(I):window).visualViewport,me=!Ht()&&L,ke=(N.left+(me&&oe?oe.offsetLeft:0))/K,Ge=(N.top+(me&&oe?oe.offsetTop:0))/q,Ve=N.width/K,Ne=N.height/q;return{width:Ve,height:Ne,top:Ge,right:ke+Ve,bottom:Ge+Ne,left:ke,x:ke,y:Ge}}function Za(I){var y=Ws(I),L=I.offsetWidth,N=I.offsetHeight;return Math.abs(y.width-L)<=1&&(L=y.width),Math.abs(y.height-N)<=1&&(N=y.height),{x:I.offsetLeft,y:I.offsetTop,width:L,height:N}}function el(I,y){var L=y.getRootNode&&y.getRootNode();if(I.contains(y))return!0;if(L&&lc(L)){var N=y;do{if(N&&I.isSameNode(N))return!0;N=N.parentNode||N.host}while(N)}return!1}function yi(I){return Un(I).getComputedStyle(I)}function Fu(I){return["table","td","th"].indexOf(Rr(I))>=0}function Ui(I){return((gi(I)?I.ownerDocument:I.document)||window.document).documentElement}function xo(I){return Rr(I)==="html"?I:I.assignedSlot||I.parentNode||(lc(I)?I.host:null)||Ui(I)}function oa(I){return Hr(I)&&yi(I).position!=="fixed"?I.offsetParent:null}function Gr(I){for(var y=Un(I),L=oa(I);L&&Fu(L)&&yi(L).position==="static";)L=oa(L);return L&&(Rr(L)==="html"||Rr(L)==="body"&&yi(L).position==="static")?y:L||function(N){var K=/firefox/i.test(sa());if(/Trident/i.test(sa())&&Hr(N)&&yi(N).position==="fixed")return null;var q=xo(N);for(lc(q)&&(q=q.host);Hr(q)&&["html","body"].indexOf(Rr(q))<0;){var oe=yi(q);if(oe.transform!=="none"||oe.perspective!=="none"||oe.contain==="paint"||["transform","perspective"].indexOf(oe.willChange)!==-1||K&&oe.willChange==="filter"||K&&oe.filter&&oe.filter!=="none")return q;q=q.parentNode}return null}(I)||y}function vi(I){return["top","bottom"].indexOf(I)>=0?"x":"y"}function Vr(I,y,L){return Bi(I,us(y,L))}function So(I){return Object.assign({},{top:0,right:0,bottom:0,left:0},I)}function Eo(I,y){return y.reduce(function(L,N){return L[N]=I,L},{})}const ji={name:"arrow",enabled:!0,phase:"main",fn:function(I){var y,L=I.state,N=I.name,K=I.options,q=L.elements.arrow,oe=L.modifiersData.popperOffsets,me=ai(L.placement),ke=vi(me),Ge=[yn,bn].indexOf(me)>=0?"height":"width";if(q&&oe){var Ve=function(Gt,Kt){return So(typeof(Gt=typeof Gt=="function"?Gt(Object.assign({},Kt.rects,{placement:Kt.placement})):Gt)!="number"?Gt:Eo(Gt,Nn))}(K.padding,L),Ne=Za(q),rt=ke==="y"?xt:yn,Xe=ke==="y"?Rt:bn,ze=L.rects.reference[Ge]+L.rects.reference[ke]-oe[ke]-L.rects.popper[Ge],et=oe[ke]-L.rects.reference[ke],ht=Gr(q),zt=ht?ke==="y"?ht.clientHeight||0:ht.clientWidth||0:0,Qt=ze/2-et/2,Et=Ve[rt],Pt=zt-Ne[Ge]-Ve[Xe],gt=zt/2-Ne[Ge]/2+Qt,_t=Vr(Et,gt,Pt),At=ke;L.modifiersData[N]=((y={})[At]=_t,y.centerOffset=_t-gt,y)}},effect:function(I){var y=I.state,L=I.options.element,N=L===void 0?"[data-popper-arrow]":L;N!=null&&(typeof N!="string"||(N=y.elements.popper.querySelector(N)))&&el(y.elements.popper,N)&&(y.elements.arrow=N)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function To(I){return I.split("-")[1]}var $u={top:"auto",right:"auto",bottom:"auto",left:"auto"};function bo(I){var y,L=I.popper,N=I.popperRect,K=I.placement,q=I.variation,oe=I.offsets,me=I.position,ke=I.gpuAcceleration,Ge=I.adaptive,Ve=I.roundOffsets,Ne=I.isFixed,rt=oe.x,Xe=rt===void 0?0:rt,ze=oe.y,et=ze===void 0?0:ze,ht=typeof Ve=="function"?Ve({x:Xe,y:et}):{x:Xe,y:et};Xe=ht.x,et=ht.y;var zt=oe.hasOwnProperty("x"),Qt=oe.hasOwnProperty("y"),Et=yn,Pt=xt,gt=window;if(Ge){var _t=Gr(L),At="clientHeight",Gt="clientWidth";_t===Un(L)&&yi(_t=Ui(L)).position!=="static"&&me==="absolute"&&(At="scrollHeight",Gt="scrollWidth"),(K===xt||(K===yn||K===bn)&&q===Br)&&(Pt=Rt,et-=(Ne&&_t===gt&&gt.visualViewport?gt.visualViewport.height:_t[At])-N.height,et*=ke?1:-1),K!==yn&&(K!==xt&&K!==Rt||q!==Br)||(Et=bn,Xe-=(Ne&&_t===gt&&gt.visualViewport?gt.visualViewport.width:_t[Gt])-N.width,Xe*=ke?1:-1)}var Kt,ln=Object.assign({position:me},Ge&&$u),qn=Ve===!0?function(Wr,Xn){var jn=Wr.x,kr=Wr.y,cn=Xn.devicePixelRatio||1;return{x:vo(jn*cn)/cn||0,y:vo(kr*cn)/cn||0}}({x:Xe,y:et},Un(L)):{x:Xe,y:et};return Xe=qn.x,et=qn.y,ke?Object.assign({},ln,((Kt={})[Pt]=Qt?"0":"",Kt[Et]=zt?"0":"",Kt.transform=(gt.devicePixelRatio||1)<=1?"translate("+Xe+"px, "+et+"px)":"translate3d("+Xe+"px, "+et+"px, 0)",Kt)):Object.assign({},ln,((y={})[Pt]=Qt?et+"px":"",y[Et]=zt?Xe+"px":"",y.transform="",y))}const cc={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(I){var y=I.state,L=I.options,N=L.gpuAcceleration,K=N===void 0||N,q=L.adaptive,oe=q===void 0||q,me=L.roundOffsets,ke=me===void 0||me,Ge={placement:ai(y.placement),variation:To(y.placement),popper:y.elements.popper,popperRect:y.rects.popper,gpuAcceleration:K,isFixed:y.options.strategy==="fixed"};y.modifiersData.popperOffsets!=null&&(y.styles.popper=Object.assign({},y.styles.popper,bo(Object.assign({},Ge,{offsets:y.modifiersData.popperOffsets,position:y.options.strategy,adaptive:oe,roundOffsets:ke})))),y.modifiersData.arrow!=null&&(y.styles.arrow=Object.assign({},y.styles.arrow,bo(Object.assign({},Ge,{offsets:y.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:ke})))),y.attributes.popper=Object.assign({},y.attributes.popper,{"data-popper-placement":y.placement})},data:{}};var aa={passive:!0};const wo={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(I){var y=I.state,L=I.instance,N=I.options,K=N.scroll,q=K===void 0||K,oe=N.resize,me=oe===void 0||oe,ke=Un(y.elements.popper),Ge=[].concat(y.scrollParents.reference,y.scrollParents.popper);return q&&Ge.forEach(function(Ve){Ve.addEventListener("scroll",L.update,aa)}),me&&ke.addEventListener("resize",L.update,aa),function(){q&&Ge.forEach(function(Ve){Ve.removeEventListener("scroll",L.update,aa)}),me&&ke.removeEventListener("resize",L.update,aa)}},data:{}};var Bu={left:"right",right:"left",bottom:"top",top:"bottom"};function tl(I){return I.replace(/left|right|bottom|top/g,function(y){return Bu[y]})}var la={start:"end",end:"start"};function _o(I){return I.replace(/start|end/g,function(y){return la[y]})}function ds(I){var y=Un(I);return{scrollLeft:y.pageXOffset,scrollTop:y.pageYOffset}}function Lo(I){return Ws(Ui(I)).left+ds(I).scrollLeft}function uc(I){var y=yi(I),L=y.overflow,N=y.overflowX,K=y.overflowY;return/auto|scroll|overlay|hidden/.test(L+K+N)}function Uu(I){return["html","body","#document"].indexOf(Rr(I))>=0?I.ownerDocument.body:Hr(I)&&uc(I)?I:Uu(xo(I))}function Ys(I,y){var L;y===void 0&&(y=[]);var N=Uu(I),K=N===((L=I.ownerDocument)==null?void 0:L.body),q=Un(N),oe=K?[q].concat(q.visualViewport||[],uc(N)?N:[]):N,me=y.concat(oe);return K?me:me.concat(Ys(xo(oe)))}function Co(I){return Object.assign({},I,{left:I.x,top:I.y,right:I.x+I.width,bottom:I.y+I.height})}function nl(I,y,L){return y===Xt?Co(function(N,K){var q=Un(N),oe=Ui(N),me=q.visualViewport,ke=oe.clientWidth,Ge=oe.clientHeight,Ve=0,Ne=0;if(me){ke=me.width,Ge=me.height;var rt=Ht();(rt||!rt&&K==="fixed")&&(Ve=me.offsetLeft,Ne=me.offsetTop)}return{width:ke,height:Ge,x:Ve+Lo(N),y:Ne}}(I,L)):gi(y)?function(N,K){var q=Ws(N,!1,K==="fixed");return q.top=q.top+N.clientTop,q.left=q.left+N.clientLeft,q.bottom=q.top+N.clientHeight,q.right=q.left+N.clientWidth,q.width=N.clientWidth,q.height=N.clientHeight,q.x=q.left,q.y=q.top,q}(y,L):Co(function(N){var K,q=Ui(N),oe=ds(N),me=(K=N.ownerDocument)==null?void 0:K.body,ke=Bi(q.scrollWidth,q.clientWidth,me?me.scrollWidth:0,me?me.clientWidth:0),Ge=Bi(q.scrollHeight,q.clientHeight,me?me.scrollHeight:0,me?me.clientHeight:0),Ve=-oe.scrollLeft+Lo(N),Ne=-oe.scrollTop;return yi(me||q).direction==="rtl"&&(Ve+=Bi(q.clientWidth,me?me.clientWidth:0)-ke),{width:ke,height:Ge,x:Ve,y:Ne}}(Ui(I)))}function dc(I){var y,L=I.reference,N=I.element,K=I.placement,q=K?ai(K):null,oe=K?To(K):null,me=L.x+L.width/2-N.width/2,ke=L.y+L.height/2-N.height/2;switch(q){case xt:y={x:me,y:L.y-N.height};break;case Rt:y={x:me,y:L.y+L.height};break;case bn:y={x:L.x+L.width,y:ke};break;case yn:y={x:L.x-N.width,y:ke};break;default:y={x:L.x,y:L.y}}var Ge=q?vi(q):null;if(Ge!=null){var Ve=Ge==="y"?"height":"width";switch(oe){case $r:y[Ge]=y[Ge]-(L[Ve]/2-N[Ve]/2);break;case Br:y[Ge]=y[Ge]+(L[Ve]/2-N[Ve]/2)}}return y}function Ar(I,y){y===void 0&&(y={});var L=y,N=L.placement,K=N===void 0?I.placement:N,q=L.strategy,oe=q===void 0?I.strategy:q,me=L.boundary,ke=me===void 0?mi:me,Ge=L.rootBoundary,Ve=Ge===void 0?Xt:Ge,Ne=L.elementContext,rt=Ne===void 0?si:Ne,Xe=L.altBoundary,ze=Xe!==void 0&&Xe,et=L.padding,ht=et===void 0?0:et,zt=So(typeof ht!="number"?ht:Eo(ht,Nn)),Qt=rt===si?Ft:si,Et=I.rects.popper,Pt=I.elements[ze?Qt:rt],gt=function(Xn,jn,kr,cn){var Ir=jn==="clippingParents"?function(Wt){var Hn=Ys(xo(Wt)),Gn=["absolute","fixed"].indexOf(yi(Wt).position)>=0&&Hr(Wt)?Gr(Wt):Wt;return gi(Gn)?Hn.filter(function(In){return gi(In)&&el(In,Gn)&&Rr(In)!=="body"}):[]}(Xn):[].concat(jn),ur=[].concat(Ir,[kr]),Es=ur[0],_n=ur.reduce(function(Wt,Hn){var Gn=nl(Xn,Hn,cn);return Wt.top=Bi(Gn.top,Wt.top),Wt.right=us(Gn.right,Wt.right),Wt.bottom=us(Gn.bottom,Wt.bottom),Wt.left=Bi(Gn.left,Wt.left),Wt},nl(Xn,Es,cn));return _n.width=_n.right-_n.left,_n.height=_n.bottom-_n.top,_n.x=_n.left,_n.y=_n.top,_n}(gi(Pt)?Pt:Pt.contextElement||Ui(I.elements.popper),ke,Ve,oe),_t=Ws(I.elements.reference),At=dc({reference:_t,element:Et,strategy:"absolute",placement:K}),Gt=Co(Object.assign({},Et,At)),Kt=rt===si?Gt:_t,ln={top:gt.top-Kt.top+zt.top,bottom:Kt.bottom-gt.bottom+zt.bottom,left:gt.left-Kt.left+zt.left,right:Kt.right-gt.right+zt.right},qn=I.modifiersData.offset;if(rt===si&&qn){var Wr=qn[K];Object.keys(ln).forEach(function(Xn){var jn=[bn,Rt].indexOf(Xn)>=0?1:-1,kr=[xt,Rt].indexOf(Xn)>=0?"y":"x";ln[Xn]+=Wr[kr]*jn})}return ln}function fc(I,y){y===void 0&&(y={});var L=y,N=L.placement,K=L.boundary,q=L.rootBoundary,oe=L.padding,me=L.flipVariations,ke=L.allowedAutoPlacements,Ge=ke===void 0?oi:ke,Ve=To(N),Ne=Ve?me?xn:xn.filter(function(ze){return To(ze)===Ve}):Nn,rt=Ne.filter(function(ze){return Ge.indexOf(ze)>=0});rt.length===0&&(rt=Ne);var Xe=rt.reduce(function(ze,et){return ze[et]=Ar(I,{placement:et,boundary:K,rootBoundary:q,padding:oe})[ai(et)],ze},{});return Object.keys(Xe).sort(function(ze,et){return Xe[ze]-Xe[et]})}const ca={name:"flip",enabled:!0,phase:"main",fn:function(I){var y=I.state,L=I.options,N=I.name;if(!y.modifiersData[N]._skip){for(var K=L.mainAxis,q=K===void 0||K,oe=L.altAxis,me=oe===void 0||oe,ke=L.fallbackPlacements,Ge=L.padding,Ve=L.boundary,Ne=L.rootBoundary,rt=L.altBoundary,Xe=L.flipVariations,ze=Xe===void 0||Xe,et=L.allowedAutoPlacements,ht=y.options.placement,zt=ai(ht),Qt=ke||(zt!==ht&&ze?function(Wt){if(ai(Wt)===lr)return[];var Hn=tl(Wt);return[_o(Wt),Hn,_o(Hn)]}(ht):[tl(ht)]),Et=[ht].concat(Qt).reduce(function(Wt,Hn){return Wt.concat(ai(Hn)===lr?fc(y,{placement:Hn,boundary:Ve,rootBoundary:Ne,padding:Ge,flipVariations:ze,allowedAutoPlacements:et}):Hn)},[]),Pt=y.rects.reference,gt=y.rects.popper,_t=new Map,At=!0,Gt=Et[0],Kt=0;Kt<Et.length;Kt++){var ln=Et[Kt],qn=ai(ln),Wr=To(ln)===$r,Xn=[xt,Rt].indexOf(qn)>=0,jn=Xn?"width":"height",kr=Ar(y,{placement:ln,boundary:Ve,rootBoundary:Ne,altBoundary:rt,padding:Ge}),cn=Xn?Wr?bn:yn:Wr?Rt:xt;Pt[jn]>gt[jn]&&(cn=tl(cn));var Ir=tl(cn),ur=[];if(q&&ur.push(kr[qn]<=0),me&&ur.push(kr[cn]<=0,kr[Ir]<=0),ur.every(function(Wt){return Wt})){Gt=ln,At=!1;break}_t.set(ln,ur)}if(At)for(var Es=function(Wt){var Hn=Et.find(function(Gn){var In=_t.get(Gn);if(In)return In.slice(0,Wt).every(function(Li){return Li})});if(Hn)return Gt=Hn,"break"},_n=ze?3:1;_n>0&&Es(_n)!=="break";_n--);y.placement!==Gt&&(y.modifiersData[N]._skip=!0,y.placement=Gt,y.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function hc(I,y,L){return L===void 0&&(L={x:0,y:0}),{top:I.top-y.height-L.y,right:I.right-y.width+L.x,bottom:I.bottom-y.height+L.y,left:I.left-y.width-L.x}}function ua(I){return[xt,bn,Rt,yn].some(function(y){return I[y]>=0})}const da={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(I){var y=I.state,L=I.name,N=y.rects.reference,K=y.rects.popper,q=y.modifiersData.preventOverflow,oe=Ar(y,{elementContext:"reference"}),me=Ar(y,{altBoundary:!0}),ke=hc(oe,N),Ge=hc(me,K,q),Ve=ua(ke),Ne=ua(Ge);y.modifiersData[L]={referenceClippingOffsets:ke,popperEscapeOffsets:Ge,isReferenceHidden:Ve,hasPopperEscaped:Ne},y.attributes.popper=Object.assign({},y.attributes.popper,{"data-popper-reference-hidden":Ve,"data-popper-escaped":Ne})}},pc={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(I){var y=I.state,L=I.options,N=I.name,K=L.offset,q=K===void 0?[0,0]:K,oe=oi.reduce(function(Ve,Ne){return Ve[Ne]=function(rt,Xe,ze){var et=ai(rt),ht=[yn,xt].indexOf(et)>=0?-1:1,zt=typeof ze=="function"?ze(Object.assign({},Xe,{placement:rt})):ze,Qt=zt[0],Et=zt[1];return Qt=Qt||0,Et=(Et||0)*ht,[yn,bn].indexOf(et)>=0?{x:Et,y:Qt}:{x:Qt,y:Et}}(Ne,y.rects,q),Ve},{}),me=oe[y.placement],ke=me.x,Ge=me.y;y.modifiersData.popperOffsets!=null&&(y.modifiersData.popperOffsets.x+=ke,y.modifiersData.popperOffsets.y+=Ge),y.modifiersData[N]=oe}},cr={name:"popperOffsets",enabled:!0,phase:"read",fn:function(I){var y=I.state,L=I.name;y.modifiersData[L]=dc({reference:y.rects.reference,element:y.rects.popper,strategy:"absolute",placement:y.placement})},data:{}},qs={name:"preventOverflow",enabled:!0,phase:"main",fn:function(I){var y=I.state,L=I.options,N=I.name,K=L.mainAxis,q=K===void 0||K,oe=L.altAxis,me=oe!==void 0&&oe,ke=L.boundary,Ge=L.rootBoundary,Ve=L.altBoundary,Ne=L.padding,rt=L.tether,Xe=rt===void 0||rt,ze=L.tetherOffset,et=ze===void 0?0:ze,ht=Ar(y,{boundary:ke,rootBoundary:Ge,padding:Ne,altBoundary:Ve}),zt=ai(y.placement),Qt=To(y.placement),Et=!Qt,Pt=vi(zt),gt=Pt==="x"?"y":"x",_t=y.modifiersData.popperOffsets,At=y.rects.reference,Gt=y.rects.popper,Kt=typeof et=="function"?et(Object.assign({},y.rects,{placement:y.placement})):et,ln=typeof Kt=="number"?{mainAxis:Kt,altAxis:Kt}:Object.assign({mainAxis:0,altAxis:0},Kt),qn=y.modifiersData.offset?y.modifiersData.offset[y.placement]:null,Wr={x:0,y:0};if(_t){if(q){var Xn,jn=Pt==="y"?xt:yn,kr=Pt==="y"?Rt:bn,cn=Pt==="y"?"height":"width",Ir=_t[Pt],ur=Ir+ht[jn],Es=Ir-ht[kr],_n=Xe?-Gt[cn]/2:0,Wt=Qt===$r?At[cn]:Gt[cn],Hn=Qt===$r?-Gt[cn]:-At[cn],Gn=y.elements.arrow,In=Xe&&Gn?Za(Gn):{width:0,height:0},Li=y.modifiersData["arrow#persistent"]?y.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},Tl=Li[jn],kc=Li[kr],Yr=Vr(0,At[cn],In[cn]),Ts=Et?At[cn]/2-_n-Yr-Tl-ln.mainAxis:Wt-Yr-Tl-ln.mainAxis,Ic=Et?-At[cn]/2+_n+Yr+kc+ln.mainAxis:Hn+Yr+kc+ln.mainAxis,bl=y.elements.arrow&&Gr(y.elements.arrow),Ki=bl?Pt==="y"?bl.clientTop||0:bl.clientLeft||0:0,Wi=(Xn=qn==null?void 0:qn[Pt])!=null?Xn:0,wl=Ir+Ic-Wi,Pc=Vr(Xe?us(ur,Ir+Ts-Wi-Ki):ur,Ir,Xe?Bi(Es,wl):Es);_t[Pt]=Pc,Wr[Pt]=Pc-Ir}if(me){var _a,bd=Pt==="x"?xt:yn,La=Pt==="x"?Rt:bn,Qn=_t[gt],bs=gt==="y"?"height":"width",Bo=Qn+ht[bd],ws=Qn-ht[La],Ca=[xt,yn].indexOf(zt)!==-1,io=(_a=qn==null?void 0:qn[gt])!=null?_a:0,Dc=Ca?Bo:Qn-At[bs]-Gt[bs]-io+ln.altAxis,_l=Ca?Qn+At[bs]+Gt[bs]-io-ln.altAxis:ws,pn=Xe&&Ca?function(Ll,Oc,Ra){var Aa=Vr(Ll,Oc,Ra);return Aa>Ra?Ra:Aa}(Dc,Qn,_l):Vr(Xe?Dc:Bo,Qn,Xe?_l:ws);_t[gt]=pn,Wr[gt]=pn-Qn}y.modifiersData[N]=Wr}},requiresIfExists:["offset"]};function mc(I,y,L){L===void 0&&(L=!1);var N,K,q=Hr(y),oe=Hr(y)&&function(Ne){var rt=Ne.getBoundingClientRect(),Xe=vo(rt.width)/Ne.offsetWidth||1,ze=vo(rt.height)/Ne.offsetHeight||1;return Xe!==1||ze!==1}(y),me=Ui(y),ke=Ws(I,oe,L),Ge={scrollLeft:0,scrollTop:0},Ve={x:0,y:0};return(q||!q&&!L)&&((Rr(y)!=="body"||uc(me))&&(Ge=(N=y)!==Un(N)&&Hr(N)?{scrollLeft:(K=N).scrollLeft,scrollTop:K.scrollTop}:ds(N)),Hr(y)?((Ve=Ws(y,!0)).x+=y.clientLeft,Ve.y+=y.clientTop):me&&(Ve.x=Lo(me))),{x:ke.left+Ge.scrollLeft-Ve.x,y:ke.top+Ge.scrollTop-Ve.y,width:ke.width,height:ke.height}}function fa(I){var y=new Map,L=new Set,N=[];function K(q){L.add(q.name),[].concat(q.requires||[],q.requiresIfExists||[]).forEach(function(oe){if(!L.has(oe)){var me=y.get(oe);me&&K(me)}}),N.push(q)}return I.forEach(function(q){y.set(q.name,q)}),I.forEach(function(q){L.has(q.name)||K(q)}),N}var ju={placement:"bottom",modifiers:[],strategy:"absolute"};function rl(){for(var I=arguments.length,y=new Array(I),L=0;L<I;L++)y[L]=arguments[L];return!y.some(function(N){return!(N&&typeof N.getBoundingClientRect=="function")})}function Ro(I){I===void 0&&(I={});var y=I,L=y.defaultModifiers,N=L===void 0?[]:L,K=y.defaultOptions,q=K===void 0?ju:K;return function(oe,me,ke){ke===void 0&&(ke=q);var Ge,Ve,Ne={placement:"bottom",orderedModifiers:[],options:Object.assign({},ju,q),modifiersData:{},elements:{reference:oe,popper:me},attributes:{},styles:{}},rt=[],Xe=!1,ze={state:Ne,setOptions:function(ht){var zt=typeof ht=="function"?ht(Ne.options):ht;et(),Ne.options=Object.assign({},q,Ne.options,zt),Ne.scrollParents={reference:gi(oe)?Ys(oe):oe.contextElement?Ys(oe.contextElement):[],popper:Ys(me)};var Qt,Et,Pt=function(gt){var _t=fa(gt);return ra.reduce(function(At,Gt){return At.concat(_t.filter(function(Kt){return Kt.phase===Gt}))},[])}((Qt=[].concat(N,Ne.options.modifiers),Et=Qt.reduce(function(gt,_t){var At=gt[_t.name];return gt[_t.name]=At?Object.assign({},At,_t,{options:Object.assign({},At.options,_t.options),data:Object.assign({},At.data,_t.data)}):_t,gt},{}),Object.keys(Et).map(function(gt){return Et[gt]})));return Ne.orderedModifiers=Pt.filter(function(gt){return gt.enabled}),Ne.orderedModifiers.forEach(function(gt){var _t=gt.name,At=gt.options,Gt=At===void 0?{}:At,Kt=gt.effect;if(typeof Kt=="function"){var ln=Kt({state:Ne,name:_t,instance:ze,options:Gt});rt.push(ln||function(){})}}),ze.update()},forceUpdate:function(){if(!Xe){var ht=Ne.elements,zt=ht.reference,Qt=ht.popper;if(rl(zt,Qt)){Ne.rects={reference:mc(zt,Gr(Qt),Ne.options.strategy==="fixed"),popper:Za(Qt)},Ne.reset=!1,Ne.placement=Ne.options.placement,Ne.orderedModifiers.forEach(function(Kt){return Ne.modifiersData[Kt.name]=Object.assign({},Kt.data)});for(var Et=0;Et<Ne.orderedModifiers.length;Et++)if(Ne.reset!==!0){var Pt=Ne.orderedModifiers[Et],gt=Pt.fn,_t=Pt.options,At=_t===void 0?{}:_t,Gt=Pt.name;typeof gt=="function"&&(Ne=gt({state:Ne,options:At,name:Gt,instance:ze})||Ne)}else Ne.reset=!1,Et=-1}}},update:(Ge=function(){return new Promise(function(ht){ze.forceUpdate(),ht(Ne)})},function(){return Ve||(Ve=new Promise(function(ht){Promise.resolve().then(function(){Ve=void 0,ht(Ge())})})),Ve}),destroy:function(){et(),Xe=!0}};if(!rl(oe,me))return ze;function et(){rt.forEach(function(ht){return ht()}),rt=[]}return ze.setOptions(ke).then(function(ht){!Xe&&ke.onFirstUpdate&&ke.onFirstUpdate(ht)}),ze}}var ha=Ro(),il=Ro({defaultModifiers:[wo,cr,cc,ia]}),sl=Ro({defaultModifiers:[wo,cr,cc,ia,pc,ca,qs,ji,da]});const Hu=Object.freeze(Object.defineProperty({__proto__:null,afterMain:jr,afterRead:Ur,afterWrite:Mu,applyStyles:ia,arrow:ji,auto:lr,basePlacements:Nn,beforeMain:yr,beforeRead:cs,beforeWrite:Ou,bottom:Rt,clippingParents:mi,computeStyles:cc,createPopper:sl,createPopperBase:ha,createPopperLite:il,detectOverflow:Ar,end:Br,eventListeners:wo,flip:ca,hide:da,left:yn,main:Ja,modifierPhases:ra,offset:pc,placements:oi,popper:si,popperGenerator:Ro,popperOffsets:cr,preventOverflow:qs,read:hn,reference:Ft,right:bn,start:$r,top:xt,variationPlacements:xn,viewport:Xt,write:Nu},Symbol.toStringTag,{value:"Module"})),Gu="dropdown",Xs=".bs.dropdown",pa=".data-api",zh="ArrowUp",Vu="ArrowDown",Kh=`hide${Xs}`,Wh=`hidden${Xs}`,Yh=`show${Xs}`,zu=`shown${Xs}`,Ku=`click${Xs}${pa}`,Wu=`keydown${Xs}${pa}`,qh=`keyup${Xs}${pa}`,Ao="show",Hi='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Xh=`${Hi}.${Ao}`,ol=".dropdown-menu",Qh=T()?"top-end":"top-start",Yu=T()?"top-start":"top-end",Jh=T()?"bottom-end":"bottom-start",Zh=T()?"bottom-start":"bottom-end",ep=T()?"left-start":"right-start",tp=T()?"right-start":"left-start",np={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},rp={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class li extends Me{constructor(y,L){super(y,L),this._popper=null,this._parent=this._element.parentNode,this._menu=Ce.next(this._element,ol)[0]||Ce.prev(this._element,ol)[0]||Ce.findOne(ol,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return np}static get DefaultType(){return rp}static get NAME(){return Gu}toggle(){return this._isShown()?this.hide():this.show()}show(){if(h(this._element)||this._isShown())return;const y={relatedTarget:this._element};if(!B.trigger(this._element,Yh,y).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const L of[].concat(...document.body.children))B.on(L,"mouseover",g);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Ao),this._element.classList.add(Ao),B.trigger(this._element,zu,y)}}hide(){if(h(this._element)||!this._isShown())return;const y={relatedTarget:this._element};this._completeHide(y)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(y){if(!B.trigger(this._element,Kh,y).defaultPrevented){if("ontouchstart"in document.documentElement)for(const L of[].concat(...document.body.children))B.off(L,"mouseover",g);this._popper&&this._popper.destroy(),this._menu.classList.remove(Ao),this._element.classList.remove(Ao),this._element.setAttribute("aria-expanded","false"),Ae.removeDataAttribute(this._menu,"popper"),B.trigger(this._element,Wh,y)}}_getConfig(y){if(typeof(y=super._getConfig(y)).reference=="object"&&!c(y.reference)&&typeof y.reference.getBoundingClientRect!="function")throw new TypeError(`${Gu.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return y}_createPopper(){if(Hu===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let y=this._element;this._config.reference==="parent"?y=this._parent:c(this._config.reference)?y=u(this._config.reference):typeof this._config.reference=="object"&&(y=this._config.reference);const L=this._getPopperConfig();this._popper=sl(y,this._menu,L)}_isShown(){return this._menu.classList.contains(Ao)}_getPlacement(){const y=this._parent;if(y.classList.contains("dropend"))return ep;if(y.classList.contains("dropstart"))return tp;if(y.classList.contains("dropup-center"))return"top";if(y.classList.contains("dropdown-center"))return"bottom";const L=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return y.classList.contains("dropup")?L?Yu:Qh:L?Zh:Jh}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:y}=this._config;return typeof y=="string"?y.split(",").map(L=>Number.parseInt(L,10)):typeof y=="function"?L=>y(L,this._element):y}_getPopperConfig(){const y={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Ae.setDataAttribute(this._menu,"popper","static"),y.modifiers=[{name:"applyStyles",enabled:!1}]),{...y,...C(this._config.popperConfig,[y])}}_selectMenuItem({key:y,target:L}){const N=Ce.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(K=>d(K));N.length&&O(N,L,y===Vu,!N.includes(L)).focus()}static jQueryInterface(y){return this.each(function(){const L=li.getOrCreateInstance(this,y);if(typeof y=="string"){if(L[y]===void 0)throw new TypeError(`No method named "${y}"`);L[y]()}})}static clearMenus(y){if(y.button===2||y.type==="keyup"&&y.key!=="Tab")return;const L=Ce.find(Xh);for(const N of L){const K=li.getInstance(N);if(!K||K._config.autoClose===!1)continue;const q=y.composedPath(),oe=q.includes(K._menu);if(q.includes(K._element)||K._config.autoClose==="inside"&&!oe||K._config.autoClose==="outside"&&oe||K._menu.contains(y.target)&&(y.type==="keyup"&&y.key==="Tab"||/input|select|option|textarea|form/i.test(y.target.tagName)))continue;const me={relatedTarget:K._element};y.type==="click"&&(me.clickEvent=y),K._completeHide(me)}}static dataApiKeydownHandler(y){const L=/input|textarea/i.test(y.target.tagName),N=y.key==="Escape",K=[zh,Vu].includes(y.key);if(!K&&!N||L&&!N)return;y.preventDefault();const q=this.matches(Hi)?this:Ce.prev(this,Hi)[0]||Ce.next(this,Hi)[0]||Ce.findOne(Hi,y.delegateTarget.parentNode),oe=li.getOrCreateInstance(q);if(K)return y.stopPropagation(),oe.show(),void oe._selectMenuItem(y);oe._isShown()&&(y.stopPropagation(),oe.hide(),q.focus())}}B.on(document,Wu,Hi,li.dataApiKeydownHandler),B.on(document,Wu,ol,li.dataApiKeydownHandler),B.on(document,Ku,li.clearMenus),B.on(document,qh,li.clearMenus),B.on(document,Ku,Hi,function(I){I.preventDefault(),li.getOrCreateInstance(this).toggle()}),_(li);const al="backdrop",ko="show",qu=`mousedown.bs.${al}`,Xu={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Qu={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class gc extends Oe{constructor(y){super(),this._config=this._getConfig(y),this._isAppended=!1,this._element=null}static get Default(){return Xu}static get DefaultType(){return Qu}static get NAME(){return al}show(y){if(!this._config.isVisible)return void C(y);this._append();const L=this._getElement();this._config.isAnimated&&x(L),L.classList.add(ko),this._emulateAnimation(()=>{C(y)})}hide(y){this._config.isVisible?(this._getElement().classList.remove(ko),this._emulateAnimation(()=>{this.dispose(),C(y)})):C(y)}dispose(){this._isAppended&&(B.off(this._element,qu),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const y=document.createElement("div");y.className=this._config.className,this._config.isAnimated&&y.classList.add("fade"),this._element=y}return this._element}_configAfterMerge(y){return y.rootElement=u(y.rootElement),y}_append(){if(this._isAppended)return;const y=this._getElement();this._config.rootElement.append(y),B.on(y,qu,()=>{C(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(y){k(y,this._getElement(),this._config.isAnimated)}}const ma=".bs.focustrap",Ju=`focusin${ma}`,Io=`keydown.tab${ma}`,Zu="backward",ip={autofocus:!0,trapElement:null},sp={autofocus:"boolean",trapElement:"element"};class yc extends Oe{constructor(y){super(),this._config=this._getConfig(y),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return ip}static get DefaultType(){return sp}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),B.off(document,ma),B.on(document,Ju,y=>this._handleFocusin(y)),B.on(document,Io,y=>this._handleKeydown(y)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,B.off(document,ma))}_handleFocusin(y){const{trapElement:L}=this._config;if(y.target===document||y.target===L||L.contains(y.target))return;const N=Ce.focusableChildren(L);N.length===0?L.focus():this._lastTabNavDirection===Zu?N[N.length-1].focus():N[0].focus()}_handleKeydown(y){y.key==="Tab"&&(this._lastTabNavDirection=y.shiftKey?Zu:"forward")}}const vc=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Po=".sticky-top",fs="padding-right",ed="margin-right";class Do{constructor(){this._element=document.body}getWidth(){const y=document.documentElement.clientWidth;return Math.abs(window.innerWidth-y)}hide(){const y=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,fs,L=>L+y),this._setElementAttributes(vc,fs,L=>L+y),this._setElementAttributes(Po,ed,L=>L-y)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,fs),this._resetElementAttributes(vc,fs),this._resetElementAttributes(Po,ed)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(y,L,N){const K=this.getWidth();this._applyManipulationCallback(y,q=>{if(q!==this._element&&window.innerWidth>q.clientWidth+K)return;this._saveInitialAttribute(q,L);const oe=window.getComputedStyle(q).getPropertyValue(L);q.style.setProperty(L,`${N(Number.parseFloat(oe))}px`)})}_saveInitialAttribute(y,L){const N=y.style.getPropertyValue(L);N&&Ae.setDataAttribute(y,L,N)}_resetElementAttributes(y,L){this._applyManipulationCallback(y,N=>{const K=Ae.getDataAttribute(N,L);K!==null?(Ae.removeDataAttribute(N,L),N.style.setProperty(L,K)):N.style.removeProperty(L)})}_applyManipulationCallback(y,L){if(c(y))L(y);else for(const N of Ce.find(y,this._element))L(N)}}const zr=".bs.modal",td=`hide${zr}`,xc=`hidePrevented${zr}`,ll=`hidden${zr}`,Sc=`show${zr}`,nd=`shown${zr}`,rd=`resize${zr}`,op=`click.dismiss${zr}`,ap=`mousedown.dismiss${zr}`,lp=`keydown.dismiss${zr}`,cp=`click${zr}.data-api`,id="modal-open",Kr="show",Qs="modal-static",sd={backdrop:!0,focus:!0,keyboard:!0},od={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class hs extends Me{constructor(y,L){super(y,L),this._dialog=Ce.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Do,this._addEventListeners()}static get Default(){return sd}static get DefaultType(){return od}static get NAME(){return"modal"}toggle(y){return this._isShown?this.hide():this.show(y)}show(y){this._isShown||this._isTransitioning||B.trigger(this._element,Sc,{relatedTarget:y}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(id),this._adjustDialog(),this._backdrop.show(()=>this._showElement(y)))}hide(){this._isShown&&!this._isTransitioning&&(B.trigger(this._element,td).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Kr),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){B.off(window,zr),B.off(this._dialog,zr),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new gc({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new yc({trapElement:this._element})}_showElement(y){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const L=Ce.findOne(".modal-body",this._dialog);L&&(L.scrollTop=0),x(this._element),this._element.classList.add(Kr),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,B.trigger(this._element,nd,{relatedTarget:y})},this._dialog,this._isAnimated())}_addEventListeners(){B.on(this._element,lp,y=>{y.key==="Escape"&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),B.on(window,rd,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),B.on(this._element,ap,y=>{B.one(this._element,op,L=>{this._element===y.target&&this._element===L.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(id),this._resetAdjustments(),this._scrollBar.reset(),B.trigger(this._element,ll)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(B.trigger(this._element,xc).defaultPrevented)return;const y=this._element.scrollHeight>document.documentElement.clientHeight,L=this._element.style.overflowY;L==="hidden"||this._element.classList.contains(Qs)||(y||(this._element.style.overflowY="hidden"),this._element.classList.add(Qs),this._queueCallback(()=>{this._element.classList.remove(Qs),this._queueCallback(()=>{this._element.style.overflowY=L},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const y=this._element.scrollHeight>document.documentElement.clientHeight,L=this._scrollBar.getWidth(),N=L>0;if(N&&!y){const K=T()?"paddingLeft":"paddingRight";this._element.style[K]=`${L}px`}if(!N&&y){const K=T()?"paddingRight":"paddingLeft";this._element.style[K]=`${L}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(y,L){return this.each(function(){const N=hs.getOrCreateInstance(this,y);if(typeof y=="string"){if(N[y]===void 0)throw new TypeError(`No method named "${y}"`);N[y](L)}})}}B.on(document,cp,'[data-bs-toggle="modal"]',function(I){const y=Ce.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&I.preventDefault(),B.one(y,Sc,N=>{N.defaultPrevented||B.one(y,ll,()=>{d(this)&&this.focus()})});const L=Ce.findOne(".modal.show");L&&hs.getInstance(L).hide(),hs.getOrCreateInstance(y).toggle(this)}),nt(hs),_(hs);const xi=".bs.offcanvas",cl=".data-api",up=`load${xi}${cl}`,ad="show",Js="showing",ul="hiding",Oo=".offcanvas.show",Ec=`show${xi}`,ld=`shown${xi}`,dl=`hide${xi}`,Zs=`hidePrevented${xi}`,fl=`hidden${xi}`,cd=`resize${xi}`,hl=`click${xi}${cl}`,ud=`keydown.dismiss${xi}`,dd={backdrop:!0,keyboard:!0,scroll:!1},fd={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Si extends Me{constructor(y,L){super(y,L),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return dd}static get DefaultType(){return fd}static get NAME(){return"offcanvas"}toggle(y){return this._isShown?this.hide():this.show(y)}show(y){this._isShown||B.trigger(this._element,Ec,{relatedTarget:y}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new Do().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Js),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(ad),this._element.classList.remove(Js),B.trigger(this._element,ld,{relatedTarget:y})},this._element,!0))}hide(){this._isShown&&(B.trigger(this._element,dl).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(ul),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(ad,ul),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new Do().reset(),B.trigger(this._element,fl)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const y=!!this._config.backdrop;return new gc({className:"offcanvas-backdrop",isVisible:y,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:y?()=>{this._config.backdrop!=="static"?this.hide():B.trigger(this._element,Zs)}:null})}_initializeFocusTrap(){return new yc({trapElement:this._element})}_addEventListeners(){B.on(this._element,ud,y=>{y.key==="Escape"&&(this._config.keyboard?this.hide():B.trigger(this._element,Zs))})}static jQueryInterface(y){return this.each(function(){const L=Si.getOrCreateInstance(this,y);if(typeof y=="string"){if(L[y]===void 0||y.startsWith("_")||y==="constructor")throw new TypeError(`No method named "${y}"`);L[y](this)}})}}B.on(document,hl,'[data-bs-toggle="offcanvas"]',function(I){const y=Ce.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&I.preventDefault(),h(this))return;B.one(y,fl,()=>{d(this)&&this.focus()});const L=Ce.findOne(Oo);L&&L!==y&&Si.getInstance(L).hide(),Si.getOrCreateInstance(y).toggle(this)}),B.on(window,up,()=>{for(const I of Ce.find(Oo))Si.getOrCreateInstance(I).show()}),B.on(window,cd,()=>{for(const I of Ce.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(I).position!=="fixed"&&Si.getOrCreateInstance(I).hide()}),nt(Si),_(Si);const Tc={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},hd=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),ps=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,bc=(I,y)=>{const L=I.nodeName.toLowerCase();return y.includes(L)?!hd.has(L)||!!ps.test(I.nodeValue):y.filter(N=>N instanceof RegExp).some(N=>N.test(L))},wc={allowList:Tc,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},dp={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},fp={entry:"(string|element|function|null)",selector:"(string|element)"};class ga extends Oe{constructor(y){super(),this._config=this._getConfig(y)}static get Default(){return wc}static get DefaultType(){return dp}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(y=>this._resolvePossibleFunction(y)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(y){return this._checkContent(y),this._config.content={...this._config.content,...y},this}toHtml(){const y=document.createElement("div");y.innerHTML=this._maybeSanitize(this._config.template);for(const[K,q]of Object.entries(this._config.content))this._setContent(y,q,K);const L=y.children[0],N=this._resolvePossibleFunction(this._config.extraClass);return N&&L.classList.add(...N.split(" ")),L}_typeCheckConfig(y){super._typeCheckConfig(y),this._checkContent(y.content)}_checkContent(y){for(const[L,N]of Object.entries(y))super._typeCheckConfig({selector:L,entry:N},fp)}_setContent(y,L,N){const K=Ce.findOne(N,y);K&&((L=this._resolvePossibleFunction(L))?c(L)?this._putElementInTemplate(u(L),K):this._config.html?K.innerHTML=this._maybeSanitize(L):K.textContent=L:K.remove())}_maybeSanitize(y){return this._config.sanitize?function(L,N,K){if(!L.length)return L;if(K&&typeof K=="function")return K(L);const q=new window.DOMParser().parseFromString(L,"text/html"),oe=[].concat(...q.body.querySelectorAll("*"));for(const me of oe){const ke=me.nodeName.toLowerCase();if(!Object.keys(N).includes(ke)){me.remove();continue}const Ge=[].concat(...me.attributes),Ve=[].concat(N["*"]||[],N[ke]||[]);for(const Ne of Ge)bc(Ne,Ve)||me.removeAttribute(Ne.nodeName)}return q.body.innerHTML}(y,this._config.allowList,this._config.sanitizeFn):y}_resolvePossibleFunction(y){return C(y,[this])}_putElementInTemplate(y,L){if(this._config.html)return L.innerHTML="",void L.append(y);L.textContent=y.textContent}}const hp=new Set(["sanitize","allowList","sanitizeFn"]),pl="fade",ya="show",on=".modal",ml="hide.bs.modal",ms="hover",eo="focus",pd={AUTO:"auto",TOP:"top",RIGHT:T()?"left":"right",BOTTOM:"bottom",LEFT:T()?"right":"left"},_c={allowList:Tc,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},va={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Ei extends Me{constructor(y,L){if(Hu===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(y,L),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return _c}static get DefaultType(){return va}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),B.off(this._element.closest(on),ml,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const y=B.trigger(this._element,this.constructor.eventName("show")),L=(p(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(y.defaultPrevented||!L)return;this._disposePopper();const N=this._getTipElement();this._element.setAttribute("aria-describedby",N.getAttribute("id"));const{container:K}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(K.append(N),B.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(N),N.classList.add(ya),"ontouchstart"in document.documentElement)for(const q of[].concat(...document.body.children))B.on(q,"mouseover",g);this._queueCallback(()=>{B.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!B.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(ya),"ontouchstart"in document.documentElement)for(const y of[].concat(...document.body.children))B.off(y,"mouseover",g);this._activeTrigger.click=!1,this._activeTrigger[eo]=!1,this._activeTrigger[ms]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),B.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(y){const L=this._getTemplateFactory(y).toHtml();if(!L)return null;L.classList.remove(pl,ya),L.classList.add(`bs-${this.constructor.NAME}-auto`);const N=(K=>{do K+=Math.floor(1e6*Math.random());while(document.getElementById(K));return K})(this.constructor.NAME).toString();return L.setAttribute("id",N),this._isAnimated()&&L.classList.add(pl),L}setContent(y){this._newContent=y,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(y){return this._templateFactory?this._templateFactory.changeContent(y):this._templateFactory=new ga({...this._config,content:y,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(y){return this.constructor.getOrCreateInstance(y.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(pl)}_isShown(){return this.tip&&this.tip.classList.contains(ya)}_createPopper(y){const L=C(this._config.placement,[this,y,this._element]),N=pd[L.toUpperCase()];return sl(this._element,y,this._getPopperConfig(N))}_getOffset(){const{offset:y}=this._config;return typeof y=="string"?y.split(",").map(L=>Number.parseInt(L,10)):typeof y=="function"?L=>y(L,this._element):y}_resolvePossibleFunction(y){return C(y,[this._element])}_getPopperConfig(y){const L={placement:y,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:N=>{this._getTipElement().setAttribute("data-popper-placement",N.state.placement)}}]};return{...L,...C(this._config.popperConfig,[L])}}_setListeners(){const y=this._config.trigger.split(" ");for(const L of y)if(L==="click")B.on(this._element,this.constructor.eventName("click"),this._config.selector,N=>{this._initializeOnDelegatedTarget(N).toggle()});else if(L!=="manual"){const N=L===ms?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),K=L===ms?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");B.on(this._element,N,this._config.selector,q=>{const oe=this._initializeOnDelegatedTarget(q);oe._activeTrigger[q.type==="focusin"?eo:ms]=!0,oe._enter()}),B.on(this._element,K,this._config.selector,q=>{const oe=this._initializeOnDelegatedTarget(q);oe._activeTrigger[q.type==="focusout"?eo:ms]=oe._element.contains(q.relatedTarget),oe._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},B.on(this._element.closest(on),ml,this._hideModalHandler)}_fixTitle(){const y=this._element.getAttribute("title");y&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",y),this._element.setAttribute("data-bs-original-title",y),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(y,L){clearTimeout(this._timeout),this._timeout=setTimeout(y,L)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(y){const L=Ae.getDataAttributes(this._element);for(const N of Object.keys(L))hp.has(N)&&delete L[N];return y={...L,...typeof y=="object"&&y?y:{}},y=this._mergeConfigObj(y),y=this._configAfterMerge(y),this._typeCheckConfig(y),y}_configAfterMerge(y){return y.container=y.container===!1?document.body:u(y.container),typeof y.delay=="number"&&(y.delay={show:y.delay,hide:y.delay}),typeof y.title=="number"&&(y.title=y.title.toString()),typeof y.content=="number"&&(y.content=y.content.toString()),y}_getDelegateConfig(){const y={};for(const[L,N]of Object.entries(this._config))this.constructor.Default[L]!==N&&(y[L]=N);return y.selector=!1,y.trigger="manual",y}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(y){return this.each(function(){const L=Ei.getOrCreateInstance(this,y);if(typeof y=="string"){if(L[y]===void 0)throw new TypeError(`No method named "${y}"`);L[y]()}})}}_(Ei);const No={...Ei.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},md={...Ei.DefaultType,content:"(null|string|element|function)"};class gl extends Ei{static get Default(){return No}static get DefaultType(){return md}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(y){return this.each(function(){const L=gl.getOrCreateInstance(this,y);if(typeof y=="string"){if(L[y]===void 0)throw new TypeError(`No method named "${y}"`);L[y]()}})}}_(gl);const Lc=".bs.scrollspy",gd=`activate${Lc}`,xa=`click${Lc}`,yl=`load${Lc}.data-api`,gs="active",Sa="[href]",vl=".nav-link",Cc=`${vl}, .nav-item > ${vl}, .list-group-item`,pp={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},yd={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Ea extends Me{constructor(y,L){super(y,L),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return pp}static get DefaultType(){return yd}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const y of this._observableSections.values())this._observer.observe(y)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(y){return y.target=u(y.target)||document.body,y.rootMargin=y.offset?`${y.offset}px 0px -30%`:y.rootMargin,typeof y.threshold=="string"&&(y.threshold=y.threshold.split(",").map(L=>Number.parseFloat(L))),y}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(B.off(this._config.target,xa),B.on(this._config.target,xa,Sa,y=>{const L=this._observableSections.get(y.target.hash);if(L){y.preventDefault();const N=this._rootElement||window,K=L.offsetTop-this._element.offsetTop;if(N.scrollTo)return void N.scrollTo({top:K,behavior:"smooth"});N.scrollTop=K}}))}_getNewObserver(){const y={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(L=>this._observerCallback(L),y)}_observerCallback(y){const L=oe=>this._targetLinks.get(`#${oe.target.id}`),N=oe=>{this._previousScrollData.visibleEntryTop=oe.target.offsetTop,this._process(L(oe))},K=(this._rootElement||document.documentElement).scrollTop,q=K>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=K;for(const oe of y){if(!oe.isIntersecting){this._activeTarget=null,this._clearActiveClass(L(oe));continue}const me=oe.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(q&&me){if(N(oe),!K)return}else q||me||N(oe)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const y=Ce.find(Sa,this._config.target);for(const L of y){if(!L.hash||h(L))continue;const N=Ce.findOne(decodeURI(L.hash),this._element);d(N)&&(this._targetLinks.set(decodeURI(L.hash),L),this._observableSections.set(L.hash,N))}}_process(y){this._activeTarget!==y&&(this._clearActiveClass(this._config.target),this._activeTarget=y,y.classList.add(gs),this._activateParents(y),B.trigger(this._element,gd,{relatedTarget:y}))}_activateParents(y){if(y.classList.contains("dropdown-item"))Ce.findOne(".dropdown-toggle",y.closest(".dropdown")).classList.add(gs);else for(const L of Ce.parents(y,".nav, .list-group"))for(const N of Ce.prev(L,Cc))N.classList.add(gs)}_clearActiveClass(y){y.classList.remove(gs);const L=Ce.find(`${Sa}.${gs}`,y);for(const N of L)N.classList.remove(gs)}static jQueryInterface(y){return this.each(function(){const L=Ea.getOrCreateInstance(this,y);if(typeof y=="string"){if(L[y]===void 0||y.startsWith("_")||y==="constructor")throw new TypeError(`No method named "${y}"`);L[y]()}})}}B.on(window,yl,()=>{for(const I of Ce.find('[data-bs-spy="scroll"]'))Ea.getOrCreateInstance(I)}),_(Ea);const to=".bs.tab",Rc=`hide${to}`,ys=`hidden${to}`,vd=`show${to}`,Mo=`shown${to}`,Ti=`click${to}`,Ta=`keydown${to}`,Gi=`load${to}`,Ac="ArrowLeft",xd="ArrowRight",mp="ArrowUp",vs="ArrowDown",no="Home",ro="End",bi="active",xl="fade",xs="show",Vi=".dropdown-toggle",tn=`:not(${Vi})`,nn='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',wi=`.nav-link${tn}, .list-group-item${tn}, [role="tab"]${tn}, ${nn}`,Yn=`.${bi}[data-bs-toggle="tab"], .${bi}[data-bs-toggle="pill"], .${bi}[data-bs-toggle="list"]`;class wn extends Me{constructor(y){super(y),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),B.on(this._element,Ta,L=>this._keydown(L)))}static get NAME(){return"tab"}show(){const y=this._element;if(this._elemIsActive(y))return;const L=this._getActiveElem(),N=L?B.trigger(L,Rc,{relatedTarget:y}):null;B.trigger(y,vd,{relatedTarget:L}).defaultPrevented||N&&N.defaultPrevented||(this._deactivate(L,y),this._activate(y,L))}_activate(y,L){y&&(y.classList.add(bi),this._activate(Ce.getElementFromSelector(y)),this._queueCallback(()=>{y.getAttribute("role")==="tab"?(y.removeAttribute("tabindex"),y.setAttribute("aria-selected",!0),this._toggleDropDown(y,!0),B.trigger(y,Mo,{relatedTarget:L})):y.classList.add(xs)},y,y.classList.contains(xl)))}_deactivate(y,L){y&&(y.classList.remove(bi),y.blur(),this._deactivate(Ce.getElementFromSelector(y)),this._queueCallback(()=>{y.getAttribute("role")==="tab"?(y.setAttribute("aria-selected",!1),y.setAttribute("tabindex","-1"),this._toggleDropDown(y,!1),B.trigger(y,ys,{relatedTarget:L})):y.classList.remove(xs)},y,y.classList.contains(xl)))}_keydown(y){if(![Ac,xd,mp,vs,no,ro].includes(y.key))return;y.stopPropagation(),y.preventDefault();const L=this._getChildren().filter(K=>!h(K));let N;if([no,ro].includes(y.key))N=L[y.key===no?0:L.length-1];else{const K=[xd,vs].includes(y.key);N=O(L,y.target,K,!0)}N&&(N.focus({preventScroll:!0}),wn.getOrCreateInstance(N).show())}_getChildren(){return Ce.find(wi,this._parent)}_getActiveElem(){return this._getChildren().find(y=>this._elemIsActive(y))||null}_setInitialAttributes(y,L){this._setAttributeIfNotExists(y,"role","tablist");for(const N of L)this._setInitialAttributesOnChild(N)}_setInitialAttributesOnChild(y){y=this._getInnerElement(y);const L=this._elemIsActive(y),N=this._getOuterElement(y);y.setAttribute("aria-selected",L),N!==y&&this._setAttributeIfNotExists(N,"role","presentation"),L||y.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(y,"role","tab"),this._setInitialAttributesOnTargetPanel(y)}_setInitialAttributesOnTargetPanel(y){const L=Ce.getElementFromSelector(y);L&&(this._setAttributeIfNotExists(L,"role","tabpanel"),y.id&&this._setAttributeIfNotExists(L,"aria-labelledby",`${y.id}`))}_toggleDropDown(y,L){const N=this._getOuterElement(y);if(!N.classList.contains("dropdown"))return;const K=(q,oe)=>{const me=Ce.findOne(q,N);me&&me.classList.toggle(oe,L)};K(Vi,bi),K(".dropdown-menu",xs),N.setAttribute("aria-expanded",L)}_setAttributeIfNotExists(y,L,N){y.hasAttribute(L)||y.setAttribute(L,N)}_elemIsActive(y){return y.classList.contains(bi)}_getInnerElement(y){return y.matches(wi)?y:Ce.findOne(wi,y)}_getOuterElement(y){return y.closest(".nav-item, .list-group-item")||y}static jQueryInterface(y){return this.each(function(){const L=wn.getOrCreateInstance(this);if(typeof y=="string"){if(L[y]===void 0||y.startsWith("_")||y==="constructor")throw new TypeError(`No method named "${y}"`);L[y]()}})}}B.on(document,Ti,nn,function(I){["A","AREA"].includes(this.tagName)&&I.preventDefault(),h(this)||wn.getOrCreateInstance(this).show()}),B.on(window,Gi,()=>{for(const I of Ce.find(Yn))wn.getOrCreateInstance(I)}),_(wn);const vr=".bs.toast",Fo=`mouseover${vr}`,xr=`mouseout${vr}`,Sl=`focusin${vr}`,Sd=`focusout${vr}`,Ed=`hide${vr}`,El=`hidden${vr}`,Td=`show${vr}`,zi=`shown${vr}`,ba="hide",$o="show",wa="showing",gp={animation:"boolean",autohide:"boolean",delay:"number"},Ss={animation:!0,autohide:!0,delay:5e3};class _i extends Me{constructor(y,L){super(y,L),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Ss}static get DefaultType(){return gp}static get NAME(){return"toast"}show(){B.trigger(this._element,Td).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(ba),x(this._element),this._element.classList.add($o,wa),this._queueCallback(()=>{this._element.classList.remove(wa),B.trigger(this._element,zi),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(B.trigger(this._element,Ed).defaultPrevented||(this._element.classList.add(wa),this._queueCallback(()=>{this._element.classList.add(ba),this._element.classList.remove(wa,$o),B.trigger(this._element,El)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove($o),super.dispose()}isShown(){return this._element.classList.contains($o)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(y,L){switch(y.type){case"mouseover":case"mouseout":this._hasMouseInteraction=L;break;case"focusin":case"focusout":this._hasKeyboardInteraction=L}if(L)return void this._clearTimeout();const N=y.relatedTarget;this._element===N||this._element.contains(N)||this._maybeScheduleHide()}_setListeners(){B.on(this._element,Fo,y=>this._onInteraction(y,!0)),B.on(this._element,xr,y=>this._onInteraction(y,!1)),B.on(this._element,Sl,y=>this._onInteraction(y,!0)),B.on(this._element,Sd,y=>this._onInteraction(y,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(y){return this.each(function(){const L=_i.getOrCreateInstance(this,y);if(typeof y=="string"){if(L[y]===void 0)throw new TypeError(`No method named "${y}"`);L[y](this)}})}}return nt(_i),_(_i),{Alert:Ot,Button:ri,Carousel:V,Collapse:wt,Dropdown:li,Modal:hs,Offcanvas:Si,Popover:gl,ScrollSpy:Ea,Tab:wn,Toast:_i,Tooltip:Ei}})}(vf)),vf.exports}e_();var F=Eu();const Bt=fh(F),Dv=Vw({__proto__:null,default:Bt},[F]);var Kc={},Ov;function t_(){if(Ov)return Kc;Ov=1,Object.defineProperty(Kc,"__esModule",{value:!0}),Kc.parse=a,Kc.serialize=d;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,s=(()=>{const g=function(){};return g.prototype=Object.create(null),g})();function a(g,x){const v=new s,S=g.length;if(S<2)return v;const T=(x==null?void 0:x.decode)||h;let _=0;do{const C=g.indexOf("=",_);if(C===-1)break;const k=g.indexOf(";",_),O=k===-1?S:k;if(C>O){_=g.lastIndexOf(";",C-1)+1;continue}const w=c(g,_,C),$=u(g,C,w),M=g.slice(w,$);if(v[M]===void 0){let U=c(g,C+1,O),W=u(g,O,U);const R=T(g.slice(U,W));v[M]=R}_=O+1}while(_<S);return v}function c(g,x,v){do{const S=g.charCodeAt(x);if(S!==32&&S!==9)return x}while(++x<v);return v}function u(g,x,v){for(;x>v;){const S=g.charCodeAt(--x);if(S!==32&&S!==9)return x+1}return v}function d(g,x,v){const S=(v==null?void 0:v.encode)||encodeURIComponent;if(!n.test(g))throw new TypeError(`argument name is invalid: ${g}`);const T=S(x);if(!e.test(T))throw new TypeError(`argument val is invalid: ${x}`);let _=g+"="+T;if(!v)return _;if(v.maxAge!==void 0){if(!Number.isInteger(v.maxAge))throw new TypeError(`option maxAge is invalid: ${v.maxAge}`);_+="; Max-Age="+v.maxAge}if(v.domain){if(!t.test(v.domain))throw new TypeError(`option domain is invalid: ${v.domain}`);_+="; Domain="+v.domain}if(v.path){if(!r.test(v.path))throw new TypeError(`option path is invalid: ${v.path}`);_+="; Path="+v.path}if(v.expires){if(!p(v.expires)||!Number.isFinite(v.expires.valueOf()))throw new TypeError(`option expires is invalid: ${v.expires}`);_+="; Expires="+v.expires.toUTCString()}if(v.httpOnly&&(_+="; HttpOnly"),v.secure&&(_+="; Secure"),v.partitioned&&(_+="; Partitioned"),v.priority)switch(typeof v.priority=="string"?v.priority.toLowerCase():void 0){case"low":_+="; Priority=Low";break;case"medium":_+="; Priority=Medium";break;case"high":_+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${v.priority}`)}if(v.sameSite)switch(typeof v.sameSite=="string"?v.sameSite.toLowerCase():v.sameSite){case!0:case"strict":_+="; SameSite=Strict";break;case"lax":_+="; SameSite=Lax";break;case"none":_+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${v.sameSite}`)}return _}function h(g){if(g.indexOf("%")===-1)return g;try{return decodeURIComponent(g)}catch{return g}}function p(g){return i.call(g)==="[object Date]"}return Kc}t_();/**
 * react-router v7.0.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Nv="popstate";function n_(n={}){function e(r,i){let{pathname:s,search:a,hash:c}=r.location;return cu("",{pathname:s,search:a,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:Zo(i)}return i_(e,t,null,n)}function kt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function ir(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function r_(){return Math.random().toString(36).substring(2,10)}function Mv(n,e){return{usr:n.state,key:n.key,idx:e}}function cu(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?na(e):e,state:t,key:e&&e.key||r||r_()}}function Zo({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function na(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function i_(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,c="POP",u=null,d=h();d==null&&(d=0,a.replaceState({...a.state,idx:d},""));function h(){return(a.state||{idx:null}).idx}function p(){c="POP";let T=h(),_=T==null?null:T-d;d=T,u&&u({action:c,location:S.location,delta:_})}function g(T,_){c="PUSH";let C=cu(S.location,T,_);d=h()+1;let k=Mv(C,d),O=S.createHref(C);try{a.pushState(k,"",O)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;i.location.assign(O)}s&&u&&u({action:c,location:S.location,delta:1})}function x(T,_){c="REPLACE";let C=cu(S.location,T,_);d=h();let k=Mv(C,d),O=S.createHref(C);a.replaceState(k,"",O),s&&u&&u({action:c,location:S.location,delta:0})}function v(T){let _=i.location.origin!=="null"?i.location.origin:i.location.href,C=typeof T=="string"?T:Zo(T);return C=C.replace(/ $/,"%20"),kt(_,`No window.location.(origin|href) available to create URL for href: ${C}`),new URL(C,_)}let S={get action(){return c},get location(){return n(i,a)},listen(T){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Nv,p),u=T,()=>{i.removeEventListener(Nv,p),u=null}},createHref(T){return e(i,T)},createURL:v,encodeLocation(T){let _=v(T);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:g,replace:x,go(T){return a.go(T)}};return S}var s_=new Set(["lazy","caseSensitive","path","id","index","children"]);function o_(n){return n.index===!0}function $f(n,e,t=[],r={}){return n.map((i,s)=>{let a=[...t,String(s)],c=typeof i.id=="string"?i.id:a.join("-");if(kt(i.index!==!0||!i.children,"Cannot specify children on an index route"),kt(!r[c],`Found a route id collision on id "${c}".  Route id's must be globally unique within Data Router usages`),o_(i)){let u={...i,...e(i),id:c};return r[c]=u,u}else{let u={...i,...e(i),id:c,children:void 0};return r[c]=u,i.children&&(u.children=$f(i.children,e,a,r)),u}})}function Qo(n,e,t="/"){return xf(n,e,t,!1)}function xf(n,e,t,r){let i=typeof e=="string"?na(e):e,s=rs(i.pathname||"/",t);if(s==null)return null;let a=wS(n);l_(a);let c=null;for(let u=0;c==null&&u<a.length;++u){let d=x_(s);c=y_(a[u],d,r)}return c}function a_(n,e){let{route:t,pathname:r,params:i}=n;return{id:t.id,pathname:r,params:i,data:e[t.id],handle:t.handle}}function wS(n,e=[],t=[],r=""){let i=(s,a,c)=>{let u={relativePath:c===void 0?s.path||"":c,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};u.relativePath.startsWith("/")&&(kt(u.relativePath.startsWith(r),`Absolute route path "${u.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(r.length));let d=Bs([r,u.relativePath]),h=t.concat(u);s.children&&s.children.length>0&&(kt(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),wS(s.children,e,h,d)),!(s.path==null&&!s.index)&&e.push({path:d,score:m_(d,s.index),routesMeta:h})};return n.forEach((s,a)=>{var c;if(s.path===""||!((c=s.path)!=null&&c.includes("?")))i(s,a);else for(let u of _S(s.path))i(s,a,u)}),e}function _S(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=_S(r.join("/")),c=[];return c.push(...a.map(u=>u===""?s:[s,u].join("/"))),i&&c.push(...a),c.map(u=>n.startsWith("/")&&u===""?"/":u)}function l_(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:g_(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var c_=/^:[\w-]+$/,u_=3,d_=2,f_=1,h_=10,p_=-2,Fv=n=>n==="*";function m_(n,e){let t=n.split("/"),r=t.length;return t.some(Fv)&&(r+=p_),e&&(r+=d_),t.filter(i=>!Fv(i)).reduce((i,s)=>i+(c_.test(s)?u_:s===""?f_:h_),r)}function g_(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function y_(n,e,t=!1){let{routesMeta:r}=n,i={},s="/",a=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",p=Bf({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),g=u.route;if(!p&&d&&t&&!r[r.length-1].route.index&&(p=Bf({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!p)return null;Object.assign(i,p.params),a.push({params:i,pathname:Bs([s,p.pathname]),pathnameBase:T_(Bs([s,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(s=Bs([s,p.pathnameBase]))}return a}function Bf(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=v_(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((d,{paramName:h,isOptional:p},g)=>{if(h==="*"){let v=c[g]||"";a=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const x=c[g];return p&&!x?d[h]=void 0:d[h]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:a,pattern:n}}function v_(n,e=!1,t=!0){ir(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function x_(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ir(!1,`The URL path "${n}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function rs(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function S_(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?na(n):n;return{pathname:t?t.startsWith("/")?t:E_(t,e):e,search:b_(r),hash:w_(i)}}function E_(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function lm(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function LS(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Yg(n){let e=LS(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function qg(n,e,t,r=!1){let i;typeof n=="string"?i=na(n):(i={...n},kt(!i.pathname||!i.pathname.includes("?"),lm("?","pathname","search",i)),kt(!i.pathname||!i.pathname.includes("#"),lm("#","pathname","hash",i)),kt(!i.search||!i.search.includes("#"),lm("#","search","hash",i)));let s=n===""||i.pathname==="",a=s?"/":i.pathname,c;if(a==null)c=t;else{let p=e.length-1;if(!r&&a.startsWith("..")){let g=a.split("/");for(;g[0]==="..";)g.shift(),p-=1;i.pathname=g.join("/")}c=p>=0?e[p]:"/"}let u=S_(i,c),d=a&&a!=="/"&&a.endsWith("/"),h=(s||a===".")&&t.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}var Bs=n=>n.join("/").replace(/\/\/+/g,"/"),T_=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),b_=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,w_=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,Uf=class{constructor(n,e,t,r=!1){this.status=n,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function hh(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var CS=["POST","PUT","PATCH","DELETE"],__=new Set(CS),L_=["GET",...CS],C_=new Set(L_),R_=new Set([301,302,303,307,308]),A_=new Set([307,308]),cm={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},k_={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Wc={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Xg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,I_=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),RS="remix-router-transitions",AS=Symbol("ResetLoaderData");function P_(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";kt(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let r=n.mapRouteProperties||I_,i={},s=$f(n.routes,r,void 0,i),a,c=n.basename||"/",u=n.dataStrategy||F_,d=n.patchRoutesOnNavigation,h={...n.future},p=null,g=new Set,x=null,v=null,S=null,T=n.hydrationData!=null,_=Qo(s,n.history.location,c),C=null;if(_==null&&!d){let V=Ii(404,{pathname:n.history.location.pathname}),{matches:X,route:ce}=Yv(s);_=X,C={[ce.id]:V}}_&&!n.hydrationData&&fn(_,s,n.history.location.pathname).active&&(_=null);let k;if(_)if(_.some(V=>V.route.lazy))k=!1;else if(!_.some(V=>V.route.loader))k=!0;else{let V=n.hydrationData?n.hydrationData.loaderData:null,X=n.hydrationData?n.hydrationData.errors:null;if(X){let ce=_.findIndex(be=>X[be.route.id]!==void 0);k=_.slice(0,ce+1).every(be=>!og(be.route,V,X))}else k=_.every(ce=>!og(ce.route,V,X))}else{k=!1,_=[];let V=fn(null,s,n.history.location.pathname);V.active&&V.matches&&(_=V.matches)}let O,w={historyAction:n.history.action,location:n.history.location,matches:_,initialized:k,navigation:cm,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||C,fetchers:new Map,blockers:new Map},$="POP",M=!1,U,W=!1,R=new Map,G=null,fe=!1,ae=!1,xe=new Set,ye=new Map,Ee=0,Pe=-1,ie=new Map,se=new Set,B=new Map,H=new Map,Q=new Set,we=new Map,Ae,Oe=null;function Me(){if(p=n.history.listen(({action:V,location:X,delta:ce})=>{if(Ae){Ae(),Ae=void 0;return}ir(we.size===0||ce!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let be=mt({currentLocation:w.location,nextLocation:X,historyAction:V});if(be&&ce!=null){let He=new Promise(Qe=>{Ae=Qe});n.history.go(ce*-1),Fe(be,{state:"blocked",location:X,proceed(){Fe(be,{state:"proceeding",proceed:void 0,reset:void 0,location:X}),He.then(()=>n.history.go(ce))},reset(){let Qe=new Map(w.blockers);Qe.set(be,Wc),nt({blockers:Qe})}});return}return Ot(V,X)}),t){Y_(e,R);let V=()=>q_(e,R);e.addEventListener("pagehide",V),G=()=>e.removeEventListener("pagehide",V)}return w.initialized||Ot("POP",w.location,{initialHydration:!0}),O}function ct(){p&&p(),G&&G(),g.clear(),U&&U.abort(),w.fetchers.forEach((V,X)=>Se(X)),w.blockers.forEach((V,X)=>Be(X))}function Ce(V){return g.add(V),()=>g.delete(V)}function nt(V,X={}){w={...w,...V};let ce=[],be=[];w.fetchers.forEach((He,Qe)=>{He.state==="idle"&&(Q.has(Qe)?ce.push(Qe):be.push(Qe))}),[...g].forEach(He=>He(w,{deletedFetchers:ce,viewTransitionOpts:X.viewTransitionOpts,flushSync:X.flushSync===!0})),ce.forEach(He=>Se(He)),be.forEach(He=>w.fetchers.delete(He))}function Ut(V,X,{flushSync:ce}={}){var De,dt;let be=w.actionData!=null&&w.navigation.formMethod!=null&&es(w.navigation.formMethod)&&w.navigation.state==="loading"&&((De=V.state)==null?void 0:De._isRedirect)!==!0,He;X.actionData?Object.keys(X.actionData).length>0?He=X.actionData:He=null:be?He=w.actionData:He=null;let Qe=X.loaderData?Kv(w.loaderData,X.loaderData,X.matches||[],X.errors):w.loaderData,ut=w.blockers;ut.size>0&&(ut=new Map(ut),ut.forEach((vt,sn)=>ut.set(sn,Wc)));let $e=M===!0||w.navigation.formMethod!=null&&es(w.navigation.formMethod)&&((dt=V.state)==null?void 0:dt._isRedirect)!==!0;a&&(s=a,a=void 0),fe||$==="POP"||($==="PUSH"?n.history.push(V,V.state):$==="REPLACE"&&n.history.replace(V,V.state));let Ue;if($==="POP"){let vt=R.get(w.location.pathname);vt&&vt.has(V.pathname)?Ue={currentLocation:w.location,nextLocation:V}:R.has(V.pathname)&&(Ue={currentLocation:V,nextLocation:w.location})}else if(W){let vt=R.get(w.location.pathname);vt?vt.add(V.pathname):(vt=new Set([V.pathname]),R.set(w.location.pathname,vt)),Ue={currentLocation:w.location,nextLocation:V}}nt({...X,actionData:He,loaderData:Qe,historyAction:$,location:V,initialized:!0,navigation:cm,revalidation:"idle",restoreScrollPosition:Mt(V,X.matches||w.matches),preventScrollReset:$e,blockers:ut},{viewTransitionOpts:Ue,flushSync:ce===!0}),$="POP",M=!1,W=!1,fe=!1,ae=!1,Oe==null||Oe.resolve(),Oe=null}async function an(V,X){if(typeof V=="number"){n.history.go(V);return}let ce=sg(w.location,w.matches,c,V,X==null?void 0:X.fromRouteId,X==null?void 0:X.relative),{path:be,submission:He,error:Qe}=$v(!1,ce,X),ut=w.location,$e=cu(w.location,be,X&&X.state);$e={...$e,...n.history.encodeLocation($e)};let Ue=X&&X.replace!=null?X.replace:void 0,De="PUSH";Ue===!0?De="REPLACE":Ue===!1||He!=null&&es(He.formMethod)&&He.formAction===w.location.pathname+w.location.search&&(De="REPLACE");let dt=X&&"preventScrollReset"in X?X.preventScrollReset===!0:void 0,vt=(X&&X.flushSync)===!0,sn=mt({currentLocation:ut,nextLocation:$e,historyAction:De});if(sn){Fe(sn,{state:"blocked",location:$e,proceed(){Fe(sn,{state:"proceeding",proceed:void 0,reset:void 0,location:$e}),an(V,X)},reset(){let kn=new Map(w.blockers);kn.set(sn,Wc),nt({blockers:kn})}});return}await Ot(De,$e,{submission:He,pendingError:Qe,preventScrollReset:dt,replace:X&&X.replace,enableViewTransition:X&&X.viewTransition,flushSync:vt})}function Bn(){Oe||(Oe=X_()),ii(),nt({revalidation:"loading"});let V=Oe.promise;return w.navigation.state==="submitting"?V:w.navigation.state==="idle"?(Ot(w.historyAction,w.location,{startUninterruptedRevalidation:!0}),V):(Ot($||w.historyAction,w.navigation.location,{overrideNavigation:w.navigation,enableViewTransition:W===!0}),V)}async function Ot(V,X,ce){U&&U.abort(),U=null,$=V,fe=(ce&&ce.startUninterruptedRevalidation)===!0,en(w.location,w.matches),M=(ce&&ce.preventScrollReset)===!0,W=(ce&&ce.enableViewTransition)===!0;let be=a||s,He=ce&&ce.overrideNavigation,Qe=Qo(be,X,c),ut=(ce&&ce.flushSync)===!0,$e=fn(Qe,be,X.pathname);if($e.active&&$e.matches&&(Qe=$e.matches),!Qe){let{error:wt,notFoundMatches:xt,route:Rt}=Nt(X.pathname);Ut(X,{matches:xt,loaderData:{},errors:{[Rt.id]:wt}},{flushSync:ut});return}if(w.initialized&&!ae&&G_(w.location,X)&&!(ce&&ce.submission&&es(ce.submission.formMethod))){Ut(X,{matches:Qe},{flushSync:ut});return}U=new AbortController;let Ue=Pl(n.history,X,U.signal,ce&&ce.submission),De;if(ce&&ce.pendingError)De=[$a(Qe).route.id,{type:"error",error:ce.pendingError}];else if(ce&&ce.submission&&es(ce.submission.formMethod)){let wt=await ls(Ue,X,ce.submission,Qe,$e.active,{replace:ce.replace,flushSync:ut});if(wt.shortCircuited)return;if(wt.pendingActionResult){let[xt,Rt]=wt.pendingActionResult;if(ui(Rt)&&hh(Rt.error)&&Rt.error.status===404){U=null,Ut(X,{matches:wt.matches,loaderData:{},errors:{[xt]:Rt.error}});return}}Qe=wt.matches||Qe,De=wt.pendingActionResult,He=um(X,ce.submission),ut=!1,$e.active=!1,Ue=Pl(n.history,Ue.url,Ue.signal)}let{shortCircuited:dt,matches:vt,loaderData:sn,errors:kn}=await ri(Ue,X,Qe,$e.active,He,ce&&ce.submission,ce&&ce.fetcherSubmission,ce&&ce.replace,ce&&ce.initialHydration===!0,ut,De);dt||(U=null,Ut(X,{matches:vt||Qe,...Wv(De),loaderData:sn,errors:kn}))}async function ls(V,X,ce,be,He,Qe={}){ii();let ut=K_(X,ce);if(nt({navigation:ut},{flushSync:Qe.flushSync===!0}),He){let De=await gr(be,X.pathname,V.signal);if(De.type==="aborted")return{shortCircuited:!0};if(De.type==="error"){let dt=$a(De.partialMatches).route.id;return{matches:De.partialMatches,pendingActionResult:[dt,{type:"error",error:De.error}]}}else if(De.matches)be=De.matches;else{let{notFoundMatches:dt,error:vt,route:sn}=Nt(X.pathname);return{matches:dt,pendingActionResult:[sn.id,{type:"error",error:vt}]}}}let $e,Ue=nu(be,X);if(!Ue.route.action&&!Ue.route.lazy)$e={type:"error",error:Ii(405,{method:V.method,pathname:X.pathname,routeId:Ue.route.id})};else if($e=(await mr("action",w,V,[Ue],be,null))[Ue.route.id],V.signal.aborted)return{shortCircuited:!0};if(Ba($e)){let De;return Qe&&Qe.replace!=null?De=Qe.replace:De=Gv($e.response.headers.get("Location"),new URL(V.url),c)===w.location.pathname+w.location.search,await On(V,$e,!0,{submission:ce,replace:De}),{shortCircuited:!0}}if(ui($e)){let De=$a(be,Ue.route.id);return(Qe&&Qe.replace)!==!0&&($="PUSH"),{matches:be,pendingActionResult:[De.route.id,$e]}}return{matches:be,pendingActionResult:[Ue.route.id,$e]}}async function ri(V,X,ce,be,He,Qe,ut,$e,Ue,De,dt){let vt=He||um(X,Qe),sn=Qe||ut||Xv(vt),kn=!fe&&!Ue;if(be){if(kn){let xn=Cr(dt);nt({navigation:vt,...xn!==void 0?{actionData:xn}:{}},{flushSync:De})}let Ft=await gr(ce,X.pathname,V.signal);if(Ft.type==="aborted")return{shortCircuited:!0};if(Ft.type==="error"){let xn=$a(Ft.partialMatches).route.id;return{matches:Ft.partialMatches,loaderData:{},errors:{[xn]:Ft.error}}}else if(Ft.matches)ce=Ft.matches;else{let{error:xn,notFoundMatches:oi,route:cs}=Nt(X.pathname);return{matches:oi,loaderData:{},errors:{[cs.id]:xn}}}}let wt=a||s,[xt,Rt]=Uv(n.history,w,ce,sn,X,Ue===!0,ae,xe,Q,B,se,wt,c,dt);if(Pe=++Ee,xt.length===0&&Rt.length===0){let Ft=ue();return Ut(X,{matches:ce,loaderData:{},errors:dt&&ui(dt[1])?{[dt[0]]:dt[1].error}:null,...Wv(dt),...Ft?{fetchers:new Map(w.fetchers)}:{}},{flushSync:De}),{shortCircuited:!0}}if(kn){let Ft={};if(!be){Ft.navigation=vt;let xn=Cr(dt);xn!==void 0&&(Ft.actionData=xn)}Rt.length>0&&(Ft.fetchers=zs(Rt)),nt(Ft,{flushSync:De})}Rt.forEach(Ft=>{tt(Ft.key),Ft.controller&&ye.set(Ft.key,Ft.controller)});let bn=()=>Rt.forEach(Ft=>tt(Ft.key));U&&U.signal.addEventListener("abort",bn);let{loaderResults:yn,fetcherResults:lr}=await Fi(w,ce,xt,Rt,V);if(V.signal.aborted)return{shortCircuited:!0};U&&U.signal.removeEventListener("abort",bn),Rt.forEach(Ft=>ye.delete(Ft.key));let Nn=Xd(yn);if(Nn)return await On(V,Nn.result,!0,{replace:$e}),{shortCircuited:!0};if(Nn=Xd(lr),Nn)return se.add(Nn.key),await On(V,Nn.result,!0,{replace:$e}),{shortCircuited:!0};let{loaderData:$r,errors:Br}=zv(w,ce,yn,dt,Rt,lr);Ue&&w.errors&&(Br={...w.errors,...Br});let mi=ue(),Xt=ge(Pe),si=mi||Xt||Rt.length>0;return{matches:ce,loaderData:$r,errors:Br,...si?{fetchers:new Map(w.fetchers)}:{}}}function Cr(V){if(V&&!ui(V[1]))return{[V[0]]:V[1].data};if(w.actionData)return Object.keys(w.actionData).length===0?null:w.actionData}function zs(V){return V.forEach(X=>{let ce=w.fetchers.get(X.key),be=Yc(void 0,ce?ce.data:void 0);w.fetchers.set(X.key,be)}),new Map(w.fetchers)}async function Mi(V,X,ce,be){tt(V);let He=(be&&be.flushSync)===!0,Qe=a||s,ut=sg(w.location,w.matches,c,ce,X,be==null?void 0:be.relative),$e=Qo(Qe,ut,c),Ue=fn($e,Qe,ut);if(Ue.active&&Ue.matches&&($e=Ue.matches),!$e){Z(V,X,Ii(404,{pathname:ut}),{flushSync:He});return}let{path:De,submission:dt,error:vt}=$v(!0,ut,be);if(vt){Z(V,X,vt,{flushSync:He});return}let sn=nu($e,De),kn=(be&&be.preventScrollReset)===!0;if(dt&&es(dt.formMethod)){await Ks(V,X,De,sn,$e,Ue.active,He,kn,dt);return}B.set(V,{routeId:X,path:De}),await pi(V,X,De,sn,$e,Ue.active,He,kn,dt)}async function Ks(V,X,ce,be,He,Qe,ut,$e,Ue){ii(),B.delete(V);function De(hn){if(!hn.route.action&&!hn.route.lazy){let Ur=Ii(405,{method:Ue.formMethod,pathname:ce,routeId:X});return Z(V,X,Ur,{flushSync:ut}),!0}return!1}if(!Qe&&De(be))return;let dt=w.fetchers.get(V);pe(V,W_(Ue,dt),{flushSync:ut});let vt=new AbortController,sn=Pl(n.history,ce,vt.signal,Ue);if(Qe){let hn=await gr(He,ce,sn.signal);if(hn.type==="aborted")return;if(hn.type==="error"){Z(V,X,hn.error,{flushSync:ut});return}else if(hn.matches){if(He=hn.matches,be=nu(He,ce),De(be))return}else{Z(V,X,Ii(404,{pathname:ce}),{flushSync:ut});return}}ye.set(V,vt);let kn=Ee,xt=(await mr("action",w,sn,[be],He,V))[be.route.id];if(sn.signal.aborted){ye.get(V)===vt&&ye.delete(V);return}if(Q.has(V)){if(Ba(xt)||ui(xt)){pe(V,qo(void 0));return}}else{if(Ba(xt))if(ye.delete(V),Pe>kn){pe(V,qo(void 0));return}else return se.add(V),pe(V,Yc(Ue)),On(sn,xt,!1,{fetcherSubmission:Ue,preventScrollReset:$e});if(ui(xt)){Z(V,X,xt.error);return}}let Rt=w.navigation.location||w.location,bn=Pl(n.history,Rt,vt.signal),yn=a||s,lr=w.navigation.state!=="idle"?Qo(yn,w.navigation.location,c):w.matches;kt(lr,"Didn't find any matches after fetcher action");let Nn=++Ee;ie.set(V,Nn);let $r=Yc(Ue,xt.data);w.fetchers.set(V,$r);let[Br,mi]=Uv(n.history,w,lr,Ue,Rt,!1,ae,xe,Q,B,se,yn,c,[be.route.id,xt]);mi.filter(hn=>hn.key!==V).forEach(hn=>{let Ur=hn.key,yr=w.fetchers.get(Ur),Ja=Yc(void 0,yr?yr.data:void 0);w.fetchers.set(Ur,Ja),tt(Ur),hn.controller&&ye.set(Ur,hn.controller)}),nt({fetchers:new Map(w.fetchers)});let Xt=()=>mi.forEach(hn=>tt(hn.key));vt.signal.addEventListener("abort",Xt);let{loaderResults:si,fetcherResults:Ft}=await Fi(w,lr,Br,mi,bn);if(vt.signal.aborted)return;vt.signal.removeEventListener("abort",Xt),ie.delete(V),ye.delete(V),mi.forEach(hn=>ye.delete(hn.key));let xn=Xd(si);if(xn)return On(bn,xn.result,!1,{preventScrollReset:$e});if(xn=Xd(Ft),xn)return se.add(xn.key),On(bn,xn.result,!1,{preventScrollReset:$e});let{loaderData:oi,errors:cs}=zv(w,lr,si,void 0,mi,Ft);if(w.fetchers.has(V)){let hn=qo(xt.data);w.fetchers.set(V,hn)}ge(Nn),w.navigation.state==="loading"&&Nn>Pe?(kt($,"Expected pending action"),U&&U.abort(),Ut(w.navigation.location,{matches:lr,loaderData:oi,errors:cs,fetchers:new Map(w.fetchers)})):(nt({errors:cs,loaderData:Kv(w.loaderData,oi,lr,cs),fetchers:new Map(w.fetchers)}),ae=!1)}async function pi(V,X,ce,be,He,Qe,ut,$e,Ue){let De=w.fetchers.get(V);pe(V,Yc(Ue,De?De.data:void 0),{flushSync:ut});let dt=new AbortController,vt=Pl(n.history,ce,dt.signal);if(Qe){let xt=await gr(He,ce,vt.signal);if(xt.type==="aborted")return;if(xt.type==="error"){Z(V,X,xt.error,{flushSync:ut});return}else if(xt.matches)He=xt.matches,be=nu(He,ce);else{Z(V,X,Ii(404,{pathname:ce}),{flushSync:ut});return}}ye.set(V,dt);let sn=Ee,wt=(await mr("loader",w,vt,[be],He,V))[be.route.id];if(ye.get(V)===dt&&ye.delete(V),!vt.signal.aborted){if(Q.has(V)){pe(V,qo(void 0));return}if(Ba(wt))if(Pe>sn){pe(V,qo(void 0));return}else{se.add(V),await On(vt,wt,!1,{preventScrollReset:$e});return}if(ui(wt)){Z(V,X,wt.error);return}pe(V,qo(wt.data))}}async function On(V,X,ce,{submission:be,fetcherSubmission:He,preventScrollReset:Qe,replace:ut}={}){X.response.headers.has("X-Remix-Revalidate")&&(ae=!0);let $e=X.response.headers.get("Location");kt($e,"Expected a Location header on the redirect Response"),$e=Gv($e,new URL(V.url),c);let Ue=cu(w.location,$e,{_isRedirect:!0});if(t){let wt=!1;if(X.response.headers.has("X-Remix-Reload-Document"))wt=!0;else if(Xg.test($e)){const xt=n.history.createURL($e);wt=xt.origin!==e.location.origin||rs(xt.pathname,c)==null}if(wt){ut?e.location.replace($e):e.location.assign($e);return}}U=null;let De=ut===!0||X.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:dt,formAction:vt,formEncType:sn}=w.navigation;!be&&!He&&dt&&vt&&sn&&(be=Xv(w.navigation));let kn=be||He;if(A_.has(X.response.status)&&kn&&es(kn.formMethod))await Ot(De,Ue,{submission:{...kn,formAction:$e},preventScrollReset:Qe||M,enableViewTransition:ce?W:void 0});else{let wt=um(Ue,be);await Ot(De,Ue,{overrideNavigation:wt,fetcherSubmission:He,preventScrollReset:Qe||M,enableViewTransition:ce?W:void 0})}}async function mr(V,X,ce,be,He,Qe){let ut,$e={};try{ut=await $_(u,V,X,ce,be,He,Qe,i,r)}catch(Ue){return be.forEach(De=>{$e[De.route.id]={type:"error",error:Ue}}),$e}for(let[Ue,De]of Object.entries(ut))if(V_(De)){let dt=De.result;$e[Ue]={type:"redirect",response:j_(dt,ce,Ue,He,c)}}else $e[Ue]=await U_(De);return $e}async function Fi(V,X,ce,be,He){let Qe=mr("loader",V,He,ce,X,null),ut=Promise.all(be.map(async De=>{if(De.matches&&De.match&&De.controller){let vt=(await mr("loader",V,Pl(n.history,De.path,De.controller.signal),[De.match],De.matches,De.key))[De.match.route.id];return{[De.key]:vt}}else return Promise.resolve({[De.key]:{type:"error",error:Ii(404,{pathname:De.path})}})})),$e=await Qe,Ue=(await ut).reduce((De,dt)=>Object.assign(De,dt),{});return{loaderResults:$e,fetcherResults:Ue}}function ii(){ae=!0,B.forEach((V,X)=>{ye.has(X)&&xe.add(X),tt(X)})}function pe(V,X,ce={}){w.fetchers.set(V,X),nt({fetchers:new Map(w.fetchers)},{flushSync:(ce&&ce.flushSync)===!0})}function Z(V,X,ce,be={}){let He=$a(w.matches,X);Se(V),nt({errors:{[He.route.id]:ce},fetchers:new Map(w.fetchers)},{flushSync:(be&&be.flushSync)===!0})}function Te(V){return H.set(V,(H.get(V)||0)+1),Q.has(V)&&Q.delete(V),w.fetchers.get(V)||k_}function Se(V){let X=w.fetchers.get(V);ye.has(V)&&!(X&&X.state==="loading"&&ie.has(V))&&tt(V),B.delete(V),ie.delete(V),se.delete(V),Q.delete(V),xe.delete(V),w.fetchers.delete(V)}function lt(V){let X=(H.get(V)||0)-1;X<=0?(H.delete(V),Q.add(V)):H.set(V,X),nt({fetchers:new Map(w.fetchers)})}function tt(V){let X=ye.get(V);X&&(X.abort(),ye.delete(V))}function bt(V){for(let X of V){let ce=Te(X),be=qo(ce.data);w.fetchers.set(X,be)}}function ue(){let V=[],X=!1;for(let ce of se){let be=w.fetchers.get(ce);kt(be,`Expected fetcher: ${ce}`),be.state==="loading"&&(se.delete(ce),V.push(ce),X=!0)}return bt(V),X}function ge(V){let X=[];for(let[ce,be]of ie)if(be<V){let He=w.fetchers.get(ce);kt(He,`Expected fetcher: ${ce}`),He.state==="loading"&&(tt(ce),ie.delete(ce),X.push(ce))}return bt(X),X.length>0}function Ke(V,X){let ce=w.blockers.get(V)||Wc;return we.get(V)!==X&&we.set(V,X),ce}function Be(V){w.blockers.delete(V),we.delete(V)}function Fe(V,X){let ce=w.blockers.get(V)||Wc;kt(ce.state==="unblocked"&&X.state==="blocked"||ce.state==="blocked"&&X.state==="blocked"||ce.state==="blocked"&&X.state==="proceeding"||ce.state==="blocked"&&X.state==="unblocked"||ce.state==="proceeding"&&X.state==="unblocked",`Invalid blocker state transition: ${ce.state} -> ${X.state}`);let be=new Map(w.blockers);be.set(V,X),nt({blockers:be})}function mt({currentLocation:V,nextLocation:X,historyAction:ce}){if(we.size===0)return;we.size>1&&ir(!1,"A router only supports one blocker at a time");let be=Array.from(we.entries()),[He,Qe]=be[be.length-1],ut=w.blockers.get(He);if(!(ut&&ut.state==="proceeding")&&Qe({currentLocation:V,nextLocation:X,historyAction:ce}))return He}function Nt(V){let X=Ii(404,{pathname:V}),ce=a||s,{matches:be,route:He}=Yv(ce);return{notFoundMatches:be,route:He,error:X}}function jt(V,X,ce){if(x=V,S=X,v=ce||null,!T&&w.navigation===cm){T=!0;let be=Mt(w.location,w.matches);be!=null&&nt({restoreScrollPosition:be})}return()=>{x=null,S=null,v=null}}function Ct(V,X){return v&&v(V,X.map(be=>a_(be,w.loaderData)))||V.key}function en(V,X){if(x&&S){let ce=Ct(V,X);x[ce]=S()}}function Mt(V,X){if(x){let ce=Ct(V,X),be=x[ce];if(typeof be=="number")return be}return null}function fn(V,X,ce){if(d)if(V){if(Object.keys(V[0].params).length>0)return{active:!0,matches:xf(X,ce,c,!0)}}else return{active:!0,matches:xf(X,ce,c,!0)||[]};return{active:!1,matches:null}}async function gr(V,X,ce){if(!d)return{type:"success",matches:V};let be=V;for(;;){let He=a==null,Qe=a||s,ut=i;try{await d({path:X,matches:be,patch:(De,dt)=>{ce.aborted||Hv(De,dt,Qe,ut,r)}})}catch(De){return{type:"error",error:De,partialMatches:be}}finally{He&&!ce.aborted&&(s=[...s])}if(ce.aborted)return{type:"aborted"};let $e=Qo(Qe,X,c);if($e)return{type:"success",matches:$e};let Ue=xf(Qe,X,c,!0);if(!Ue||be.length===Ue.length&&be.every((De,dt)=>De.route.id===Ue[dt].route.id))return{type:"success",matches:null};be=Ue}}function Fr(V){i={},a=$f(V,r,void 0,i)}function $i(V,X){let ce=a==null;Hv(V,X,a||s,i,r),ce&&(s=[...s],nt({}))}return O={get basename(){return c},get future(){return h},get state(){return w},get routes(){return s},get window(){return e},initialize:Me,subscribe:Ce,enableScrollRestoration:jt,navigate:an,fetch:Mi,revalidate:Bn,createHref:V=>n.history.createHref(V),encodeLocation:V=>n.history.encodeLocation(V),getFetcher:Te,deleteFetcher:lt,dispose:ct,getBlocker:Ke,deleteBlocker:Be,patchRoutes:$i,_internalFetchControllers:ye,_internalSetRoutes:Fr},O}function D_(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function sg(n,e,t,r,i,s){let a,c;if(i){a=[];for(let d of e)if(a.push(d),d.route.id===i){c=d;break}}else a=e,c=e[e.length-1];let u=qg(r||".",Yg(a),rs(n.pathname,t)||n.pathname,s==="path");if(r==null&&(u.search=n.search,u.hash=n.hash),(r==null||r===""||r===".")&&c){let d=Qg(u.search);if(c.route.index&&!d)u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index";else if(!c.route.index&&d){let h=new URLSearchParams(u.search),p=h.getAll("index");h.delete("index"),p.filter(x=>x).forEach(x=>h.append("index",x));let g=h.toString();u.search=g?`?${g}`:""}}return t!=="/"&&(u.pathname=u.pathname==="/"?t:Bs([t,u.pathname])),Zo(u)}function $v(n,e,t){if(!t||!D_(t))return{path:e};if(t.formMethod&&!z_(t.formMethod))return{path:e,error:Ii(405,{method:t.formMethod})};let r=()=>({path:e,error:Ii(400,{type:"invalid-body"})}),s=(t.formMethod||"get").toUpperCase(),a=IS(e);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!es(s))return r();let p=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((g,[x,v])=>`${g}${x}=${v}
`,""):String(t.body);return{path:e,submission:{formMethod:s,formAction:a,formEncType:t.formEncType,formData:void 0,json:void 0,text:p}}}else if(t.formEncType==="application/json"){if(!es(s))return r();try{let p=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:e,submission:{formMethod:s,formAction:a,formEncType:t.formEncType,formData:void 0,json:p,text:void 0}}}catch{return r()}}}kt(typeof FormData=="function","FormData is not available in this environment");let c,u;if(t.formData)c=ag(t.formData),u=t.formData;else if(t.body instanceof FormData)c=ag(t.body),u=t.body;else if(t.body instanceof URLSearchParams)c=t.body,u=Vv(c);else if(t.body==null)c=new URLSearchParams,u=new FormData;else try{c=new URLSearchParams(t.body),u=Vv(c)}catch{return r()}let d={formMethod:s,formAction:a,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:u,json:void 0,text:void 0};if(es(d.formMethod))return{path:e,submission:d};let h=na(e);return n&&h.search&&Qg(h.search)&&c.append("index",""),h.search=`?${c}`,{path:Zo(h),submission:d}}function Bv(n,e,t=!1){let r=n.findIndex(i=>i.route.id===e);return r>=0?n.slice(0,t?r+1:r):n}function Uv(n,e,t,r,i,s,a,c,u,d,h,p,g,x){let v=x?ui(x[1])?x[1].error:x[1].data:void 0,S=n.createURL(e.location),T=n.createURL(i),_=t;s&&e.errors?_=Bv(t,Object.keys(e.errors)[0],!0):x&&ui(x[1])&&(_=Bv(t,x[0]));let C=x?x[1].statusCode:void 0,k=C&&C>=400,O=_.filter(($,M)=>{let{route:U}=$;if(U.lazy)return!0;if(U.loader==null)return!1;if(s)return og(U,e.loaderData,e.errors);if(O_(e.loaderData,e.matches[M],$))return!0;let W=e.matches[M],R=$;return jv($,{currentUrl:S,currentParams:W.params,nextUrl:T,nextParams:R.params,...r,actionResult:v,actionStatus:C,defaultShouldRevalidate:k?!1:a||S.pathname+S.search===T.pathname+T.search||S.search!==T.search||N_(W,R)})}),w=[];return d.forEach(($,M)=>{if(s||!t.some(fe=>fe.route.id===$.routeId)||u.has(M))return;let U=Qo(p,$.path,g);if(!U){w.push({key:M,routeId:$.routeId,path:$.path,matches:null,match:null,controller:null});return}let W=e.fetchers.get(M),R=nu(U,$.path),G=!1;h.has(M)?G=!1:c.has(M)?(c.delete(M),G=!0):W&&W.state!=="idle"&&W.data===void 0?G=a:G=jv(R,{currentUrl:S,currentParams:e.matches[e.matches.length-1].params,nextUrl:T,nextParams:t[t.length-1].params,...r,actionResult:v,actionStatus:C,defaultShouldRevalidate:k?!1:a}),G&&w.push({key:M,routeId:$.routeId,path:$.path,matches:U,match:R,controller:new AbortController})}),[O,w]}function og(n,e,t){if(n.lazy)return!0;if(!n.loader)return!1;let r=e!=null&&e[n.id]!==void 0,i=t!=null&&t[n.id]!==void 0;return!r&&i?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!r&&!i}function O_(n,e,t){let r=!e||t.route.id!==e.route.id,i=!n.hasOwnProperty(t.route.id);return r||i}function N_(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function jv(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function Hv(n,e,t,r,i){let s;if(n){let u=r[n];kt(u,`No route found to patch children into: routeId = ${n}`),u.children||(u.children=[]),s=u.children}else s=t;let a=e.filter(u=>!s.some(d=>kS(u,d))),c=$f(a,i,[n||"_","patch",String((s==null?void 0:s.length)||"0")],r);s.push(...c)}function kS(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,r)=>{var i;return(i=e.children)==null?void 0:i.some(s=>kS(t,s))}):!1}async function M_(n,e,t){if(!n.lazy)return;let r=await n.lazy();if(!n.lazy)return;let i=t[n.id];kt(i,"No route found in manifest");let s={};for(let a in r){let u=i[a]!==void 0&&a!=="hasErrorBoundary";ir(!u,`Route "${i.id}" has a static property "${a}" defined but its lazy function is also returning a value for this property. The lazy route property "${a}" will be ignored.`),!u&&!s_.has(a)&&(s[a]=r[a])}Object.assign(i,s),Object.assign(i,{...e(i),lazy:void 0})}async function F_({matches:n}){let e=n.filter(r=>r.shouldLoad);return(await Promise.all(e.map(r=>r.resolve()))).reduce((r,i,s)=>Object.assign(r,{[e[s].route.id]:i}),{})}async function $_(n,e,t,r,i,s,a,c,u,d){let h=s.map(x=>x.route.lazy?M_(x.route,u,c):void 0),p=s.map((x,v)=>{let S=h[v],T=i.some(C=>C.route.id===x.route.id);return{...x,shouldLoad:T,resolve:async C=>(C&&r.method==="GET"&&(x.route.lazy||x.route.loader)&&(T=!0),T?B_(e,r,x,S,C,d):Promise.resolve({type:"data",result:void 0}))}}),g=await n({matches:p,request:r,params:s[0].params,fetcherKey:a,context:d});try{await Promise.all(h)}catch{}return g}async function B_(n,e,t,r,i,s){let a,c,u=d=>{let h,p=new Promise((v,S)=>h=S);c=()=>h(),e.signal.addEventListener("abort",c);let g=v=>typeof d!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${n}" [routeId: ${t.route.id}]`)):d({request:e,params:t.params,context:s},...v!==void 0?[v]:[]),x=(async()=>{try{return{type:"data",result:await(i?i(S=>g(S)):g())}}catch(v){return{type:"error",result:v}}})();return Promise.race([x,p])};try{let d=t.route[n];if(r)if(d){let h,[p]=await Promise.all([u(d).catch(g=>{h=g}),r]);if(h!==void 0)throw h;a=p}else if(await r,d=t.route[n],d)a=await u(d);else if(n==="action"){let h=new URL(e.url),p=h.pathname+h.search;throw Ii(405,{method:e.method,pathname:p,routeId:t.route.id})}else return{type:"data",result:void 0};else if(d)a=await u(d);else{let h=new URL(e.url),p=h.pathname+h.search;throw Ii(404,{pathname:p})}}catch(d){return{type:"error",result:d}}finally{c&&e.signal.removeEventListener("abort",c)}return a}async function U_(n){var r,i,s,a;let{result:e,type:t}=n;if(PS(e)){let c;try{let u=e.headers.get("Content-Type");u&&/\bapplication\/json\b/.test(u)?e.body==null?c=null:c=await e.json():c=await e.text()}catch(u){return{type:"error",error:u}}return t==="error"?{type:"error",error:new Uf(e.status,e.statusText,c),statusCode:e.status,headers:e.headers}:{type:"data",data:c,statusCode:e.status,headers:e.headers}}if(t==="error"){if(qv(e)){if(e.data instanceof Error)return{type:"error",error:e.data,statusCode:(r=e.init)==null?void 0:r.status};e=new Uf(((i=e.init)==null?void 0:i.status)||500,void 0,e.data)}return{type:"error",error:e,statusCode:hh(e)?e.status:void 0}}return qv(e)?{type:"data",data:e.data,statusCode:(s=e.init)==null?void 0:s.status,headers:(a=e.init)!=null&&a.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function j_(n,e,t,r,i){let s=n.headers.get("Location");if(kt(s,"Redirects returned/thrown from loaders/actions must have a Location header"),!Xg.test(s)){let a=r.slice(0,r.findIndex(c=>c.route.id===t)+1);s=sg(new URL(e.url),a,i,s),n.headers.set("Location",s)}return n}function Gv(n,e,t){if(Xg.test(n)){let r=n,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),s=rs(i.pathname,t)!=null;if(i.origin===e.origin&&s)return i.pathname+i.search+i.hash}return n}function Pl(n,e,t,r){let i=n.createURL(IS(e)).toString(),s={signal:t};if(r&&es(r.formMethod)){let{formMethod:a,formEncType:c}=r;s.method=a.toUpperCase(),c==="application/json"?(s.headers=new Headers({"Content-Type":c}),s.body=JSON.stringify(r.json)):c==="text/plain"?s.body=r.text:c==="application/x-www-form-urlencoded"&&r.formData?s.body=ag(r.formData):s.body=r.formData}return new Request(i,s)}function ag(n){let e=new URLSearchParams;for(let[t,r]of n.entries())e.append(t,typeof r=="string"?r:r.name);return e}function Vv(n){let e=new FormData;for(let[t,r]of n.entries())e.append(t,r);return e}function H_(n,e,t,r=!1,i=!1){let s={},a=null,c,u=!1,d={},h=t&&ui(t[1])?t[1].error:void 0;return n.forEach(p=>{if(!(p.route.id in e))return;let g=p.route.id,x=e[g];if(kt(!Ba(x),"Cannot handle redirect results in processLoaderData"),ui(x)){let v=x.error;if(h!==void 0&&(v=h,h=void 0),a=a||{},i)a[g]=v;else{let S=$a(n,g);a[S.route.id]==null&&(a[S.route.id]=v)}r||(s[g]=AS),u||(u=!0,c=hh(x.error)?x.error.status:500),x.headers&&(d[g]=x.headers)}else s[g]=x.data,x.statusCode&&x.statusCode!==200&&!u&&(c=x.statusCode),x.headers&&(d[g]=x.headers)}),h!==void 0&&t&&(a={[t[0]]:h},s[t[0]]=void 0),{loaderData:s,errors:a,statusCode:c||200,loaderHeaders:d}}function zv(n,e,t,r,i,s){let{loaderData:a,errors:c}=H_(e,t,r);return i.forEach(u=>{let{key:d,match:h,controller:p}=u,g=s[d];if(kt(g,"Did not find corresponding fetcher result"),!(p&&p.signal.aborted))if(ui(g)){let x=$a(n.matches,h==null?void 0:h.route.id);c&&c[x.route.id]||(c={...c,[x.route.id]:g.error}),n.fetchers.delete(d)}else if(Ba(g))kt(!1,"Unhandled fetcher revalidation redirect");else{let x=qo(g.data);n.fetchers.set(d,x)}}),{loaderData:a,errors:c}}function Kv(n,e,t,r){let i=Object.entries(e).filter(([,s])=>s!==AS).reduce((s,[a,c])=>(s[a]=c,s),{});for(let s of t){let a=s.route.id;if(!e.hasOwnProperty(a)&&n.hasOwnProperty(a)&&s.route.loader&&(i[a]=n[a]),r&&r.hasOwnProperty(a))break}return i}function Wv(n){return n?ui(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function $a(n,e){return(e?n.slice(0,n.findIndex(r=>r.route.id===e)+1):[...n]).reverse().find(r=>r.route.hasErrorBoundary===!0)||n[0]}function Yv(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Ii(n,{pathname:e,routeId:t,method:r,type:i,message:s}={}){let a="Unknown Server Error",c="Unknown @remix-run/router error";return n===400?(a="Bad Request",r&&e&&t?c=`You made a ${r} request to "${e}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:i==="invalid-body"&&(c="Unable to encode submission body")):n===403?(a="Forbidden",c=`Route "${t}" does not match URL "${e}"`):n===404?(a="Not Found",c=`No route matches URL "${e}"`):n===405&&(a="Method Not Allowed",r&&e&&t?c=`You made a ${r.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:r&&(c=`Invalid request method "${r.toUpperCase()}"`)),new Uf(n||500,a,new Error(c),!0)}function Xd(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[r,i]=e[t];if(Ba(i))return{key:r,result:i}}}function IS(n){let e=typeof n=="string"?na(n):n;return Zo({...e,hash:""})}function G_(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function V_(n){return PS(n.result)&&R_.has(n.result.status)}function ui(n){return n.type==="error"}function Ba(n){return(n&&n.type)==="redirect"}function qv(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function PS(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function z_(n){return C_.has(n.toUpperCase())}function es(n){return __.has(n.toUpperCase())}function Qg(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function nu(n,e){let t=typeof e=="string"?na(e).search:e.search;if(n[n.length-1].route.index&&Qg(t||""))return n[n.length-1];let r=LS(n);return r[r.length-1]}function Xv(n){let{formMethod:e,formAction:t,formEncType:r,text:i,formData:s,json:a}=n;if(!(!e||!t||!r)){if(i!=null)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:t,formEncType:r,formData:s,json:void 0,text:void 0};if(a!==void 0)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:a,text:void 0}}}function um(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function K_(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Yc(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function W_(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function qo(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function Y_(n,e){try{let t=n.sessionStorage.getItem(RS);if(t){let r=JSON.parse(t);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function q_(n,e){if(e.size>0){let t={};for(let[r,i]of e)t[r]=[...i];try{n.sessionStorage.setItem(RS,JSON.stringify(t))}catch(r){ir(!1,`Failed to save applied view transitions in sessionStorage (${r}).`)}}}function X_(){let n,e,t=new Promise((r,i)=>{n=async s=>{r(s);try{await t}catch{}},e=async s=>{i(s);try{await t}catch{}}});return{promise:t,resolve:n,reject:e}}var Qa=F.createContext(null);Qa.displayName="DataRouter";var Tu=F.createContext(null);Tu.displayName="DataRouterState";var Jg=F.createContext({isTransitioning:!1});Jg.displayName="ViewTransition";var DS=F.createContext(new Map);DS.displayName="Fetchers";var Q_=F.createContext(null);Q_.displayName="Await";var Vs=F.createContext(null);Vs.displayName="Navigation";var ph=F.createContext(null);ph.displayName="Location";var ss=F.createContext({outlet:null,matches:[],isDataRoute:!1});ss.displayName="Route";var Zg=F.createContext(null);Zg.displayName="RouteError";function J_(n,{relative:e}={}){kt(bu(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=F.useContext(Vs),{hash:i,pathname:s,search:a}=wu(n,{relative:e}),c=s;return t!=="/"&&(c=s==="/"?t:Bs([t,s])),r.createHref({pathname:c,search:a,hash:i})}function bu(){return F.useContext(ph)!=null}function os(){return kt(bu(),"useLocation() may be used only in the context of a <Router> component."),F.useContext(ph).location}var OS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function NS(n){F.useContext(Vs).static||F.useLayoutEffect(n)}function rc(){let{isDataRoute:n}=F.useContext(ss);return n?hL():Z_()}function Z_(){kt(bu(),"useNavigate() may be used only in the context of a <Router> component.");let n=F.useContext(Qa),{basename:e,navigator:t}=F.useContext(Vs),{matches:r}=F.useContext(ss),{pathname:i}=os(),s=JSON.stringify(Yg(r)),a=F.useRef(!1);return NS(()=>{a.current=!0}),F.useCallback((u,d={})=>{if(ir(a.current,OS),!a.current)return;if(typeof u=="number"){t.go(u);return}let h=qg(u,JSON.parse(s),i,d.relative==="path");n==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Bs([e,h.pathname])),(d.replace?t.replace:t.push)(h,d.state,d)},[e,t,s,i,n])}var eL=F.createContext(null);function tL(n){let e=F.useContext(ss).outlet;return e&&F.createElement(eL.Provider,{value:n},e)}function e0(){let{matches:n}=F.useContext(ss),e=n[n.length-1];return e?e.params:{}}function wu(n,{relative:e}={}){let{matches:t}=F.useContext(ss),{pathname:r}=os(),i=JSON.stringify(Yg(t));return F.useMemo(()=>qg(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function nL(n,e,t,r){kt(bu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=F.useContext(Vs),{matches:s}=F.useContext(ss),a=s[s.length-1],c=a?a.params:{},u=a?a.pathname:"/",d=a?a.pathnameBase:"/",h=a&&a.route;{let _=h&&h.path||"";MS(u,!h||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let p=os(),g;g=p;let x=g.pathname||"/",v=x;if(d!=="/"){let _=d.replace(/^\//,"").split("/");v="/"+x.replace(/^\//,"").split("/").slice(_.length).join("/")}let S=Qo(n,{pathname:v});return ir(h||S!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),ir(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),aL(S&&S.map(_=>Object.assign({},_,{params:Object.assign({},c,_.params),pathname:Bs([d,i.encodeLocation?i.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?d:Bs([d,i.encodeLocation?i.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),s,t,r)}function rL(){let n=fL(),e=hh(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",n),a=F.createElement(F.Fragment,null,F.createElement("p",null," Hey developer "),F.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",F.createElement("code",{style:s},"ErrorBoundary")," or"," ",F.createElement("code",{style:s},"errorElement")," prop on your route.")),F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},e),t?F.createElement("pre",{style:i},t):null,a)}var iL=F.createElement(rL,null),sL=class extends F.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?F.createElement(ss.Provider,{value:this.props.routeContext},F.createElement(Zg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function oL({routeContext:n,match:e,children:t}){let r=F.useContext(Qa);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),F.createElement(ss.Provider,{value:n},t)}function aL(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,s=t==null?void 0:t.errors;if(s!=null){let u=i.findIndex(d=>d.route.id&&(s==null?void 0:s[d.route.id])!==void 0);kt(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,u+1))}let a=!1,c=-1;if(t)for(let u=0;u<i.length;u++){let d=i[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:h,errors:p}=t,g=d.route.loader&&!h.hasOwnProperty(d.route.id)&&(!p||p[d.route.id]===void 0);if(d.route.lazy||g){a=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((u,d,h)=>{let p,g=!1,x=null,v=null;t&&(p=s&&d.route.id?s[d.route.id]:void 0,x=d.route.errorElement||iL,a&&(c<0&&h===0?(MS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,v=null):c===h&&(g=!0,v=d.route.hydrateFallbackElement||null)));let S=e.concat(i.slice(0,h+1)),T=()=>{let _;return p?_=x:g?_=v:d.route.Component?_=F.createElement(d.route.Component,null):d.route.element?_=d.route.element:_=u,F.createElement(oL,{match:d,routeContext:{outlet:u,matches:S,isDataRoute:t!=null},children:_})};return t&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?F.createElement(sL,{location:t.location,revalidation:t.revalidation,component:x,error:p,children:T(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):T()},null)}function t0(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function lL(n){let e=F.useContext(Qa);return kt(e,t0(n)),e}function cL(n){let e=F.useContext(Tu);return kt(e,t0(n)),e}function uL(n){let e=F.useContext(ss);return kt(e,t0(n)),e}function n0(n){let e=uL(n),t=e.matches[e.matches.length-1];return kt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function dL(){return n0("useRouteId")}function fL(){var r;let n=F.useContext(Zg),e=cL("useRouteError"),t=n0("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function hL(){let{router:n}=lL("useNavigate"),e=n0("useNavigate"),t=F.useRef(!1);return NS(()=>{t.current=!0}),F.useCallback(async(i,s={})=>{ir(t.current,OS),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...s}))},[n,e])}var Qv={};function MS(n,e,t){!e&&!Qv[n]&&(Qv[n]=!0,ir(!1,t))}var Jv={};function Zv(n,e){!n&&!Jv[e]&&(Jv[e]=!0,console.warn(e))}function pL(n){let e={hasErrorBoundary:n.hasErrorBoundary||n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&(n.element&&ir(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:F.createElement(n.Component),Component:void 0})),n.HydrateFallback&&(n.hydrateFallbackElement&&ir(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:F.createElement(n.HydrateFallback),HydrateFallback:void 0})),n.ErrorBoundary&&(n.errorElement&&ir(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:F.createElement(n.ErrorBoundary),ErrorBoundary:void 0})),e}var mL=class{constructor(){this.status="pending",this.promise=new Promise((n,e)=>{this.resolve=t=>{this.status==="pending"&&(this.status="resolved",n(t))},this.reject=t=>{this.status==="pending"&&(this.status="rejected",e(t))}})}};function gL({router:n,flushSync:e}){let[t,r]=F.useState(n.state),[i,s]=F.useState(),[a,c]=F.useState({isTransitioning:!1}),[u,d]=F.useState(),[h,p]=F.useState(),[g,x]=F.useState(),v=F.useRef(new Map),S=F.useCallback((k,{deletedFetchers:O,flushSync:w,viewTransitionOpts:$})=>{O.forEach(U=>v.current.delete(U)),k.fetchers.forEach((U,W)=>{U.data!==void 0&&v.current.set(W,U.data)}),Zv(w===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let M=n.window!=null&&n.window.document!=null&&typeof n.window.document.startViewTransition=="function";if(Zv($==null||M,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!$||!M){e&&w?e(()=>r(k)):F.startTransition(()=>r(k));return}if(e&&w){e(()=>{h&&(u&&u.resolve(),h.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:$.currentLocation,nextLocation:$.nextLocation})});let U=n.window.document.startViewTransition(()=>{e(()=>r(k))});U.finished.finally(()=>{e(()=>{d(void 0),p(void 0),s(void 0),c({isTransitioning:!1})})}),e(()=>p(U));return}h?(u&&u.resolve(),h.skipTransition(),x({state:k,currentLocation:$.currentLocation,nextLocation:$.nextLocation})):(s(k),c({isTransitioning:!0,flushSync:!1,currentLocation:$.currentLocation,nextLocation:$.nextLocation}))},[n.window,e,h,u]);F.useLayoutEffect(()=>n.subscribe(S),[n,S]),F.useEffect(()=>{a.isTransitioning&&!a.flushSync&&d(new mL)},[a]),F.useEffect(()=>{if(u&&i&&n.window){let k=i,O=u.promise,w=n.window.document.startViewTransition(async()=>{F.startTransition(()=>r(k)),await O});w.finished.finally(()=>{d(void 0),p(void 0),s(void 0),c({isTransitioning:!1})}),p(w)}},[i,u,n.window]),F.useEffect(()=>{u&&i&&t.location.key===i.location.key&&u.resolve()},[u,h,t.location,i]),F.useEffect(()=>{!a.isTransitioning&&g&&(s(g.state),c({isTransitioning:!0,flushSync:!1,currentLocation:g.currentLocation,nextLocation:g.nextLocation}),x(void 0))},[a.isTransitioning,g]);let T=F.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:k=>n.navigate(k),push:(k,O,w)=>n.navigate(k,{state:O,preventScrollReset:w==null?void 0:w.preventScrollReset}),replace:(k,O,w)=>n.navigate(k,{replace:!0,state:O,preventScrollReset:w==null?void 0:w.preventScrollReset})}),[n]),_=n.basename||"/",C=F.useMemo(()=>({router:n,navigator:T,static:!1,basename:_}),[n,T,_]);return F.createElement(F.Fragment,null,F.createElement(Qa.Provider,{value:C},F.createElement(Tu.Provider,{value:t},F.createElement(DS.Provider,{value:v.current},F.createElement(Jg.Provider,{value:a},F.createElement(xL,{basename:_,location:t.location,navigationType:t.historyAction,navigator:T},F.createElement(yL,{routes:n.routes,future:n.future,state:t})))))),null)}var yL=F.memo(vL);function vL({routes:n,future:e,state:t}){return nL(n,void 0,t,e)}function r0(n){return tL(n.context)}function xL({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:s=!1}){kt(!bu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=n.replace(/^\/*/,"/"),c=F.useMemo(()=>({basename:a,navigator:i,static:s,future:{}}),[a,i,s]);typeof t=="string"&&(t=na(t));let{pathname:u="/",search:d="",hash:h="",state:p=null,key:g="default"}=t,x=F.useMemo(()=>{let v=rs(u,a);return v==null?null:{location:{pathname:v,search:d,hash:h,state:p,key:g},navigationType:r}},[a,u,d,h,p,g,r]);return ir(x!=null,`<Router basename="${a}"> is not able to match the URL "${u}${d}${h}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:F.createElement(Vs.Provider,{value:c},F.createElement(ph.Provider,{children:e,value:x}))}var Sf="get",Ef="application/x-www-form-urlencoded";function mh(n){return n!=null&&typeof n.tagName=="string"}function SL(n){return mh(n)&&n.tagName.toLowerCase()==="button"}function EL(n){return mh(n)&&n.tagName.toLowerCase()==="form"}function TL(n){return mh(n)&&n.tagName.toLowerCase()==="input"}function bL(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function wL(n,e){return n.button===0&&(!e||e==="_self")&&!bL(n)}function lg(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let r=n[t];return e.concat(Array.isArray(r)?r.map(i=>[t,i]):[[t,r]])},[]))}function _L(n,e){let t=lg(n);return e&&e.forEach((r,i)=>{t.has(i)||e.getAll(i).forEach(s=>{t.append(i,s)})}),t}var Qd=null;function LL(){if(Qd===null)try{new FormData(document.createElement("form"),0),Qd=!1}catch{Qd=!0}return Qd}var CL=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function dm(n){return n!=null&&!CL.has(n)?(ir(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ef}"`),null):n}function RL(n,e){let t,r,i,s,a;if(EL(n)){let c=n.getAttribute("action");r=c?rs(c,e):null,t=n.getAttribute("method")||Sf,i=dm(n.getAttribute("enctype"))||Ef,s=new FormData(n)}else if(SL(n)||TL(n)&&(n.type==="submit"||n.type==="image")){let c=n.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=n.getAttribute("formaction")||c.getAttribute("action");if(r=u?rs(u,e):null,t=n.getAttribute("formmethod")||c.getAttribute("method")||Sf,i=dm(n.getAttribute("formenctype"))||dm(c.getAttribute("enctype"))||Ef,s=new FormData(c,n),!LL()){let{name:d,type:h,value:p}=n;if(h==="image"){let g=d?`${d}.`:"";s.append(`${g}x`,"0"),s.append(`${g}y`,"0")}else d&&s.append(d,p)}}else{if(mh(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Sf,r=null,i=Ef,a=n}return s&&i==="text/plain"&&(a=s,s=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:s,body:a}}function i0(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function AL(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function kL(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function IL(n,e,t){let r=await Promise.all(n.map(async i=>{let s=e.routes[i.route.id];if(s){let a=await AL(s,t);return a.links?a.links():[]}return[]}));return NL(r.flat(1).filter(kL).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function ex(n,e,t,r,i,s){let a=(u,d)=>t[d]?u.route.id!==t[d].route.id:!0,c=(u,d)=>{var h;return t[d].pathname!==u.pathname||((h=t[d].route.path)==null?void 0:h.endsWith("*"))&&t[d].params["*"]!==u.params["*"]};return s==="assets"?e.filter((u,d)=>a(u,d)||c(u,d)):s==="data"?e.filter((u,d)=>{var p;let h=r.routes[u.route.id];if(!h||!h.hasLoader)return!1;if(a(u,d)||c(u,d))return!0;if(u.route.shouldRevalidate){let g=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((p=t[0])==null?void 0:p.params)||{},nextUrl:new URL(n,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function PL(n,e){return DL(n.map(t=>{let r=e.routes[t.route.id];if(!r)return[];let i=[r.module];return r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function DL(n){return[...new Set(n)]}function OL(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function NL(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let s=JSON.stringify(OL(i));return t.has(s)||(t.add(s),r.push({key:s,link:i})),r},[])}function ML(n){let e=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function FL(){let n=F.useContext(Qa);return i0(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function $L(){let n=F.useContext(Tu);return i0(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var s0=F.createContext(void 0);s0.displayName="FrameworkContext";function FS(){let n=F.useContext(s0);return i0(n,"You must render this element inside a <HydratedRouter> element"),n}function BL(n,e){let t=F.useContext(s0),[r,i]=F.useState(!1),[s,a]=F.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:d,onMouseLeave:h,onTouchStart:p}=e,g=F.useRef(null);F.useEffect(()=>{if(n==="render"&&a(!0),n==="viewport"){let S=_=>{_.forEach(C=>{a(C.isIntersecting)})},T=new IntersectionObserver(S,{threshold:.5});return g.current&&T.observe(g.current),()=>{T.disconnect()}}},[n]),F.useEffect(()=>{if(r){let S=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(S)}}},[r]);let x=()=>{i(!0)},v=()=>{i(!1),a(!1)};return t?n!=="intent"?[s,g,{}]:[s,g,{onFocus:qc(c,x),onBlur:qc(u,v),onMouseEnter:qc(d,x),onMouseLeave:qc(h,v),onTouchStart:qc(p,x)}]:[!1,g,{}]}function qc(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function UL({page:n,...e}){let{router:t}=FL(),r=F.useMemo(()=>Qo(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?F.createElement(HL,{page:n,matches:r,...e}):(console.warn(`Tried to prefetch ${n} but no routes matched.`),null)}function jL(n){let{manifest:e,routeModules:t}=FS(),[r,i]=F.useState([]);return F.useEffect(()=>{let s=!1;return IL(n,e,t).then(a=>{s||i(a)}),()=>{s=!0}},[n,e,t]),r}function HL({page:n,matches:e,...t}){let r=os(),{manifest:i,routeModules:s}=FS(),{loaderData:a,matches:c}=$L(),u=F.useMemo(()=>ex(n,e,c,i,r,"data"),[n,e,c,i,r]),d=F.useMemo(()=>ex(n,e,c,i,r,"assets"),[n,e,c,i,r]),h=F.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let x=new Set,v=!1;if(e.forEach(T=>{var C;let _=i.routes[T.route.id];!_||!_.hasLoader||(!u.some(k=>k.route.id===T.route.id)&&T.route.id in a&&((C=s[T.route.id])!=null&&C.shouldRevalidate)||_.hasClientLoader?v=!0:x.add(T.route.id))}),x.size===0)return[];let S=ML(n);return v&&x.size>0&&S.searchParams.set("_routes",e.filter(T=>x.has(T.route.id)).map(T=>T.route.id).join(",")),[S.pathname+S.search]},[a,r,i,u,e,n,s]),p=F.useMemo(()=>PL(d,i),[d,i]),g=jL(d);return F.createElement(F.Fragment,null,h.map(x=>F.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...t})),p.map(x=>F.createElement("link",{key:x,rel:"modulepreload",href:x,...t})),g.map(({key:x,link:v})=>F.createElement("link",{key:x,...v})))}function GL(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var $S=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{$S&&(window.__reactRouterVersion="7.0.2")}catch{}function VL(n,e){return P_({basename:e==null?void 0:e.basename,future:e==null?void 0:e.future,history:n_({window:e==null?void 0:e.window}),hydrationData:zL(),routes:n,mapRouteProperties:pL,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window}).initialize()}function zL(){let n=window==null?void 0:window.__staticRouterHydrationData;return n&&n.errors&&(n={...n,errors:KL(n.errors)}),n}function KL(n){if(!n)return null;let e=Object.entries(n),t={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")t[r]=new Uf(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let a=new s(i.message);a.stack="",t[r]=a}catch{}}if(t[r]==null){let s=new Error(i.message);s.stack="",t[r]=s}}else t[r]=i;return t}var BS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sr=F.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:s,replace:a,state:c,target:u,to:d,preventScrollReset:h,viewTransition:p,...g},x){let{basename:v}=F.useContext(Vs),S=typeof d=="string"&&BS.test(d),T,_=!1;if(typeof d=="string"&&S&&(T=d,$S))try{let W=new URL(window.location.href),R=d.startsWith("//")?new URL(W.protocol+d):new URL(d),G=rs(R.pathname,v);R.origin===W.origin&&G!=null?d=G+R.search+R.hash:_=!0}catch{ir(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let C=J_(d,{relative:i}),[k,O,w]=BL(r,g),$=qL(d,{replace:a,state:c,target:u,preventScrollReset:h,relative:i,viewTransition:p});function M(W){e&&e(W),W.defaultPrevented||$(W)}let U=F.createElement("a",{...g,...w,href:T||C,onClick:_||s?e:M,ref:GL(x,O),target:u,"data-discover":!S&&t==="render"?"true":void 0});return k&&!S?F.createElement(F.Fragment,null,U,F.createElement(UL,{page:C})):U});sr.displayName="Link";var o0=F.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:s,to:a,viewTransition:c,children:u,...d},h){let p=wu(a,{relative:d.relative}),g=os(),x=F.useContext(Tu),{navigator:v,basename:S}=F.useContext(Vs),T=x!=null&&eC(p)&&c===!0,_=v.encodeLocation?v.encodeLocation(p).pathname:p.pathname,C=g.pathname,k=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;t||(C=C.toLowerCase(),k=k?k.toLowerCase():null,_=_.toLowerCase()),k&&S&&(k=rs(k,S)||k);const O=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let w=C===_||!i&&C.startsWith(_)&&C.charAt(O)==="/",$=k!=null&&(k===_||!i&&k.startsWith(_)&&k.charAt(_.length)==="/"),M={isActive:w,isPending:$,isTransitioning:T},U=w?e:void 0,W;typeof r=="function"?W=r(M):W=[r,w?"active":null,$?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let R=typeof s=="function"?s(M):s;return F.createElement(sr,{...d,"aria-current":U,className:W,ref:h,style:R,to:a,viewTransition:c},typeof u=="function"?u(M):u)});o0.displayName="NavLink";var WL=F.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:s,method:a=Sf,action:c,onSubmit:u,relative:d,preventScrollReset:h,viewTransition:p,...g},x)=>{let v=JL(),S=ZL(c,{relative:d}),T=a.toLowerCase()==="get"?"get":"post",_=typeof c=="string"&&BS.test(c),C=k=>{if(u&&u(k),k.defaultPrevented)return;k.preventDefault();let O=k.nativeEvent.submitter,w=(O==null?void 0:O.getAttribute("formmethod"))||a;v(O||k.currentTarget,{fetcherKey:e,method:w,navigate:t,replace:i,state:s,relative:d,preventScrollReset:h,viewTransition:p})};return F.createElement("form",{ref:x,method:T,action:S,onSubmit:r?u:C,...g,"data-discover":!_&&n==="render"?"true":void 0})});WL.displayName="Form";function YL(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function US(n){let e=F.useContext(Qa);return kt(e,YL(n)),e}function qL(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:s,viewTransition:a}={}){let c=rc(),u=os(),d=wu(n,{relative:s});return F.useCallback(h=>{if(wL(h,e)){h.preventDefault();let p=t!==void 0?t:Zo(u)===Zo(d);c(n,{replace:p,state:r,preventScrollReset:i,relative:s,viewTransition:a})}},[u,c,d,t,r,e,n,i,s,a])}function jS(n){ir(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=F.useRef(lg(n)),t=F.useRef(!1),r=os(),i=F.useMemo(()=>_L(r.search,t.current?null:e.current),[r.search]),s=rc(),a=F.useCallback((c,u)=>{const d=lg(typeof c=="function"?c(i):c);t.current=!0,s("?"+d,u)},[s,i]);return[i,a]}var XL=0,QL=()=>`__${String(++XL)}__`;function JL(){let{router:n}=US("useSubmit"),{basename:e}=F.useContext(Vs),t=dL();return F.useCallback(async(r,i={})=>{let{action:s,method:a,encType:c,formData:u,body:d}=RL(r,e);if(i.navigate===!1){let h=i.fetcherKey||QL();await n.fetch(h,t,i.action||s,{preventScrollReset:i.preventScrollReset,formData:u,body:d,formMethod:i.method||a,formEncType:i.encType||c,flushSync:i.flushSync})}else await n.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:u,body:d,formMethod:i.method||a,formEncType:i.encType||c,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function ZL(n,{relative:e}={}){let{basename:t}=F.useContext(Vs),r=F.useContext(ss);kt(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...wu(n||".",{relative:e})},a=os();if(n==null){s.search=a.search;let c=new URLSearchParams(s.search),u=c.getAll("index");if(u.some(h=>h==="")){c.delete("index"),u.filter(p=>p).forEach(p=>c.append("index",p));let h=c.toString();s.search=h?`?${h}`:""}}return(!n||n===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(s.pathname=s.pathname==="/"?t:Bs([t,s.pathname])),Zo(s)}function eC(n,e={}){let t=F.useContext(Jg);kt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=US("useViewTransitionState"),i=wu(n,{relative:e.relative});if(!t.isTransitioning)return!1;let s=rs(t.currentLocation.pathname,r)||t.currentLocation.pathname,a=rs(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Bf(i.pathname,a)!=null||Bf(i.pathname,s)!=null}new TextEncoder;var tC=bS();/**
 * react-router v7.0.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nC(n){return F.createElement(gL,{flushSync:tC.flushSync,...n})}function HS(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=HS(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function ns(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=HS(n))&&(r&&(r+=" "),r+=e);return r}function rC(n){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}rC(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{margin-bottom:0;border-radius:0}}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var _u=n=>typeof n=="number"&&!isNaN(n),za=n=>typeof n=="string",go=n=>typeof n=="function",iC=n=>za(n)||_u(n),cg=n=>za(n)||go(n)?n:null,sC=(n,e)=>n===!1||_u(n)&&n>0?n:e,ug=n=>F.isValidElement(n)||za(n)||go(n)||_u(n);function oC(n,e,t=300){let{scrollHeight:r,style:i}=n;requestAnimationFrame(()=>{i.minHeight="initial",i.height=r+"px",i.transition=`all ${t}ms`,requestAnimationFrame(()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(e,t)})})}function aC({enter:n,exit:e,appendPosition:t=!1,collapse:r=!0,collapseDuration:i=300}){return function({children:s,position:a,preventExitTransition:c,done:u,nodeRef:d,isIn:h,playToast:p}){let g=t?`${n}--${a}`:n,x=t?`${e}--${a}`:e,v=F.useRef(0);return F.useLayoutEffect(()=>{let S=d.current,T=g.split(" "),_=C=>{C.target===d.current&&(p(),S.removeEventListener("animationend",_),S.removeEventListener("animationcancel",_),v.current===0&&C.type!=="animationcancel"&&S.classList.remove(...T))};S.classList.add(...T),S.addEventListener("animationend",_),S.addEventListener("animationcancel",_)},[]),F.useEffect(()=>{let S=d.current,T=()=>{S.removeEventListener("animationend",T),r?oC(S,u,i):u()};h||(c?T():(v.current=1,S.className+=` ${x}`,S.addEventListener("animationend",T)))},[h]),Bt.createElement(Bt.Fragment,null,s)}}function tx(n,e){return{content:GS(n.content,n.props),containerId:n.props.containerId,id:n.props.toastId,theme:n.props.theme,type:n.props.type,data:n.props.data||{},isLoading:n.props.isLoading,icon:n.props.icon,reason:n.removalReason,status:e}}function GS(n,e,t=!1){return F.isValidElement(n)&&!za(n.type)?F.cloneElement(n,{closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:t}):go(n)?n({closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:t}):n}function lC({closeToast:n,theme:e,ariaLabel:t="close"}){return Bt.createElement("button",{className:`Toastify__close-button Toastify__close-button--${e}`,type:"button",onClick:r=>{r.stopPropagation(),n(!0)},"aria-label":t},Bt.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},Bt.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function cC({delay:n,isRunning:e,closeToast:t,type:r="default",hide:i,className:s,controlledProgress:a,progress:c,rtl:u,isIn:d,theme:h}){let p=i||a&&c===0,g={animationDuration:`${n}ms`,animationPlayState:e?"running":"paused"};a&&(g.transform=`scaleX(${c})`);let x=ns("Toastify__progress-bar",a?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${h}`,`Toastify__progress-bar--${r}`,{"Toastify__progress-bar--rtl":u}),v=go(s)?s({rtl:u,type:r,defaultClassName:x}):ns(x,s),S={[a&&c>=1?"onTransitionEnd":"onAnimationEnd"]:a&&c<1?null:()=>{d&&t()}};return Bt.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":p},Bt.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${h} Toastify__progress-bar--${r}`}),Bt.createElement("div",{role:"progressbar","aria-hidden":p?"true":"false","aria-label":"notification timer",className:v,style:g,...S}))}var uC=1,VS=()=>`${uC++}`;function dC(n,e,t){let r=1,i=0,s=[],a=[],c=e,u=new Map,d=new Set,h=C=>(d.add(C),()=>d.delete(C)),p=()=>{a=Array.from(u.values()),d.forEach(C=>C())},g=({containerId:C,toastId:k,updateId:O})=>{let w=C?C!==n:n!==1,$=u.has(k)&&O==null;return w||$},x=(C,k)=>{u.forEach(O=>{var w;(k==null||k===O.props.toastId)&&((w=O.toggle)==null||w.call(O,C))})},v=C=>{var k,O;(O=(k=C.props)==null?void 0:k.onClose)==null||O.call(k,C.removalReason),C.isActive=!1},S=C=>{if(C==null)u.forEach(v);else{let k=u.get(C);k&&v(k)}p()},T=()=>{i-=s.length,s=[]},_=C=>{var k,O;let{toastId:w,updateId:$}=C.props,M=$==null;C.staleId&&u.delete(C.staleId),C.isActive=!0,u.set(w,C),p(),t(tx(C,M?"added":"updated")),M&&((O=(k=C.props).onOpen)==null||O.call(k))};return{id:n,props:c,observe:h,toggle:x,removeToast:S,toasts:u,clearQueue:T,buildToast:(C,k)=>{if(g(k))return;let{toastId:O,updateId:w,data:$,staleId:M,delay:U}=k,W=w==null;W&&i++;let R={...c,style:c.toastStyle,key:r++,...Object.fromEntries(Object.entries(k).filter(([fe,ae])=>ae!=null)),toastId:O,updateId:w,data:$,isIn:!1,className:cg(k.className||c.toastClassName),progressClassName:cg(k.progressClassName||c.progressClassName),autoClose:k.isLoading?!1:sC(k.autoClose,c.autoClose),closeToast(fe){u.get(O).removalReason=fe,S(O)},deleteToast(){let fe=u.get(O);if(fe!=null){if(t(tx(fe,"removed")),u.delete(O),i--,i<0&&(i=0),s.length>0){_(s.shift());return}p()}}};R.closeButton=c.closeButton,k.closeButton===!1||ug(k.closeButton)?R.closeButton=k.closeButton:k.closeButton===!0&&(R.closeButton=ug(c.closeButton)?c.closeButton:!0);let G={content:C,props:R,staleId:M};c.limit&&c.limit>0&&i>c.limit&&W?s.push(G):_u(U)?setTimeout(()=>{_(G)},U):_(G)},setProps(C){c=C},setToggle:(C,k)=>{let O=u.get(C);O&&(O.toggle=k)},isToastActive:C=>{var k;return(k=u.get(C))==null?void 0:k.isActive},getSnapshot:()=>a}}var Nr=new Map,uu=[],dg=new Set,fC=n=>dg.forEach(e=>e(n)),zS=()=>Nr.size>0;function hC(){uu.forEach(n=>WS(n.content,n.options)),uu=[]}var pC=(n,{containerId:e})=>{var t;return(t=Nr.get(e||1))==null?void 0:t.toasts.get(n)};function KS(n,e){var t;if(e)return!!((t=Nr.get(e))!=null&&t.isToastActive(n));let r=!1;return Nr.forEach(i=>{i.isToastActive(n)&&(r=!0)}),r}function mC(n){if(!zS()){uu=uu.filter(e=>n!=null&&e.options.toastId!==n);return}if(n==null||iC(n))Nr.forEach(e=>{e.removeToast(n)});else if(n&&("containerId"in n||"id"in n)){let e=Nr.get(n.containerId);e?e.removeToast(n.id):Nr.forEach(t=>{t.removeToast(n.id)})}}var gC=(n={})=>{Nr.forEach(e=>{e.props.limit&&(!n.containerId||e.id===n.containerId)&&e.clearQueue()})};function WS(n,e){ug(n)&&(zS()||uu.push({content:n,options:e}),Nr.forEach(t=>{t.buildToast(n,e)}))}function yC(n){var e;(e=Nr.get(n.containerId||1))==null||e.setToggle(n.id,n.fn)}function YS(n,e){Nr.forEach(t=>{(e==null||!(e!=null&&e.containerId)||(e==null?void 0:e.containerId)===t.id)&&t.toggle(n,e==null?void 0:e.id)})}function vC(n){let e=n.containerId||1;return{subscribe(t){let r=dC(e,n,fC);Nr.set(e,r);let i=r.observe(t);return hC(),()=>{i(),Nr.delete(e)}},setProps(t){var r;(r=Nr.get(e))==null||r.setProps(t)},getSnapshot(){var t;return(t=Nr.get(e))==null?void 0:t.getSnapshot()}}}function xC(n){return dg.add(n),()=>{dg.delete(n)}}function SC(n){return n&&(za(n.toastId)||_u(n.toastId))?n.toastId:VS()}function Lu(n,e){return WS(n,e),e.toastId}function gh(n,e){return{...e,type:e&&e.type||n,toastId:SC(e)}}function yh(n){return(e,t)=>Lu(e,gh(n,t))}function It(n,e){return Lu(n,gh("default",e))}It.loading=(n,e)=>Lu(n,gh("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e}));function EC(n,{pending:e,error:t,success:r},i){let s;e&&(s=za(e)?It.loading(e,i):It.loading(e.render,{...i,...e}));let a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},c=(d,h,p)=>{if(h==null){It.dismiss(s);return}let g={type:d,...a,...i,data:p},x=za(h)?{render:h}:h;return s?It.update(s,{...g,...x}):It(x.render,{...g,...x}),p},u=go(n)?n():n;return u.then(d=>c("success",r,d)).catch(d=>c("error",t,d)),u}It.promise=EC;It.success=yh("success");It.info=yh("info");It.error=yh("error");It.warning=yh("warning");It.warn=It.warning;It.dark=(n,e)=>Lu(n,gh("default",{theme:"dark",...e}));function TC(n){mC(n)}It.dismiss=TC;It.clearWaitingQueue=gC;It.isActive=KS;It.update=(n,e={})=>{let t=pC(n,e);if(t){let{props:r,content:i}=t,s={delay:100,...r,...e,toastId:e.toastId||n,updateId:VS()};s.toastId!==n&&(s.staleId=n);let a=s.render||i;delete s.render,Lu(a,s)}};It.done=n=>{It.update(n,{progress:1})};It.onChange=xC;It.play=n=>YS(!0,n);It.pause=n=>YS(!1,n);function bC(n){var e;let{subscribe:t,getSnapshot:r,setProps:i}=F.useRef(vC(n)).current;i(n);let s=(e=F.useSyncExternalStore(t,r,r))==null?void 0:e.slice();function a(c){if(!s)return[];let u=new Map;return n.newestOnTop&&s.reverse(),s.forEach(d=>{let{position:h}=d.props;u.has(h)||u.set(h,[]),u.get(h).push(d)}),Array.from(u,d=>c(d[0],d[1]))}return{getToastToRender:a,isToastActive:KS,count:s==null?void 0:s.length}}function wC(n){let[e,t]=F.useState(!1),[r,i]=F.useState(!1),s=F.useRef(null),a=F.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:c,pauseOnHover:u,closeToast:d,onClick:h,closeOnClick:p}=n;yC({id:n.toastId,containerId:n.containerId,fn:t}),F.useEffect(()=>{if(n.pauseOnFocusLoss)return g(),()=>{x()}},[n.pauseOnFocusLoss]);function g(){document.hasFocus()||_(),window.addEventListener("focus",T),window.addEventListener("blur",_)}function x(){window.removeEventListener("focus",T),window.removeEventListener("blur",_)}function v(M){if(n.draggable===!0||n.draggable===M.pointerType){C();let U=s.current;a.canCloseOnClick=!0,a.canDrag=!0,U.style.transition="none",n.draggableDirection==="x"?(a.start=M.clientX,a.removalDistance=U.offsetWidth*(n.draggablePercent/100)):(a.start=M.clientY,a.removalDistance=U.offsetHeight*(n.draggablePercent===80?n.draggablePercent*1.5:n.draggablePercent)/100)}}function S(M){let{top:U,bottom:W,left:R,right:G}=s.current.getBoundingClientRect();M.nativeEvent.type!=="touchend"&&n.pauseOnHover&&M.clientX>=R&&M.clientX<=G&&M.clientY>=U&&M.clientY<=W?_():T()}function T(){t(!0)}function _(){t(!1)}function C(){a.didMove=!1,document.addEventListener("pointermove",O),document.addEventListener("pointerup",w)}function k(){document.removeEventListener("pointermove",O),document.removeEventListener("pointerup",w)}function O(M){let U=s.current;if(a.canDrag&&U){a.didMove=!0,e&&_(),n.draggableDirection==="x"?a.delta=M.clientX-a.start:a.delta=M.clientY-a.start,a.start!==M.clientX&&(a.canCloseOnClick=!1);let W=n.draggableDirection==="x"?`${a.delta}px, var(--y)`:`0, calc(${a.delta}px + var(--y))`;U.style.transform=`translate3d(${W},0)`,U.style.opacity=`${1-Math.abs(a.delta/a.removalDistance)}`}}function w(){k();let M=s.current;if(a.canDrag&&a.didMove&&M){if(a.canDrag=!1,Math.abs(a.delta)>a.removalDistance){i(!0),n.closeToast(!0),n.collapseAll();return}M.style.transition="transform 0.2s, opacity 0.2s",M.style.removeProperty("transform"),M.style.removeProperty("opacity")}}let $={onPointerDown:v,onPointerUp:S};return c&&u&&($.onMouseEnter=_,n.stacked||($.onMouseLeave=T)),p&&($.onClick=M=>{h&&h(M),a.canCloseOnClick&&d(!0)}),{playToast:T,pauseToast:_,isRunning:e,preventExitTransition:r,toastRef:s,eventHandlers:$}}var _C=typeof window<"u"?F.useLayoutEffect:F.useEffect,vh=({theme:n,type:e,isLoading:t,...r})=>Bt.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:n==="colored"?"currentColor":`var(--toastify-icon-color-${e})`,...r});function LC(n){return Bt.createElement(vh,{...n},Bt.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function CC(n){return Bt.createElement(vh,{...n},Bt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function RC(n){return Bt.createElement(vh,{...n},Bt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function AC(n){return Bt.createElement(vh,{...n},Bt.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function kC(){return Bt.createElement("div",{className:"Toastify__spinner"})}var fg={info:CC,warning:LC,success:RC,error:AC,spinner:kC},IC=n=>n in fg;function PC({theme:n,type:e,isLoading:t,icon:r}){let i=null,s={theme:n,type:e};return r===!1||(go(r)?i=r({...s,isLoading:t}):F.isValidElement(r)?i=F.cloneElement(r,s):t?i=fg.spinner():IC(e)&&(i=fg[e](s))),i}var DC=n=>{let{isRunning:e,preventExitTransition:t,toastRef:r,eventHandlers:i,playToast:s}=wC(n),{closeButton:a,children:c,autoClose:u,onClick:d,type:h,hideProgressBar:p,closeToast:g,transition:x,position:v,className:S,style:T,progressClassName:_,updateId:C,role:k,progress:O,rtl:w,toastId:$,deleteToast:M,isIn:U,isLoading:W,closeOnClick:R,theme:G,ariaLabel:fe}=n,ae=ns("Toastify__toast",`Toastify__toast-theme--${G}`,`Toastify__toast--${h}`,{"Toastify__toast--rtl":w},{"Toastify__toast--close-on-click":R}),xe=go(S)?S({rtl:w,position:v,type:h,defaultClassName:ae}):ns(ae,S),ye=PC(n),Ee=!!O||!u,Pe={closeToast:g,type:h,theme:G},ie=null;return a===!1||(go(a)?ie=a(Pe):F.isValidElement(a)?ie=F.cloneElement(a,Pe):ie=lC(Pe)),Bt.createElement(x,{isIn:U,done:M,position:v,preventExitTransition:t,nodeRef:r,playToast:s},Bt.createElement("div",{id:$,tabIndex:0,onClick:d,"data-in":U,className:xe,...i,style:T,ref:r,...U&&{role:k,"aria-label":fe}},ye!=null&&Bt.createElement("div",{className:ns("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!W})},ye),GS(c,n,!e),ie,!n.customProgressBar&&Bt.createElement(cC,{...C&&!Ee?{key:`p-${C}`}:{},rtl:w,theme:G,delay:u,isRunning:e,isIn:U,closeToast:g,hide:p,type:h,className:_,controlledProgress:Ee,progress:O||0})))},OC=(n,e=!1)=>({enter:`Toastify--animate Toastify__${n}-enter`,exit:`Toastify--animate Toastify__${n}-exit`,appendPosition:e}),NC=aC(OC("bounce",!0)),MC={position:"top-right",transition:NC,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:n=>n.altKey&&n.code==="KeyT"};function FC(n){let e={...MC,...n},t=n.stacked,[r,i]=F.useState(!0),s=F.useRef(null),{getToastToRender:a,isToastActive:c,count:u}=bC(e),{className:d,style:h,rtl:p,containerId:g,hotKeys:x}=e;function v(T){let _=ns("Toastify__toast-container",`Toastify__toast-container--${T}`,{"Toastify__toast-container--rtl":p});return go(d)?d({position:T,rtl:p,defaultClassName:_}):ns(_,cg(d))}function S(){t&&(i(!0),It.play())}return _C(()=>{var T;if(t){let _=s.current.querySelectorAll('[data-in="true"]'),C=12,k=(T=e.position)==null?void 0:T.includes("top"),O=0,w=0;Array.from(_).reverse().forEach(($,M)=>{let U=$;U.classList.add("Toastify__toast--stacked"),M>0&&(U.dataset.collapsed=`${r}`),U.dataset.pos||(U.dataset.pos=k?"top":"bot");let W=O*(r?.2:1)+(r?0:C*M);U.style.setProperty("--y",`${k?W:W*-1}px`),U.style.setProperty("--g",`${C}`),U.style.setProperty("--s",`${1-(r?w:0)}`),O+=U.offsetHeight,w+=.025})}},[r,u,t]),F.useEffect(()=>{function T(_){var C;let k=s.current;x(_)&&((C=k.querySelector('[tabIndex="0"]'))==null||C.focus(),i(!1),It.pause()),_.key==="Escape"&&(document.activeElement===k||k!=null&&k.contains(document.activeElement))&&(i(!0),It.play())}return document.addEventListener("keydown",T),()=>{document.removeEventListener("keydown",T)}},[x]),Bt.createElement("section",{ref:s,className:"Toastify",id:g,onMouseEnter:()=>{t&&(i(!1),It.pause())},onMouseLeave:S,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":e["aria-label"]},a((T,_)=>{let C=_.length?{...h}:{...h,pointerEvents:"none"};return Bt.createElement("div",{tabIndex:-1,className:v(T),"data-stacked":t,style:C,key:`c-${T}`},_.map(({content:k,props:O})=>Bt.createElement(DC,{...O,stacked:t,collapseAll:S,isIn:c(O.toastId,O.containerId),key:`t-${O.key}`},k)))}))}function $C(){const{pathname:n}=os();return F.useEffect(()=>{window.scrollTo(0,0)},[n]),null}const BC=()=>A.jsxs(A.Fragment,{children:[A.jsx(FC,{position:"top-center",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"dark"}),A.jsx($C,{}),A.jsx(r0,{})]}),qS=({logoName:n})=>A.jsx("div",{className:"logo",children:A.jsxs(sr,{to:"/",children:[A.jsx("p",{className:"logo-main mb-0",children:n}),A.jsxs("span",{className:"logo-sub",children:[n.toLowerCase()," -"," ",A.jsxs("span",{className:"c",children:[n.toLowerCase(),".movie"]})]})]})}),XS=localStorage.getItem("language")||"en",QS=F.createContext({language:XS,switchLanguage:()=>{}}),UC=()=>{const{language:n,switchLanguage:e}=F.useContext(QS),t=r=>{e(r.target.value)};return A.jsx(A.Fragment,{children:A.jsxs("select",{name:"selectedLang",value:n,onChange:t,children:[A.jsx("option",{value:"en",children:"English"}),A.jsx("option",{value:"vi",children:"Vit Nam"})]})})},Hs=({text:n,onClick:e,className:t,type:r,disabled:i,icon:s})=>A.jsxs("button",{className:t,onClick:e,type:r,disabled:i,children:[A.jsx("span",{className:"icon",children:s}),n]});var fm={exports:{}},hm={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nx;function jC(){if(nx)return hm;nx=1;var n=Eu();function e(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var t=typeof Object.is=="function"?Object.is:e,r=n.useSyncExternalStore,i=n.useRef,s=n.useEffect,a=n.useMemo,c=n.useDebugValue;return hm.useSyncExternalStoreWithSelector=function(u,d,h,p,g){var x=i(null);if(x.current===null){var v={hasValue:!1,value:null};x.current=v}else v=x.current;x=a(function(){function T(w){if(!_){if(_=!0,C=w,w=p(w),g!==void 0&&v.hasValue){var $=v.value;if(g($,w))return k=$}return k=w}if($=k,t(C,w))return $;var M=p(w);return g!==void 0&&g($,M)?(C=w,$):(C=w,k=M)}var _=!1,C,k,O=h===void 0?null:h;return[function(){return T(d())},O===null?void 0:function(){return T(O())}]},[d,h,p,g]);var S=r(u,x[0],x[1]);return s(function(){v.hasValue=!0,v.value=S},[S]),c(S),S},hm}var rx;function HC(){return rx||(rx=1,fm.exports=jC()),fm.exports}var GC=HC();function VC(n){n()}function zC(){let n=null,e=null;return{clear(){n=null,e=null},notify(){VC(()=>{let t=n;for(;t;)t.callback(),t=t.next})},get(){const t=[];let r=n;for(;r;)t.push(r),r=r.next;return t},subscribe(t){let r=!0;const i=e={callback:t,next:null,prev:e};return i.prev?i.prev.next=i:n=i,function(){!r||n===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:n=i.next)}}}}var ix={notify(){},get:()=>[]};function KC(n,e){let t,r=ix,i=0,s=!1;function a(S){h();const T=r.subscribe(S);let _=!1;return()=>{_||(_=!0,T(),p())}}function c(){r.notify()}function u(){v.onStateChange&&v.onStateChange()}function d(){return s}function h(){i++,t||(t=n.subscribe(u),r=zC())}function p(){i--,t&&i===0&&(t(),t=void 0,r.clear(),r=ix)}function g(){s||(s=!0,h())}function x(){s&&(s=!1,p())}const v={addNestedSub:a,notifyNestedSubs:c,handleChangeWrapper:u,isSubscribed:d,trySubscribe:g,tryUnsubscribe:x,getListeners:()=>r};return v}var WC=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",YC=WC(),qC=()=>typeof navigator<"u"&&navigator.product==="ReactNative",XC=qC(),QC=()=>YC||XC?F.useLayoutEffect:F.useEffect,JC=QC(),pm=Symbol.for("react-redux-context"),mm=typeof globalThis<"u"?globalThis:{};function ZC(){if(!F.createContext)return{};const n=mm[pm]??(mm[pm]=new Map);let e=n.get(F.createContext);return e||(e=F.createContext(null),n.set(F.createContext,e)),e}var ea=ZC();function eR(n){const{children:e,context:t,serverState:r,store:i}=n,s=F.useMemo(()=>{const u=KC(i);return{store:i,subscription:u,getServerState:r?()=>r:void 0}},[i,r]),a=F.useMemo(()=>i.getState(),[i]);JC(()=>{const{subscription:u}=s;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),a!==i.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[s,a]);const c=t||ea;return F.createElement(c.Provider,{value:s},e)}var tR=eR;function a0(n=ea){return function(){return F.useContext(n)}}var JS=a0();function ZS(n=ea){const e=n===ea?JS:a0(n),t=()=>{const{store:r}=e();return r};return Object.assign(t,{withTypes:()=>t}),t}var nR=ZS();function rR(n=ea){const e=n===ea?nR:ZS(n),t=()=>e().dispatch;return Object.assign(t,{withTypes:()=>t}),t}var eE=rR(),iR=(n,e)=>n===e;function sR(n=ea){const e=n===ea?JS:a0(n),t=(r,i={})=>{const{equalityFn:s=iR}=typeof i=="function"?{equalityFn:i}:i,a=e(),{store:c,subscription:u,getServerState:d}=a;F.useRef(!0);const h=F.useCallback({[r.name](g){return r(g)}}[r.name],[r]),p=GC.useSyncExternalStoreWithSelector(u.addNestedSub,c.getState,d||c.getState,h,s);return F.useDebugValue(p),p};return Object.assign(t,{withTypes:()=>t}),t}var tE=sR();function nE(n,e){return function(){return n.apply(e,arguments)}}const{toString:oR}=Object.prototype,{getPrototypeOf:l0}=Object,xh=(n=>e=>{const t=oR.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),as=n=>(n=n.toLowerCase(),e=>xh(e)===n),Sh=n=>e=>typeof e===n,{isArray:ic}=Array,du=Sh("undefined");function aR(n){return n!==null&&!du(n)&&n.constructor!==null&&!du(n.constructor)&&fi(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const rE=as("ArrayBuffer");function lR(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&rE(n.buffer),e}const cR=Sh("string"),fi=Sh("function"),iE=Sh("number"),Eh=n=>n!==null&&typeof n=="object",uR=n=>n===!0||n===!1,Tf=n=>{if(xh(n)!=="object")return!1;const e=l0(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},dR=as("Date"),fR=as("File"),hR=as("Blob"),pR=as("FileList"),mR=n=>Eh(n)&&fi(n.pipe),gR=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||fi(n.append)&&((e=xh(n))==="formdata"||e==="object"&&fi(n.toString)&&n.toString()==="[object FormData]"))},yR=as("URLSearchParams"),[vR,xR,SR,ER]=["ReadableStream","Request","Response","Headers"].map(as),TR=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Cu(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let r,i;if(typeof n!="object"&&(n=[n]),ic(n))for(r=0,i=n.length;r<i;r++)e.call(null,n[r],r,n);else{const s=t?Object.getOwnPropertyNames(n):Object.keys(n),a=s.length;let c;for(r=0;r<a;r++)c=s[r],e.call(null,n[c],c,n)}}function sE(n,e){e=e.toLowerCase();const t=Object.keys(n);let r=t.length,i;for(;r-- >0;)if(i=t[r],e===i.toLowerCase())return i;return null}const Ua=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,oE=n=>!du(n)&&n!==Ua;function hg(){const{caseless:n}=oE(this)&&this||{},e={},t=(r,i)=>{const s=n&&sE(e,i)||i;Tf(e[s])&&Tf(r)?e[s]=hg(e[s],r):Tf(r)?e[s]=hg({},r):ic(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Cu(arguments[r],t);return e}const bR=(n,e,t,{allOwnKeys:r}={})=>(Cu(e,(i,s)=>{t&&fi(i)?n[s]=nE(i,t):n[s]=i},{allOwnKeys:r}),n),wR=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),_R=(n,e,t,r)=>{n.prototype=Object.create(e.prototype,r),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},LR=(n,e,t,r)=>{let i,s,a;const c={};if(e=e||{},n==null)return e;do{for(i=Object.getOwnPropertyNames(n),s=i.length;s-- >0;)a=i[s],(!r||r(a,n,e))&&!c[a]&&(e[a]=n[a],c[a]=!0);n=t!==!1&&l0(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},CR=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const r=n.indexOf(e,t);return r!==-1&&r===t},RR=n=>{if(!n)return null;if(ic(n))return n;let e=n.length;if(!iE(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},AR=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&l0(Uint8Array)),kR=(n,e)=>{const r=(n&&n[Symbol.iterator]).call(n);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(n,s[0],s[1])}},IR=(n,e)=>{let t;const r=[];for(;(t=n.exec(e))!==null;)r.push(t);return r},PR=as("HTMLFormElement"),DR=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,i){return r.toUpperCase()+i}),sx=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),OR=as("RegExp"),aE=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),r={};Cu(t,(i,s)=>{let a;(a=e(i,s,n))!==!1&&(r[s]=a||i)}),Object.defineProperties(n,r)},NR=n=>{aE(n,(e,t)=>{if(fi(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=n[t];if(fi(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},MR=(n,e)=>{const t={},r=i=>{i.forEach(s=>{t[s]=!0})};return ic(n)?r(n):r(String(n).split(e)),t},FR=()=>{},$R=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e,gm="abcdefghijklmnopqrstuvwxyz",ox="0123456789",lE={DIGIT:ox,ALPHA:gm,ALPHA_DIGIT:gm+gm.toUpperCase()+ox},BR=(n=16,e=lE.ALPHA_DIGIT)=>{let t="";const{length:r}=e;for(;n--;)t+=e[Math.random()*r|0];return t};function UR(n){return!!(n&&fi(n.append)&&n[Symbol.toStringTag]==="FormData"&&n[Symbol.iterator])}const jR=n=>{const e=new Array(10),t=(r,i)=>{if(Eh(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=ic(r)?[]:{};return Cu(r,(a,c)=>{const u=t(a,i+1);!du(u)&&(s[c]=u)}),e[i]=void 0,s}}return r};return t(n,0)},HR=as("AsyncFunction"),GR=n=>n&&(Eh(n)||fi(n))&&fi(n.then)&&fi(n.catch),cE=((n,e)=>n?setImmediate:e?((t,r)=>(Ua.addEventListener("message",({source:i,data:s})=>{i===Ua&&s===t&&r.length&&r.shift()()},!1),i=>{r.push(i),Ua.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",fi(Ua.postMessage)),VR=typeof queueMicrotask<"u"?queueMicrotask.bind(Ua):typeof process<"u"&&process.nextTick||cE,de={isArray:ic,isArrayBuffer:rE,isBuffer:aR,isFormData:gR,isArrayBufferView:lR,isString:cR,isNumber:iE,isBoolean:uR,isObject:Eh,isPlainObject:Tf,isReadableStream:vR,isRequest:xR,isResponse:SR,isHeaders:ER,isUndefined:du,isDate:dR,isFile:fR,isBlob:hR,isRegExp:OR,isFunction:fi,isStream:mR,isURLSearchParams:yR,isTypedArray:AR,isFileList:pR,forEach:Cu,merge:hg,extend:bR,trim:TR,stripBOM:wR,inherits:_R,toFlatObject:LR,kindOf:xh,kindOfTest:as,endsWith:CR,toArray:RR,forEachEntry:kR,matchAll:IR,isHTMLForm:PR,hasOwnProperty:sx,hasOwnProp:sx,reduceDescriptors:aE,freezeMethods:NR,toObjectSet:MR,toCamelCase:DR,noop:FR,toFiniteNumber:$R,findKey:sE,global:Ua,isContextDefined:oE,ALPHABET:lE,generateString:BR,isSpecCompliantForm:UR,toJSONObject:jR,isAsyncFn:HR,isThenable:GR,setImmediate:cE,asap:VR};function Tt(n,e,t,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}de.inherits(Tt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:de.toJSONObject(this.config),code:this.code,status:this.status}}});const uE=Tt.prototype,dE={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{dE[n]={value:n}});Object.defineProperties(Tt,dE);Object.defineProperty(uE,"isAxiosError",{value:!0});Tt.from=(n,e,t,r,i,s)=>{const a=Object.create(uE);return de.toFlatObject(n,a,function(u){return u!==Error.prototype},c=>c!=="isAxiosError"),Tt.call(a,n.message,e,t,r,i),a.cause=n,a.name=n.name,s&&Object.assign(a,s),a};const zR=null;function pg(n){return de.isPlainObject(n)||de.isArray(n)}function fE(n){return de.endsWith(n,"[]")?n.slice(0,-2):n}function ax(n,e,t){return n?n.concat(e).map(function(i,s){return i=fE(i),!t&&s?"["+i+"]":i}).join(t?".":""):e}function KR(n){return de.isArray(n)&&!n.some(pg)}const WR=de.toFlatObject(de,{},null,function(e){return/^is[A-Z]/.test(e)});function Th(n,e,t){if(!de.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=de.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,T){return!de.isUndefined(T[S])});const r=t.metaTokens,i=t.visitor||h,s=t.dots,a=t.indexes,u=(t.Blob||typeof Blob<"u"&&Blob)&&de.isSpecCompliantForm(e);if(!de.isFunction(i))throw new TypeError("visitor must be a function");function d(v){if(v===null)return"";if(de.isDate(v))return v.toISOString();if(!u&&de.isBlob(v))throw new Tt("Blob is not supported. Use a Buffer instead.");return de.isArrayBuffer(v)||de.isTypedArray(v)?u&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function h(v,S,T){let _=v;if(v&&!T&&typeof v=="object"){if(de.endsWith(S,"{}"))S=r?S:S.slice(0,-2),v=JSON.stringify(v);else if(de.isArray(v)&&KR(v)||(de.isFileList(v)||de.endsWith(S,"[]"))&&(_=de.toArray(v)))return S=fE(S),_.forEach(function(k,O){!(de.isUndefined(k)||k===null)&&e.append(a===!0?ax([S],O,s):a===null?S:S+"[]",d(k))}),!1}return pg(v)?!0:(e.append(ax(T,S,s),d(v)),!1)}const p=[],g=Object.assign(WR,{defaultVisitor:h,convertValue:d,isVisitable:pg});function x(v,S){if(!de.isUndefined(v)){if(p.indexOf(v)!==-1)throw Error("Circular reference detected in "+S.join("."));p.push(v),de.forEach(v,function(_,C){(!(de.isUndefined(_)||_===null)&&i.call(e,_,de.isString(C)?C.trim():C,S,g))===!0&&x(_,S?S.concat(C):[C])}),p.pop()}}if(!de.isObject(n))throw new TypeError("data must be an object");return x(n),e}function lx(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function c0(n,e){this._pairs=[],n&&Th(n,this,e)}const hE=c0.prototype;hE.append=function(e,t){this._pairs.push([e,t])};hE.toString=function(e){const t=e?function(r){return e.call(this,r,lx)}:lx;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function YR(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function pE(n,e,t){if(!e)return n;const r=t&&t.encode||YR;de.isFunction(t)&&(t={serialize:t});const i=t&&t.serialize;let s;if(i?s=i(e,t):s=de.isURLSearchParams(e)?e.toString():new c0(e,t).toString(r),s){const a=n.indexOf("#");a!==-1&&(n=n.slice(0,a)),n+=(n.indexOf("?")===-1?"?":"&")+s}return n}class cx{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){de.forEach(this.handlers,function(r){r!==null&&e(r)})}}const mE={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},qR=typeof URLSearchParams<"u"?URLSearchParams:c0,XR=typeof FormData<"u"?FormData:null,QR=typeof Blob<"u"?Blob:null,JR={isBrowser:!0,classes:{URLSearchParams:qR,FormData:XR,Blob:QR},protocols:["http","https","file","blob","url","data"]},u0=typeof window<"u"&&typeof document<"u",mg=typeof navigator=="object"&&navigator||void 0,ZR=u0&&(!mg||["ReactNative","NativeScript","NS"].indexOf(mg.product)<0),eA=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",tA=u0&&window.location.href||"http://localhost",nA=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:u0,hasStandardBrowserEnv:ZR,hasStandardBrowserWebWorkerEnv:eA,navigator:mg,origin:tA},Symbol.toStringTag,{value:"Module"})),_r={...nA,...JR};function rA(n,e){return Th(n,new _r.classes.URLSearchParams,Object.assign({visitor:function(t,r,i,s){return _r.isNode&&de.isBuffer(t)?(this.append(r,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function iA(n){return de.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function sA(n){const e={},t=Object.keys(n);let r;const i=t.length;let s;for(r=0;r<i;r++)s=t[r],e[s]=n[s];return e}function gE(n){function e(t,r,i,s){let a=t[s++];if(a==="__proto__")return!0;const c=Number.isFinite(+a),u=s>=t.length;return a=!a&&de.isArray(i)?i.length:a,u?(de.hasOwnProp(i,a)?i[a]=[i[a],r]:i[a]=r,!c):((!i[a]||!de.isObject(i[a]))&&(i[a]=[]),e(t,r,i[a],s)&&de.isArray(i[a])&&(i[a]=sA(i[a])),!c)}if(de.isFormData(n)&&de.isFunction(n.entries)){const t={};return de.forEachEntry(n,(r,i)=>{e(iA(r),i,t,0)}),t}return null}function oA(n,e,t){if(de.isString(n))try{return(e||JSON.parse)(n),de.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(0,JSON.stringify)(n)}const Ru={transitional:mE,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",i=r.indexOf("application/json")>-1,s=de.isObject(e);if(s&&de.isHTMLForm(e)&&(e=new FormData(e)),de.isFormData(e))return i?JSON.stringify(gE(e)):e;if(de.isArrayBuffer(e)||de.isBuffer(e)||de.isStream(e)||de.isFile(e)||de.isBlob(e)||de.isReadableStream(e))return e;if(de.isArrayBufferView(e))return e.buffer;if(de.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let c;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return rA(e,this.formSerializer).toString();if((c=de.isFileList(e))||r.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Th(c?{"files[]":e}:e,u&&new u,this.formSerializer)}}return s||i?(t.setContentType("application/json",!1),oA(e)):e}],transformResponse:[function(e){const t=this.transitional||Ru.transitional,r=t&&t.forcedJSONParsing,i=this.responseType==="json";if(de.isResponse(e)||de.isReadableStream(e))return e;if(e&&de.isString(e)&&(r&&!this.responseType||i)){const a=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(c){if(a)throw c.name==="SyntaxError"?Tt.from(c,Tt.ERR_BAD_RESPONSE,this,null,this.response):c}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:_r.classes.FormData,Blob:_r.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};de.forEach(["delete","get","head","post","put","patch"],n=>{Ru.headers[n]={}});const aA=de.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),lA=n=>{const e={};let t,r,i;return n&&n.split(`
`).forEach(function(a){i=a.indexOf(":"),t=a.substring(0,i).trim().toLowerCase(),r=a.substring(i+1).trim(),!(!t||e[t]&&aA[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},ux=Symbol("internals");function Xc(n){return n&&String(n).trim().toLowerCase()}function bf(n){return n===!1||n==null?n:de.isArray(n)?n.map(bf):String(n)}function cA(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(n);)e[r[1]]=r[2];return e}const uA=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function ym(n,e,t,r,i){if(de.isFunction(r))return r.call(this,e,t);if(i&&(e=t),!!de.isString(e)){if(de.isString(r))return e.indexOf(r)!==-1;if(de.isRegExp(r))return r.test(e)}}function dA(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function fA(n,e){const t=de.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(n,r+t,{value:function(i,s,a){return this[r].call(this,e,i,s,a)},configurable:!0})})}let ti=class{constructor(e){e&&this.set(e)}set(e,t,r){const i=this;function s(c,u,d){const h=Xc(u);if(!h)throw new Error("header name must be a non-empty string");const p=de.findKey(i,h);(!p||i[p]===void 0||d===!0||d===void 0&&i[p]!==!1)&&(i[p||u]=bf(c))}const a=(c,u)=>de.forEach(c,(d,h)=>s(d,h,u));if(de.isPlainObject(e)||e instanceof this.constructor)a(e,t);else if(de.isString(e)&&(e=e.trim())&&!uA(e))a(lA(e),t);else if(de.isHeaders(e))for(const[c,u]of e.entries())s(u,c,r);else e!=null&&s(t,e,r);return this}get(e,t){if(e=Xc(e),e){const r=de.findKey(this,e);if(r){const i=this[r];if(!t)return i;if(t===!0)return cA(i);if(de.isFunction(t))return t.call(this,i,r);if(de.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Xc(e),e){const r=de.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||ym(this,this[r],r,t)))}return!1}delete(e,t){const r=this;let i=!1;function s(a){if(a=Xc(a),a){const c=de.findKey(r,a);c&&(!t||ym(r,r[c],c,t))&&(delete r[c],i=!0)}}return de.isArray(e)?e.forEach(s):s(e),i}clear(e){const t=Object.keys(this);let r=t.length,i=!1;for(;r--;){const s=t[r];(!e||ym(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const t=this,r={};return de.forEach(this,(i,s)=>{const a=de.findKey(r,s);if(a){t[a]=bf(i),delete t[s];return}const c=e?dA(s):String(s).trim();c!==s&&delete t[s],t[c]=bf(i),r[c]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return de.forEach(this,(r,i)=>{r!=null&&r!==!1&&(t[i]=e&&de.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[ux]=this[ux]={accessors:{}}).accessors,i=this.prototype;function s(a){const c=Xc(a);r[c]||(fA(i,a),r[c]=!0)}return de.isArray(e)?e.forEach(s):s(e),this}};ti.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);de.reduceDescriptors(ti.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(r){this[t]=r}}});de.freezeMethods(ti);function vm(n,e){const t=this||Ru,r=e||t,i=ti.from(r.headers);let s=r.data;return de.forEach(n,function(c){s=c.call(t,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function yE(n){return!!(n&&n.__CANCEL__)}function sc(n,e,t){Tt.call(this,n??"canceled",Tt.ERR_CANCELED,e,t),this.name="CanceledError"}de.inherits(sc,Tt,{__CANCEL__:!0});function vE(n,e,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?n(t):e(new Tt("Request failed with status code "+t.status,[Tt.ERR_BAD_REQUEST,Tt.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function hA(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function pA(n,e){n=n||10;const t=new Array(n),r=new Array(n);let i=0,s=0,a;return e=e!==void 0?e:1e3,function(u){const d=Date.now(),h=r[s];a||(a=d),t[i]=u,r[i]=d;let p=s,g=0;for(;p!==i;)g+=t[p++],p=p%n;if(i=(i+1)%n,i===s&&(s=(s+1)%n),d-a<e)return;const x=h&&d-h;return x?Math.round(g*1e3/x):void 0}}function mA(n,e){let t=0,r=1e3/e,i,s;const a=(d,h=Date.now())=>{t=h,i=null,s&&(clearTimeout(s),s=null),n.apply(null,d)};return[(...d)=>{const h=Date.now(),p=h-t;p>=r?a(d,h):(i=d,s||(s=setTimeout(()=>{s=null,a(i)},r-p)))},()=>i&&a(i)]}const jf=(n,e,t=3)=>{let r=0;const i=pA(50,250);return mA(s=>{const a=s.loaded,c=s.lengthComputable?s.total:void 0,u=a-r,d=i(u),h=a<=c;r=a;const p={loaded:a,total:c,progress:c?a/c:void 0,bytes:u,rate:d||void 0,estimated:d&&c&&h?(c-a)/d:void 0,event:s,lengthComputable:c!=null,[e?"download":"upload"]:!0};n(p)},t)},dx=(n,e)=>{const t=n!=null;return[r=>e[0]({lengthComputable:t,total:n,loaded:r}),e[1]]},fx=n=>(...e)=>de.asap(()=>n(...e)),gA=_r.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,_r.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(_r.origin),_r.navigator&&/(msie|trident)/i.test(_r.navigator.userAgent)):()=>!0,yA=_r.hasStandardBrowserEnv?{write(n,e,t,r,i,s){const a=[n+"="+encodeURIComponent(e)];de.isNumber(t)&&a.push("expires="+new Date(t).toGMTString()),de.isString(r)&&a.push("path="+r),de.isString(i)&&a.push("domain="+i),s===!0&&a.push("secure"),document.cookie=a.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function vA(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function xA(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function xE(n,e){return n&&!vA(e)?xA(n,e):e}const hx=n=>n instanceof ti?{...n}:n;function Ka(n,e){e=e||{};const t={};function r(d,h,p,g){return de.isPlainObject(d)&&de.isPlainObject(h)?de.merge.call({caseless:g},d,h):de.isPlainObject(h)?de.merge({},h):de.isArray(h)?h.slice():h}function i(d,h,p,g){if(de.isUndefined(h)){if(!de.isUndefined(d))return r(void 0,d,p,g)}else return r(d,h,p,g)}function s(d,h){if(!de.isUndefined(h))return r(void 0,h)}function a(d,h){if(de.isUndefined(h)){if(!de.isUndefined(d))return r(void 0,d)}else return r(void 0,h)}function c(d,h,p){if(p in e)return r(d,h);if(p in n)return r(void 0,d)}const u={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c,headers:(d,h,p)=>i(hx(d),hx(h),p,!0)};return de.forEach(Object.keys(Object.assign({},n,e)),function(h){const p=u[h]||i,g=p(n[h],e[h],h);de.isUndefined(g)&&p!==c||(t[h]=g)}),t}const SE=n=>{const e=Ka({},n);let{data:t,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:a,auth:c}=e;e.headers=a=ti.from(a),e.url=pE(xE(e.baseURL,e.url),n.params,n.paramsSerializer),c&&a.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):"")));let u;if(de.isFormData(t)){if(_r.hasStandardBrowserEnv||_r.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((u=a.getContentType())!==!1){const[d,...h]=u?u.split(";").map(p=>p.trim()).filter(Boolean):[];a.setContentType([d||"multipart/form-data",...h].join("; "))}}if(_r.hasStandardBrowserEnv&&(r&&de.isFunction(r)&&(r=r(e)),r||r!==!1&&gA(e.url))){const d=i&&s&&yA.read(s);d&&a.set(i,d)}return e},SA=typeof XMLHttpRequest<"u",EA=SA&&function(n){return new Promise(function(t,r){const i=SE(n);let s=i.data;const a=ti.from(i.headers).normalize();let{responseType:c,onUploadProgress:u,onDownloadProgress:d}=i,h,p,g,x,v;function S(){x&&x(),v&&v(),i.cancelToken&&i.cancelToken.unsubscribe(h),i.signal&&i.signal.removeEventListener("abort",h)}let T=new XMLHttpRequest;T.open(i.method.toUpperCase(),i.url,!0),T.timeout=i.timeout;function _(){if(!T)return;const k=ti.from("getAllResponseHeaders"in T&&T.getAllResponseHeaders()),w={data:!c||c==="text"||c==="json"?T.responseText:T.response,status:T.status,statusText:T.statusText,headers:k,config:n,request:T};vE(function(M){t(M),S()},function(M){r(M),S()},w),T=null}"onloadend"in T?T.onloadend=_:T.onreadystatechange=function(){!T||T.readyState!==4||T.status===0&&!(T.responseURL&&T.responseURL.indexOf("file:")===0)||setTimeout(_)},T.onabort=function(){T&&(r(new Tt("Request aborted",Tt.ECONNABORTED,n,T)),T=null)},T.onerror=function(){r(new Tt("Network Error",Tt.ERR_NETWORK,n,T)),T=null},T.ontimeout=function(){let O=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const w=i.transitional||mE;i.timeoutErrorMessage&&(O=i.timeoutErrorMessage),r(new Tt(O,w.clarifyTimeoutError?Tt.ETIMEDOUT:Tt.ECONNABORTED,n,T)),T=null},s===void 0&&a.setContentType(null),"setRequestHeader"in T&&de.forEach(a.toJSON(),function(O,w){T.setRequestHeader(w,O)}),de.isUndefined(i.withCredentials)||(T.withCredentials=!!i.withCredentials),c&&c!=="json"&&(T.responseType=i.responseType),d&&([g,v]=jf(d,!0),T.addEventListener("progress",g)),u&&T.upload&&([p,x]=jf(u),T.upload.addEventListener("progress",p),T.upload.addEventListener("loadend",x)),(i.cancelToken||i.signal)&&(h=k=>{T&&(r(!k||k.type?new sc(null,n,T):k),T.abort(),T=null)},i.cancelToken&&i.cancelToken.subscribe(h),i.signal&&(i.signal.aborted?h():i.signal.addEventListener("abort",h)));const C=hA(i.url);if(C&&_r.protocols.indexOf(C)===-1){r(new Tt("Unsupported protocol "+C+":",Tt.ERR_BAD_REQUEST,n));return}T.send(s||null)})},TA=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let r=new AbortController,i;const s=function(d){if(!i){i=!0,c();const h=d instanceof Error?d:this.reason;r.abort(h instanceof Tt?h:new sc(h instanceof Error?h.message:h))}};let a=e&&setTimeout(()=>{a=null,s(new Tt(`timeout ${e} of ms exceeded`,Tt.ETIMEDOUT))},e);const c=()=>{n&&(a&&clearTimeout(a),a=null,n.forEach(d=>{d.unsubscribe?d.unsubscribe(s):d.removeEventListener("abort",s)}),n=null)};n.forEach(d=>d.addEventListener("abort",s));const{signal:u}=r;return u.unsubscribe=()=>de.asap(c),u}},bA=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let r=0,i;for(;r<t;)i=r+e,yield n.slice(r,i),r=i},wA=async function*(n,e){for await(const t of _A(n))yield*bA(t,e)},_A=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:r}=await e.read();if(t)break;yield r}}finally{await e.cancel()}},px=(n,e,t,r)=>{const i=wA(n,e);let s=0,a,c=u=>{a||(a=!0,r&&r(u))};return new ReadableStream({async pull(u){try{const{done:d,value:h}=await i.next();if(d){c(),u.close();return}let p=h.byteLength;if(t){let g=s+=p;t(g)}u.enqueue(new Uint8Array(h))}catch(d){throw c(d),d}},cancel(u){return c(u),i.return()}},{highWaterMark:2})},bh=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",EE=bh&&typeof ReadableStream=="function",LA=bh&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),TE=(n,...e)=>{try{return!!n(...e)}catch{return!1}},CA=EE&&TE(()=>{let n=!1;const e=new Request(_r.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),mx=64*1024,gg=EE&&TE(()=>de.isReadableStream(new Response("").body)),Hf={stream:gg&&(n=>n.body)};bh&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Hf[e]&&(Hf[e]=de.isFunction(n[e])?t=>t[e]():(t,r)=>{throw new Tt(`Response type '${e}' is not supported`,Tt.ERR_NOT_SUPPORT,r)})})})(new Response);const RA=async n=>{if(n==null)return 0;if(de.isBlob(n))return n.size;if(de.isSpecCompliantForm(n))return(await new Request(_r.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(de.isArrayBufferView(n)||de.isArrayBuffer(n))return n.byteLength;if(de.isURLSearchParams(n)&&(n=n+""),de.isString(n))return(await LA(n)).byteLength},AA=async(n,e)=>{const t=de.toFiniteNumber(n.getContentLength());return t??RA(e)},kA=bh&&(async n=>{let{url:e,method:t,data:r,signal:i,cancelToken:s,timeout:a,onDownloadProgress:c,onUploadProgress:u,responseType:d,headers:h,withCredentials:p="same-origin",fetchOptions:g}=SE(n);d=d?(d+"").toLowerCase():"text";let x=TA([i,s&&s.toAbortSignal()],a),v;const S=x&&x.unsubscribe&&(()=>{x.unsubscribe()});let T;try{if(u&&CA&&t!=="get"&&t!=="head"&&(T=await AA(h,r))!==0){let w=new Request(e,{method:"POST",body:r,duplex:"half"}),$;if(de.isFormData(r)&&($=w.headers.get("content-type"))&&h.setContentType($),w.body){const[M,U]=dx(T,jf(fx(u)));r=px(w.body,mx,M,U)}}de.isString(p)||(p=p?"include":"omit");const _="credentials"in Request.prototype;v=new Request(e,{...g,signal:x,method:t.toUpperCase(),headers:h.normalize().toJSON(),body:r,duplex:"half",credentials:_?p:void 0});let C=await fetch(v);const k=gg&&(d==="stream"||d==="response");if(gg&&(c||k&&S)){const w={};["status","statusText","headers"].forEach(W=>{w[W]=C[W]});const $=de.toFiniteNumber(C.headers.get("content-length")),[M,U]=c&&dx($,jf(fx(c),!0))||[];C=new Response(px(C.body,mx,M,()=>{U&&U(),S&&S()}),w)}d=d||"text";let O=await Hf[de.findKey(Hf,d)||"text"](C,n);return!k&&S&&S(),await new Promise((w,$)=>{vE(w,$,{data:O,headers:ti.from(C.headers),status:C.status,statusText:C.statusText,config:n,request:v})})}catch(_){throw S&&S(),_&&_.name==="TypeError"&&/fetch/i.test(_.message)?Object.assign(new Tt("Network Error",Tt.ERR_NETWORK,n,v),{cause:_.cause||_}):Tt.from(_,_&&_.code,n,v)}}),yg={http:zR,xhr:EA,fetch:kA};de.forEach(yg,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const gx=n=>`- ${n}`,IA=n=>de.isFunction(n)||n===null||n===!1,bE={getAdapter:n=>{n=de.isArray(n)?n:[n];const{length:e}=n;let t,r;const i={};for(let s=0;s<e;s++){t=n[s];let a;if(r=t,!IA(t)&&(r=yg[(a=String(t)).toLowerCase()],r===void 0))throw new Tt(`Unknown adapter '${a}'`);if(r)break;i[a||"#"+s]=r}if(!r){const s=Object.entries(i).map(([c,u])=>`adapter ${c} `+(u===!1?"is not supported by the environment":"is not available in the build"));let a=e?s.length>1?`since :
`+s.map(gx).join(`
`):" "+gx(s[0]):"as no adapter specified";throw new Tt("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return r},adapters:yg};function xm(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new sc(null,n)}function yx(n){return xm(n),n.headers=ti.from(n.headers),n.data=vm.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),bE.getAdapter(n.adapter||Ru.adapter)(n).then(function(r){return xm(n),r.data=vm.call(n,n.transformResponse,r),r.headers=ti.from(r.headers),r},function(r){return yE(r)||(xm(n),r&&r.response&&(r.response.data=vm.call(n,n.transformResponse,r.response),r.response.headers=ti.from(r.response.headers))),Promise.reject(r)})}const wE="1.7.9",wh={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{wh[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});const vx={};wh.transitional=function(e,t,r){function i(s,a){return"[Axios v"+wE+"] Transitional option '"+s+"'"+a+(r?". "+r:"")}return(s,a,c)=>{if(e===!1)throw new Tt(i(a," has been removed"+(t?" in "+t:"")),Tt.ERR_DEPRECATED);return t&&!vx[a]&&(vx[a]=!0,console.warn(i(a," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,a,c):!0}};wh.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function PA(n,e,t){if(typeof n!="object")throw new Tt("options must be an object",Tt.ERR_BAD_OPTION_VALUE);const r=Object.keys(n);let i=r.length;for(;i-- >0;){const s=r[i],a=e[s];if(a){const c=n[s],u=c===void 0||a(c,s,n);if(u!==!0)throw new Tt("option "+s+" must be "+u,Tt.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Tt("Unknown option "+s,Tt.ERR_BAD_OPTION)}}const wf={assertOptions:PA,validators:wh},Cs=wf.validators;let Ha=class{constructor(e){this.defaults=e,this.interceptors={request:new cx,response:new cx}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Ka(this.defaults,t);const{transitional:r,paramsSerializer:i,headers:s}=t;r!==void 0&&wf.assertOptions(r,{silentJSONParsing:Cs.transitional(Cs.boolean),forcedJSONParsing:Cs.transitional(Cs.boolean),clarifyTimeoutError:Cs.transitional(Cs.boolean)},!1),i!=null&&(de.isFunction(i)?t.paramsSerializer={serialize:i}:wf.assertOptions(i,{encode:Cs.function,serialize:Cs.function},!0)),wf.assertOptions(t,{baseUrl:Cs.spelling("baseURL"),withXsrfToken:Cs.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=s&&de.merge(s.common,s[t.method]);s&&de.forEach(["delete","get","head","post","put","patch","common"],v=>{delete s[v]}),t.headers=ti.concat(a,s);const c=[];let u=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(t)===!1||(u=u&&S.synchronous,c.unshift(S.fulfilled,S.rejected))});const d=[];this.interceptors.response.forEach(function(S){d.push(S.fulfilled,S.rejected)});let h,p=0,g;if(!u){const v=[yx.bind(this),void 0];for(v.unshift.apply(v,c),v.push.apply(v,d),g=v.length,h=Promise.resolve(t);p<g;)h=h.then(v[p++],v[p++]);return h}g=c.length;let x=t;for(p=0;p<g;){const v=c[p++],S=c[p++];try{x=v(x)}catch(T){S.call(this,T);break}}try{h=yx.call(this,x)}catch(v){return Promise.reject(v)}for(p=0,g=d.length;p<g;)h=h.then(d[p++],d[p++]);return h}getUri(e){e=Ka(this.defaults,e);const t=xE(e.baseURL,e.url);return pE(t,e.params,e.paramsSerializer)}};de.forEach(["delete","get","head","options"],function(e){Ha.prototype[e]=function(t,r){return this.request(Ka(r||{},{method:e,url:t,data:(r||{}).data}))}});de.forEach(["post","put","patch"],function(e){function t(r){return function(s,a,c){return this.request(Ka(c||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}Ha.prototype[e]=t(),Ha.prototype[e+"Form"]=t(!0)});let DA=class _E{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const a=new Promise(c=>{r.subscribe(c),s=c}).then(i);return a.cancel=function(){r.unsubscribe(s)},a},e(function(s,a,c){r.reason||(r.reason=new sc(s,a,c),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=r=>{e.abort(r)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new _E(function(i){e=i}),cancel:e}}};function OA(n){return function(t){return n.apply(null,t)}}function NA(n){return de.isObject(n)&&n.isAxiosError===!0}const vg={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(vg).forEach(([n,e])=>{vg[e]=n});function LE(n){const e=new Ha(n),t=nE(Ha.prototype.request,e);return de.extend(t,Ha.prototype,e,{allOwnKeys:!0}),de.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return LE(Ka(n,i))},t}const An=LE(Ru);An.Axios=Ha;An.CanceledError=sc;An.CancelToken=DA;An.isCancel=yE;An.VERSION=wE;An.toFormData=Th;An.AxiosError=Tt;An.Cancel=An.CanceledError;An.all=function(e){return Promise.all(e)};An.spread=OA;An.isAxiosError=NA;An.mergeConfig=Ka;An.AxiosHeaders=ti;An.formToJSON=n=>gE(de.isHTMLForm(n)?new FormData(n):n);An.getAdapter=bE.getAdapter;An.HttpStatusCode=vg;An.default=An;const{Axios:c5,AxiosError:MA,CanceledError:u5,isCancel:d5,CancelToken:f5,VERSION:h5,all:p5,Cancel:m5,isAxiosError:g5,spread:y5,toFormData:v5,AxiosHeaders:x5,HttpStatusCode:S5,formToJSON:E5,getAdapter:T5,mergeConfig:b5}=An,Au=n=>{var e,t;if(n instanceof MA)if(n.response)switch(n.response.status){case 400:return It.error(((e=n.response.data)==null?void 0:e.message)||"Invalid request. Please check your input."),"Invalid request. Please check your input.";case 401:return It.error("Unauthorized. Please log in again."),"Unauthorized. Please log in again.";case 403:return It.error("Forbidden. You do not have permission to perform this action."),"Forbidden. You do not have permission to perform this action.";case 404:return It.error("Resource not found. Please try again."),"Resource not found. Please try again.";case 500:return It.error("Internal server error. Please try again later."),"Internal server error. Please try again later.";default:return((t=n.response.data)==null?void 0:t.message)||"An unexpected error occurred."}else return n.request?(It.error("Network error. Please check your connection."),"Network error. Please check your connection."):(It.error(n.message||"An unknown error occurred."),n.message||"An unknown error occurred.");return"An unknown error occurred."},_h=An.create({baseURL:"https://server-watchhub.onrender.com/api/v1",timeout:1e4,headers:{"Content-Type":"application/json",Accept:"application/json"}}),oc=An.create({baseURL:"https://phimapi.com/",timeout:1e4,headers:{"Content-Type":"application/json",Accept:"application/json"}});_h.interceptors.request.use(n=>{const e=localStorage.getItem("token");return e&&(n.headers.Authorization=`Bearer ${e}`),n},n=>Promise.reject(n));_h.interceptors.response.use(n=>n.data,n=>(n.response?console.error("Error Response:",n.response):n.request?console.error("Error Request:",n.request):console.error("Error Message:",n.message),Promise.reject(n)));oc.interceptors.request.use(n=>{const e=localStorage.getItem("token");return e&&(n.headers.Authorization=`Bearer ${e}`),n},n=>Promise.reject(n));oc.interceptors.response.use(n=>!n.data||typeof n.data!="object"||n.data===null?Promise.reject(new Error("Invalid response data")):n.data,n=>(console.error("Response error:",n),Promise.reject(n)));const CE="auth",FA=async n=>{try{return(await _h.post(`${CE}/login`,n)).data}catch(e){throw new Error(Au(e))}},$A=async n=>{try{return(await _h.post(`${CE}/register`,n)).data}catch(e){throw new Error(Au(e))}};var po=(n=>(n.USER_LOGIN="USER_LOGIN",n.USER_LOGIN_SUCCESS="USER_LOGIN_SUCCESS",n.USER_LOGIN_ERROR="USER_LOGIN_ERROR",n.USER_LOGOUT="USER_LOGOUT",n))(po||{});const BA=(n,e)=>async t=>{t({type:po.USER_LOGIN});try{const r=await FA({username:n,password:e});t({type:po.USER_LOGIN_SUCCESS,payload:r})}catch(r){t({type:po.USER_LOGIN_ERROR,payload:r.message})}},RE=()=>({type:po.USER_LOGOUT}),UA=Object.freeze(Object.defineProperty({__proto__:null,userLogOut:RE,userLogin:BA},Symbol.toStringTag,{value:"Module"})),jA=(n,e,t,r)=>{var s,a,c,u;const i=[t,{code:e,...r||{}}];if((a=(s=n==null?void 0:n.services)==null?void 0:s.logger)!=null&&a.forward)return n.services.logger.forward(i,"warn","react-i18next::",!0);Ga(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),(u=(c=n==null?void 0:n.services)==null?void 0:c.logger)!=null&&u.warn?n.services.logger.warn(...i):console!=null&&console.warn&&console.warn(...i)},xx={},xg=(n,e,t,r)=>{Ga(t)&&xx[t]||(Ga(t)&&(xx[t]=new Date),jA(n,e,t,r))},AE=(n,e)=>()=>{if(n.isInitialized)e();else{const t=()=>{setTimeout(()=>{n.off("initialized",t)},0),e()};n.on("initialized",t)}},Sg=(n,e,t)=>{n.loadNamespaces(e,AE(n,t))},Sx=(n,e,t,r)=>{if(Ga(t)&&(t=[t]),n.options.preload&&n.options.preload.indexOf(e)>-1)return Sg(n,t,r);t.forEach(i=>{n.options.ns.indexOf(i)<0&&n.options.ns.push(i)}),n.loadLanguages(e,AE(n,r))},HA=(n,e,t={})=>!e.languages||!e.languages.length?(xg(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(n,{lng:t.lng,precheck:(r,i)=>{var s;if(((s=t.bindI18n)==null?void 0:s.indexOf("languageChanging"))>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!i(r.isLanguageChangingTo,n))return!1}}),Ga=n=>typeof n=="string",GA=n=>typeof n=="object"&&n!==null,VA=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,zA={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},KA=n=>zA[n],WA=n=>n.replace(VA,KA);let Eg={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:WA};const YA=(n={})=>{Eg={...Eg,...n}},qA=()=>Eg;let kE;const XA=n=>{kE=n},QA=()=>kE,JA={type:"3rdParty",init(n){YA(n.options.react),XA(n)}},IE=F.createContext();class ZA{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const ek=(n,e)=>{const t=F.useRef();return F.useEffect(()=>{t.current=n},[n,e]),t.current},PE=(n,e,t,r)=>n.getFixedT(e,t,r),tk=(n,e,t,r)=>F.useCallback(PE(n,e,t,r),[n,e,t,r]),Lr=(n,e={})=>{var O,w,$,M;const{i18n:t}=e,{i18n:r,defaultNS:i}=F.useContext(IE)||{},s=t||r||QA();if(s&&!s.reportNamespaces&&(s.reportNamespaces=new ZA),!s){xg(s,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const U=(R,G)=>Ga(G)?G:GA(G)&&Ga(G.defaultValue)?G.defaultValue:Array.isArray(R)?R[R.length-1]:R,W=[U,{},!1];return W.t=U,W.i18n={},W.ready=!1,W}(O=s.options.react)!=null&&O.wait&&xg(s,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const a={...qA(),...s.options.react,...e},{useSuspense:c,keyPrefix:u}=a;let d=i||((w=s.options)==null?void 0:w.defaultNS);d=Ga(d)?[d]:d||["translation"],(M=($=s.reportNamespaces).addUsedNamespaces)==null||M.call($,d);const h=(s.isInitialized||s.initializedStoreOnce)&&d.every(U=>HA(U,s,a)),p=tk(s,e.lng||null,a.nsMode==="fallback"?d:d[0],u),g=()=>p,x=()=>PE(s,e.lng||null,a.nsMode==="fallback"?d:d[0],u),[v,S]=F.useState(g);let T=d.join();e.lng&&(T=`${e.lng}${T}`);const _=ek(T),C=F.useRef(!0);F.useEffect(()=>{const{bindI18n:U,bindI18nStore:W}=a;C.current=!0,!h&&!c&&(e.lng?Sx(s,e.lng,d,()=>{C.current&&S(x)}):Sg(s,d,()=>{C.current&&S(x)})),h&&_&&_!==T&&C.current&&S(x);const R=()=>{C.current&&S(x)};return U&&(s==null||s.on(U,R)),W&&(s==null||s.store.on(W,R)),()=>{C.current=!1,s&&(U==null||U.split(" ").forEach(G=>s.off(G,R))),W&&s&&W.split(" ").forEach(G=>s.store.off(G,R))}},[s,T]),F.useEffect(()=>{C.current&&h&&S(g)},[s,u,h]);const k=[v,s,h];if(k.t=v,k.i18n=s,k.ready=h,h||!h&&!c)return k;throw new Promise(U=>{e.lng?Sx(s,e.lng,d,()=>U()):Sg(s,d,()=>U())})};function nk({i18n:n,defaultNS:e,children:t}){const r=F.useMemo(()=>({i18n:n,defaultNS:e}),[n,e]);return F.createElement(IE.Provider,{value:r},t)}const rk=({username:n})=>{const{t:e}=Lr(),t=eE(),r=()=>{t(RE())};return A.jsx("div",{children:A.jsx("div",{className:"navbar-collapse",id:"navbarNavDarkDropdown",children:A.jsx("ul",{className:"navbar-nav",children:A.jsxs("li",{className:"nav-item dropdown",children:[A.jsx("a",{className:"nav-link dropdown-toggle text-white px-3",href:"#",id:"navbarDarkDropdownMenuLink",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:n}),A.jsxs("ul",{className:"dropdown-menu dropdown-menu-dark","aria-labelledby":"navbarDarkDropdownMenuLink",children:[A.jsx("li",{children:A.jsx("a",{className:"dropdown-item",href:"#",children:"Action"})}),A.jsx("li",{children:A.jsx("a",{className:"dropdown-item",href:"#",children:"Another action"})}),A.jsx("li",{children:A.jsx(sr,{className:"dropdown-item",to:"/login",onClick:r,children:e("auth.logout.title")})})]})]})})})})},DE=({isVip:n,username:e,isLoggedIn:t})=>{const{t:r}=Lr();return A.jsxs("div",{className:"header-account d-flex ",children:[A.jsx("span",{className:"header-lang px-4",style:{margin:"auto"},children:A.jsx(UC,{})}),t?A.jsxs(A.Fragment,{children:[A.jsx("div",{className:"header-status  px-3",style:{margin:"auto"},children:n?A.jsx("span",{className:"premium",children:"Premium"}):A.jsx("span",{className:"upgrade",children:"Upgrade"})}),A.jsx("span",{className:"header-username",style:{margin:"auto"},children:A.jsx(rk,{username:e})})]}):A.jsxs(A.Fragment,{children:[A.jsx(sr,{to:"/login",children:A.jsx(Hs,{text:r("auth.login.descrice"),className:"btn btn-outline-light mx-3"})}),A.jsx(sr,{to:"/register",children:A.jsx(Hs,{text:r("auth.register.descrice"),className:"btn btn-outline-primary"})})]})]})},OE=()=>{const{t:n}=Lr(),e=rc(),[t,r]=F.useState(""),i=s=>{r(s.target.value)};return A.jsxs("div",{className:"header-search d-flex",children:[A.jsx("input",{type:"text",name:"search",id:"search",onChange:i}),A.jsx(Hs,{text:n("common.search"),onClick:()=>e(`/tim-kiem?keyword=${t}`),disabled:!t})]})},ik=({logoName:n,onChange:e,isLoggedIn:t,is_vip:r,username:i})=>A.jsx("div",{className:"header header-main navbar navbar-expand-lg ",children:A.jsxs("div",{className:"container header-main-items",children:[A.jsx("div",{className:"header-logo",children:A.jsx(qS,{logoName:n})}),A.jsx("div",{className:" d-none d-lg-block",children:A.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[A.jsx(OE,{}),A.jsx(DE,{isVip:r!==0,isLoggedIn:t,username:i})]})})]})});var NE={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Ex=Bt.createContext&&Bt.createContext(NE),sk=["attr","size","title"];function ok(n,e){if(n==null)return{};var t=ak(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function ak(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Gf(){return Gf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Gf.apply(this,arguments)}function Tx(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Vf(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Tx(Object(t),!0).forEach(function(r){lk(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Tx(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function lk(n,e,t){return e=ck(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ck(n){var e=uk(n,"string");return typeof e=="symbol"?e:e+""}function uk(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function ME(n){return n&&n.map((e,t)=>Bt.createElement(e.tag,Vf({key:t},e.attr),ME(e.child)))}function Wn(n){return e=>Bt.createElement(dk,Gf({attr:Vf({},n.attr)},e),ME(n.child))}function dk(n){var e=t=>{var{attr:r,size:i,title:s}=n,a=ok(n,sk),c=i||t.size||"1em",u;return t.className&&(u=t.className),n.className&&(u=(u?u+" ":"")+n.className),Bt.createElement("svg",Gf({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,a,{className:u,style:Vf(Vf({color:n.color||t.color},t.style),n.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),s&&Bt.createElement("title",null,s),n.children)};return Ex!==void 0?Bt.createElement(Ex.Consumer,null,t=>e(t)):e(NE)}function fk(n){return Wn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"},child:[]}]})(n)}function hk(n){return Wn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 10 5 5 5-5z"},child:[]}]})(n)}const d0=F.createContext(null),f0=F.createContext(void 0),pk=()=>{const{t:n}=Lr(),e=os(),t=rc(),r={home:{name:n("header.menu.home"),link:"/",subMenu:[]},singleMovies:{name:n("header.menu.singleMovies"),link:"/single-movies",subMenu:[],href:"#single-section"},TVSeries:{name:n("header.menu.tvSeries"),link:"/tv-series",subMenu:[],href:"#tvseries-section"},TVShows:{name:n("header.menu.tvshows"),link:"/tv-shows",subMenu:[],href:"#tvshows-section"},movieGenres:{name:n("header.menu.movieGenres"),link:"#",subMenu:["hanh-dong","bi-an","hai-huoc","tinh-cam","vien-tuong","khoa-hoc","tre-em","chinh-kich","co-trang","hinh-su","vo-thuat","gia-dinh","am-nhac","kinh-di"],href:"",icon:A.jsx(hk,{})},blog:{name:n("header.menu.blog"),link:"/blog",subMenu:[],href:"#blog-section"},about:{name:n("header.menu.about"),link:"/technologies",subMenu:[]}},i=F.useContext(f0),s=F.useContext(d0);if(!s)throw new Error("Header must be used within a ToggleMenuProvider");if(!i)throw new Error("Header must be used within a ToggleMenuProvider");const{handleGetMoviesByCategory:a}=i,{toggleMenu:c}=s,u=h=>{h.currentTarget.getAttribute("data-name")!=="TV Series"&&c()},d=h=>{e.pathname!=="/"?(t("/",{replace:!0}),setTimeout(()=>{window.location.hash=h},0)):window.location.hash=h};return A.jsx("div",{className:"header header-sub",children:A.jsx("div",{className:"container menu gap-3",children:Object.entries(r).map(([h,{name:p,link:g,subMenu:x,icon:v,href:S}])=>A.jsxs("div",{className:"menu-item","data-name":p,onClick:u,children:[A.jsx(mk,{link:S||g,name:p,submenu:x,icon:v,onClick:()=>S&&d(S)}),x.length>0&&A.jsx("div",{className:"dropdown-menu",children:A.jsx("ul",{className:"submenu",children:x.map((T,_)=>A.jsx("li",{className:"submenu-item","data-name":p,onClick:()=>a(T,n(`header.menu.subMenu.${T}`)),children:A.jsx(o0,{to:`movie-genres/${T}`,children:n(`header.menu.subMenu.${T}`)},_)},_+T))})})]},h))})})},mk=({link:n,name:e,icon:t,onClick:r})=>A.jsxs(o0,{to:n,onClick:r,className:({isActive:i})=>i?" nav-item":"nav-item",children:[e," ",A.jsx("span",{children:t})]});function gk(n){return Wn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M64 384h384v-42.666H64V384zm0-106.666h384v-42.667H64v42.667zM64 128v42.665h384V128H64z"},child:[]}]})(n)}const h0=()=>{const[n,e]=F.useState("desktop");return F.useEffect(()=>{const t=()=>{const r=window.innerWidth;r<=768?e("mobile"):r>768&&r<=1024?e("tablet"):e("desktop")};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),n},yk=()=>{const{t:n}=Lr();return A.jsx("div",{className:"header-intro container ",children:A.jsxs("h1",{className:"section-title-home",children:[n("header.notification.notifyOne"),A.jsxs(sr,{to:"https://vpt-quiz-app.netlify.app/",children:[A.jsx("span",{children:"https://vpt-quiz-app.netlify.app/"})," "]}),n("header.notification.notifyTwo")]})})},vk=()=>{const n=h0(),e=F.useContext(d0);if(!e)throw new Error("Header must be used within a ToggleMenuProvider");const{isMenuOpen:t,toggleMenu:r}=e,i=tE(s=>{var a,c;return(c=(a=s.login)==null?void 0:a.data)==null?void 0:c.user});return A.jsxs(A.Fragment,{children:[A.jsx(ik,{username:i==null?void 0:i.username,is_vip:i==null?void 0:i.is_vip,logoName:"VANPHUTIN",isLoggedIn:!!i}),A.jsxs("div",{className:"submenu-change d-flex align-items-center justify-content-between",children:[A.jsx("div",{className:"menu d-block d-md-none",children:A.jsx("div",{className:"menu-icon",onClick:r,children:A.jsx(gk,{size:30,color:"#fff"})})}),A.jsx("div",{className:"task d-block d-md-none",children:A.jsx(OE,{})})]}),(t||n==="desktop")&&A.jsxs("div",{className:"menu-dropdown",children:[A.jsx(pk,{}),n!=="desktop"&&A.jsx(DE,{isVip:(i==null?void 0:i.is_vip)!==0,isLoggedIn:!!i,username:i==null?void 0:i.username})]}),A.jsx(yk,{}),A.jsx(r0,{})]})};var Sm={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var bx;function xk(){return bx||(bx=1,function(n){(function(){var e={}.hasOwnProperty;function t(){for(var s="",a=0;a<arguments.length;a++){var c=arguments[a];c&&(s=i(s,r(c)))}return s}function r(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return t.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var a="";for(var c in s)e.call(s,c)&&s[c]&&(a=i(a,c));return a}function i(s,a){return a?s?s+" "+a:s+a:s}n.exports?(t.default=t,n.exports=t):window.classNames=t})()}(Sm)),Sm.exports}var Sk=xk();const gn=fh(Sk);var Em={exports:{}},Tm,wx;function Ek(){if(wx)return Tm;wx=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Tm=n,Tm}var bm,_x;function Tk(){if(_x)return bm;_x=1;var n=Ek();function e(){}function t(){}return t.resetWarningCache=e,bm=function(){function r(a,c,u,d,h,p){if(p!==n){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return s.PropTypes=s,s},bm}var Lx;function bk(){return Lx||(Lx=1,Em.exports=Tk()()),Em.exports}var wk=bk();const Wl=fh(wk),_k={type:Wl.string,tooltip:Wl.bool,as:Wl.elementType},Lh=F.forwardRef(({as:n="div",className:e,type:t="valid",tooltip:r=!1,...i},s)=>A.jsx(n,{...i,ref:s,className:gn(e,`${t}-${r?"tooltip":"feedback"}`)}));Lh.displayName="Feedback";Lh.propTypes=_k;const yo=F.createContext({}),Lk=["xxl","xl","lg","md","sm","xs"],Ck="xs",p0=F.createContext({prefixes:{},breakpoints:Lk,minBreakpoint:Ck});function Tn(n,e){const{prefixes:t}=F.useContext(p0);return n||t[e]||e}function Rk(){const{breakpoints:n}=F.useContext(p0);return n}function Ak(){const{minBreakpoint:n}=F.useContext(p0);return n}const m0=F.forwardRef(({id:n,bsPrefix:e,className:t,type:r="checkbox",isValid:i=!1,isInvalid:s=!1,as:a="input",...c},u)=>{const{controlId:d}=F.useContext(yo);return e=Tn(e,"form-check-input"),A.jsx(a,{...c,ref:u,type:r,id:n||d,className:gn(t,e,i&&"is-valid",s&&"is-invalid")})});m0.displayName="FormCheckInput";const zf=F.forwardRef(({bsPrefix:n,className:e,htmlFor:t,...r},i)=>{const{controlId:s}=F.useContext(yo);return n=Tn(n,"form-check-label"),A.jsx("label",{...r,ref:i,htmlFor:t||s,className:gn(e,n)})});zf.displayName="FormCheckLabel";function kk(n,e){return F.Children.toArray(n).some(t=>F.isValidElement(t)&&t.type===e)}const FE=F.forwardRef(({id:n,bsPrefix:e,bsSwitchPrefix:t,inline:r=!1,reverse:i=!1,disabled:s=!1,isValid:a=!1,isInvalid:c=!1,feedbackTooltip:u=!1,feedback:d,feedbackType:h,className:p,style:g,title:x="",type:v="checkbox",label:S,children:T,as:_="input",...C},k)=>{e=Tn(e,"form-check"),t=Tn(t,"form-switch");const{controlId:O}=F.useContext(yo),w=F.useMemo(()=>({controlId:n||O}),[O,n]),$=!T&&S!=null&&S!==!1||kk(T,zf),M=A.jsx(m0,{...C,type:v==="switch"?"checkbox":v,ref:k,isValid:a,isInvalid:c,disabled:s,as:_});return A.jsx(yo.Provider,{value:w,children:A.jsx("div",{style:g,className:gn(p,$&&e,r&&`${e}-inline`,i&&`${e}-reverse`,v==="switch"&&t),children:T||A.jsxs(A.Fragment,{children:[M,$&&A.jsx(zf,{title:x,children:S}),d&&A.jsx(Lh,{type:h,tooltip:u,children:d})]})})})});FE.displayName="FormCheck";const Kf=Object.assign(FE,{Input:m0,Label:zf}),$E=F.forwardRef(({bsPrefix:n,type:e,size:t,htmlSize:r,id:i,className:s,isValid:a=!1,isInvalid:c=!1,plaintext:u,readOnly:d,as:h="input",...p},g)=>{const{controlId:x}=F.useContext(yo);return n=Tn(n,"form-control"),A.jsx(h,{...p,type:e,size:r,ref:g,readOnly:d,id:i||x,className:gn(s,u?`${n}-plaintext`:n,t&&`${n}-${t}`,e==="color"&&`${n}-color`,a&&"is-valid",c&&"is-invalid")})});$E.displayName="FormControl";const Ik=Object.assign($E,{Feedback:Lh}),BE=F.forwardRef(({className:n,bsPrefix:e,as:t="div",...r},i)=>(e=Tn(e,"form-floating"),A.jsx(t,{ref:i,className:gn(n,e),...r})));BE.displayName="FormFloating";const g0=F.forwardRef(({controlId:n,as:e="div",...t},r)=>{const i=F.useMemo(()=>({controlId:n}),[n]);return A.jsx(yo.Provider,{value:i,children:A.jsx(e,{...t,ref:r})})});g0.displayName="FormGroup";function Pk({as:n,bsPrefix:e,className:t,...r}){e=Tn(e,"col");const i=Rk(),s=Ak(),a=[],c=[];return i.forEach(u=>{const d=r[u];delete r[u];let h,p,g;typeof d=="object"&&d!=null?{span:h,offset:p,order:g}=d:h=d;const x=u!==s?`-${u}`:"";h&&a.push(h===!0?`${e}${x}`:`${e}${x}-${h}`),g!=null&&c.push(`order${x}-${g}`),p!=null&&c.push(`offset${x}-${p}`)}),[{...r,className:gn(t,...a,...c)},{as:n,bsPrefix:e,spans:a}]}const UE=F.forwardRef((n,e)=>{const[{className:t,...r},{as:i="div",bsPrefix:s,spans:a}]=Pk(n);return A.jsx(i,{...r,ref:e,className:gn(t,!a.length&&s)})});UE.displayName="Col";const jE=F.forwardRef(({as:n="label",bsPrefix:e,column:t=!1,visuallyHidden:r=!1,className:i,htmlFor:s,...a},c)=>{const{controlId:u}=F.useContext(yo);e=Tn(e,"form-label");let d="col-form-label";typeof t=="string"&&(d=`${d} ${d}-${t}`);const h=gn(i,e,r&&"visually-hidden",t&&d);return s=s||u,t?A.jsx(UE,{ref:c,as:"label",className:h,htmlFor:s,...a}):A.jsx(n,{ref:c,className:h,htmlFor:s,...a})});jE.displayName="FormLabel";const HE=F.forwardRef(({bsPrefix:n,className:e,id:t,...r},i)=>{const{controlId:s}=F.useContext(yo);return n=Tn(n,"form-range"),A.jsx("input",{...r,type:"range",ref:i,className:gn(e,n),id:t||s})});HE.displayName="FormRange";const GE=F.forwardRef(({bsPrefix:n,size:e,htmlSize:t,className:r,isValid:i=!1,isInvalid:s=!1,id:a,...c},u)=>{const{controlId:d}=F.useContext(yo);return n=Tn(n,"form-select"),A.jsx("select",{...c,size:t,ref:u,className:gn(r,n,e&&`${n}-${e}`,i&&"is-valid",s&&"is-invalid"),id:a||d})});GE.displayName="FormSelect";const VE=F.forwardRef(({bsPrefix:n,className:e,as:t="small",muted:r,...i},s)=>(n=Tn(n,"form-text"),A.jsx(t,{...i,ref:s,className:gn(e,n,r&&"text-muted")})));VE.displayName="FormText";const zE=F.forwardRef((n,e)=>A.jsx(Kf,{...n,ref:e,type:"switch"}));zE.displayName="Switch";const Dk=Object.assign(zE,{Input:Kf.Input,Label:Kf.Label}),KE=F.forwardRef(({bsPrefix:n,className:e,children:t,controlId:r,label:i,...s},a)=>(n=Tn(n,"form-floating"),A.jsxs(g0,{ref:a,className:gn(e,n),controlId:r,...s,children:[t,A.jsx("label",{htmlFor:r,children:i})]})));KE.displayName="FloatingLabel";const Ok={_ref:Wl.any,validated:Wl.bool,as:Wl.elementType},y0=F.forwardRef(({className:n,validated:e,as:t="form",...r},i)=>A.jsx(t,{...r,ref:i,className:gn(n,e&&"was-validated")}));y0.displayName="Form";y0.propTypes=Ok;const wm=Object.assign(y0,{Group:g0,Control:Ik,Floating:BE,Check:Kf,Switch:Dk,Label:jE,Text:VE,Range:HE,Select:GE,FloatingLabel:KE}),su=({className:n,label:e,size:t,type:r,placeholder:i,name:s,value:a,onChange:c,disabled:u,ref:d})=>A.jsx(A.Fragment,{children:A.jsxs(wm.Group,{className:`input-group mb-3 ${n}`,children:[A.jsx("div",{style:{width:"100%"},children:A.jsx(wm.Label,{children:e})}),A.jsx(wm.Control,{ref:d,size:t,type:r,placeholder:i,id:s,name:s,value:a,onChange:c,disabled:u})]})});function v0(n){return Wn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"polyline",attr:{fill:"none",strokeWidth:"2",points:"9 6 15 12 9 18",transform:"matrix(-1 0 0 1 24 0)"},child:[]}]})(n)}const Nk=({login:n,onChange:e,onSubmit:t,loading:r})=>A.jsxs(A.Fragment,{children:[A.jsxs("form",{onSubmit:t,children:[" ",A.jsx(sr,{to:"/",children:A.jsxs("span",{className:"back-home text-black",children:[A.jsx(v0,{}),"Back Home"]})}),A.jsx("h1",{className:"login-title",children:"Welcome back "}),A.jsxs("div",{className:"form-input",children:[A.jsx(su,{type:"text",className:"username",name:"username",value:n.username,placeholder:"Enter your username",onChange:e}),A.jsx(su,{className:"password",type:"password",value:n.password,name:"password",placeholder:"Enter your password",onChange:e}),r?A.jsx(Hs,{disabled:!0,type:"submit",className:"btn btn-dark btn-login",text:"Loading ..."}):A.jsx(Hs,{className:"btn btn-dark btn-login",type:"submit",text:"Login"})]})]}),A.jsx("div",{className:"form-to-sign-in",children:A.jsxs("p",{className:"text-white text-center ",children:["Are you new here? ",A.jsx(sr,{to:"/register",children:"Register"})]})})]});function nr(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var Mk=typeof Symbol=="function"&&Symbol.observable||"@@observable",Cx=Mk,_m=()=>Math.random().toString(36).substring(7).split("").join("."),Fk={INIT:`@@redux/INIT${_m()}`,REPLACE:`@@redux/REPLACE${_m()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${_m()}`},Wf=Fk;function $k(n){if(typeof n!="object"||n===null)return!1;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e||Object.getPrototypeOf(n)===null}function x0(n,e,t){if(typeof n!="function")throw new Error(nr(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(nr(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(nr(1));return t(x0)(n,e)}let r=n,i=e,s=new Map,a=s,c=0,u=!1;function d(){a===s&&(a=new Map,s.forEach((T,_)=>{a.set(_,T)}))}function h(){if(u)throw new Error(nr(3));return i}function p(T){if(typeof T!="function")throw new Error(nr(4));if(u)throw new Error(nr(5));let _=!0;d();const C=c++;return a.set(C,T),function(){if(_){if(u)throw new Error(nr(6));_=!1,d(),a.delete(C),s=null}}}function g(T){if(!$k(T))throw new Error(nr(7));if(typeof T.type>"u")throw new Error(nr(8));if(typeof T.type!="string")throw new Error(nr(17));if(u)throw new Error(nr(9));try{u=!0,i=r(i,T)}finally{u=!1}return(s=a).forEach(C=>{C()}),T}function x(T){if(typeof T!="function")throw new Error(nr(10));r=T,g({type:Wf.REPLACE})}function v(){const T=p;return{subscribe(_){if(typeof _!="object"||_===null)throw new Error(nr(11));function C(){const O=_;O.next&&O.next(h())}return C(),{unsubscribe:T(C)}},[Cx](){return this}}}return g({type:Wf.INIT}),{dispatch:g,subscribe:p,getState:h,replaceReducer:x,[Cx]:v}}function Bk(n){Object.keys(n).forEach(e=>{const t=n[e];if(typeof t(void 0,{type:Wf.INIT})>"u")throw new Error(nr(12));if(typeof t(void 0,{type:Wf.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(nr(13))})}function Uk(n){const e=Object.keys(n),t={};for(let s=0;s<e.length;s++){const a=e[s];typeof n[a]=="function"&&(t[a]=n[a])}const r=Object.keys(t);let i;try{Bk(t)}catch(s){i=s}return function(a={},c){if(i)throw i;let u=!1;const d={};for(let h=0;h<r.length;h++){const p=r[h],g=t[p],x=a[p],v=g(x,c);if(typeof v>"u")throw c&&c.type,new Error(nr(14));d[p]=v,u=u||v!==x}return u=u||r.length!==Object.keys(a).length,u?d:a}}function Rx(n,e){return function(...t){return e(n.apply(this,t))}}function jk(n,e){if(typeof n=="function")return Rx(n,e);if(typeof n!="object"||n===null)throw new Error(nr(16));const t={};for(const r in n){const i=n[r];typeof i=="function"&&(t[r]=Rx(i,e))}return t}function WE(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...r)=>e(t(...r)))}function Hk(...n){return e=>(t,r)=>{const i=e(t,r);let s=()=>{throw new Error(nr(15))};const a={getState:i.getState,dispatch:(u,...d)=>s(u,...d)},c=n.map(u=>u(a));return s=WE(...c)(i.dispatch),{...i,dispatch:s}}}var S0="persist:",YE="persist/FLUSH",E0="persist/REHYDRATE",qE="persist/PAUSE",XE="persist/PERSIST",QE="persist/PURGE",JE="persist/REGISTER",Gk=-1;function _f(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_f=function(t){return typeof t}:_f=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_f(n)}function Ax(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Vk(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ax(t,!0).forEach(function(r){zk(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Ax(t).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function zk(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Kk(n,e,t,r){r.debug;var i=Vk({},t);return n&&_f(n)==="object"&&Object.keys(n).forEach(function(s){s!=="_persist"&&e[s]===t[s]&&(i[s]=n[s])}),i}function Wk(n){var e=n.blacklist||null,t=n.whitelist||null,r=n.transforms||[],i=n.throttle||0,s="".concat(n.keyPrefix!==void 0?n.keyPrefix:S0).concat(n.key),a=n.storage,c;n.serialize===!1?c=function(w){return w}:typeof n.serialize=="function"?c=n.serialize:c=Yk;var u=n.writeFailHandler||null,d={},h={},p=[],g=null,x=null,v=function(w){Object.keys(w).forEach(function($){_($)&&d[$]!==w[$]&&p.indexOf($)===-1&&p.push($)}),Object.keys(d).forEach(function($){w[$]===void 0&&_($)&&p.indexOf($)===-1&&d[$]!==void 0&&p.push($)}),g===null&&(g=setInterval(S,i)),d=w};function S(){if(p.length===0){g&&clearInterval(g),g=null;return}var O=p.shift(),w=r.reduce(function($,M){return M.in($,O,d)},d[O]);if(w!==void 0)try{h[O]=c(w)}catch($){console.error("redux-persist/createPersistoid: error serializing state",$)}else delete h[O];p.length===0&&T()}function T(){Object.keys(h).forEach(function(O){d[O]===void 0&&delete h[O]}),x=a.setItem(s,c(h)).catch(C)}function _(O){return!(t&&t.indexOf(O)===-1&&O!=="_persist"||e&&e.indexOf(O)!==-1)}function C(O){u&&u(O)}var k=function(){for(;p.length!==0;)S();return x||Promise.resolve()};return{update:v,flush:k}}function Yk(n){return JSON.stringify(n)}function qk(n){var e=n.transforms||[],t="".concat(n.keyPrefix!==void 0?n.keyPrefix:S0).concat(n.key),r=n.storage;n.debug;var i;return n.deserialize===!1?i=function(a){return a}:typeof n.deserialize=="function"?i=n.deserialize:i=Xk,r.getItem(t).then(function(s){if(s)try{var a={},c=i(s);return Object.keys(c).forEach(function(u){a[u]=e.reduceRight(function(d,h){return h.out(d,u,c)},i(c[u]))}),a}catch(u){throw u}else return})}function Xk(n){return JSON.parse(n)}function Qk(n){var e=n.storage,t="".concat(n.keyPrefix!==void 0?n.keyPrefix:S0).concat(n.key);return e.removeItem(t,Jk)}function Jk(n){}function kx(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function ao(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?kx(t,!0).forEach(function(r){Zk(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):kx(t).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Zk(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function eI(n,e){if(n==null)return{};var t=tI(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function tI(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}var nI=5e3;function rI(n,e){var t=n.version!==void 0?n.version:Gk;n.debug;var r=n.stateReconciler===void 0?Kk:n.stateReconciler,i=n.getStoredState||qk,s=n.timeout!==void 0?n.timeout:nI,a=null,c=!1,u=!0,d=function(p){return p._persist.rehydrated&&a&&!u&&a.update(p),p};return function(h,p){var g=h||{},x=g._persist,v=eI(g,["_persist"]),S=v;if(p.type===XE){var T=!1,_=function(U,W){T||(p.rehydrate(n.key,U,W),T=!0)};if(s&&setTimeout(function(){!T&&_(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(n.key,'"')))},s),u=!1,a||(a=Wk(n)),x)return ao({},e(S,p),{_persist:x});if(typeof p.rehydrate!="function"||typeof p.register!="function")throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return p.register(n.key),i(n).then(function(M){var U=n.migrate||function(W,R){return Promise.resolve(W)};U(M,t).then(function(W){_(W)},function(W){_(void 0,W)})},function(M){_(void 0,M)}),ao({},e(S,p),{_persist:{version:t,rehydrated:!1}})}else{if(p.type===QE)return c=!0,p.result(Qk(n)),ao({},e(S,p),{_persist:x});if(p.type===YE)return p.result(a&&a.flush()),ao({},e(S,p),{_persist:x});if(p.type===qE)u=!0;else if(p.type===E0){if(c)return ao({},S,{_persist:ao({},x,{rehydrated:!0})});if(p.key===n.key){var C=e(S,p),k=p.payload,O=r!==!1&&k!==void 0?r(k,h,C,n):C,w=ao({},O,{_persist:ao({},x,{rehydrated:!0})});return d(w)}}}if(!x)return e(h,p);var $=e(S,p);return $===S?h:d(ao({},$,{_persist:x}))}}function Ix(n){return oI(n)||sI(n)||iI()}function iI(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function sI(n){if(Symbol.iterator in Object(n)||Object.prototype.toString.call(n)==="[object Arguments]")return Array.from(n)}function oI(n){if(Array.isArray(n)){for(var e=0,t=new Array(n.length);e<n.length;e++)t[e]=n[e];return t}}function Px(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Tg(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Px(t,!0).forEach(function(r){aI(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Px(t).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function aI(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var ZE={registry:[],bootstrapped:!1},lI=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ZE,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case JE:return Tg({},e,{registry:[].concat(Ix(e.registry),[t.key])});case E0:var r=e.registry.indexOf(t.key),i=Ix(e.registry);return i.splice(r,1),Tg({},e,{registry:i,bootstrapped:i.length===0});default:return e}};function cI(n,e,t){var r=x0(lI,ZE,void 0),i=function(u){r.dispatch({type:JE,key:u})},s=function(u,d,h){var p={type:E0,payload:d,err:h,key:u};n.dispatch(p),r.dispatch(p)},a=Tg({},r,{purge:function(){var u=[];return n.dispatch({type:QE,result:function(h){u.push(h)}}),Promise.all(u)},flush:function(){var u=[];return n.dispatch({type:YE,result:function(h){u.push(h)}}),Promise.all(u)},pause:function(){n.dispatch({type:qE})},persist:function(){n.dispatch({type:XE,register:i,rehydrate:s})}});return a.persist(),a}var Qc={},Jd={},Zd={},Dx;function uI(){if(Dx)return Zd;Dx=1,Zd.__esModule=!0,Zd.default=i;function n(s){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?n=function(c){return typeof c}:n=function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},n(s)}function e(){}var t={getItem:e,setItem:e,removeItem:e};function r(s){if((typeof self>"u"?"undefined":n(self))!=="object"||!(s in self))return!1;try{var a=self[s],c="redux-persist ".concat(s," test");a.setItem(c,"test"),a.getItem(c),a.removeItem(c)}catch{return!1}return!0}function i(s){var a="".concat(s,"Storage");return r(a)?self[a]:t}return Zd}var Ox;function dI(){if(Ox)return Jd;Ox=1,Jd.__esModule=!0,Jd.default=t;var n=e(uI());function e(r){return r&&r.__esModule?r:{default:r}}function t(r){var i=(0,n.default)(r);return{getItem:function(a){return new Promise(function(c,u){c(i.getItem(a))})},setItem:function(a,c){return new Promise(function(u,d){u(i.setItem(a,c))})},removeItem:function(a){return new Promise(function(c,u){c(i.removeItem(a))})}}}return Jd}var Nx;function fI(){if(Nx)return Qc;Nx=1,Qc.__esModule=!0,Qc.default=void 0;var n=e(dI());function e(r){return r&&r.__esModule?r:{default:r}}var t=(0,n.default)("local");return Qc.default=t,Qc}var hI=fI();const pI=fh(hI);function mI(n){return({dispatch:t,getState:r})=>i=>s=>typeof s=="function"?s(t,r,n):i(s)}var gI=mI();const yI={loading:!1,error:null,data:null},vI=(n=yI,e)=>{switch(e.type){case po.USER_LOGIN:return{...n,loading:!0,error:null};case po.USER_LOGIN_SUCCESS:return{...n,loading:!1,data:e.payload};case po.USER_LOGIN_ERROR:return{...n,loading:!1,error:e.payload};case po.USER_LOGOUT:return{...n,data:null};default:return n}},xI=Uk({login:vI}),SI=n=>e=>t=>{var a,c;const r=e(t),s=(c=(a=n.getState().login)==null?void 0:a.data)==null?void 0:c.accessToken;return s&&Mx(s)&&(console.log("token",Mx(s)),console.warn("Token expired, dispatching logout action..."),n.dispatch({type:"USER_LOGOUT"})),r},Mx=n=>{try{const e=n.split(".")[1],t=JSON.parse(atob(e.replace(/-/g,"+").replace(/_/g,"/"))),r=Math.floor(Date.now()/1e3);return t.exp<r}catch(e){return console.error("Invalid token",e),!0}},EI=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||WE,TI={key:"root",storage:pI},bI=rI(TI,xI),eT=x0(bI,EI(Hk(SI,gI)));cI(eT);const wI=()=>{const n=eE();return jk(UA,n)},_I=()=>{const n=rc(),[e,t]=F.useState({username:"",password:""}),{loading:r,error:i,data:s}=tE(d=>d.login),{userLogin:a}=wI(),c=d=>{const{name:h,value:p}=d.target;t({...e,[h]:p})},u=d=>{d.preventDefault(),a(e.username,e.password)};return F.useEffect(()=>{s&&n("/")},[s,n]),A.jsx("div",{className:"login",children:A.jsx("div",{className:"login-form",children:A.jsx(Nk,{login:e,onChange:c,onSubmit:u,error:i,loading:r})})})};var Lm={exports:{}},Fx;function LI(){return Fx||(Fx=1,(()=>{var n={296:(i,s,a)=>{var c=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,d=/^0b[01]+$/i,h=/^0o[0-7]+$/i,p=parseInt,g=typeof a.g=="object"&&a.g&&a.g.Object===Object&&a.g,x=typeof self=="object"&&self&&self.Object===Object&&self,v=g||x||Function("return this")(),S=Object.prototype.toString,T=Math.max,_=Math.min,C=function(){return v.Date.now()};function k(w){var $=typeof w;return!!w&&($=="object"||$=="function")}function O(w){if(typeof w=="number")return w;if(function(U){return typeof U=="symbol"||function(W){return!!W&&typeof W=="object"}(U)&&S.call(U)=="[object Symbol]"}(w))return NaN;if(k(w)){var $=typeof w.valueOf=="function"?w.valueOf():w;w=k($)?$+"":$}if(typeof w!="string")return w===0?w:+w;w=w.replace(c,"");var M=d.test(w);return M||h.test(w)?p(w.slice(2),M?2:8):u.test(w)?NaN:+w}i.exports=function(w,$,M){var U,W,R,G,fe,ae,xe=0,ye=!1,Ee=!1,Pe=!0;if(typeof w!="function")throw new TypeError("Expected a function");function ie(we){var Ae=U,Oe=W;return U=W=void 0,xe=we,G=w.apply(Oe,Ae)}function se(we){var Ae=we-ae;return ae===void 0||Ae>=$||Ae<0||Ee&&we-xe>=R}function B(){var we=C();if(se(we))return H(we);fe=setTimeout(B,function(Ae){var Oe=$-(Ae-ae);return Ee?_(Oe,R-(Ae-xe)):Oe}(we))}function H(we){return fe=void 0,Pe&&U?ie(we):(U=W=void 0,G)}function Q(){var we=C(),Ae=se(we);if(U=arguments,W=this,ae=we,Ae){if(fe===void 0)return function(Oe){return xe=Oe,fe=setTimeout(B,$),ye?ie(Oe):G}(ae);if(Ee)return fe=setTimeout(B,$),ie(ae)}return fe===void 0&&(fe=setTimeout(B,$)),G}return $=O($)||0,k(M)&&(ye=!!M.leading,R=(Ee="maxWait"in M)?T(O(M.maxWait)||0,$):R,Pe="trailing"in M?!!M.trailing:Pe),Q.cancel=function(){fe!==void 0&&clearTimeout(fe),xe=0,U=ae=W=fe=void 0},Q.flush=function(){return fe===void 0?G:H(C())},Q}},96:(i,s,a)=>{var c="Expected a function",u=NaN,d="[object Symbol]",h=/^\s+|\s+$/g,p=/^[-+]0x[0-9a-f]+$/i,g=/^0b[01]+$/i,x=/^0o[0-7]+$/i,v=parseInt,S=typeof a.g=="object"&&a.g&&a.g.Object===Object&&a.g,T=typeof self=="object"&&self&&self.Object===Object&&self,_=S||T||Function("return this")(),C=Object.prototype.toString,k=Math.max,O=Math.min,w=function(){return _.Date.now()};function $(U){var W=typeof U;return!!U&&(W=="object"||W=="function")}function M(U){if(typeof U=="number")return U;if(function(G){return typeof G=="symbol"||function(fe){return!!fe&&typeof fe=="object"}(G)&&C.call(G)==d}(U))return u;if($(U)){var W=typeof U.valueOf=="function"?U.valueOf():U;U=$(W)?W+"":W}if(typeof U!="string")return U===0?U:+U;U=U.replace(h,"");var R=g.test(U);return R||x.test(U)?v(U.slice(2),R?2:8):p.test(U)?u:+U}i.exports=function(U,W,R){var G=!0,fe=!0;if(typeof U!="function")throw new TypeError(c);return $(R)&&(G="leading"in R?!!R.leading:G,fe="trailing"in R?!!R.trailing:fe),function(ae,xe,ye){var Ee,Pe,ie,se,B,H,Q=0,we=!1,Ae=!1,Oe=!0;if(typeof ae!="function")throw new TypeError(c);function Me(an){var Bn=Ee,Ot=Pe;return Ee=Pe=void 0,Q=an,se=ae.apply(Ot,Bn)}function ct(an){var Bn=an-H;return H===void 0||Bn>=xe||Bn<0||Ae&&an-Q>=ie}function Ce(){var an=w();if(ct(an))return nt(an);B=setTimeout(Ce,function(Bn){var Ot=xe-(Bn-H);return Ae?O(Ot,ie-(Bn-Q)):Ot}(an))}function nt(an){return B=void 0,Oe&&Ee?Me(an):(Ee=Pe=void 0,se)}function Ut(){var an=w(),Bn=ct(an);if(Ee=arguments,Pe=this,H=an,Bn){if(B===void 0)return function(Ot){return Q=Ot,B=setTimeout(Ce,xe),we?Me(Ot):se}(H);if(Ae)return B=setTimeout(Ce,xe),Me(H)}return B===void 0&&(B=setTimeout(Ce,xe)),se}return xe=M(xe)||0,$(ye)&&(we=!!ye.leading,ie=(Ae="maxWait"in ye)?k(M(ye.maxWait)||0,xe):ie,Oe="trailing"in ye?!!ye.trailing:Oe),Ut.cancel=function(){B!==void 0&&clearTimeout(B),Q=0,Ee=H=Pe=B=void 0},Ut.flush=function(){return B===void 0?se:nt(w())},Ut}(U,W,{leading:G,maxWait:W,trailing:fe})}},703:(i,s,a)=>{var c=a(414);function u(){}function d(){}d.resetWarningCache=u,i.exports=function(){function h(x,v,S,T,_,C){if(C!==c){var k=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw k.name="Invariant Violation",k}}function p(){return h}h.isRequired=h;var g={array:h,bigint:h,bool:h,func:h,number:h,object:h,string:h,symbol:h,any:h,arrayOf:p,element:h,elementType:h,instanceOf:p,node:h,objectOf:p,oneOf:p,oneOfType:p,shape:p,exact:p,checkPropTypes:d,resetWarningCache:u};return g.PropTypes=g,g}},697:(i,s,a)=>{i.exports=a(703)()},414:i=>{i.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}},e={};function t(i){var s=e[i];if(s!==void 0)return s.exports;var a=e[i]={exports:{}};return n[i](a,a.exports,t),a.exports}t.n=i=>{var s=i&&i.__esModule?()=>i.default:()=>i;return t.d(s,{a:s}),s},t.d=(i,s)=>{for(var a in s)t.o(s,a)&&!t.o(i,a)&&Object.defineProperty(i,a,{enumerable:!0,get:s[a]})},t.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),t.o=(i,s)=>Object.prototype.hasOwnProperty.call(i,s),t.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})};var r={};(()=>{t.r(r),t.d(r,{LazyLoadComponent:()=>Bn,LazyLoadImage:()=>ii,trackWindowScroll:()=>se});const i=Eu();var s=t.n(i),a=t(697);function c(){return typeof window<"u"&&"IntersectionObserver"in window&&"isIntersecting"in window.IntersectionObserverEntry.prototype}function u(pe){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z},u(pe)}function d(pe,Z){var Te=Object.keys(pe);if(Object.getOwnPropertySymbols){var Se=Object.getOwnPropertySymbols(pe);Z&&(Se=Se.filter(function(lt){return Object.getOwnPropertyDescriptor(pe,lt).enumerable})),Te.push.apply(Te,Se)}return Te}function h(pe,Z,Te){return(Z=g(Z))in pe?Object.defineProperty(pe,Z,{value:Te,enumerable:!0,configurable:!0,writable:!0}):pe[Z]=Te,pe}function p(pe,Z){for(var Te=0;Te<Z.length;Te++){var Se=Z[Te];Se.enumerable=Se.enumerable||!1,Se.configurable=!0,"value"in Se&&(Se.writable=!0),Object.defineProperty(pe,g(Se.key),Se)}}function g(pe){var Z=function(Te,Se){if(u(Te)!=="object"||Te===null)return Te;var lt=Te[Symbol.toPrimitive];if(lt!==void 0){var tt=lt.call(Te,"string");if(u(tt)!=="object")return tt;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(Te)}(pe);return u(Z)==="symbol"?Z:String(Z)}function x(pe,Z){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Te,Se){return Te.__proto__=Se,Te},x(pe,Z)}function v(pe){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Z){return Z.__proto__||Object.getPrototypeOf(Z)},v(pe)}var S=function(pe){pe.forEach(function(Z){Z.isIntersecting&&Z.target.onVisible()})},T={},_=function(pe){(function(ue,ge){if(typeof ge!="function"&&ge!==null)throw new TypeError("Super expression must either be null or a function");ue.prototype=Object.create(ge&&ge.prototype,{constructor:{value:ue,writable:!0,configurable:!0}}),Object.defineProperty(ue,"prototype",{writable:!1}),ge&&x(ue,ge)})(bt,pe);var Z,Te,Se,lt,tt=(Se=bt,lt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var ue,ge=v(Se);if(lt){var Ke=v(this).constructor;ue=Reflect.construct(ge,arguments,Ke)}else ue=ge.apply(this,arguments);return function(Be,Fe){if(Fe&&(u(Fe)==="object"||typeof Fe=="function"))return Fe;if(Fe!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(mt){if(mt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return mt}(Be)}(this,ue)});function bt(ue){var ge;if(function(Be,Fe){if(!(Be instanceof Fe))throw new TypeError("Cannot call a class as a function")}(this,bt),(ge=tt.call(this,ue)).supportsObserver=!ue.scrollPosition&&ue.useIntersectionObserver&&c(),ge.supportsObserver){var Ke=ue.threshold;ge.observer=function(Be){return T[Be]=T[Be]||new IntersectionObserver(S,{rootMargin:Be+"px"}),T[Be]}(Ke)}return ge}return Z=bt,Te=[{key:"componentDidMount",value:function(){this.placeholder&&this.observer&&(this.placeholder.onVisible=this.props.onVisible,this.observer.observe(this.placeholder)),this.supportsObserver||this.updateVisibility()}},{key:"componentWillUnmount",value:function(){this.observer&&this.placeholder&&this.observer.unobserve(this.placeholder)}},{key:"componentDidUpdate",value:function(){this.supportsObserver||this.updateVisibility()}},{key:"getPlaceholderBoundingBox",value:function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props.scrollPosition,ge=this.placeholder.getBoundingClientRect(),Ke=this.placeholder.style,Be=parseInt(Ke.getPropertyValue("margin-left"),10)||0,Fe=parseInt(Ke.getPropertyValue("margin-top"),10)||0;return{bottom:ue.y+ge.bottom+Fe,left:ue.x+ge.left+Be,right:ue.x+ge.right+Be,top:ue.y+ge.top+Fe}}},{key:"isPlaceholderInViewport",value:function(){if(typeof window>"u"||!this.placeholder)return!1;var ue=this.props,ge=ue.scrollPosition,Ke=ue.threshold,Be=this.getPlaceholderBoundingBox(ge),Fe=ge.y+window.innerHeight,mt=ge.x,Nt=ge.x+window.innerWidth,jt=ge.y;return jt-Ke<=Be.bottom&&Fe+Ke>=Be.top&&mt-Ke<=Be.right&&Nt+Ke>=Be.left}},{key:"updateVisibility",value:function(){this.isPlaceholderInViewport()&&this.props.onVisible()}},{key:"render",value:function(){var ue=this,ge=this.props,Ke=ge.className,Be=ge.height,Fe=ge.placeholder,mt=ge.style,Nt=ge.width;if(Fe&&typeof Fe.type!="function")return s().cloneElement(Fe,{ref:function(Ct){return ue.placeholder=Ct}});var jt=function(Ct){for(var en=1;en<arguments.length;en++){var Mt=arguments[en]!=null?arguments[en]:{};en%2?d(Object(Mt),!0).forEach(function(fn){h(Ct,fn,Mt[fn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ct,Object.getOwnPropertyDescriptors(Mt)):d(Object(Mt)).forEach(function(fn){Object.defineProperty(Ct,fn,Object.getOwnPropertyDescriptor(Mt,fn))})}return Ct}({display:"inline-block"},mt);return Nt!==void 0&&(jt.width=Nt),Be!==void 0&&(jt.height=Be),s().createElement("span",{className:Ke,ref:function(Ct){return ue.placeholder=Ct},style:jt},Fe)}}],Te&&p(Z.prototype,Te),Object.defineProperty(Z,"prototype",{writable:!1}),bt}(s().Component);_.propTypes={onVisible:a.PropTypes.func.isRequired,className:a.PropTypes.string,height:a.PropTypes.oneOfType([a.PropTypes.number,a.PropTypes.string]),placeholder:a.PropTypes.element,threshold:a.PropTypes.number,useIntersectionObserver:a.PropTypes.bool,scrollPosition:a.PropTypes.shape({x:a.PropTypes.number.isRequired,y:a.PropTypes.number.isRequired}),width:a.PropTypes.oneOfType([a.PropTypes.number,a.PropTypes.string])},_.defaultProps={className:"",placeholder:null,threshold:100,useIntersectionObserver:!0};const C=_;var k=t(296),O=t.n(k),w=t(96),$=t.n(w),M=function(pe){var Z=getComputedStyle(pe,null);return Z.getPropertyValue("overflow")+Z.getPropertyValue("overflow-y")+Z.getPropertyValue("overflow-x")};const U=function(pe){if(!(pe instanceof HTMLElement))return window;for(var Z=pe;Z&&Z instanceof HTMLElement;){if(/(scroll|auto)/.test(M(Z)))return Z;Z=Z.parentNode}return window};function W(pe){return W=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z},W(pe)}var R=["delayMethod","delayTime"];function G(){return G=Object.assign?Object.assign.bind():function(pe){for(var Z=1;Z<arguments.length;Z++){var Te=arguments[Z];for(var Se in Te)Object.prototype.hasOwnProperty.call(Te,Se)&&(pe[Se]=Te[Se])}return pe},G.apply(this,arguments)}function fe(pe,Z){for(var Te=0;Te<Z.length;Te++){var Se=Z[Te];Se.enumerable=Se.enumerable||!1,Se.configurable=!0,"value"in Se&&(Se.writable=!0),Object.defineProperty(pe,(lt=function(tt,bt){if(W(tt)!=="object"||tt===null)return tt;var ue=tt[Symbol.toPrimitive];if(ue!==void 0){var ge=ue.call(tt,"string");if(W(ge)!=="object")return ge;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(tt)}(Se.key),W(lt)==="symbol"?lt:String(lt)),Se)}var lt}function ae(pe,Z){return ae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Te,Se){return Te.__proto__=Se,Te},ae(pe,Z)}function xe(pe,Z){if(Z&&(W(Z)==="object"||typeof Z=="function"))return Z;if(Z!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ye(pe)}function ye(pe){if(pe===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return pe}function Ee(pe){return Ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Z){return Z.__proto__||Object.getPrototypeOf(Z)},Ee(pe)}var Pe=function(){return typeof window>"u"?0:window.scrollX||window.pageXOffset},ie=function(){return typeof window>"u"?0:window.scrollY||window.pageYOffset};const se=function(pe){var Z=function(Te){(function(Ke,Be){if(typeof Be!="function"&&Be!==null)throw new TypeError("Super expression must either be null or a function");Ke.prototype=Object.create(Be&&Be.prototype,{constructor:{value:Ke,writable:!0,configurable:!0}}),Object.defineProperty(Ke,"prototype",{writable:!1}),Be&&ae(Ke,Be)})(ge,Te);var Se,lt,tt,bt,ue=(tt=ge,bt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Ke,Be=Ee(tt);if(bt){var Fe=Ee(this).constructor;Ke=Reflect.construct(Be,arguments,Fe)}else Ke=Be.apply(this,arguments);return xe(this,Ke)});function ge(Ke){var Be;if(function(mt,Nt){if(!(mt instanceof Nt))throw new TypeError("Cannot call a class as a function")}(this,ge),(Be=ue.call(this,Ke)).useIntersectionObserver=Ke.useIntersectionObserver&&c(),Be.useIntersectionObserver)return xe(Be);var Fe=Be.onChangeScroll.bind(ye(Be));return Ke.delayMethod==="debounce"?Be.delayedScroll=O()(Fe,Ke.delayTime):Ke.delayMethod==="throttle"&&(Be.delayedScroll=$()(Fe,Ke.delayTime)),Be.state={scrollPosition:{x:Pe(),y:ie()}},Be.baseComponentRef=s().createRef(),Be}return Se=ge,(lt=[{key:"componentDidMount",value:function(){this.addListeners()}},{key:"componentWillUnmount",value:function(){this.removeListeners()}},{key:"componentDidUpdate",value:function(){typeof window>"u"||this.useIntersectionObserver||U(this.baseComponentRef.current)!==this.scrollElement&&(this.removeListeners(),this.addListeners())}},{key:"addListeners",value:function(){typeof window>"u"||this.useIntersectionObserver||(this.scrollElement=U(this.baseComponentRef.current),this.scrollElement.addEventListener("scroll",this.delayedScroll,{passive:!0}),window.addEventListener("resize",this.delayedScroll,{passive:!0}),this.scrollElement!==window&&window.addEventListener("scroll",this.delayedScroll,{passive:!0}))}},{key:"removeListeners",value:function(){typeof window>"u"||this.useIntersectionObserver||(this.scrollElement.removeEventListener("scroll",this.delayedScroll),window.removeEventListener("resize",this.delayedScroll),this.scrollElement!==window&&window.removeEventListener("scroll",this.delayedScroll))}},{key:"onChangeScroll",value:function(){this.useIntersectionObserver||this.setState({scrollPosition:{x:Pe(),y:ie()}})}},{key:"render",value:function(){var Ke=this.props,Be=(Ke.delayMethod,Ke.delayTime,function(mt,Nt){if(mt==null)return{};var jt,Ct,en=function(fn,gr){if(fn==null)return{};var Fr,$i,V={},X=Object.keys(fn);for($i=0;$i<X.length;$i++)Fr=X[$i],gr.indexOf(Fr)>=0||(V[Fr]=fn[Fr]);return V}(mt,Nt);if(Object.getOwnPropertySymbols){var Mt=Object.getOwnPropertySymbols(mt);for(Ct=0;Ct<Mt.length;Ct++)jt=Mt[Ct],Nt.indexOf(jt)>=0||Object.prototype.propertyIsEnumerable.call(mt,jt)&&(en[jt]=mt[jt])}return en}(Ke,R)),Fe=this.useIntersectionObserver?null:this.state.scrollPosition;return s().createElement(pe,G({forwardRef:this.baseComponentRef,scrollPosition:Fe},Be))}}])&&fe(Se.prototype,lt),Object.defineProperty(Se,"prototype",{writable:!1}),ge}(s().Component);return Z.propTypes={delayMethod:a.PropTypes.oneOf(["debounce","throttle"]),delayTime:a.PropTypes.number,useIntersectionObserver:a.PropTypes.bool},Z.defaultProps={delayMethod:"throttle",delayTime:300,useIntersectionObserver:!0},Z};function B(pe){return B=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z},B(pe)}function H(pe,Z){for(var Te=0;Te<Z.length;Te++){var Se=Z[Te];Se.enumerable=Se.enumerable||!1,Se.configurable=!0,"value"in Se&&(Se.writable=!0),Object.defineProperty(pe,(lt=function(tt,bt){if(B(tt)!=="object"||tt===null)return tt;var ue=tt[Symbol.toPrimitive];if(ue!==void 0){var ge=ue.call(tt,"string");if(B(ge)!=="object")return ge;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(tt)}(Se.key),B(lt)==="symbol"?lt:String(lt)),Se)}var lt}function Q(pe,Z){return Q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Te,Se){return Te.__proto__=Se,Te},Q(pe,Z)}function we(pe){return we=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Z){return Z.__proto__||Object.getPrototypeOf(Z)},we(pe)}var Ae=function(pe){(function(ue,ge){if(typeof ge!="function"&&ge!==null)throw new TypeError("Super expression must either be null or a function");ue.prototype=Object.create(ge&&ge.prototype,{constructor:{value:ue,writable:!0,configurable:!0}}),Object.defineProperty(ue,"prototype",{writable:!1}),ge&&Q(ue,ge)})(bt,pe);var Z,Te,Se,lt,tt=(Se=bt,lt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var ue,ge=we(Se);if(lt){var Ke=we(this).constructor;ue=Reflect.construct(ge,arguments,Ke)}else ue=ge.apply(this,arguments);return function(Be,Fe){if(Fe&&(B(Fe)==="object"||typeof Fe=="function"))return Fe;if(Fe!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(mt){if(mt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return mt}(Be)}(this,ue)});function bt(ue){return function(ge,Ke){if(!(ge instanceof Ke))throw new TypeError("Cannot call a class as a function")}(this,bt),tt.call(this,ue)}return Z=bt,(Te=[{key:"render",value:function(){return s().createElement(C,this.props)}}])&&H(Z.prototype,Te),Object.defineProperty(Z,"prototype",{writable:!1}),bt}(s().Component);const Oe=se(Ae);function Me(pe){return Me=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z},Me(pe)}function ct(pe,Z){for(var Te=0;Te<Z.length;Te++){var Se=Z[Te];Se.enumerable=Se.enumerable||!1,Se.configurable=!0,"value"in Se&&(Se.writable=!0),Object.defineProperty(pe,(lt=function(tt,bt){if(Me(tt)!=="object"||tt===null)return tt;var ue=tt[Symbol.toPrimitive];if(ue!==void 0){var ge=ue.call(tt,"string");if(Me(ge)!=="object")return ge;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(tt)}(Se.key),Me(lt)==="symbol"?lt:String(lt)),Se)}var lt}function Ce(pe,Z){return Ce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Te,Se){return Te.__proto__=Se,Te},Ce(pe,Z)}function nt(pe){if(pe===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return pe}function Ut(pe){return Ut=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Z){return Z.__proto__||Object.getPrototypeOf(Z)},Ut(pe)}var an=function(pe){(function(ue,ge){if(typeof ge!="function"&&ge!==null)throw new TypeError("Super expression must either be null or a function");ue.prototype=Object.create(ge&&ge.prototype,{constructor:{value:ue,writable:!0,configurable:!0}}),Object.defineProperty(ue,"prototype",{writable:!1}),ge&&Ce(ue,ge)})(bt,pe);var Z,Te,Se,lt,tt=(Se=bt,lt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var ue,ge=Ut(Se);if(lt){var Ke=Ut(this).constructor;ue=Reflect.construct(ge,arguments,Ke)}else ue=ge.apply(this,arguments);return function(Be,Fe){if(Fe&&(Me(Fe)==="object"||typeof Fe=="function"))return Fe;if(Fe!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nt(Be)}(this,ue)});function bt(ue){var ge;(function(Nt,jt){if(!(Nt instanceof jt))throw new TypeError("Cannot call a class as a function")})(this,bt),ge=tt.call(this,ue);var Ke=ue.afterLoad,Be=ue.beforeLoad,Fe=ue.scrollPosition,mt=ue.visibleByDefault;return ge.state={visible:mt},mt&&(Be(),Ke()),ge.onVisible=ge.onVisible.bind(nt(ge)),ge.isScrollTracked=!!(Fe&&Number.isFinite(Fe.x)&&Fe.x>=0&&Number.isFinite(Fe.y)&&Fe.y>=0),ge}return Z=bt,(Te=[{key:"componentDidUpdate",value:function(ue,ge){ge.visible!==this.state.visible&&this.props.afterLoad()}},{key:"onVisible",value:function(){this.props.beforeLoad(),this.setState({visible:!0})}},{key:"render",value:function(){if(this.state.visible)return this.props.children;var ue=this.props,ge=ue.className,Ke=ue.delayMethod,Be=ue.delayTime,Fe=ue.height,mt=ue.placeholder,Nt=ue.scrollPosition,jt=ue.style,Ct=ue.threshold,en=ue.useIntersectionObserver,Mt=ue.width;return this.isScrollTracked||en&&c()?s().createElement(C,{className:ge,height:Fe,onVisible:this.onVisible,placeholder:mt,scrollPosition:Nt,style:jt,threshold:Ct,useIntersectionObserver:en,width:Mt}):s().createElement(Oe,{className:ge,delayMethod:Ke,delayTime:Be,height:Fe,onVisible:this.onVisible,placeholder:mt,style:jt,threshold:Ct,width:Mt})}}])&&ct(Z.prototype,Te),Object.defineProperty(Z,"prototype",{writable:!1}),bt}(s().Component);an.propTypes={afterLoad:a.PropTypes.func,beforeLoad:a.PropTypes.func,useIntersectionObserver:a.PropTypes.bool,visibleByDefault:a.PropTypes.bool},an.defaultProps={afterLoad:function(){return{}},beforeLoad:function(){return{}},useIntersectionObserver:!0,visibleByDefault:!1};const Bn=an;function Ot(pe){return Ot=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z},Ot(pe)}var ls=["afterLoad","beforeLoad","delayMethod","delayTime","effect","placeholder","placeholderSrc","scrollPosition","threshold","useIntersectionObserver","visibleByDefault","wrapperClassName","wrapperProps"];function ri(pe,Z){var Te=Object.keys(pe);if(Object.getOwnPropertySymbols){var Se=Object.getOwnPropertySymbols(pe);Z&&(Se=Se.filter(function(lt){return Object.getOwnPropertyDescriptor(pe,lt).enumerable})),Te.push.apply(Te,Se)}return Te}function Cr(pe){for(var Z=1;Z<arguments.length;Z++){var Te=arguments[Z]!=null?arguments[Z]:{};Z%2?ri(Object(Te),!0).forEach(function(Se){zs(pe,Se,Te[Se])}):Object.getOwnPropertyDescriptors?Object.defineProperties(pe,Object.getOwnPropertyDescriptors(Te)):ri(Object(Te)).forEach(function(Se){Object.defineProperty(pe,Se,Object.getOwnPropertyDescriptor(Te,Se))})}return pe}function zs(pe,Z,Te){return(Z=pi(Z))in pe?Object.defineProperty(pe,Z,{value:Te,enumerable:!0,configurable:!0,writable:!0}):pe[Z]=Te,pe}function Mi(){return Mi=Object.assign?Object.assign.bind():function(pe){for(var Z=1;Z<arguments.length;Z++){var Te=arguments[Z];for(var Se in Te)Object.prototype.hasOwnProperty.call(Te,Se)&&(pe[Se]=Te[Se])}return pe},Mi.apply(this,arguments)}function Ks(pe,Z){for(var Te=0;Te<Z.length;Te++){var Se=Z[Te];Se.enumerable=Se.enumerable||!1,Se.configurable=!0,"value"in Se&&(Se.writable=!0),Object.defineProperty(pe,pi(Se.key),Se)}}function pi(pe){var Z=function(Te,Se){if(Ot(Te)!=="object"||Te===null)return Te;var lt=Te[Symbol.toPrimitive];if(lt!==void 0){var tt=lt.call(Te,"string");if(Ot(tt)!=="object")return tt;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(Te)}(pe);return Ot(Z)==="symbol"?Z:String(Z)}function On(pe,Z){return On=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Te,Se){return Te.__proto__=Se,Te},On(pe,Z)}function mr(pe){return mr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Z){return Z.__proto__||Object.getPrototypeOf(Z)},mr(pe)}var Fi=function(pe){(function(ue,ge){if(typeof ge!="function"&&ge!==null)throw new TypeError("Super expression must either be null or a function");ue.prototype=Object.create(ge&&ge.prototype,{constructor:{value:ue,writable:!0,configurable:!0}}),Object.defineProperty(ue,"prototype",{writable:!1}),ge&&On(ue,ge)})(bt,pe);var Z,Te,Se,lt,tt=(Se=bt,lt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var ue,ge=mr(Se);if(lt){var Ke=mr(this).constructor;ue=Reflect.construct(ge,arguments,Ke)}else ue=ge.apply(this,arguments);return function(Be,Fe){if(Fe&&(Ot(Fe)==="object"||typeof Fe=="function"))return Fe;if(Fe!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(mt){if(mt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return mt}(Be)}(this,ue)});function bt(ue){var ge;return function(Ke,Be){if(!(Ke instanceof Be))throw new TypeError("Cannot call a class as a function")}(this,bt),(ge=tt.call(this,ue)).state={loaded:!1},ge}return Z=bt,(Te=[{key:"onImageLoad",value:function(){var ue=this;return this.state.loaded?null:function(ge){ue.props.onLoad(ge),ue.props.afterLoad(),ue.setState({loaded:!0})}}},{key:"getImg",value:function(){var ue=this.props,ge=(ue.afterLoad,ue.beforeLoad,ue.delayMethod,ue.delayTime,ue.effect,ue.placeholder,ue.placeholderSrc,ue.scrollPosition,ue.threshold,ue.useIntersectionObserver,ue.visibleByDefault,ue.wrapperClassName,ue.wrapperProps,function(Ke,Be){if(Ke==null)return{};var Fe,mt,Nt=function(Ct,en){if(Ct==null)return{};var Mt,fn,gr={},Fr=Object.keys(Ct);for(fn=0;fn<Fr.length;fn++)Mt=Fr[fn],en.indexOf(Mt)>=0||(gr[Mt]=Ct[Mt]);return gr}(Ke,Be);if(Object.getOwnPropertySymbols){var jt=Object.getOwnPropertySymbols(Ke);for(mt=0;mt<jt.length;mt++)Fe=jt[mt],Be.indexOf(Fe)>=0||Object.prototype.propertyIsEnumerable.call(Ke,Fe)&&(Nt[Fe]=Ke[Fe])}return Nt}(ue,ls));return s().createElement("img",Mi({},ge,{onLoad:this.onImageLoad()}))}},{key:"getLazyLoadImage",value:function(){var ue=this.props,ge=ue.beforeLoad,Ke=ue.className,Be=ue.delayMethod,Fe=ue.delayTime,mt=ue.height,Nt=ue.placeholder,jt=ue.scrollPosition,Ct=ue.style,en=ue.threshold,Mt=ue.useIntersectionObserver,fn=ue.visibleByDefault,gr=ue.width;return s().createElement(Bn,{beforeLoad:ge,className:Ke,delayMethod:Be,delayTime:Fe,height:mt,placeholder:Nt,scrollPosition:jt,style:Ct,threshold:en,useIntersectionObserver:Mt,visibleByDefault:fn,width:gr},this.getImg())}},{key:"getWrappedLazyLoadImage",value:function(ue){var ge=this.props,Ke=ge.effect,Be=ge.height,Fe=ge.placeholderSrc,mt=ge.width,Nt=ge.wrapperClassName,jt=ge.wrapperProps,Ct=this.state.loaded,en=Ct?" lazy-load-image-loaded":"",Mt=Ct||!Fe?{}:{backgroundImage:"url(".concat(Fe,")"),backgroundSize:"100% 100%"};return s().createElement("span",Mi({className:Nt+" lazy-load-image-background "+Ke+en,style:Cr(Cr({},Mt),{},{color:"transparent",display:"inline-block",height:Be,width:mt})},jt),ue)}},{key:"render",value:function(){var ue=this.props,ge=ue.effect,Ke=ue.placeholderSrc,Be=ue.visibleByDefault,Fe=ue.wrapperClassName,mt=ue.wrapperProps,Nt=this.getLazyLoadImage();return(ge||Ke)&&!Be||Fe||mt?this.getWrappedLazyLoadImage(Nt):Nt}}])&&Ks(Z.prototype,Te),Object.defineProperty(Z,"prototype",{writable:!1}),bt}(s().Component);Fi.propTypes={onLoad:a.PropTypes.func,afterLoad:a.PropTypes.func,beforeLoad:a.PropTypes.func,delayMethod:a.PropTypes.string,delayTime:a.PropTypes.number,effect:a.PropTypes.string,placeholderSrc:a.PropTypes.string,threshold:a.PropTypes.number,useIntersectionObserver:a.PropTypes.bool,visibleByDefault:a.PropTypes.bool,wrapperClassName:a.PropTypes.string,wrapperProps:a.PropTypes.object},Fi.defaultProps={onLoad:function(){},afterLoad:function(){return{}},beforeLoad:function(){return{}},delayMethod:"throttle",delayTime:300,effect:"",placeholderSrc:null,threshold:100,useIntersectionObserver:!0,visibleByDefault:!1,wrapperClassName:""};const ii=Fi})(),Lm.exports=r})()),Lm.exports}var CI=LI();const RI=({name:n,origin_name:e,episode_current:t,lang:r,poster_url:i,quality:s,slug:a})=>A.jsx("div",{className:"movie-card",children:A.jsx(sr,{to:`/movie/${a}`,children:A.jsxs("div",{className:"movie-card-frame",children:[A.jsxs("div",{className:"card-banner",children:[A.jsx(CI.LazyLoadImage,{className:"card-banner-image",src:`https://phimimg.com/${i}`,alt:`Poster of ${n}`,effect:"blur"}),A.jsx("div",{className:"card-overlay"}),A.jsxs("div",{className:"status-badge-intro",children:[A.jsx("div",{className:"status-badge lang",children:r}),A.jsx("div",{className:"status-badge quality",children:s})]}),A.jsx("div",{className:"status-badge complete",children:t})]}),A.jsxs("div",{className:"card-details",children:[A.jsx("h1",{className:"entry-title",children:n}),A.jsx("h2",{className:"original-title",children:e})]})]})})});function AI(n){return Wn({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M11.0683 2.89968V22.2973l-2.11399 1.70265V7.8638H4.975l6.0933-4.96412zM14.93426 0v15.76724H19.025l-6.20044 5.08865V1.4689L14.93426 0z"},child:[]}]})(n)}function kI(n){return Wn({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M10.2 0v6.456L12 8.928l1.8-2.472V0zm3.6 6.456v3.072l2.904-.96L20.52 3.36l-2.928-2.136zm2.904 2.112l-1.8 2.496 2.928.936 6.144-1.992-1.128-3.432zM17.832 12l-2.928.936 1.8 2.496 6.144 1.992 1.128-3.432zm-1.128 3.432l-2.904-.96v3.072l3.792 5.232 2.928-2.136zM13.8 17.544L12 15.072l-1.8 2.472V24h3.6zm-3.6 0v-3.072l-2.904.96L3.48 20.64l2.928 2.136zm-2.904-2.112l1.8-2.496L6.168 12 .024 13.992l1.128 3.432zM6.168 12l2.928-.936-1.8-2.496-6.144-1.992-1.128 3.432zm1.128-3.432l2.904.96V6.456L6.408 1.224 3.48 3.36Z"},child:[]}]})(n)}function II(n){return Wn({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"m17.029 18.772.777 1.166-5.417 2.709L0 16.451V4.063l5.417-2.709 5.298 7.948 7.867-5.24L24 1.354V16.84l-5.417 2.709zm2.023-13.827v13.253l3.949-1.975V2.97zM5.076 2.642 1.458 4.45 12.73 21.358l3.618-1.809z"},child:[]}]})(n)}function PI(n){return Wn({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M22.68 21.031c-4.98-4.98-4.98-13.083 0-18.063l.978-.978c.22-.22.342-.513.342-.825 0-.311-.122-.604-.342-.824-.44-.441-1.207-.44-1.648 0l-.979.978c-4.98 4.98-13.084 4.98-18.063 0L1.99.34a1.17 1.17 0 0 0-1.649 0 1.168 1.168 0 0 0 0 1.649l.978.978c4.98 4.98 4.98 13.083 0 18.063l-.977.978c-.221.22-.342.513-.342.825 0 .31.121.604.341.824.442.443 1.21.441 1.65 0l.977-.977c4.98-4.983 13.083-4.98 18.064 0l.978.977c.22.22.513.342.824.342.312 0 .605-.122.824-.342.22-.22.342-.512.342-.824 0-.313-.122-.605-.342-.825l-.977-.978z"},child:[]}]})(n)}function DI(n){return Wn({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M16.634 16.504c.87-.075 1.543-.84 1.5-1.754-.047-.914-.796-1.648-1.709-1.648h-.061a1.71 1.71 0 00-1.648 1.769c.03.479.226.869.494 1.153-1.048 2.038-2.621 3.536-5.005 4.795-1.603.838-3.296 1.154-4.944.93-1.378-.195-2.456-.81-3.116-1.799-.988-1.499-1.078-3.116-.255-4.734.6-1.17 1.499-2.023 2.099-2.443a9.96 9.96 0 01-.42-1.543C-.868 14.408-.416 18.752.932 20.805c1.004 1.498 3.057 2.456 5.304 2.456.6 0 1.23-.044 1.843-.194 3.897-.749 6.848-3.086 8.541-6.532zm5.348-3.746c-2.32-2.728-5.738-4.226-9.634-4.226h-.51c-.253-.554-.837-.899-1.498-.899h-.045c-.943 0-1.678.81-1.647 1.753.03.898.794 1.648 1.708 1.648h.074a1.69 1.69 0 001.499-1.049h.555c2.309 0 4.495.674 6.488 1.992 1.527 1.005 2.622 2.323 3.237 3.897.538 1.288.509 2.547-.045 3.597-.855 1.647-2.294 2.517-4.196 2.517-1.199 0-2.367-.375-2.967-.644-.36.298-.96.793-1.394 1.093 1.318.598 2.652.943 3.94.943 2.922 0 5.094-1.647 5.919-3.236.898-1.798.824-4.824-1.47-7.416zM6.49 17.042c.03.899.793 1.648 1.708 1.648h.06a1.688 1.688 0 001.648-1.768c0-.9-.779-1.647-1.693-1.647h-.06c-.06 0-.15 0-.226.029-1.243-2.098-1.768-4.347-1.572-6.772.12-1.828.72-3.417 1.797-4.735.9-1.124 2.593-1.68 3.747-1.708 3.236-.061 4.585 3.971 4.689 5.574l1.498.45C17.741 3.197 14.686.62 11.764.62 9.02.62 6.49 2.613 5.47 5.535 4.077 9.43 4.991 13.177 6.7 16.174c-.15.195-.24.539-.21.868z"},child:[]}]})(n)}const tT=({className:n,context:e,contextSub:t})=>A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"heading ",children:[A.jsxs("h1",{className:`context ${n}`,children:[A.jsx("span",{className:"icon",children:A.jsx(PI,{})})," ",e]}),t&&A.jsx("h3",{className:`context-sub ${n}`,children:t})]}),A.jsx("hr",{style:{margin:"0px 0px 30px 0px "}})]}),nT=({onClick:n})=>{const{t:e}=Lr();return A.jsx("div",{className:"see-more",onClick:n,children:A.jsx("p",{className:"text",children:e("common.view")})})},fu={black:"#000",white:"#fff"},Dl={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Ol={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},Nl={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Ml={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},Fl={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},Jc={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},OI={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};function Wa(n,...e){const t=new URL(`https://mui.com/production-error/?code=${n}`);return e.forEach(r=>t.searchParams.append("args[]",r)),`Minified MUI error #${n}; visit ${t} for the full message.`}const rT="$$material";function bg(){return bg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},bg.apply(null,arguments)}var NI=!1;function MI(n){if(n.sheet)return n.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===n)return document.styleSheets[e]}function FI(n){var e=document.createElement("style");return e.setAttribute("data-emotion",n.key),n.nonce!==void 0&&e.setAttribute("nonce",n.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var $I=function(){function n(t){var r=this;this._insertTag=function(i){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,s),r.tags.push(i)},this.isSpeedy=t.speedy===void 0?!NI:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=n.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(FI(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=MI(i);try{s.insertRule(r,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var i;return(i=r.parentNode)==null?void 0:i.removeChild(r)}),this.tags=[],this.ctr=0},n}(),br="-ms-",Yf="-moz-",Yt="-webkit-",iT="comm",T0="rule",b0="decl",BI="@import",sT="@keyframes",UI="@layer",jI=Math.abs,Ch=String.fromCharCode,HI=Object.assign;function GI(n,e){return pr(n,0)^45?(((e<<2^pr(n,0))<<2^pr(n,1))<<2^pr(n,2))<<2^pr(n,3):0}function oT(n){return n.trim()}function VI(n,e){return(n=e.exec(n))?n[0]:n}function qt(n,e,t){return n.replace(e,t)}function wg(n,e){return n.indexOf(e)}function pr(n,e){return n.charCodeAt(e)|0}function hu(n,e,t){return n.slice(e,t)}function Is(n){return n.length}function w0(n){return n.length}function ef(n,e){return e.push(n),n}function zI(n,e){return n.map(e).join("")}var Rh=1,Jl=1,aT=0,ni=0,Fn=0,ac="";function Ah(n,e,t,r,i,s,a){return{value:n,root:e,parent:t,type:r,props:i,children:s,line:Rh,column:Jl,length:a,return:""}}function Zc(n,e){return HI(Ah("",null,null,"",null,null,0),n,{length:-n.length},e)}function KI(){return Fn}function WI(){return Fn=ni>0?pr(ac,--ni):0,Jl--,Fn===10&&(Jl=1,Rh--),Fn}function hi(){return Fn=ni<aT?pr(ac,ni++):0,Jl++,Fn===10&&(Jl=1,Rh++),Fn}function Us(){return pr(ac,ni)}function Lf(){return ni}function ku(n,e){return hu(ac,n,e)}function pu(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function lT(n){return Rh=Jl=1,aT=Is(ac=n),ni=0,[]}function cT(n){return ac="",n}function Cf(n){return oT(ku(ni-1,_g(n===91?n+2:n===40?n+1:n)))}function YI(n){for(;(Fn=Us())&&Fn<33;)hi();return pu(n)>2||pu(Fn)>3?"":" "}function qI(n,e){for(;--e&&hi()&&!(Fn<48||Fn>102||Fn>57&&Fn<65||Fn>70&&Fn<97););return ku(n,Lf()+(e<6&&Us()==32&&hi()==32))}function _g(n){for(;hi();)switch(Fn){case n:return ni;case 34:case 39:n!==34&&n!==39&&_g(Fn);break;case 40:n===41&&_g(n);break;case 92:hi();break}return ni}function XI(n,e){for(;hi()&&n+Fn!==57;)if(n+Fn===84&&Us()===47)break;return"/*"+ku(e,ni-1)+"*"+Ch(n===47?n:hi())}function QI(n){for(;!pu(Us());)hi();return ku(n,ni)}function JI(n){return cT(Rf("",null,null,null,[""],n=lT(n),0,[0],n))}function Rf(n,e,t,r,i,s,a,c,u){for(var d=0,h=0,p=a,g=0,x=0,v=0,S=1,T=1,_=1,C=0,k="",O=i,w=s,$=r,M=k;T;)switch(v=C,C=hi()){case 40:if(v!=108&&pr(M,p-1)==58){wg(M+=qt(Cf(C),"&","&\f"),"&\f")!=-1&&(_=-1);break}case 34:case 39:case 91:M+=Cf(C);break;case 9:case 10:case 13:case 32:M+=YI(v);break;case 92:M+=qI(Lf()-1,7);continue;case 47:switch(Us()){case 42:case 47:ef(ZI(XI(hi(),Lf()),e,t),u);break;default:M+="/"}break;case 123*S:c[d++]=Is(M)*_;case 125*S:case 59:case 0:switch(C){case 0:case 125:T=0;case 59+h:_==-1&&(M=qt(M,/\f/g,"")),x>0&&Is(M)-p&&ef(x>32?Bx(M+";",r,t,p-1):Bx(qt(M," ","")+";",r,t,p-2),u);break;case 59:M+=";";default:if(ef($=$x(M,e,t,d,h,i,c,k,O=[],w=[],p),s),C===123)if(h===0)Rf(M,e,$,$,O,s,p,c,w);else switch(g===99&&pr(M,3)===110?100:g){case 100:case 108:case 109:case 115:Rf(n,$,$,r&&ef($x(n,$,$,0,0,i,c,k,i,O=[],p),w),i,w,p,c,r?O:w);break;default:Rf(M,$,$,$,[""],w,0,c,w)}}d=h=x=0,S=_=1,k=M="",p=a;break;case 58:p=1+Is(M),x=v;default:if(S<1){if(C==123)--S;else if(C==125&&S++==0&&WI()==125)continue}switch(M+=Ch(C),C*S){case 38:_=h>0?1:(M+="\f",-1);break;case 44:c[d++]=(Is(M)-1)*_,_=1;break;case 64:Us()===45&&(M+=Cf(hi())),g=Us(),h=p=Is(k=M+=QI(Lf())),C++;break;case 45:v===45&&Is(M)==2&&(S=0)}}return s}function $x(n,e,t,r,i,s,a,c,u,d,h){for(var p=i-1,g=i===0?s:[""],x=w0(g),v=0,S=0,T=0;v<r;++v)for(var _=0,C=hu(n,p+1,p=jI(S=a[v])),k=n;_<x;++_)(k=oT(S>0?g[_]+" "+C:qt(C,/&\f/g,g[_])))&&(u[T++]=k);return Ah(n,e,t,i===0?T0:c,u,d,h)}function ZI(n,e,t){return Ah(n,e,t,iT,Ch(KI()),hu(n,2,-2),0)}function Bx(n,e,t,r){return Ah(n,e,t,b0,hu(n,0,r),hu(n,r+1,-1),r)}function Yl(n,e){for(var t="",r=w0(n),i=0;i<r;i++)t+=e(n[i],i,n,e)||"";return t}function eP(n,e,t,r){switch(n.type){case UI:if(n.children.length)break;case BI:case b0:return n.return=n.return||n.value;case iT:return"";case sT:return n.return=n.value+"{"+Yl(n.children,r)+"}";case T0:n.value=n.props.join(",")}return Is(t=Yl(n.children,r))?n.return=n.value+"{"+t+"}":""}function tP(n){var e=w0(n);return function(t,r,i,s){for(var a="",c=0;c<e;c++)a+=n[c](t,r,i,s)||"";return a}}function nP(n){return function(e){e.root||(e=e.return)&&n(e)}}function uT(n){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=n(t)),e[t]}}var rP=function(e,t,r){for(var i=0,s=0;i=s,s=Us(),i===38&&s===12&&(t[r]=1),!pu(s);)hi();return ku(e,ni)},iP=function(e,t){var r=-1,i=44;do switch(pu(i)){case 0:i===38&&Us()===12&&(t[r]=1),e[r]+=rP(ni-1,t,r);break;case 2:e[r]+=Cf(i);break;case 4:if(i===44){e[++r]=Us()===58?"&\f":"",t[r]=e[r].length;break}default:e[r]+=Ch(i)}while(i=hi());return e},sP=function(e,t){return cT(iP(lT(e),t))},Ux=new WeakMap,oP=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var t=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&t.charCodeAt(0)!==58&&!Ux.get(r))&&!i){Ux.set(e,!0);for(var s=[],a=sP(t,s),c=r.props,u=0,d=0;u<a.length;u++)for(var h=0;h<c.length;h++,d++)e.props[d]=s[u]?a[u].replace(/&\f/g,c[h]):c[h]+" "+a[u]}}},aP=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function dT(n,e){switch(GI(n,e)){case 5103:return Yt+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Yt+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return Yt+n+Yf+n+br+n+n;case 6828:case 4268:return Yt+n+br+n+n;case 6165:return Yt+n+br+"flex-"+n+n;case 5187:return Yt+n+qt(n,/(\w+).+(:[^]+)/,Yt+"box-$1$2"+br+"flex-$1$2")+n;case 5443:return Yt+n+br+"flex-item-"+qt(n,/flex-|-self/,"")+n;case 4675:return Yt+n+br+"flex-line-pack"+qt(n,/align-content|flex-|-self/,"")+n;case 5548:return Yt+n+br+qt(n,"shrink","negative")+n;case 5292:return Yt+n+br+qt(n,"basis","preferred-size")+n;case 6060:return Yt+"box-"+qt(n,"-grow","")+Yt+n+br+qt(n,"grow","positive")+n;case 4554:return Yt+qt(n,/([^-])(transform)/g,"$1"+Yt+"$2")+n;case 6187:return qt(qt(qt(n,/(zoom-|grab)/,Yt+"$1"),/(image-set)/,Yt+"$1"),n,"")+n;case 5495:case 3959:return qt(n,/(image-set\([^]*)/,Yt+"$1$`$1");case 4968:return qt(qt(n,/(.+:)(flex-)?(.*)/,Yt+"box-pack:$3"+br+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Yt+n+n;case 4095:case 3583:case 4068:case 2532:return qt(n,/(.+)-inline(.+)/,Yt+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Is(n)-1-e>6)switch(pr(n,e+1)){case 109:if(pr(n,e+4)!==45)break;case 102:return qt(n,/(.+:)(.+)-([^]+)/,"$1"+Yt+"$2-$3$1"+Yf+(pr(n,e+3)==108?"$3":"$2-$3"))+n;case 115:return~wg(n,"stretch")?dT(qt(n,"stretch","fill-available"),e)+n:n}break;case 4949:if(pr(n,e+1)!==115)break;case 6444:switch(pr(n,Is(n)-3-(~wg(n,"!important")&&10))){case 107:return qt(n,":",":"+Yt)+n;case 101:return qt(n,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Yt+(pr(n,14)===45?"inline-":"")+"box$3$1"+Yt+"$2$3$1"+br+"$2box$3")+n}break;case 5936:switch(pr(n,e+11)){case 114:return Yt+n+br+qt(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return Yt+n+br+qt(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return Yt+n+br+qt(n,/[svh]\w+-[tblr]{2}/,"lr")+n}return Yt+n+br+n+n}return n}var lP=function(e,t,r,i){if(e.length>-1&&!e.return)switch(e.type){case b0:e.return=dT(e.value,e.length);break;case sT:return Yl([Zc(e,{value:qt(e.value,"@","@"+Yt)})],i);case T0:if(e.length)return zI(e.props,function(s){switch(VI(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Yl([Zc(e,{props:[qt(s,/:(read-\w+)/,":"+Yf+"$1")]})],i);case"::placeholder":return Yl([Zc(e,{props:[qt(s,/:(plac\w+)/,":"+Yt+"input-$1")]}),Zc(e,{props:[qt(s,/:(plac\w+)/,":"+Yf+"$1")]}),Zc(e,{props:[qt(s,/:(plac\w+)/,br+"input-$1")]})],i)}return""})}},cP=[lP],uP=function(e){var t=e.key;if(t==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(S){var T=S.getAttribute("data-emotion");T.indexOf(" ")!==-1&&(document.head.appendChild(S),S.setAttribute("data-s",""))})}var i=e.stylisPlugins||cP,s={},a,c=[];a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(S){for(var T=S.getAttribute("data-emotion").split(" "),_=1;_<T.length;_++)s[T[_]]=!0;c.push(S)});var u,d=[oP,aP];{var h,p=[eP,nP(function(S){h.insert(S)})],g=tP(d.concat(i,p)),x=function(T){return Yl(JI(T),g)};u=function(T,_,C,k){h=C,x(T?T+"{"+_.styles+"}":_.styles),k&&(v.inserted[_.name]=!0)}}var v={key:t,sheet:new $I({key:t,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:u};return v.sheet.hydrate(c),v},Cm={exports:{}},Jt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jx;function dP(){if(jx)return Jt;jx=1;var n=typeof Symbol=="function"&&Symbol.for,e=n?Symbol.for("react.element"):60103,t=n?Symbol.for("react.portal"):60106,r=n?Symbol.for("react.fragment"):60107,i=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,a=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,g=n?Symbol.for("react.suspense_list"):60120,x=n?Symbol.for("react.memo"):60115,v=n?Symbol.for("react.lazy"):60116,S=n?Symbol.for("react.block"):60121,T=n?Symbol.for("react.fundamental"):60117,_=n?Symbol.for("react.responder"):60118,C=n?Symbol.for("react.scope"):60119;function k(w){if(typeof w=="object"&&w!==null){var $=w.$$typeof;switch($){case e:switch(w=w.type,w){case u:case d:case r:case s:case i:case p:return w;default:switch(w=w&&w.$$typeof,w){case c:case h:case v:case x:case a:return w;default:return $}}case t:return $}}}function O(w){return k(w)===d}return Jt.AsyncMode=u,Jt.ConcurrentMode=d,Jt.ContextConsumer=c,Jt.ContextProvider=a,Jt.Element=e,Jt.ForwardRef=h,Jt.Fragment=r,Jt.Lazy=v,Jt.Memo=x,Jt.Portal=t,Jt.Profiler=s,Jt.StrictMode=i,Jt.Suspense=p,Jt.isAsyncMode=function(w){return O(w)||k(w)===u},Jt.isConcurrentMode=O,Jt.isContextConsumer=function(w){return k(w)===c},Jt.isContextProvider=function(w){return k(w)===a},Jt.isElement=function(w){return typeof w=="object"&&w!==null&&w.$$typeof===e},Jt.isForwardRef=function(w){return k(w)===h},Jt.isFragment=function(w){return k(w)===r},Jt.isLazy=function(w){return k(w)===v},Jt.isMemo=function(w){return k(w)===x},Jt.isPortal=function(w){return k(w)===t},Jt.isProfiler=function(w){return k(w)===s},Jt.isStrictMode=function(w){return k(w)===i},Jt.isSuspense=function(w){return k(w)===p},Jt.isValidElementType=function(w){return typeof w=="string"||typeof w=="function"||w===r||w===d||w===s||w===i||w===p||w===g||typeof w=="object"&&w!==null&&(w.$$typeof===v||w.$$typeof===x||w.$$typeof===a||w.$$typeof===c||w.$$typeof===h||w.$$typeof===T||w.$$typeof===_||w.$$typeof===C||w.$$typeof===S)},Jt.typeOf=k,Jt}var Hx;function fP(){return Hx||(Hx=1,Cm.exports=dP()),Cm.exports}var Rm,Gx;function hP(){if(Gx)return Rm;Gx=1;var n=fP(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},t={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};s[n.ForwardRef]=r,s[n.Memo]=i;function a(v){return n.isMemo(v)?i:s[v.$$typeof]||e}var c=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,g=Object.prototype;function x(v,S,T){if(typeof S!="string"){if(g){var _=p(S);_&&_!==g&&x(v,_,T)}var C=u(S);d&&(C=C.concat(d(S)));for(var k=a(v),O=a(S),w=0;w<C.length;++w){var $=C[w];if(!t[$]&&!(T&&T[$])&&!(O&&O[$])&&!(k&&k[$])){var M=h(S,$);try{c(v,$,M)}catch{}}}}return v}return Rm=x,Rm}hP();var pP=!0;function fT(n,e,t){var r="";return t.split(" ").forEach(function(i){n[i]!==void 0?e.push(n[i]+";"):i&&(r+=i+" ")}),r}var _0=function(e,t,r){var i=e.key+"-"+t.name;(r===!1||pP===!1)&&e.registered[i]===void 0&&(e.registered[i]=t.styles)},hT=function(e,t,r){_0(e,t,r);var i=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var s=t;do e.insert(t===s?"."+i:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function mP(n){for(var e=0,t,r=0,i=n.length;i>=4;++r,i-=4)t=n.charCodeAt(r)&255|(n.charCodeAt(++r)&255)<<8|(n.charCodeAt(++r)&255)<<16|(n.charCodeAt(++r)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,e=(t&65535)*1540483477+((t>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(n.charCodeAt(r+2)&255)<<16;case 2:e^=(n.charCodeAt(r+1)&255)<<8;case 1:e^=n.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var gP={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},yP=!1,vP=/[A-Z]|^ms/g,xP=/_EMO_([^_]+?)_([^]*?)_EMO_/g,pT=function(e){return e.charCodeAt(1)===45},Vx=function(e){return e!=null&&typeof e!="boolean"},Am=uT(function(n){return pT(n)?n:n.replace(vP,"-$&").toLowerCase()}),zx=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(xP,function(r,i,s){return Ps={name:i,styles:s,next:Ps},i})}return gP[e]!==1&&!pT(e)&&typeof t=="number"&&t!==0?t+"px":t},SP="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function mu(n,e,t){if(t==null)return"";var r=t;if(r.__emotion_styles!==void 0)return r;switch(typeof t){case"boolean":return"";case"object":{var i=t;if(i.anim===1)return Ps={name:i.name,styles:i.styles,next:Ps},i.name;var s=t;if(s.styles!==void 0){var a=s.next;if(a!==void 0)for(;a!==void 0;)Ps={name:a.name,styles:a.styles,next:Ps},a=a.next;var c=s.styles+";";return c}return EP(n,e,t)}case"function":{if(n!==void 0){var u=Ps,d=t(n);return Ps=u,mu(n,e,d)}break}}var h=t;if(e==null)return h;var p=e[h];return p!==void 0?p:h}function EP(n,e,t){var r="";if(Array.isArray(t))for(var i=0;i<t.length;i++)r+=mu(n,e,t[i])+";";else for(var s in t){var a=t[s];if(typeof a!="object"){var c=a;e!=null&&e[c]!==void 0?r+=s+"{"+e[c]+"}":Vx(c)&&(r+=Am(s)+":"+zx(s,c)+";")}else{if(s==="NO_COMPONENT_SELECTOR"&&yP)throw new Error(SP);if(Array.isArray(a)&&typeof a[0]=="string"&&(e==null||e[a[0]]===void 0))for(var u=0;u<a.length;u++)Vx(a[u])&&(r+=Am(s)+":"+zx(s,a[u])+";");else{var d=mu(n,e,a);switch(s){case"animation":case"animationName":{r+=Am(s)+":"+d+";";break}default:r+=s+"{"+d+"}"}}}}return r}var Kx=/label:\s*([^\s;{]+)\s*(;|$)/g,Ps;function kh(n,e,t){if(n.length===1&&typeof n[0]=="object"&&n[0]!==null&&n[0].styles!==void 0)return n[0];var r=!0,i="";Ps=void 0;var s=n[0];if(s==null||s.raw===void 0)r=!1,i+=mu(t,e,s);else{var a=s;i+=a[0]}for(var c=1;c<n.length;c++)if(i+=mu(t,e,n[c]),r){var u=s;i+=u[c]}Kx.lastIndex=0;for(var d="",h;(h=Kx.exec(i))!==null;)d+="-"+h[1];var p=mP(i)+d;return{name:p,styles:i,next:Ps}}var TP=function(e){return e()},bP=Dv.useInsertionEffect?Dv.useInsertionEffect:!1,mT=bP||TP,wP=!1,gT=F.createContext(typeof HTMLElement<"u"?uP({key:"css"}):null);gT.Provider;var yT=function(e){return F.forwardRef(function(t,r){var i=F.useContext(gT);return e(t,i,r)})},L0=F.createContext({}),C0={}.hasOwnProperty,Lg="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",_P=function(e,t){var r={};for(var i in t)C0.call(t,i)&&(r[i]=t[i]);return r[Lg]=e,r},LP=function(e){var t=e.cache,r=e.serialized,i=e.isStringTag;return _0(t,r,i),mT(function(){return hT(t,r,i)}),null},CP=yT(function(n,e,t){var r=n.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var i=n[Lg],s=[r],a="";typeof n.className=="string"?a=fT(e.registered,s,n.className):n.className!=null&&(a=n.className+" ");var c=kh(s,void 0,F.useContext(L0));a+=e.key+"-"+c.name;var u={};for(var d in n)C0.call(n,d)&&d!=="css"&&d!==Lg&&!wP&&(u[d]=n[d]);return u.className=a,t&&(u.ref=t),F.createElement(F.Fragment,null,F.createElement(LP,{cache:e,serialized:c,isStringTag:typeof i=="string"}),F.createElement(i,u))}),RP=CP,Wx=function(e,t){var r=arguments;if(t==null||!C0.call(t,"css"))return F.createElement.apply(void 0,r);var i=r.length,s=new Array(i);s[0]=RP,s[1]=_P(e,t);for(var a=2;a<i;a++)s[a]=r[a];return F.createElement.apply(null,s)};(function(n){var e;e||(e=n.JSX||(n.JSX={}))})(Wx||(Wx={}));function R0(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return kh(e)}function vT(){var n=R0.apply(void 0,arguments),e="animation-"+n.name;return{name:e,styles:"@keyframes "+e+"{"+n.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var AP=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,kP=uT(function(n){return AP.test(n)||n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)<91}),IP=!1,PP=kP,DP=function(e){return e!=="theme"},Yx=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?PP:DP},qx=function(e,t,r){var i;if(t){var s=t.shouldForwardProp;i=e.__emotion_forwardProp&&s?function(a){return e.__emotion_forwardProp(a)&&s(a)}:s}return typeof i!="function"&&r&&(i=e.__emotion_forwardProp),i},OP=function(e){var t=e.cache,r=e.serialized,i=e.isStringTag;return _0(t,r,i),mT(function(){return hT(t,r,i)}),null},NP=function n(e,t){var r=e.__emotion_real===e,i=r&&e.__emotion_base||e,s,a;t!==void 0&&(s=t.label,a=t.target);var c=qx(e,t,r),u=c||Yx(i),d=!u("as");return function(){var h=arguments,p=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(s!==void 0&&p.push("label:"+s+";"),h[0]==null||h[0].raw===void 0)p.push.apply(p,h);else{var g=h[0];p.push(g[0]);for(var x=h.length,v=1;v<x;v++)p.push(h[v],g[v])}var S=yT(function(T,_,C){var k=d&&T.as||i,O="",w=[],$=T;if(T.theme==null){$={};for(var M in T)$[M]=T[M];$.theme=F.useContext(L0)}typeof T.className=="string"?O=fT(_.registered,w,T.className):T.className!=null&&(O=T.className+" ");var U=kh(p.concat(w),_.registered,$);O+=_.key+"-"+U.name,a!==void 0&&(O+=" "+a);var W=d&&c===void 0?Yx(k):u,R={};for(var G in T)d&&G==="as"||W(G)&&(R[G]=T[G]);return R.className=O,C&&(R.ref=C),F.createElement(F.Fragment,null,F.createElement(OP,{cache:_,serialized:U,isStringTag:typeof k=="string"}),F.createElement(k,R))});return S.displayName=s!==void 0?s:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",S.defaultProps=e.defaultProps,S.__emotion_real=S,S.__emotion_base=i,S.__emotion_styles=p,S.__emotion_forwardProp=c,Object.defineProperty(S,"toString",{value:function(){return a===void 0&&IP?"NO_COMPONENT_SELECTOR":"."+a}}),S.withComponent=function(T,_){var C=n(T,bg({},t,_,{shouldForwardProp:qx(S,_,!0)}));return C.apply(void 0,p)},S}},MP=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Cg=NP.bind(null);MP.forEach(function(n){Cg[n]=Cg(n)});/**
 * @mui/styled-engine v6.3.1
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function xT(n,e){return Cg(n,e)}function FP(n,e){Array.isArray(n.__emotion_styles)&&(n.__emotion_styles=e(n.__emotion_styles))}const Xx=[];function Qx(n){return Xx[0]=n,kh(Xx)}function Os(n){if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function ST(n){if(F.isValidElement(n)||!Os(n))return n;const e={};return Object.keys(n).forEach(t=>{e[t]=ST(n[t])}),e}function Mr(n,e,t={clone:!0}){const r=t.clone?{...n}:n;return Os(n)&&Os(e)&&Object.keys(e).forEach(i=>{F.isValidElement(e[i])?r[i]=e[i]:Os(e[i])&&Object.prototype.hasOwnProperty.call(n,i)&&Os(n[i])?r[i]=Mr(n[i],e[i],t):t.clone?r[i]=Os(e[i])?ST(e[i]):e[i]:r[i]=e[i]}),r}const $P=n=>{const e=Object.keys(n).map(t=>({key:t,val:n[t]}))||[];return e.sort((t,r)=>t.val-r.val),e.reduce((t,r)=>({...t,[r.key]:r.val}),{})};function BP(n){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:t="px",step:r=5,...i}=n,s=$P(e),a=Object.keys(s);function c(g){return`@media (min-width:${typeof e[g]=="number"?e[g]:g}${t})`}function u(g){return`@media (max-width:${(typeof e[g]=="number"?e[g]:g)-r/100}${t})`}function d(g,x){const v=a.indexOf(x);return`@media (min-width:${typeof e[g]=="number"?e[g]:g}${t}) and (max-width:${(v!==-1&&typeof e[a[v]]=="number"?e[a[v]]:x)-r/100}${t})`}function h(g){return a.indexOf(g)+1<a.length?d(g,a[a.indexOf(g)+1]):c(g)}function p(g){const x=a.indexOf(g);return x===0?c(a[1]):x===a.length-1?u(a[x]):d(g,a[a.indexOf(g)+1]).replace("@media","@media not all and")}return{keys:a,values:s,up:c,down:u,between:d,only:h,not:p,unit:t,...i}}function UP(n,e){if(!n.containerQueries)return e;const t=Object.keys(e).filter(r=>r.startsWith("@container")).sort((r,i)=>{var a,c;const s=/min-width:\s*([0-9.]+)/;return+(((a=r.match(s))==null?void 0:a[1])||0)-+(((c=i.match(s))==null?void 0:c[1])||0)});return t.length?t.reduce((r,i)=>{const s=e[i];return delete r[i],r[i]=s,r},{...e}):e}function jP(n,e){return e==="@"||e.startsWith("@")&&(n.some(t=>e.startsWith(`@${t}`))||!!e.match(/^@\d/))}function HP(n,e){const t=e.match(/^@([^/]+)?\/?(.+)?$/);if(!t)return null;const[,r,i]=t,s=Number.isNaN(+r)?r||0:+r;return n.containerQueries(i).up(s)}function GP(n){const e=(s,a)=>s.replace("@media",a?`@container ${a}`:"@container");function t(s,a){s.up=(...c)=>e(n.breakpoints.up(...c),a),s.down=(...c)=>e(n.breakpoints.down(...c),a),s.between=(...c)=>e(n.breakpoints.between(...c),a),s.only=(...c)=>e(n.breakpoints.only(...c),a),s.not=(...c)=>{const u=e(n.breakpoints.not(...c),a);return u.includes("not all and")?u.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):u}}const r={},i=s=>(t(r,s),r);return t(i),{...n,containerQueries:i}}const VP={borderRadius:4};function ou(n,e){return e?Mr(n,e,{clone:!1}):n}const Ih={xs:0,sm:600,md:900,lg:1200,xl:1536},Jx={keys:["xs","sm","md","lg","xl"],up:n=>`@media (min-width:${Ih[n]}px)`},zP={containerQueries:n=>({up:e=>{let t=typeof e=="number"?e:Ih[e]||e;return typeof t=="number"&&(t=`${t}px`),n?`@container ${n} (min-width:${t})`:`@container (min-width:${t})`}})};function is(n,e,t){const r=n.theme||{};if(Array.isArray(e)){const s=r.breakpoints||Jx;return e.reduce((a,c,u)=>(a[s.up(s.keys[u])]=t(e[u]),a),{})}if(typeof e=="object"){const s=r.breakpoints||Jx;return Object.keys(e).reduce((a,c)=>{if(jP(s.keys,c)){const u=HP(r.containerQueries?r:zP,c);u&&(a[u]=t(e[c],c))}else if(Object.keys(s.values||Ih).includes(c)){const u=s.up(c);a[u]=t(e[c],c)}else{const u=c;a[u]=e[u]}return a},{})}return t(e)}function ET(n={}){var t;return((t=n.keys)==null?void 0:t.reduce((r,i)=>{const s=n.up(i);return r[s]={},r},{}))||{}}function TT(n,e){return n.reduce((t,r)=>{const i=t[r];return(!i||Object.keys(i).length===0)&&delete t[r],t},e)}function KP(n,...e){const t=ET(n),r=[t,...e].reduce((i,s)=>Mr(i,s),{});return TT(Object.keys(t),r)}function WP(n,e){if(typeof n!="object")return{};const t={},r=Object.keys(e);return Array.isArray(n)?r.forEach((i,s)=>{s<n.length&&(t[i]=!0)}):r.forEach(i=>{n[i]!=null&&(t[i]=!0)}),t}function km({values:n,breakpoints:e,base:t}){const r=t||WP(n,e),i=Object.keys(r);if(i.length===0)return n;let s;return i.reduce((a,c,u)=>(Array.isArray(n)?(a[c]=n[u]!=null?n[u]:n[s],s=u):typeof n=="object"?(a[c]=n[c]!=null?n[c]:n[s],s=c):a[c]=n,a),{})}function gu(n){if(typeof n!="string")throw new Error(Wa(7));return n.charAt(0).toUpperCase()+n.slice(1)}function Ph(n,e,t=!0){if(!e||typeof e!="string")return null;if(n&&n.vars&&t){const r=`vars.${e}`.split(".").reduce((i,s)=>i&&i[s]?i[s]:null,n);if(r!=null)return r}return e.split(".").reduce((r,i)=>r&&r[i]!=null?r[i]:null,n)}function qf(n,e,t,r=t){let i;return typeof n=="function"?i=n(t):Array.isArray(n)?i=n[t]||r:i=Ph(n,t)||r,e&&(i=e(i,r,n)),i}function Dn(n){const{prop:e,cssProperty:t=n.prop,themeKey:r,transform:i}=n,s=a=>{if(a[e]==null)return null;const c=a[e],u=a.theme,d=Ph(u,r)||{};return is(a,c,p=>{let g=qf(d,i,p);return p===g&&typeof p=="string"&&(g=qf(d,i,`${e}${p==="default"?"":gu(p)}`,p)),t===!1?g:{[t]:g}})};return s.propTypes={},s.filterProps=[e],s}function YP(n){const e={};return t=>(e[t]===void 0&&(e[t]=n(t)),e[t])}const qP={m:"margin",p:"padding"},XP={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},Zx={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},QP=YP(n=>{if(n.length>2)if(Zx[n])n=Zx[n];else return[n];const[e,t]=n.split(""),r=qP[e],i=XP[t]||"";return Array.isArray(i)?i.map(s=>r+s):[r+i]}),A0=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],k0=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...A0,...k0];function Iu(n,e,t,r){const i=Ph(n,e,!0)??t;return typeof i=="number"||typeof i=="string"?s=>typeof s=="string"?s:typeof i=="string"?`calc(${s} * ${i})`:i*s:Array.isArray(i)?s=>{if(typeof s=="string")return s;const a=Math.abs(s),c=i[a];return s>=0?c:typeof c=="number"?-c:`-${c}`}:typeof i=="function"?i:()=>{}}function Dh(n){return Iu(n,"spacing",8)}function Ya(n,e){return typeof e=="string"||e==null?e:n(e)}function JP(n,e){return t=>n.reduce((r,i)=>(r[i]=Ya(e,t),r),{})}function ZP(n,e,t,r){if(!e.includes(t))return null;const i=QP(t),s=JP(i,r),a=n[t];return is(n,a,s)}function bT(n,e){const t=Dh(n.theme);return Object.keys(n).map(r=>ZP(n,e,r,t)).reduce(ou,{})}function Cn(n){return bT(n,A0)}Cn.propTypes={};Cn.filterProps=A0;function Rn(n){return bT(n,k0)}Rn.propTypes={};Rn.filterProps=k0;function wT(n=8,e=Dh({spacing:n})){if(n.mui)return n;const t=(...r)=>(r.length===0?[1]:r).map(s=>{const a=e(s);return typeof a=="number"?`${a}px`:a}).join(" ");return t.mui=!0,t}function Oh(...n){const e=n.reduce((r,i)=>(i.filterProps.forEach(s=>{r[s]=i}),r),{}),t=r=>Object.keys(r).reduce((i,s)=>e[s]?ou(i,e[s](r)):i,{});return t.propTypes={},t.filterProps=n.reduce((r,i)=>r.concat(i.filterProps),[]),t}function Di(n){return typeof n!="number"?n:`${n}px solid`}function Ni(n,e){return Dn({prop:n,themeKey:"borders",transform:e})}const e2=Ni("border",Di),t2=Ni("borderTop",Di),n2=Ni("borderRight",Di),r2=Ni("borderBottom",Di),i2=Ni("borderLeft",Di),s2=Ni("borderColor"),o2=Ni("borderTopColor"),a2=Ni("borderRightColor"),l2=Ni("borderBottomColor"),c2=Ni("borderLeftColor"),u2=Ni("outline",Di),d2=Ni("outlineColor"),Nh=n=>{if(n.borderRadius!==void 0&&n.borderRadius!==null){const e=Iu(n.theme,"shape.borderRadius",4),t=r=>({borderRadius:Ya(e,r)});return is(n,n.borderRadius,t)}return null};Nh.propTypes={};Nh.filterProps=["borderRadius"];Oh(e2,t2,n2,r2,i2,s2,o2,a2,l2,c2,Nh,u2,d2);const Mh=n=>{if(n.gap!==void 0&&n.gap!==null){const e=Iu(n.theme,"spacing",8),t=r=>({gap:Ya(e,r)});return is(n,n.gap,t)}return null};Mh.propTypes={};Mh.filterProps=["gap"];const Fh=n=>{if(n.columnGap!==void 0&&n.columnGap!==null){const e=Iu(n.theme,"spacing",8),t=r=>({columnGap:Ya(e,r)});return is(n,n.columnGap,t)}return null};Fh.propTypes={};Fh.filterProps=["columnGap"];const $h=n=>{if(n.rowGap!==void 0&&n.rowGap!==null){const e=Iu(n.theme,"spacing",8),t=r=>({rowGap:Ya(e,r)});return is(n,n.rowGap,t)}return null};$h.propTypes={};$h.filterProps=["rowGap"];const f2=Dn({prop:"gridColumn"}),h2=Dn({prop:"gridRow"}),p2=Dn({prop:"gridAutoFlow"}),m2=Dn({prop:"gridAutoColumns"}),g2=Dn({prop:"gridAutoRows"}),y2=Dn({prop:"gridTemplateColumns"}),v2=Dn({prop:"gridTemplateRows"}),x2=Dn({prop:"gridTemplateAreas"}),S2=Dn({prop:"gridArea"});Oh(Mh,Fh,$h,f2,h2,p2,m2,g2,y2,v2,x2,S2);function ql(n,e){return e==="grey"?e:n}const E2=Dn({prop:"color",themeKey:"palette",transform:ql}),T2=Dn({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:ql}),b2=Dn({prop:"backgroundColor",themeKey:"palette",transform:ql});Oh(E2,T2,b2);function di(n){return n<=1&&n!==0?`${n*100}%`:n}const w2=Dn({prop:"width",transform:di}),I0=n=>{if(n.maxWidth!==void 0&&n.maxWidth!==null){const e=t=>{var i,s,a,c,u;const r=((a=(s=(i=n.theme)==null?void 0:i.breakpoints)==null?void 0:s.values)==null?void 0:a[t])||Ih[t];return r?((u=(c=n.theme)==null?void 0:c.breakpoints)==null?void 0:u.unit)!=="px"?{maxWidth:`${r}${n.theme.breakpoints.unit}`}:{maxWidth:r}:{maxWidth:di(t)}};return is(n,n.maxWidth,e)}return null};I0.filterProps=["maxWidth"];const _2=Dn({prop:"minWidth",transform:di}),L2=Dn({prop:"height",transform:di}),C2=Dn({prop:"maxHeight",transform:di}),R2=Dn({prop:"minHeight",transform:di});Dn({prop:"size",cssProperty:"width",transform:di});Dn({prop:"size",cssProperty:"height",transform:di});const A2=Dn({prop:"boxSizing"});Oh(w2,I0,_2,L2,C2,R2,A2);const Pu={border:{themeKey:"borders",transform:Di},borderTop:{themeKey:"borders",transform:Di},borderRight:{themeKey:"borders",transform:Di},borderBottom:{themeKey:"borders",transform:Di},borderLeft:{themeKey:"borders",transform:Di},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Di},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Nh},color:{themeKey:"palette",transform:ql},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:ql},backgroundColor:{themeKey:"palette",transform:ql},p:{style:Rn},pt:{style:Rn},pr:{style:Rn},pb:{style:Rn},pl:{style:Rn},px:{style:Rn},py:{style:Rn},padding:{style:Rn},paddingTop:{style:Rn},paddingRight:{style:Rn},paddingBottom:{style:Rn},paddingLeft:{style:Rn},paddingX:{style:Rn},paddingY:{style:Rn},paddingInline:{style:Rn},paddingInlineStart:{style:Rn},paddingInlineEnd:{style:Rn},paddingBlock:{style:Rn},paddingBlockStart:{style:Rn},paddingBlockEnd:{style:Rn},m:{style:Cn},mt:{style:Cn},mr:{style:Cn},mb:{style:Cn},ml:{style:Cn},mx:{style:Cn},my:{style:Cn},margin:{style:Cn},marginTop:{style:Cn},marginRight:{style:Cn},marginBottom:{style:Cn},marginLeft:{style:Cn},marginX:{style:Cn},marginY:{style:Cn},marginInline:{style:Cn},marginInlineStart:{style:Cn},marginInlineEnd:{style:Cn},marginBlock:{style:Cn},marginBlockStart:{style:Cn},marginBlockEnd:{style:Cn},displayPrint:{cssProperty:!1,transform:n=>({"@media print":{display:n}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Mh},rowGap:{style:$h},columnGap:{style:Fh},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:di},maxWidth:{style:I0},minWidth:{transform:di},height:{transform:di},maxHeight:{transform:di},minHeight:{transform:di},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function k2(...n){const e=n.reduce((r,i)=>r.concat(Object.keys(i)),[]),t=new Set(e);return n.every(r=>t.size===Object.keys(r).length)}function I2(n,e){return typeof n=="function"?n(e):n}function P2(){function n(t,r,i,s){const a={[t]:r,theme:i},c=s[t];if(!c)return{[t]:r};const{cssProperty:u=t,themeKey:d,transform:h,style:p}=c;if(r==null)return null;if(d==="typography"&&r==="inherit")return{[t]:r};const g=Ph(i,d)||{};return p?p(a):is(a,r,v=>{let S=qf(g,h,v);return v===S&&typeof v=="string"&&(S=qf(g,h,`${t}${v==="default"?"":gu(v)}`,v)),u===!1?S:{[u]:S}})}function e(t){const{sx:r,theme:i={}}=t||{};if(!r)return null;const s=i.unstable_sxConfig??Pu;function a(c){let u=c;if(typeof c=="function")u=c(i);else if(typeof c!="object")return c;if(!u)return null;const d=ET(i.breakpoints),h=Object.keys(d);let p=d;return Object.keys(u).forEach(g=>{const x=I2(u[g],i);if(x!=null)if(typeof x=="object")if(s[g])p=ou(p,n(g,x,i,s));else{const v=is({theme:i},x,S=>({[g]:S}));k2(v,x)?p[g]=e({sx:x,theme:i}):p=ou(p,v)}else p=ou(p,n(g,x,i,s))}),UP(i,TT(h,p))}return Array.isArray(r)?r.map(a):a(r)}return e}const qa=P2();qa.filterProps=["sx"];function D2(n,e){var r;const t=this;if(t.vars){if(!((r=t.colorSchemes)!=null&&r[n])||typeof t.getColorSchemeSelector!="function")return{};let i=t.getColorSchemeSelector(n);return i==="&"?e:((i.includes("data-")||i.includes("."))&&(i=`*:where(${i.replace(/\s*&$/,"")}) &`),{[i]:e})}return t.palette.mode===n?e:{}}function Bh(n={},...e){const{breakpoints:t={},palette:r={},spacing:i,shape:s={},...a}=n,c=BP(t),u=wT(i);let d=Mr({breakpoints:c,direction:"ltr",components:{},palette:{mode:"light",...r},spacing:u,shape:{...VP,...s}},a);return d=GP(d),d.applyStyles=D2,d=e.reduce((h,p)=>Mr(h,p),d),d.unstable_sxConfig={...Pu,...a==null?void 0:a.unstable_sxConfig},d.unstable_sx=function(p){return qa({sx:p,theme:this})},d}function O2(n){return Object.keys(n).length===0}function N2(n=null){const e=F.useContext(L0);return!e||O2(e)?n:e}const M2=Bh();function _T(n=M2){return N2(n)}const F2=n=>{var r;const e={systemProps:{},otherProps:{}},t=((r=n==null?void 0:n.theme)==null?void 0:r.unstable_sxConfig)??Pu;return Object.keys(n).forEach(i=>{t[i]?e.systemProps[i]=n[i]:e.otherProps[i]=n[i]}),e};function P0(n){const{sx:e,...t}=n,{systemProps:r,otherProps:i}=F2(t);let s;return Array.isArray(e)?s=[r,...e]:typeof e=="function"?s=(...a)=>{const c=e(...a);return Os(c)?{...r,...c}:r}:s={...r,...e},{...i,sx:s}}const e1=n=>n,$2=()=>{let n=e1;return{configure(e){n=e},generate(e){return n(e)},reset(){n=e1}}},LT=$2();function B2(n={}){const{themeId:e,defaultTheme:t,defaultClassName:r="MuiBox-root",generateClassName:i}=n,s=xT("div",{shouldForwardProp:c=>c!=="theme"&&c!=="sx"&&c!=="as"})(qa);return F.forwardRef(function(u,d){const h=_T(t),{className:p,component:g="div",...x}=P0(u);return A.jsx(s,{as:g,ref:d,className:ns(p,i?i(r):r),theme:e&&h[e]||h,...x})})}const U2={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Uh(n,e,t="Mui"){const r=U2[e];return r?`${t}-${r}`:`${LT.generate(n)}-${e}`}function D0(n,e,t="Mui"){const r={};return e.forEach(i=>{r[i]=Uh(n,i,t)}),r}function CT(n){const{variants:e,...t}=n,r={variants:e,style:Qx(t),isProcessed:!0};return r.style===t||e&&e.forEach(i=>{typeof i.style!="function"&&(i.style=Qx(i.style))}),r}const j2=Bh();function Im(n){return n!=="ownerState"&&n!=="theme"&&n!=="sx"&&n!=="as"}function H2(n){return n?(e,t)=>t[n]:null}function G2(n,e,t){n.theme=z2(n.theme)?t:n.theme[e]||n.theme}function Af(n,e){const t=typeof e=="function"?e(n):e;if(Array.isArray(t))return t.flatMap(r=>Af(n,r));if(Array.isArray(t==null?void 0:t.variants)){let r;if(t.isProcessed)r=t.style;else{const{variants:i,...s}=t;r=s}return RT(n,t.variants,[r])}return t!=null&&t.isProcessed?t.style:t}function RT(n,e,t=[]){var i;let r;e:for(let s=0;s<e.length;s+=1){const a=e[s];if(typeof a.props=="function"){if(r??(r={...n,...n.ownerState,ownerState:n.ownerState}),!a.props(r))continue}else for(const c in a.props)if(n[c]!==a.props[c]&&((i=n.ownerState)==null?void 0:i[c])!==a.props[c])continue e;typeof a.style=="function"?(r??(r={...n,...n.ownerState,ownerState:n.ownerState}),t.push(a.style(r))):t.push(a.style)}return t}function AT(n={}){const{themeId:e,defaultTheme:t=j2,rootShouldForwardProp:r=Im,slotShouldForwardProp:i=Im}=n;function s(c){G2(c,e,t)}return(c,u={})=>{FP(c,w=>w.filter($=>$!==qa));const{name:d,slot:h,skipVariantsResolver:p,skipSx:g,overridesResolver:x=H2(W2(h)),...v}=u,S=p!==void 0?p:h&&h!=="Root"&&h!=="root"||!1,T=g||!1;let _=Im;h==="Root"||h==="root"?_=r:h?_=i:K2(c)&&(_=void 0);const C=xT(c,{shouldForwardProp:_,label:V2(),...v}),k=w=>{if(typeof w=="function"&&w.__emotion_real!==w)return function(M){return Af(M,w)};if(Os(w)){const $=CT(w);return $.variants?function(U){return Af(U,$)}:$.style}return w},O=(...w)=>{const $=[],M=w.map(k),U=[];if($.push(s),d&&x&&U.push(function(fe){var Ee,Pe;const xe=(Pe=(Ee=fe.theme.components)==null?void 0:Ee[d])==null?void 0:Pe.styleOverrides;if(!xe)return null;const ye={};for(const ie in xe)ye[ie]=Af(fe,xe[ie]);return x(fe,ye)}),d&&!S&&U.push(function(fe){var ye,Ee;const ae=fe.theme,xe=(Ee=(ye=ae==null?void 0:ae.components)==null?void 0:ye[d])==null?void 0:Ee.variants;return xe?RT(fe,xe):null}),T||U.push(qa),Array.isArray(M[0])){const G=M.shift(),fe=new Array($.length).fill(""),ae=new Array(U.length).fill("");let xe;xe=[...fe,...G,...ae],xe.raw=[...fe,...G.raw,...ae],$.unshift(xe)}const W=[...$,...M,...U],R=C(...W);return c.muiName&&(R.muiName=c.muiName),R};return C.withConfig&&(O.withConfig=C.withConfig),O}}function V2(n,e){return void 0}function z2(n){for(const e in n)return!1;return!0}function K2(n){return typeof n=="string"&&n.charCodeAt(0)>96}function W2(n){return n&&n.charAt(0).toLowerCase()+n.slice(1)}const Y2=AT();function Xf(n,e){const t={...e};for(const r in n)if(Object.prototype.hasOwnProperty.call(n,r)){const i=r;if(i==="components"||i==="slots")t[i]={...n[i],...t[i]};else if(i==="componentsProps"||i==="slotProps"){const s=n[i],a=e[i];if(!a)t[i]=s||{};else if(!s)t[i]=a;else{t[i]={...a};for(const c in s)if(Object.prototype.hasOwnProperty.call(s,c)){const u=c;t[i][u]=Xf(s[u],a[u])}}}else t[i]===void 0&&(t[i]=n[i])}return t}function q2(n){const{theme:e,name:t,props:r}=n;return!e||!e.components||!e.components[t]||!e.components[t].defaultProps?r:Xf(e.components[t].defaultProps,r)}function X2({props:n,name:e,defaultTheme:t,themeId:r}){let i=_T(t);return r&&(i=i[r]||i),q2({theme:i,name:e,props:n})}function Q2(n,e=Number.MIN_SAFE_INTEGER,t=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(n,t))}function O0(n,e=0,t=1){return Q2(n,e,t)}function J2(n){n=n.slice(1);const e=new RegExp(`.{1,${n.length>=6?2:1}}`,"g");let t=n.match(e);return t&&t[0].length===1&&(t=t.map(r=>r+r)),t?`rgb${t.length===4?"a":""}(${t.map((r,i)=>i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function ta(n){if(n.type)return n;if(n.charAt(0)==="#")return ta(J2(n));const e=n.indexOf("("),t=n.substring(0,e);if(!["rgb","rgba","hsl","hsla","color"].includes(t))throw new Error(Wa(9,n));let r=n.substring(e+1,n.length-1),i;if(t==="color"){if(r=r.split(" "),i=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(i))throw new Error(Wa(10,i))}else r=r.split(",");return r=r.map(s=>parseFloat(s)),{type:t,values:r,colorSpace:i}}const Z2=n=>{const e=ta(n);return e.values.slice(0,3).map((t,r)=>e.type.includes("hsl")&&r!==0?`${t}%`:t).join(" ")},ru=(n,e)=>{try{return Z2(n)}catch{return n}};function jh(n){const{type:e,colorSpace:t}=n;let{values:r}=n;return e.includes("rgb")?r=r.map((i,s)=>s<3?parseInt(i,10):i):e.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.includes("color")?r=`${t} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function kT(n){n=ta(n);const{values:e}=n,t=e[0],r=e[1]/100,i=e[2]/100,s=r*Math.min(i,1-i),a=(d,h=(d+t/30)%12)=>i-s*Math.max(Math.min(h-3,9-h,1),-1);let c="rgb";const u=[Math.round(a(0)*255),Math.round(a(8)*255),Math.round(a(4)*255)];return n.type==="hsla"&&(c+="a",u.push(e[3])),jh({type:c,values:u})}function Rg(n){n=ta(n);let e=n.type==="hsl"||n.type==="hsla"?ta(kT(n)).values:n.values;return e=e.map(t=>(n.type!=="color"&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function eD(n,e){const t=Rg(n),r=Rg(e);return(Math.max(t,r)+.05)/(Math.min(t,r)+.05)}function IT(n,e){return n=ta(n),e=O0(e),(n.type==="rgb"||n.type==="hsl")&&(n.type+="a"),n.type==="color"?n.values[3]=`/${e}`:n.values[3]=e,jh(n)}function tf(n,e,t){try{return IT(n,e)}catch{return n}}function N0(n,e){if(n=ta(n),e=O0(e),n.type.includes("hsl"))n.values[2]*=1-e;else if(n.type.includes("rgb")||n.type.includes("color"))for(let t=0;t<3;t+=1)n.values[t]*=1-e;return jh(n)}function un(n,e,t){try{return N0(n,e)}catch{return n}}function M0(n,e){if(n=ta(n),e=O0(e),n.type.includes("hsl"))n.values[2]+=(100-n.values[2])*e;else if(n.type.includes("rgb"))for(let t=0;t<3;t+=1)n.values[t]+=(255-n.values[t])*e;else if(n.type.includes("color"))for(let t=0;t<3;t+=1)n.values[t]+=(1-n.values[t])*e;return jh(n)}function dn(n,e,t){try{return M0(n,e)}catch{return n}}function tD(n,e=.15){return Rg(n)>.5?N0(n,e):M0(n,e)}function nf(n,e,t){try{return tD(n,e)}catch{return n}}function F0(n,e,t=void 0){const r={};for(const i in n){const s=n[i];let a="",c=!0;for(let u=0;u<s.length;u+=1){const d=s[u];d&&(a+=(c===!0?"":" ")+e(d),c=!1,t&&t[d]&&(a+=" "+t[d]))}r[i]=a}return r}const nD=F.createContext(void 0);function rD(n){const{theme:e,name:t,props:r}=n;if(!e||!e.components||!e.components[t])return r;const i=e.components[t];return i.defaultProps?Xf(i.defaultProps,r):!i.styleOverrides&&!i.variants?Xf(i,r):r}function iD({props:n,name:e}){const t=F.useContext(nD);return rD({props:n,name:e,theme:{components:t}})}const t1={theme:void 0};function sD(n){let e,t;return function(i){let s=e;return(s===void 0||i.theme!==t)&&(t1.theme=i.theme,s=CT(n(t1)),e=s,t=i.theme),s}}function oD(n=""){function e(...r){if(!r.length)return"";const i=r[0];return typeof i=="string"&&!i.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${n?`${n}-`:""}${i}${e(...r.slice(1))})`:`, ${i}`}return(r,...i)=>`var(--${n?`${n}-`:""}${r}${e(...i)})`}const n1=(n,e,t,r=[])=>{let i=n;e.forEach((s,a)=>{a===e.length-1?Array.isArray(i)?i[Number(s)]=t:i&&typeof i=="object"&&(i[s]=t):i&&typeof i=="object"&&(i[s]||(i[s]=r.includes(s)?[]:{}),i=i[s])})},aD=(n,e,t)=>{function r(i,s=[],a=[]){Object.entries(i).forEach(([c,u])=>{(!t||t&&!t([...s,c]))&&u!=null&&(typeof u=="object"&&Object.keys(u).length>0?r(u,[...s,c],Array.isArray(u)?[...a,c]:a):e([...s,c],u,a))})}r(n)},lD=(n,e)=>typeof e=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(r=>n.includes(r))||n[n.length-1].toLowerCase().includes("opacity")?e:`${e}px`:e;function Pm(n,e){const{prefix:t,shouldSkipGeneratingVar:r}=e||{},i={},s={},a={};return aD(n,(c,u,d)=>{if((typeof u=="string"||typeof u=="number")&&(!r||!r(c,u))){const h=`--${t?`${t}-`:""}${c.join("-")}`,p=lD(c,u);Object.assign(i,{[h]:p}),n1(s,c,`var(${h})`,d),n1(a,c,`var(${h}, ${p})`,d)}},c=>c[0]==="vars"),{css:i,vars:s,varsWithDefaults:a}}function cD(n,e={}){const{getSelector:t=T,disableCssColorScheme:r,colorSchemeSelector:i}=e,{colorSchemes:s={},components:a,defaultColorScheme:c="light",...u}=n,{vars:d,css:h,varsWithDefaults:p}=Pm(u,e);let g=p;const x={},{[c]:v,...S}=s;if(Object.entries(S||{}).forEach(([k,O])=>{const{vars:w,css:$,varsWithDefaults:M}=Pm(O,e);g=Mr(g,M),x[k]={css:$,vars:w}}),v){const{css:k,vars:O,varsWithDefaults:w}=Pm(v,e);g=Mr(g,w),x[c]={css:k,vars:O}}function T(k,O){var $,M;let w=i;if(i==="class"&&(w=".%s"),i==="data"&&(w="[data-%s]"),i!=null&&i.startsWith("data-")&&!i.includes("%s")&&(w=`[${i}="%s"]`),k){if(w==="media")return n.defaultColorScheme===k?":root":{[`@media (prefers-color-scheme: ${((M=($=s[k])==null?void 0:$.palette)==null?void 0:M.mode)||k})`]:{":root":O}};if(w)return n.defaultColorScheme===k?`:root, ${w.replace("%s",String(k))}`:w.replace("%s",String(k))}return":root"}return{vars:g,generateThemeVars:()=>{let k={...d};return Object.entries(x).forEach(([,{vars:O}])=>{k=Mr(k,O)}),k},generateStyleSheets:()=>{var U,W;const k=[],O=n.defaultColorScheme||"light";function w(R,G){Object.keys(G).length&&k.push(typeof R=="string"?{[R]:{...G}}:R)}w(t(void 0,{...h}),h);const{[O]:$,...M}=x;if($){const{css:R}=$,G=(W=(U=s[O])==null?void 0:U.palette)==null?void 0:W.mode,fe=!r&&G?{colorScheme:G,...R}:{...R};w(t(O,{...fe}),fe)}return Object.entries(M).forEach(([R,{css:G}])=>{var xe,ye;const fe=(ye=(xe=s[R])==null?void 0:xe.palette)==null?void 0:ye.mode,ae=!r&&fe?{colorScheme:fe,...G}:{...G};w(t(R,{...ae}),ae)}),k}}}function uD(n){return function(t){return n==="media"?`@media (prefers-color-scheme: ${t})`:n?n.startsWith("data-")&&!n.includes("%s")?`[${n}="${t}"] &`:n==="class"?`.${t} &`:n==="data"?`[data-${t}] &`:`${n.replace("%s",t)} &`:"&"}}const dD=Bh(),fD=Y2("div",{name:"MuiStack",slot:"Root",overridesResolver:(n,e)=>e.root});function hD(n){return X2({props:n,name:"MuiStack",defaultTheme:dD})}function pD(n,e){const t=F.Children.toArray(n).filter(Boolean);return t.reduce((r,i,s)=>(r.push(i),s<t.length-1&&r.push(F.cloneElement(e,{key:`separator-${s}`})),r),[])}const mD=n=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[n],gD=({ownerState:n,theme:e})=>{let t={display:"flex",flexDirection:"column",...is({theme:e},km({values:n.direction,breakpoints:e.breakpoints.values}),r=>({flexDirection:r}))};if(n.spacing){const r=Dh(e),i=Object.keys(e.breakpoints.values).reduce((u,d)=>((typeof n.spacing=="object"&&n.spacing[d]!=null||typeof n.direction=="object"&&n.direction[d]!=null)&&(u[d]=!0),u),{}),s=km({values:n.direction,base:i}),a=km({values:n.spacing,base:i});typeof s=="object"&&Object.keys(s).forEach((u,d,h)=>{if(!s[u]){const g=d>0?s[h[d-1]]:"column";s[u]=g}}),t=Mr(t,is({theme:e},a,(u,d)=>n.useFlexGap?{gap:Ya(r,u)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${mD(d?s[d]:n.direction)}`]:Ya(r,u)}}))}return t=KP(e.breakpoints,t),t};function yD(n={}){const{createStyledComponent:e=fD,useThemeProps:t=hD,componentName:r="MuiStack"}=n,i=()=>F0({root:["root"]},u=>Uh(r,u),{}),s=e(gD);return F.forwardRef(function(u,d){const h=t(u),p=P0(h),{component:g="div",direction:x="column",spacing:v=0,divider:S,children:T,className:_,useFlexGap:C=!1,...k}=p,O={direction:x,spacing:v,useFlexGap:C},w=i();return A.jsx(s,{as:g,ownerState:O,ref:d,className:ns(w.root,_),...k,children:S?pD(T,S):T})})}function PT(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:fu.white,default:fu.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const vD=PT();function DT(){return{text:{primary:fu.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:fu.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const r1=DT();function i1(n,e,t,r){const i=r.light||r,s=r.dark||r*1.5;n[e]||(n.hasOwnProperty(t)?n[e]=n[t]:e==="light"?n.light=M0(n.main,i):e==="dark"&&(n.dark=N0(n.main,s)))}function xD(n="light"){return n==="dark"?{main:Nl[200],light:Nl[50],dark:Nl[400]}:{main:Nl[700],light:Nl[400],dark:Nl[800]}}function SD(n="light"){return n==="dark"?{main:Ol[200],light:Ol[50],dark:Ol[400]}:{main:Ol[500],light:Ol[300],dark:Ol[700]}}function ED(n="light"){return n==="dark"?{main:Dl[500],light:Dl[300],dark:Dl[700]}:{main:Dl[700],light:Dl[400],dark:Dl[800]}}function TD(n="light"){return n==="dark"?{main:Ml[400],light:Ml[300],dark:Ml[700]}:{main:Ml[700],light:Ml[500],dark:Ml[900]}}function bD(n="light"){return n==="dark"?{main:Fl[400],light:Fl[300],dark:Fl[700]}:{main:Fl[800],light:Fl[500],dark:Fl[900]}}function wD(n="light"){return n==="dark"?{main:Jc[400],light:Jc[300],dark:Jc[700]}:{main:"#ed6c02",light:Jc[500],dark:Jc[900]}}function $0(n){const{mode:e="light",contrastThreshold:t=3,tonalOffset:r=.2,...i}=n,s=n.primary||xD(e),a=n.secondary||SD(e),c=n.error||ED(e),u=n.info||TD(e),d=n.success||bD(e),h=n.warning||wD(e);function p(S){return eD(S,r1.text.primary)>=t?r1.text.primary:vD.text.primary}const g=({color:S,name:T,mainShade:_=500,lightShade:C=300,darkShade:k=700})=>{if(S={...S},!S.main&&S[_]&&(S.main=S[_]),!S.hasOwnProperty("main"))throw new Error(Wa(11,T?` (${T})`:"",_));if(typeof S.main!="string")throw new Error(Wa(12,T?` (${T})`:"",JSON.stringify(S.main)));return i1(S,"light",C,r),i1(S,"dark",k,r),S.contrastText||(S.contrastText=p(S.main)),S};let x;return e==="light"?x=PT():e==="dark"&&(x=DT()),Mr({common:{...fu},mode:e,primary:g({color:s,name:"primary"}),secondary:g({color:a,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:g({color:c,name:"error"}),warning:g({color:h,name:"warning"}),info:g({color:u,name:"info"}),success:g({color:d,name:"success"}),grey:OI,contrastThreshold:t,getContrastText:p,augmentColor:g,tonalOffset:r,...x},i)}function _D(n){const e={};return Object.entries(n).forEach(r=>{const[i,s]=r;typeof s=="object"&&(e[i]=`${s.fontStyle?`${s.fontStyle} `:""}${s.fontVariant?`${s.fontVariant} `:""}${s.fontWeight?`${s.fontWeight} `:""}${s.fontStretch?`${s.fontStretch} `:""}${s.fontSize||""}${s.lineHeight?`/${s.lineHeight} `:""}${s.fontFamily||""}`)}),e}function LD(n,e){return{toolbar:{minHeight:56,[n.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[n.up("sm")]:{minHeight:64}},...e}}function CD(n){return Math.round(n*1e5)/1e5}const s1={textTransform:"uppercase"},o1='"Roboto", "Helvetica", "Arial", sans-serif';function RD(n,e){const{fontFamily:t=o1,fontSize:r=14,fontWeightLight:i=300,fontWeightRegular:s=400,fontWeightMedium:a=500,fontWeightBold:c=700,htmlFontSize:u=16,allVariants:d,pxToRem:h,...p}=typeof e=="function"?e(n):e,g=r/14,x=h||(T=>`${T/u*g}rem`),v=(T,_,C,k,O)=>({fontFamily:t,fontWeight:T,fontSize:x(_),lineHeight:C,...t===o1?{letterSpacing:`${CD(k/_)}em`}:{},...O,...d}),S={h1:v(i,96,1.167,-1.5),h2:v(i,60,1.2,-.5),h3:v(s,48,1.167,0),h4:v(s,34,1.235,.25),h5:v(s,24,1.334,0),h6:v(a,20,1.6,.15),subtitle1:v(s,16,1.75,.15),subtitle2:v(a,14,1.57,.1),body1:v(s,16,1.5,.15),body2:v(s,14,1.43,.15),button:v(a,14,1.75,.4,s1),caption:v(s,12,1.66,.4),overline:v(s,12,2.66,1,s1),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Mr({htmlFontSize:u,pxToRem:x,fontFamily:t,fontSize:r,fontWeightLight:i,fontWeightRegular:s,fontWeightMedium:a,fontWeightBold:c,...S},p,{clone:!1})}const AD=.2,kD=.14,ID=.12;function vn(...n){return[`${n[0]}px ${n[1]}px ${n[2]}px ${n[3]}px rgba(0,0,0,${AD})`,`${n[4]}px ${n[5]}px ${n[6]}px ${n[7]}px rgba(0,0,0,${kD})`,`${n[8]}px ${n[9]}px ${n[10]}px ${n[11]}px rgba(0,0,0,${ID})`].join(",")}const PD=["none",vn(0,2,1,-1,0,1,1,0,0,1,3,0),vn(0,3,1,-2,0,2,2,0,0,1,5,0),vn(0,3,3,-2,0,3,4,0,0,1,8,0),vn(0,2,4,-1,0,4,5,0,0,1,10,0),vn(0,3,5,-1,0,5,8,0,0,1,14,0),vn(0,3,5,-1,0,6,10,0,0,1,18,0),vn(0,4,5,-2,0,7,10,1,0,2,16,1),vn(0,5,5,-3,0,8,10,1,0,3,14,2),vn(0,5,6,-3,0,9,12,1,0,3,16,2),vn(0,6,6,-3,0,10,14,1,0,4,18,3),vn(0,6,7,-4,0,11,15,1,0,4,20,3),vn(0,7,8,-4,0,12,17,2,0,5,22,4),vn(0,7,8,-4,0,13,19,2,0,5,24,4),vn(0,7,9,-4,0,14,21,2,0,5,26,4),vn(0,8,9,-5,0,15,22,2,0,6,28,5),vn(0,8,10,-5,0,16,24,2,0,6,30,5),vn(0,8,11,-5,0,17,26,2,0,6,32,5),vn(0,9,11,-5,0,18,28,2,0,7,34,6),vn(0,9,12,-6,0,19,29,2,0,7,36,6),vn(0,10,13,-6,0,20,31,3,0,8,38,7),vn(0,10,13,-6,0,21,33,3,0,8,40,7),vn(0,10,14,-6,0,22,35,3,0,8,42,7),vn(0,11,14,-7,0,23,36,3,0,9,44,8),vn(0,11,15,-7,0,24,38,3,0,9,46,8)],DD={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},OD={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function a1(n){return`${Math.round(n)}ms`}function ND(n){if(!n)return 0;const e=n/36;return Math.min(Math.round((4+15*e**.25+e/5)*10),3e3)}function MD(n){const e={...DD,...n.easing},t={...OD,...n.duration};return{getAutoHeightDuration:ND,create:(i=["all"],s={})=>{const{duration:a=t.standard,easing:c=e.easeInOut,delay:u=0,...d}=s;return(Array.isArray(i)?i:[i]).map(h=>`${h} ${typeof a=="string"?a:a1(a)} ${c} ${typeof u=="string"?u:a1(u)}`).join(",")},...n,easing:e,duration:t}}const FD={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function $D(n){return Os(n)||typeof n>"u"||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||Array.isArray(n)}function OT(n={}){const e={...n};function t(r){const i=Object.entries(r);for(let s=0;s<i.length;s++){const[a,c]=i[s];!$D(c)||a.startsWith("unstable_")?delete r[a]:Os(c)&&(r[a]={...c},t(r[a]))}}return t(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(e,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function Ag(n={},...e){const{breakpoints:t,mixins:r={},spacing:i,palette:s={},transitions:a={},typography:c={},shape:u,...d}=n;if(n.vars)throw new Error(Wa(20));const h=$0(s),p=Bh(n);let g=Mr(p,{mixins:LD(p.breakpoints,r),palette:h,shadows:PD.slice(),typography:RD(h,c),transitions:MD(a),zIndex:{...FD}});return g=Mr(g,d),g=e.reduce((x,v)=>Mr(x,v),g),g.unstable_sxConfig={...Pu,...d==null?void 0:d.unstable_sxConfig},g.unstable_sx=function(v){return qa({sx:v,theme:this})},g.toRuntimeSource=OT,g}function BD(n){let e;return n<1?e=5.11916*n**2:e=4.5*Math.log(n+1)+2,Math.round(e*10)/1e3}const UD=[...Array(25)].map((n,e)=>{if(e===0)return"none";const t=BD(e);return`linear-gradient(rgba(255 255 255 / ${t}), rgba(255 255 255 / ${t}))`});function NT(n){return{inputPlaceholder:n==="dark"?.5:.42,inputUnderline:n==="dark"?.7:.42,switchTrackDisabled:n==="dark"?.2:.12,switchTrack:n==="dark"?.3:.38}}function MT(n){return n==="dark"?UD:[]}function jD(n){const{palette:e={mode:"light"},opacity:t,overlays:r,...i}=n,s=$0(e);return{palette:s,opacity:{...NT(s.mode),...t},overlays:r||MT(s.mode),...i}}function HD(n){var e;return!!n[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!n[0].match(/sxConfig$/)||n[0]==="palette"&&!!((e=n[1])!=null&&e.match(/(mode|contrastThreshold|tonalOffset)/))}const GD=n=>[...[...Array(25)].map((e,t)=>`--${n?`${n}-`:""}overlays-${t}`),`--${n?`${n}-`:""}palette-AppBar-darkBg`,`--${n?`${n}-`:""}palette-AppBar-darkColor`],VD=n=>(e,t)=>{const r=n.rootSelector||":root",i=n.colorSchemeSelector;let s=i;if(i==="class"&&(s=".%s"),i==="data"&&(s="[data-%s]"),i!=null&&i.startsWith("data-")&&!i.includes("%s")&&(s=`[${i}="%s"]`),n.defaultColorScheme===e){if(e==="dark"){const a={};return GD(n.cssVarPrefix).forEach(c=>{a[c]=t[c],delete t[c]}),s==="media"?{[r]:t,"@media (prefers-color-scheme: dark)":{[r]:a}}:s?{[s.replace("%s",e)]:a,[`${r}, ${s.replace("%s",e)}`]:t}:{[r]:{...t,...a}}}if(s&&s!=="media")return`${r}, ${s.replace("%s",String(e))}`}else if(e){if(s==="media")return{[`@media (prefers-color-scheme: ${String(e)})`]:{[r]:t}};if(s)return s.replace("%s",String(e))}return r};function zD(n,e){e.forEach(t=>{n[t]||(n[t]={})})}function he(n,e,t){!n[e]&&t&&(n[e]=t)}function iu(n){return typeof n!="string"||!n.startsWith("hsl")?n:kT(n)}function lo(n,e){`${e}Channel`in n||(n[`${e}Channel`]=ru(iu(n[e]),`MUI: Can't create \`palette.${e}Channel\` because \`palette.${e}\` is not one of these formats: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color().
To suppress this warning, you need to explicitly provide the \`palette.${e}Channel\` as a string (in rgb format, for example "12 12 12") or undefined if you want to remove the channel token.`))}function KD(n){return typeof n=="number"?`${n}px`:typeof n=="string"||typeof n=="function"||Array.isArray(n)?n:"8px"}const Rs=n=>{try{return n()}catch{}},WD=(n="mui")=>oD(n);function Dm(n,e,t,r){if(!e)return;e=e===!0?{}:e;const i=r==="dark"?"dark":"light";if(!t){n[r]=jD({...e,palette:{mode:i,...e==null?void 0:e.palette}});return}const{palette:s,...a}=Ag({...t,palette:{mode:i,...e==null?void 0:e.palette}});return n[r]={...e,palette:s,opacity:{...NT(i),...e==null?void 0:e.opacity},overlays:(e==null?void 0:e.overlays)||MT(i)},a}function YD(n={},...e){const{colorSchemes:t={light:!0},defaultColorScheme:r,disableCssColorScheme:i=!1,cssVarPrefix:s="mui",shouldSkipGeneratingVar:a=HD,colorSchemeSelector:c=t.light&&t.dark?"media":void 0,rootSelector:u=":root",...d}=n,h=Object.keys(t)[0],p=r||(t.light&&h!=="light"?"light":h),g=WD(s),{[p]:x,light:v,dark:S,...T}=t,_={...T};let C=x;if((p==="dark"&&!("dark"in t)||p==="light"&&!("light"in t))&&(C=!0),!C)throw new Error(Wa(21,p));const k=Dm(_,C,d,p);v&&!_.light&&Dm(_,v,void 0,"light"),S&&!_.dark&&Dm(_,S,void 0,"dark");let O={defaultColorScheme:p,...k,cssVarPrefix:s,colorSchemeSelector:c,rootSelector:u,getCssVar:g,colorSchemes:_,font:{..._D(k.typography),...k.font},spacing:KD(d.spacing)};Object.keys(O.colorSchemes).forEach(W=>{const R=O.colorSchemes[W].palette,G=fe=>{const ae=fe.split("-"),xe=ae[1],ye=ae[2];return g(fe,R[xe][ye])};if(R.mode==="light"&&(he(R.common,"background","#fff"),he(R.common,"onBackground","#000")),R.mode==="dark"&&(he(R.common,"background","#000"),he(R.common,"onBackground","#fff")),zD(R,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),R.mode==="light"){he(R.Alert,"errorColor",un(R.error.light,.6)),he(R.Alert,"infoColor",un(R.info.light,.6)),he(R.Alert,"successColor",un(R.success.light,.6)),he(R.Alert,"warningColor",un(R.warning.light,.6)),he(R.Alert,"errorFilledBg",G("palette-error-main")),he(R.Alert,"infoFilledBg",G("palette-info-main")),he(R.Alert,"successFilledBg",G("palette-success-main")),he(R.Alert,"warningFilledBg",G("palette-warning-main")),he(R.Alert,"errorFilledColor",Rs(()=>R.getContrastText(R.error.main))),he(R.Alert,"infoFilledColor",Rs(()=>R.getContrastText(R.info.main))),he(R.Alert,"successFilledColor",Rs(()=>R.getContrastText(R.success.main))),he(R.Alert,"warningFilledColor",Rs(()=>R.getContrastText(R.warning.main))),he(R.Alert,"errorStandardBg",dn(R.error.light,.9)),he(R.Alert,"infoStandardBg",dn(R.info.light,.9)),he(R.Alert,"successStandardBg",dn(R.success.light,.9)),he(R.Alert,"warningStandardBg",dn(R.warning.light,.9)),he(R.Alert,"errorIconColor",G("palette-error-main")),he(R.Alert,"infoIconColor",G("palette-info-main")),he(R.Alert,"successIconColor",G("palette-success-main")),he(R.Alert,"warningIconColor",G("palette-warning-main")),he(R.AppBar,"defaultBg",G("palette-grey-100")),he(R.Avatar,"defaultBg",G("palette-grey-400")),he(R.Button,"inheritContainedBg",G("palette-grey-300")),he(R.Button,"inheritContainedHoverBg",G("palette-grey-A100")),he(R.Chip,"defaultBorder",G("palette-grey-400")),he(R.Chip,"defaultAvatarColor",G("palette-grey-700")),he(R.Chip,"defaultIconColor",G("palette-grey-700")),he(R.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),he(R.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),he(R.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),he(R.LinearProgress,"primaryBg",dn(R.primary.main,.62)),he(R.LinearProgress,"secondaryBg",dn(R.secondary.main,.62)),he(R.LinearProgress,"errorBg",dn(R.error.main,.62)),he(R.LinearProgress,"infoBg",dn(R.info.main,.62)),he(R.LinearProgress,"successBg",dn(R.success.main,.62)),he(R.LinearProgress,"warningBg",dn(R.warning.main,.62)),he(R.Skeleton,"bg",`rgba(${G("palette-text-primaryChannel")} / 0.11)`),he(R.Slider,"primaryTrack",dn(R.primary.main,.62)),he(R.Slider,"secondaryTrack",dn(R.secondary.main,.62)),he(R.Slider,"errorTrack",dn(R.error.main,.62)),he(R.Slider,"infoTrack",dn(R.info.main,.62)),he(R.Slider,"successTrack",dn(R.success.main,.62)),he(R.Slider,"warningTrack",dn(R.warning.main,.62));const fe=nf(R.background.default,.8);he(R.SnackbarContent,"bg",fe),he(R.SnackbarContent,"color",Rs(()=>R.getContrastText(fe))),he(R.SpeedDialAction,"fabHoverBg",nf(R.background.paper,.15)),he(R.StepConnector,"border",G("palette-grey-400")),he(R.StepContent,"border",G("palette-grey-400")),he(R.Switch,"defaultColor",G("palette-common-white")),he(R.Switch,"defaultDisabledColor",G("palette-grey-100")),he(R.Switch,"primaryDisabledColor",dn(R.primary.main,.62)),he(R.Switch,"secondaryDisabledColor",dn(R.secondary.main,.62)),he(R.Switch,"errorDisabledColor",dn(R.error.main,.62)),he(R.Switch,"infoDisabledColor",dn(R.info.main,.62)),he(R.Switch,"successDisabledColor",dn(R.success.main,.62)),he(R.Switch,"warningDisabledColor",dn(R.warning.main,.62)),he(R.TableCell,"border",dn(tf(R.divider,1),.88)),he(R.Tooltip,"bg",tf(R.grey[700],.92))}if(R.mode==="dark"){he(R.Alert,"errorColor",dn(R.error.light,.6)),he(R.Alert,"infoColor",dn(R.info.light,.6)),he(R.Alert,"successColor",dn(R.success.light,.6)),he(R.Alert,"warningColor",dn(R.warning.light,.6)),he(R.Alert,"errorFilledBg",G("palette-error-dark")),he(R.Alert,"infoFilledBg",G("palette-info-dark")),he(R.Alert,"successFilledBg",G("palette-success-dark")),he(R.Alert,"warningFilledBg",G("palette-warning-dark")),he(R.Alert,"errorFilledColor",Rs(()=>R.getContrastText(R.error.dark))),he(R.Alert,"infoFilledColor",Rs(()=>R.getContrastText(R.info.dark))),he(R.Alert,"successFilledColor",Rs(()=>R.getContrastText(R.success.dark))),he(R.Alert,"warningFilledColor",Rs(()=>R.getContrastText(R.warning.dark))),he(R.Alert,"errorStandardBg",un(R.error.light,.9)),he(R.Alert,"infoStandardBg",un(R.info.light,.9)),he(R.Alert,"successStandardBg",un(R.success.light,.9)),he(R.Alert,"warningStandardBg",un(R.warning.light,.9)),he(R.Alert,"errorIconColor",G("palette-error-main")),he(R.Alert,"infoIconColor",G("palette-info-main")),he(R.Alert,"successIconColor",G("palette-success-main")),he(R.Alert,"warningIconColor",G("palette-warning-main")),he(R.AppBar,"defaultBg",G("palette-grey-900")),he(R.AppBar,"darkBg",G("palette-background-paper")),he(R.AppBar,"darkColor",G("palette-text-primary")),he(R.Avatar,"defaultBg",G("palette-grey-600")),he(R.Button,"inheritContainedBg",G("palette-grey-800")),he(R.Button,"inheritContainedHoverBg",G("palette-grey-700")),he(R.Chip,"defaultBorder",G("palette-grey-700")),he(R.Chip,"defaultAvatarColor",G("palette-grey-300")),he(R.Chip,"defaultIconColor",G("palette-grey-300")),he(R.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),he(R.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),he(R.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),he(R.LinearProgress,"primaryBg",un(R.primary.main,.5)),he(R.LinearProgress,"secondaryBg",un(R.secondary.main,.5)),he(R.LinearProgress,"errorBg",un(R.error.main,.5)),he(R.LinearProgress,"infoBg",un(R.info.main,.5)),he(R.LinearProgress,"successBg",un(R.success.main,.5)),he(R.LinearProgress,"warningBg",un(R.warning.main,.5)),he(R.Skeleton,"bg",`rgba(${G("palette-text-primaryChannel")} / 0.13)`),he(R.Slider,"primaryTrack",un(R.primary.main,.5)),he(R.Slider,"secondaryTrack",un(R.secondary.main,.5)),he(R.Slider,"errorTrack",un(R.error.main,.5)),he(R.Slider,"infoTrack",un(R.info.main,.5)),he(R.Slider,"successTrack",un(R.success.main,.5)),he(R.Slider,"warningTrack",un(R.warning.main,.5));const fe=nf(R.background.default,.98);he(R.SnackbarContent,"bg",fe),he(R.SnackbarContent,"color",Rs(()=>R.getContrastText(fe))),he(R.SpeedDialAction,"fabHoverBg",nf(R.background.paper,.15)),he(R.StepConnector,"border",G("palette-grey-600")),he(R.StepContent,"border",G("palette-grey-600")),he(R.Switch,"defaultColor",G("palette-grey-300")),he(R.Switch,"defaultDisabledColor",G("palette-grey-600")),he(R.Switch,"primaryDisabledColor",un(R.primary.main,.55)),he(R.Switch,"secondaryDisabledColor",un(R.secondary.main,.55)),he(R.Switch,"errorDisabledColor",un(R.error.main,.55)),he(R.Switch,"infoDisabledColor",un(R.info.main,.55)),he(R.Switch,"successDisabledColor",un(R.success.main,.55)),he(R.Switch,"warningDisabledColor",un(R.warning.main,.55)),he(R.TableCell,"border",un(tf(R.divider,1),.68)),he(R.Tooltip,"bg",tf(R.grey[700],.92))}lo(R.background,"default"),lo(R.background,"paper"),lo(R.common,"background"),lo(R.common,"onBackground"),lo(R,"divider"),Object.keys(R).forEach(fe=>{const ae=R[fe];fe!=="tonalOffset"&&ae&&typeof ae=="object"&&(ae.main&&he(R[fe],"mainChannel",ru(iu(ae.main))),ae.light&&he(R[fe],"lightChannel",ru(iu(ae.light))),ae.dark&&he(R[fe],"darkChannel",ru(iu(ae.dark))),ae.contrastText&&he(R[fe],"contrastTextChannel",ru(iu(ae.contrastText))),fe==="text"&&(lo(R[fe],"primary"),lo(R[fe],"secondary")),fe==="action"&&(ae.active&&lo(R[fe],"active"),ae.selected&&lo(R[fe],"selected")))})}),O=e.reduce((W,R)=>Mr(W,R),O);const w={prefix:s,disableCssColorScheme:i,shouldSkipGeneratingVar:a,getSelector:VD(O)},{vars:$,generateThemeVars:M,generateStyleSheets:U}=cD(O,w);return O.vars=$,Object.entries(O.colorSchemes[O.defaultColorScheme]).forEach(([W,R])=>{O[W]=R}),O.generateThemeVars=M,O.generateStyleSheets=U,O.generateSpacing=function(){return wT(d.spacing,Dh(this))},O.getColorSchemeSelector=uD(c),O.spacing=O.generateSpacing(),O.shouldSkipGeneratingVar=a,O.unstable_sxConfig={...Pu,...d==null?void 0:d.unstable_sxConfig},O.unstable_sx=function(R){return qa({sx:R,theme:this})},O.toRuntimeSource=OT,O}function l1(n,e,t){n.colorSchemes&&t&&(n.colorSchemes[e]={...t!==!0&&t,palette:$0({...t===!0?{}:t.palette,mode:e})})}function FT(n={},...e){const{palette:t,cssVariables:r=!1,colorSchemes:i=t?void 0:{light:!0},defaultColorScheme:s=t==null?void 0:t.mode,...a}=n,c=s||"light",u=i==null?void 0:i[c],d={...i,...t?{[c]:{...typeof u!="boolean"&&u,palette:t}}:void 0};if(r===!1){if(!("colorSchemes"in n))return Ag(n,...e);let h=t;"palette"in n||d[c]&&(d[c]!==!0?h=d[c].palette:c==="dark"&&(h={mode:"dark"}));const p=Ag({...n,palette:h},...e);return p.defaultColorScheme=c,p.colorSchemes=d,p.palette.mode==="light"&&(p.colorSchemes.light={...d.light!==!0&&d.light,palette:p.palette},l1(p,"dark",d.dark)),p.palette.mode==="dark"&&(p.colorSchemes.dark={...d.dark!==!0&&d.dark,palette:p.palette},l1(p,"light",d.light)),p}return!t&&!("light"in d)&&c==="light"&&(d.light=!0),YD({...a,colorSchemes:d,defaultColorScheme:c,...typeof r!="boolean"&&r},...e)}function qD(n){return String(n).match(/[\d.\-+]*\s*(.*)/)[1]||""}function XD(n){return parseFloat(n)}const QD=FT();function JD(n){return n!=="ownerState"&&n!=="theme"&&n!=="sx"&&n!=="as"}const ZD=n=>JD(n)&&n!=="classes",B0=AT({themeId:rT,defaultTheme:QD,rootShouldForwardProp:ZD});function eO(){return P0}const $T=sD;function U0(n){return iD(n)}function tO(n){return typeof n.main=="string"}function nO(n,e=[]){if(!tO(n))return!1;for(const t of e)if(!n.hasOwnProperty(t)||typeof n[t]!="string")return!1;return!0}function rO(n=[]){return([,e])=>e&&nO(e,n)}function iO(n){return Uh("MuiTypography",n)}D0("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const sO={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},oO=eO(),aO=n=>{const{align:e,gutterBottom:t,noWrap:r,paragraph:i,variant:s,classes:a}=n,c={root:["root",s,n.align!=="inherit"&&`align${gu(e)}`,t&&"gutterBottom",r&&"noWrap",i&&"paragraph"]};return F0(c,iO,a)},lO=B0("span",{name:"MuiTypography",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.variant&&e[t.variant],t.align!=="inherit"&&e[`align${gu(t.align)}`],t.noWrap&&e.noWrap,t.gutterBottom&&e.gutterBottom,t.paragraph&&e.paragraph]}})($T(({theme:n})=>{var e;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(n.typography).filter(([t,r])=>t!=="inherit"&&r&&typeof r=="object").map(([t,r])=>({props:{variant:t},style:r})),...Object.entries(n.palette).filter(rO()).map(([t])=>({props:{color:t},style:{color:(n.vars||n).palette[t].main}})),...Object.entries(((e=n.palette)==null?void 0:e.text)||{}).filter(([,t])=>typeof t=="string").map(([t])=>({props:{color:`text${gu(t)}`},style:{color:(n.vars||n).palette.text[t]}})),{props:({ownerState:t})=>t.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:t})=>t.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:t})=>t.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:t})=>t.paragraph,style:{marginBottom:16}}]}})),c1={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},u1=F.forwardRef(function(e,t){const{color:r,...i}=U0({props:e,name:"MuiTypography"}),s=!sO[r],a=oO({...i,...s&&{color:r}}),{align:c="inherit",className:u,component:d,gutterBottom:h=!1,noWrap:p=!1,paragraph:g=!1,variant:x="body1",variantMapping:v=c1,...S}=a,T={...a,align:c,color:r,className:u,component:d,gutterBottom:h,noWrap:p,paragraph:g,variant:x,variantMapping:v},_=d||(g?"p":v[x]||c1[x])||"span",C=aO(T);return A.jsx(lO,{as:_,ref:t,className:ns(C.root,u),...S,ownerState:T,style:{...c!=="inherit"&&{"--Typography-textAlign":c},...S.style}})}),cO=D0("MuiBox",["root"]),uO=FT(),Jo=B2({themeId:rT,defaultTheme:uO,defaultClassName:cO.root,generateClassName:LT.generate});function dO(n){return Uh("MuiSkeleton",n)}D0("MuiSkeleton",["root","text","rectangular","rounded","circular","pulse","wave","withChildren","fitContent","heightAuto"]);const fO=n=>{const{classes:e,variant:t,animation:r,hasChildren:i,width:s,height:a}=n;return F0({root:["root",t,r,i&&"withChildren",i&&!s&&"fitContent",i&&!a&&"heightAuto"]},dO,e)},kg=vT`
  0% {
    opacity: 1;
  }

  50% {
    opacity: 0.4;
  }

  100% {
    opacity: 1;
  }
`,Ig=vT`
  0% {
    transform: translateX(-100%);
  }

  50% {
    /* +0.5s of delay between each loop */
    transform: translateX(100%);
  }

  100% {
    transform: translateX(100%);
  }
`,hO=typeof kg!="string"?R0`
        animation: ${kg} 2s ease-in-out 0.5s infinite;
      `:null,pO=typeof Ig!="string"?R0`
        &::after {
          animation: ${Ig} 2s linear 0.5s infinite;
        }
      `:null,mO=B0("span",{name:"MuiSkeleton",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[t.variant],t.animation!==!1&&e[t.animation],t.hasChildren&&e.withChildren,t.hasChildren&&!t.width&&e.fitContent,t.hasChildren&&!t.height&&e.heightAuto]}})($T(({theme:n})=>{const e=qD(n.shape.borderRadius)||"px",t=XD(n.shape.borderRadius);return{display:"block",backgroundColor:n.vars?n.vars.palette.Skeleton.bg:IT(n.palette.text.primary,n.palette.mode==="light"?.11:.13),height:"1.2em",variants:[{props:{variant:"text"},style:{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 55%",transform:"scale(1, 0.60)",borderRadius:`${t}${e}/${Math.round(t/.6*10)/10}${e}`,"&:empty:before":{content:'"\\00a0"'}}},{props:{variant:"circular"},style:{borderRadius:"50%"}},{props:{variant:"rounded"},style:{borderRadius:(n.vars||n).shape.borderRadius}},{props:({ownerState:r})=>r.hasChildren,style:{"& > *":{visibility:"hidden"}}},{props:({ownerState:r})=>r.hasChildren&&!r.width,style:{maxWidth:"fit-content"}},{props:({ownerState:r})=>r.hasChildren&&!r.height,style:{height:"auto"}},{props:{animation:"pulse"},style:hO||{animation:`${kg} 2s ease-in-out 0.5s infinite`}},{props:{animation:"wave"},style:{position:"relative",overflow:"hidden",WebkitMaskImage:"-webkit-radial-gradient(white, black)","&::after":{background:`linear-gradient(
                90deg,
                transparent,
                ${(n.vars||n).palette.action.hover},
                transparent
              )`,content:'""',position:"absolute",transform:"translateX(-100%)",bottom:0,left:0,right:0,top:0}}},{props:{animation:"wave"},style:pO||{"&::after":{animation:`${Ig} 2s linear 0.5s infinite`}}}]}})),Or=F.forwardRef(function(e,t){const r=U0({props:e,name:"MuiSkeleton"}),{animation:i="pulse",className:s,component:a="span",height:c,style:u,variant:d="text",width:h,...p}=r,g={...r,animation:i,component:a,variant:d,hasChildren:!!p.children},x=fO(g);return A.jsx(mO,{as:a,ref:t,className:ns(x.root,s),ownerState:g,...p,style:{width:h,height:c,...u}})}),Om=yD({createStyledComponent:B0("div",{name:"MuiStack",slot:"Root",overridesResolver:(n,e)=>e.root}),useThemeProps:n=>U0({props:n,name:"MuiStack"})}),mo=({movie:n,href:e,title:t,loading:r})=>{const{t:i}=Lr(),{items:s=[],type_list:a}=n||{},[c]=jS(),u=c.get("tab");return r?A.jsx("div",{children:A.jsx(Jo,{display:"flex",flexWrap:"wrap",gap:4,className:"loading",children:[...Array(14)].map((d,h)=>A.jsxs(Jo,{display:"flex",flexDirection:"column",gap:1,marginTop:"20px",width:"150px",children:[A.jsx(Or,{sx:{backgroundColor:"#616161"},variant:"rectangular",width:"120px",height:"180px"}),A.jsxs(Jo,{width:"100%",children:[A.jsx(Or,{sx:{backgroundColor:"#616161"},variant:"text",width:"100%",height:30}),A.jsx(Or,{sx:{backgroundColor:"#616161"},variant:"text",width:"80%"})]})]},h))})}):A.jsxs("section",{id:e,children:[A.jsx(tT,{className:n==null?void 0:n.type_list,context:i(t),contextSub:""}),A.jsx("ul",{className:`movie movies-${a} row `,children:s.map(d=>A.jsx("li",{className:"movie-item col-6 col-md-3 col-lg-2 ","data-name":d.name,children:A.jsx(RI,{lang:d.lang,episode_current:d.episode_current,name:d.name,origin_name:d.origin_name,poster_url:d.poster_url,quality:d.quality,slug:d.slug})},d._id))}),a&&u!=="phim-le"&&u!=="hoat-hinh"&&u!=="phim-bo"&&u!=="tv-shows"&&A.jsx("div",{className:"see-more-container",children:A.jsx(sr,{to:`last-update/?tab=${a}`,state:{movie:n,type_list:a,title:t},children:A.jsx(nT,{})})})]})},BT=F.createContext(void 0),j0=()=>{const n=F.useContext(BT);if(!n)throw new Error("useMovies must be used within a MovieProvider");return n},gO=()=>{const{phimLe:n,phimBo:e,hoatHinh:t,tvShows:r,loading:i,hasMore:s,loadMore:a}=j0(),{t:c}=Lr();return A.jsxs("div",{className:"home text-white ",children:[A.jsxs("h1",{className:"pt-3 text-center welcome",children:[c("common.welcome"),""]}),A.jsx("div",{className:"cartoon",children:A.jsx(mo,{movie:t,title:"movie.cartoon.title.heading",loading:i,hasMore:s["hoat-hinh"],loadMore:()=>a("hoat-hinh")})}),A.jsx("div",{className:"single-movie",children:A.jsx(mo,{href:"single-section",movie:n,title:"movie.singlemovie.title.heading",loading:i,hasMore:s["phim-le"],loadMore:()=>a("phim-le")})}),A.jsx("div",{className:"tv-shows",children:A.jsx(mo,{href:"tvshows-section",movie:r,title:"movie.tvshows.title.heading",loading:i,hasMore:s.tvShows,loadMore:()=>a("tvShows")})}),A.jsx("div",{className:"tv-series",children:A.jsx(mo,{href:"tvseries-section",movie:e,title:"movie.tvseries.title.heading",loading:i,hasMore:s["phim-bo"],loadMore:()=>a("phim-bo")})})]})},yO=({register:n,onChange:e,onSubmit:t,loading:r})=>A.jsxs(A.Fragment,{children:[A.jsxs("form",{onSubmit:t,children:[A.jsx(sr,{to:"/",children:A.jsxs("span",{className:"back-home text-black",children:[A.jsx(v0,{}),"Back Home"]})}),A.jsx("h1",{className:"login-title",children:"Create an account"}),A.jsxs("div",{className:"form-input",children:[A.jsx(su,{type:"email",className:"email",name:"email",value:n.email,placeholder:"Enter your email",onChange:e}),A.jsx(su,{type:"text",className:"username",name:"username",value:n.username,placeholder:"Enter your username",onChange:e}),A.jsx(su,{className:"password",type:"password",value:n.password,name:"password",placeholder:"Enter your password",onChange:e}),A.jsx(Hs,{className:"btn btn-dark btn-login",type:"submit",text:r?"Registering...":"Register",disabled:r})]})]}),A.jsx("div",{className:"form-to-sign-in",children:A.jsxs("p",{className:"text-white text-center ",children:["Don't you have an account? ",A.jsx(sr,{to:"/login",children:"Login"})]})})]}),vO=()=>{const n=rc(),[e,t]=F.useState({email:"",username:"",password:""}),[r,i]=F.useState(!1),[s,a]=F.useState(null),c=d=>{const{name:h,value:p}=d.target;t({...e,[h]:p})},u=async d=>{d.preventDefault(),i(!0);try{const h=await $A(e);h.status==="success"?n("/login"):a(h.message)}catch(h){a(Au(h))}finally{i(!1)}};return A.jsx("div",{className:"login register",children:A.jsx("div",{className:"login-form register-form",children:A.jsx(yO,{register:e,onChange:c,onSubmit:u,loading:r,error:s})})})},xO=()=>{var g,x,v;const n=os(),e=(x=(g=n.state)==null?void 0:g.movie)==null?void 0:x.type_list,t=(v=n.state)==null?void 0:v.title,{phimLe:r,phimBo:i,hoatHinh:s,tvShows:a,loading:c,hasMore:u,loadMore:d}=j0(),h=e==="phim-le"?r:e==="phim-bo"?i:e==="hoat-hinh"?s:a,p=()=>{d(e)};return A.jsx("div",{className:"pagination ",children:A.jsxs("div",{className:"pagination-item text-center ",children:[A.jsx(mo,{movie:h,title:t,loading:c,hasMore:u[e]}),u[e]&&!c&&A.jsx(nT,{onClick:p})]})})},SO=()=>{const{t:n}=Lr(),e=h0(),t=n("footer.sections",{returnObjects:!0});return A.jsx("footer",{style:{backgroundColor:"#12171b",color:"#ffffff",padding:"5px 40px",fontFamily:"Arial, sans-serif"},children:A.jsxs("div",{style:e==="mobile"?void 0:{display:"flex",justifyContent:"space-between"},className:"mt-5 container align-items-center",children:[A.jsxs("div",{style:{maxWidth:"300px"},children:[A.jsx(qS,{logoName:n("footer.logo")}),A.jsx("hr",{}),A.jsx("p",{style:{fontSize:"14px",lineHeight:"1.6"},children:n("footer.description")}),A.jsx("p",{style:{fontSize:"14px",marginTop:"10px"},children:n("footer.contact")})]}),A.jsx("div",{style:e==="mobile"?void 0:{display:"flex",gap:"40px"},children:Object.keys(t).map(r=>A.jsx(EO,{title:t[r].title,items:t[r].items},r))})]})})},EO=({title:n,items:e})=>A.jsxs("div",{children:[A.jsx("h2",{style:{marginBottom:"10px"},children:n}),A.jsx("ul",{style:{listStyle:"none",padding:"0",fontSize:"14px",lineHeight:"1.8"},children:e.map((t,r)=>A.jsx(TO,{name:t},r))})]}),TO=({name:n})=>A.jsx("li",{children:A.jsx(sr,{to:"#",style:{color:"#ffffff",textDecoration:"none"},children:n})}),bO=()=>A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"main container",children:[" ",A.jsx(r0,{})]}),A.jsx(SO,{})]}),wO="phim",zl="v1/api/",_O=async n=>{try{return await oc.get(`${wO}/${n}`)}catch(e){throw console.error("Error fetching movie details:",e),e}},LO=async n=>{try{return(await oc.get(`${zl}/danh-sach/${n}`)).data}catch(e){throw new Error(Au(e))}},CO=async n=>{try{const e=[`${zl}/danh-sach/phim-le`,`${zl}/danh-sach/phim-bo`,`${zl}/danh-sach/hoat-hinh`,`${zl}/danh-sach/tv-shows`];let t=[];for(const r of e){const a=(await oc.get(r)).data.items.filter(c=>c.category.some(u=>u.slug===n));t=t.concat(a)}return t.length>0?t:null}catch(e){throw console.error("Error fetching movies:",e),new Error("Failed to fetch movie data")}},RO=async n=>(await oc.get(`${zl}/tim-kiem?keyword=${n}`)).data,UT=F.createContext(void 0),Du=()=>{const n=F.useContext(UT);if(!n)throw new Error("useEpisode must be used within an EpisodeProvider");return n};function AO(n){return Wn({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M333.5,201.4c0-22.1-15.6-34.3-43-34.3h-50.4v71.2h42.5C315.4,238.2,333.5,225,333.5,201.4z M517,188.6 c-9.5-30.9-10.9-68.8-9.8-98.1c1.1-30.5-22.7-58.5-54.7-58.5H123.7c-32.1,0-55.8,28.1-54.7,58.5c1,29.3-0.3,67.2-9.8,98.1 c-9.6,31-25.7,50.6-52.2,53.1v28.5c26.4,2.5,42.6,22.1,52.2,53.1c9.5,30.9,10.9,68.8,9.8,98.1c-1.1,30.5,22.7,58.5,54.7,58.5h328.7 c32.1,0,55.8-28.1,54.7-58.5c-1-29.3,0.3-67.2,9.8-98.1c9.6-31,25.7-50.6,52.1-53.1v-28.5C542.7,239.2,526.5,219.6,517,188.6z M300.2,375.1h-97.9V136.8h97.4c43.3,0,71.7,23.4,71.7,59.4c0,25.3-19.1,47.9-43.5,51.8v1.3c33.2,3.6,55.5,26.6,55.5,58.3 C383.4,349.7,352.1,375.1,300.2,375.1z M290.2,266.4h-50.1v78.4h52.3c34.2,0,52.3-13.7,52.3-39.5 C344.7,279.6,326.1,266.4,290.2,266.4z"},child:[]}]})(n)}function kO(n){return Wn({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 508c-6.7 0-13.5-1.8-19.4-5.2l-61.7-36.5c-9.2-5.2-4.7-7-1.7-8 12.3-4.3 14.8-5.2 27.9-12.7 1.4-.8 3.2-.5 4.6.4l47.4 28.1c1.7 1 4.1 1 5.7 0l184.7-106.6c1.7-1 2.8-3 2.8-5V149.3c0-2.1-1.1-4-2.9-5.1L226.8 37.7c-1.7-1-4-1-5.7 0L36.6 144.3c-1.8 1-2.9 3-2.9 5.1v213.1c0 2 1.1 4 2.9 4.9l50.6 29.2c27.5 13.7 44.3-2.4 44.3-18.7V167.5c0-3 2.4-5.3 5.4-5.3h23.4c2.9 0 5.4 2.3 5.4 5.3V378c0 36.6-20 57.6-54.7 57.6-10.7 0-19.1 0-42.5-11.6l-48.4-27.9C8.1 389.2.7 376.3.7 362.4V149.3c0-13.8 7.4-26.8 19.4-33.7L204.6 9c11.7-6.6 27.2-6.6 38.8 0l184.7 106.7c12 6.9 19.4 19.8 19.4 33.7v213.1c0 13.8-7.4 26.7-19.4 33.7L243.4 502.8c-5.9 3.4-12.6 5.2-19.4 5.2zm149.1-210.1c0-39.9-27-50.5-83.7-58-57.4-7.6-63.2-11.5-63.2-24.9 0-11.1 4.9-25.9 47.4-25.9 37.9 0 51.9 8.2 57.7 33.8.5 2.4 2.7 4.2 5.2 4.2h24c1.5 0 2.9-.6 3.9-1.7s1.5-2.6 1.4-4.1c-3.7-44.1-33-64.6-92.2-64.6-52.7 0-84.1 22.2-84.1 59.5 0 40.4 31.3 51.6 81.8 56.6 60.5 5.9 65.2 14.8 65.2 26.7 0 20.6-16.6 29.4-55.5 29.4-48.9 0-59.6-12.3-63.2-36.6-.4-2.6-2.6-4.5-5.3-4.5h-23.9c-3 0-5.3 2.4-5.3 5.3 0 31.1 16.9 68.2 97.8 68.2 58.4-.1 92-23.2 92-63.4z"},child:[]}]})(n)}function IO(n){return Wn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M418.2 177.2c-5.4-1.8-10.8-3.5-16.2-5.1.9-3.7 1.7-7.4 2.5-11.1 12.3-59.6 4.2-107.5-23.1-123.3-26.3-15.1-69.2.6-112.6 38.4-4.3 3.7-8.5 7.6-12.5 11.5-2.7-2.6-5.5-5.2-8.3-7.7-45.5-40.4-91.1-57.4-118.4-41.5-26.2 15.2-34 60.3-23 116.7 1.1 5.6 2.3 11.1 3.7 16.7-6.4 1.8-12.7 3.8-18.6 5.9C38.3 196.2 0 225.4 0 255.6c0 31.2 40.8 62.5 96.3 81.5 4.5 1.5 9 3 13.6 4.3-1.5 6-2.8 11.9-4 18-10.5 55.5-2.3 99.5 23.9 114.6 27 15.6 72.4-.4 116.6-39.1 3.5-3.1 7-6.3 10.5-9.7 4.4 4.3 9 8.4 13.6 12.4 42.8 36.8 85.1 51.7 111.2 36.6 27-15.6 35.8-62.9 24.4-120.5-.9-4.4-1.9-8.9-3-13.5 3.2-.9 6.3-1.9 9.4-2.9 57.7-19.1 99.5-50 99.5-81.7 0-30.3-39.4-59.7-93.8-78.4zM282.9 92.3c37.2-32.4 71.9-45.1 87.7-36 16.9 9.7 23.4 48.9 12.8 100.4-.7 3.4-1.4 6.7-2.3 10-22.2-5-44.7-8.6-67.3-10.6-13-18.6-27.2-36.4-42.6-53.1 3.9-3.7 7.7-7.2 11.7-10.7zM167.2 307.5c5.1 8.7 10.3 17.4 15.8 25.9-15.6-1.7-31.1-4.2-46.4-7.5 4.4-14.4 9.9-29.3 16.3-44.5 4.6 8.8 9.3 17.5 14.3 26.1zm-30.3-120.3c14.4-3.2 29.7-5.8 45.6-7.8-5.3 8.3-10.5 16.8-15.4 25.4-4.9 8.5-9.7 17.2-14.2 26-6.3-14.9-11.6-29.5-16-43.6zm27.4 68.9c6.6-13.8 13.8-27.3 21.4-40.6s15.8-26.2 24.4-38.9c15-1.1 30.3-1.7 45.9-1.7s31 .6 45.9 1.7c8.5 12.6 16.6 25.5 24.3 38.7s14.9 26.7 21.7 40.4c-6.7 13.8-13.9 27.4-21.6 40.8-7.6 13.3-15.7 26.2-24.2 39-14.9 1.1-30.4 1.6-46.1 1.6s-30.9-.5-45.6-1.4c-8.7-12.7-16.9-25.7-24.6-39s-14.8-26.8-21.5-40.6zm180.6 51.2c5.1-8.8 9.9-17.7 14.6-26.7 6.4 14.5 12 29.2 16.9 44.3-15.5 3.5-31.2 6.2-47 8 5.4-8.4 10.5-17 15.5-25.6zm14.4-76.5c-4.7-8.8-9.5-17.6-14.5-26.2-4.9-8.5-10-16.9-15.3-25.2 16.1 2 31.5 4.7 45.9 8-4.6 14.8-10 29.2-16.1 43.4zM256.2 118.3c10.5 11.4 20.4 23.4 29.6 35.8-19.8-.9-39.7-.9-59.5 0 9.8-12.9 19.9-24.9 29.9-35.8zM140.2 57c16.8-9.8 54.1 4.2 93.4 39 2.5 2.2 5 4.6 7.6 7-15.5 16.7-29.8 34.5-42.9 53.1-22.6 2-45 5.5-67.2 10.4-1.3-5.1-2.4-10.3-3.5-15.5-9.4-48.4-3.2-84.9 12.6-94zm-24.5 263.6c-4.2-1.2-8.3-2.5-12.4-3.9-21.3-6.7-45.5-17.3-63-31.2-10.1-7-16.9-17.8-18.8-29.9 0-18.3 31.6-41.7 77.2-57.6 5.7-2 11.5-3.8 17.3-5.5 6.8 21.7 15 43 24.5 63.6-9.6 20.9-17.9 42.5-24.8 64.5zm116.6 98c-16.5 15.1-35.6 27.1-56.4 35.3-11.1 5.3-23.9 5.8-35.3 1.3-15.9-9.2-22.5-44.5-13.5-92 1.1-5.6 2.3-11.2 3.7-16.7 22.4 4.8 45 8.1 67.9 9.8 13.2 18.7 27.7 36.6 43.2 53.4-3.2 3.1-6.4 6.1-9.6 8.9zm24.5-24.3c-10.2-11-20.4-23.2-30.3-36.3 9.6.4 19.5.6 29.5.6 10.3 0 20.4-.2 30.4-.7-9.2 12.7-19.1 24.8-29.6 36.4zm130.7 30c-.9 12.2-6.9 23.6-16.5 31.3-15.9 9.2-49.8-2.8-86.4-34.2-4.2-3.6-8.4-7.5-12.7-11.5 15.3-16.9 29.4-34.8 42.2-53.6 22.9-1.9 45.7-5.4 68.2-10.5 1 4.1 1.9 8.2 2.7 12.2 4.9 21.6 5.7 44.1 2.5 66.3zm18.2-107.5c-2.8.9-5.6 1.8-8.5 2.6-7-21.8-15.6-43.1-25.5-63.8 9.6-20.4 17.7-41.4 24.5-62.9 5.2 1.5 10.2 3.1 15 4.7 46.6 16 79.3 39.8 79.3 58 0 19.6-34.9 44.9-84.8 61.4zm-149.7-15c25.3 0 45.8-20.5 45.8-45.8s-20.5-45.8-45.8-45.8c-25.3 0-45.8 20.5-45.8 45.8s20.5 45.8 45.8 45.8z"},child:[]}]})(n)}function PO(n){return Wn({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448 73.143v45.714C448 159.143 347.667 192 224 192S0 159.143 0 118.857V73.143C0 32.857 100.333 0 224 0s224 32.857 224 73.143zM448 176v102.857C448 319.143 347.667 352 224 352S0 319.143 0 278.857V176c48.125 33.143 136.208 48.572 224 48.572S399.874 209.143 448 176zm0 160v102.857C448 479.143 347.667 512 224 512S0 479.143 0 438.857V336c48.125 33.143 136.208 48.572 224 48.572S399.874 369.143 448 336z"},child:[]}]})(n)}function DO(n){return Wn({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"},child:[]}]})(n)}function jT(n){return Wn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M480 160H32c-17.673 0-32-14.327-32-32V64c0-17.673 14.327-32 32-32h448c17.673 0 32 14.327 32 32v64c0 17.673-14.327 32-32 32zm-48-88c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm-64 0c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm112 248H32c-17.673 0-32-14.327-32-32v-64c0-17.673 14.327-32 32-32h448c17.673 0 32 14.327 32 32v64c0 17.673-14.327 32-32 32zm-48-88c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm-64 0c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm112 248H32c-17.673 0-32-14.327-32-32v-64c0-17.673 14.327-32 32-32h448c17.673 0 32 14.327 32 32v64c0 17.673-14.327 32-32 32zm-48-88c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm-64 0c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24z"},child:[]}]})(n)}function OO(n){return Wn({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M148 288h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm108-12v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm96 0v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm-96 96v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm-96 0v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm192 0v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm96-260v352c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V112c0-26.5 21.5-48 48-48h48V12c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v52h128V12c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v52h48c26.5 0 48 21.5 48 48zm-48 346V160H48v298c0 3.3 2.7 6 6 6h340c3.3 0 6-2.7 6-6z"},child:[]}]})(n)}function NO(n){return Wn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Clock_2"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M12,21.933A9.933,9.933,0,1,1,21.933,12,9.944,9.944,0,0,1,12,21.933ZM12,3.067A8.933,8.933,0,1,0,20.933,12,8.943,8.943,0,0,0,12,3.067Z"},child:[]},{tag:"path",attr:{d:"M18,12.5H12a.429.429,0,0,1-.34-.14c-.01,0-.01-.01-.02-.02A.429.429,0,0,1,11.5,12V6a.5.5,0,0,1,1,0v5.5H18A.5.5,0,0,1,18,12.5Z"},child:[]}]}]}]})(n)}const MO=({actors:n})=>A.jsx(A.Fragment,{children:A.jsx("ul",{children:n&&n.map((e,t)=>A.jsx("li",{className:"color-text",children:typeof e=="string"?e+", ":e.name+", "},t))})}),H0=({episode:n,fullEpisodes:e,server_name:t})=>{const r=n.flatMap(c=>c.server_data.sort((u,d)=>d.filename.localeCompare(u.filename)).slice(0,5)),{id:i}=e0(),{setCurrentEpisode:s}=Du(),a=c=>{c&&s(c)};return A.jsxs("div",{className:"episode-list",children:[t&&A.jsxs("h2",{className:"server_name",children:[A.jsx("span",{className:"icon",children:A.jsx(jT,{})}),n.map(c=>c.server_name)]}),A.jsx(A.Fragment,{children:n&&e?A.jsx("ul",{className:"full-episodes",children:n.map(c=>c.server_data.sort((u,d)=>u.filename.localeCompare(d.filename)).map((u,d)=>A.jsx("li",{className:"p-1",children:A.jsx("span",{children:A.jsx(sr,{to:`/movie-play/${i}/${u.slug}`,onClick:()=>a(u),children:A.jsx(Hs,{text:u.name})})})},d)))}):A.jsx("ul",{className:"top-five",children:r&&r.map((c,u)=>A.jsx("li",{children:A.jsx(sr,{to:`/movie-play/${i}/${c.slug}`,onClick:()=>a(c),children:A.jsx(Hs,{text:c.name})})},u))})})]})},FO=({categories:n})=>A.jsx(A.Fragment,{children:A.jsx("ul",{children:n&&n.map((e,t)=>A.jsxs("li",{className:"color-text",children:[e.name,","]},t))})}),$O=({poster_url:n,name:e,chieurap:t,time:r,year:i,actor:s,lang:a,category:c,country:u,episodes:d,origin_name:h,episode_current:p})=>{const{id:g}=e0(),x=h0(),{t:v}=Lr(),S=d&&d.map(C=>C.server_data[0].slug),{setCurrentEpisode:T}=Du(),_=()=>{const C=d&&d[0].server_data[0];C&&T({filename:C.filename,link_embed:C.link_embed,link_m3u8:C.link_m3u8,name:C.name,slug:C.slug})};return A.jsx("div",{className:`movie-detail-box pt-3 ${x==="desktop"?"container":""}`,children:A.jsxs("div",{className:"movie-detail row",children:[A.jsx("div",{className:"image-poster my-3 col-md-3 col-12",children:A.jsxs("div",{className:"image-banner",children:[" ",A.jsx("img",{src:n,alt:"",className:"img"}),A.jsx(sr,{to:`/movie-play/${g}/${S}`,onClick:_,children:A.jsx(Hs,{text:v("common.seenow"),className:"halim-watch-box",icon:A.jsx(DO,{})})})]})}),A.jsxs("div",{className:"movie-info my-3 col-md-9 col-12",children:[A.jsx("h1",{className:"title mb-title",children:e}),A.jsx("h6",{className:"origin-name  mb-title",children:A.jsx("i",{children:h})}),A.jsx("hr",{}),A.jsxs("div",{className:"time mb-title",children:[A.jsxs("p",{className:"calendar ",children:[A.jsx("span",{className:"icon",children:A.jsx(OO,{})}),A.jsx("span",{className:"color-text",children:i})]}),A.jsxs("div",{className:"lock",children:[A.jsx("span",{className:"icon",children:A.jsx(NO,{})}),r]})]}),A.jsxs("div",{className:"cinema mb-title",children:[A.jsxs("span",{children:[v("movie.movieDetails.cinema"),": "]}),v(t?"common.yes":"common.no")]}),A.jsxs("div",{className:"lang mb-title",children:[A.jsxs("span",{children:[v("movie.movieDetails.language"),": "]}),a]}),A.jsxs("div",{className:"episode mb-title",children:[A.jsxs("span",{children:[v("movie.movieDetails.episodeStatus"),": "]}),p]}),A.jsxs("div",{className:"lastEp mb-title cast ",children:[A.jsxs("span",{children:[" ",v("movie.movieDetails.newestEpisode"),": "]}),A.jsx(H0,{fullEpisodes:!1,episode:d||[]})]}),A.jsxs("div",{className:"country mb-title",children:[A.jsxs("span",{children:[v("movie.movieDetails.country"),": "]}),u==null?void 0:u.map(C=>C.name)]}),A.jsxs("div",{className:"cast mb-title",children:[A.jsxs("span",{children:[v("movie.movieDetails.cast"),": "]}),s&&A.jsx(MO,{actors:s})]}),A.jsxs("div",{className:"categorty cast mb-title",children:[A.jsxs("span",{children:[v("movie.movieDetails.category"),": "]})," ",c&&A.jsx(FO,{categories:c})]})]})]})})};function BO(n){return Wn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M479 447.77 268.43 56.64a8 8 0 0 0-14.09 0L43.73 447.77a8 8 0 0 0 7.05 11.79H472a8 8 0 0 0 7-11.79zm-197.62-36.29h-40v-40h40zm-4-63.92h-32l-6-160h44z"},child:[]}]})(n)}const UO=()=>{const{t:n}=Lr();return A.jsxs("div",{className:"movie-search-tip",children:[A.jsx("div",{className:"tip-icon",children:A.jsx(BO,{height:100})}),A.jsxs("div",{className:"tip-msg",children:[n("movie.movieSearchTip.message")," ",A.jsx("span",{className:"syntax",children:n("movie.movieSearchTip.syntax")}),"."," ",n("movie.movieSearchTip.example")," ",A.jsx("span",{className:"name",children:n("movie.movieSearchTip.movieName")}),","," ",n("movie.movieSearchTip.domain"),". ",n("movie.movieSearchTip.website")," ",n("movie.movieSearchTip.commentNote")]})]})},jO=({content:n})=>{const[e,t]=F.useState(!1),{t:r}=Lr(),i=F.useRef(null),s=()=>{t(a=>!a)};return A.jsxs(A.Fragment,{children:[A.jsx("h2",{className:"content-heading",children:r("movie.moviecontent")}),A.jsx("hr",{}),A.jsx("p",{className:`content ${e?"expanded":""}`,ref:i,children:n}),A.jsx("span",{className:"compact",onClick:s,children:e?r("common.collapse")+"...":r("common.view")+"..."})]})},HO=n=>{const[e,t]=F.useState(null);return F.useEffect(()=>{(i=>{if(i===""){t(null);return}switch(i.toLowerCase()){case"hoathinh":t("hoat-hinh");break;case"series":t("phim-bo");break;case"single":t("phim-le");break;case"tvshows":t("tv-shows");break;default:t(null);break}})(n)},[n]),e},GO=()=>A.jsxs(Om,{spacing:2,sx:{padding:2},children:[A.jsx(u1,{variant:"h4",children:A.jsx(Or,{width:"40%",animation:"wave",sx:{backgroundColor:"#616161"}})}),A.jsxs(Jo,{display:"flex",gap:2,children:[A.jsx(Or,{variant:"rectangular",animation:"wave",width:300,height:450,sx:{backgroundColor:"#424242",borderRadius:"10px"}}),A.jsxs(Om,{spacing:1,flexGrow:1,children:[A.jsx(Or,{width:"70%",animation:"wave",sx:{backgroundColor:"#616161"}}),A.jsx(Or,{width:"50%",animation:"wave",sx:{backgroundColor:"#616161"}}),A.jsx(Or,{width:"80%",animation:"wave",sx:{backgroundColor:"#616161"}}),A.jsx(Or,{width:"60%",animation:"wave",sx:{backgroundColor:"#616161"}}),A.jsx(Or,{width:"90%",animation:"wave",sx:{backgroundColor:"#616161"}})]})]}),A.jsxs(Om,{spacing:1,children:[A.jsx(u1,{variant:"h6",children:A.jsx(Or,{width:"30%",animation:"wave",sx:{backgroundColor:"#616161"}})}),A.jsx(Jo,{display:"flex",gap:1,flexWrap:"wrap",children:Array.from({length:5}).map((n,e)=>A.jsx(Or,{variant:"rectangular",animation:"wave",width:80,height:40,sx:{backgroundColor:"#424242",borderRadius:"5px"}},e))})]})]}),VO=()=>{const{id:n}=e0(),{phimLe:e,phimBo:t,hoatHinh:r,tvShows:i,loading:s,hasMore:a,loadMore:c}=j0(),[u,d]=F.useState(null),h=HO((u==null?void 0:u.type)??""),{setCurrentMovie:p,setEpisodes:g,episodes:x,currentMovie:v,setCategoryMovieType:S}=Du(),_=(k=>({"hoat-hinh":r,"phim-le":e,"tv-shows":i,"phim-bo":t})[k])(h??null);F.useEffect(()=>{S(_)},[_]);const C=async k=>{try{const O=await _O(k);(O==null?void 0:O.status)===!0&&(d(O.movie),p(O.movie),g(O.episodes??[]))}catch(O){console.error("Error fetching movie details:",O)}};return F.useEffect(()=>{n&&(p(null),g([]),C(n))},[n]),s||!v?A.jsx(GO,{}):A.jsxs("div",{className:"movie-detail",children:[A.jsx("div",{className:"movie-detail-infor-box",children:A.jsx($O,{...v,episodes:x})}),A.jsx("div",{className:"movie-detail-episodes-box mt-3",children:A.jsx(H0,{server_name:!0,episode:x,fullEpisodes:!0})}),A.jsx("div",{className:"movie-detail-searchtip-box mt-3",children:A.jsx(UO,{})}),A.jsx("div",{className:"movie-detail-content-box mt-3",children:A.jsx(jO,{content:(u==null?void 0:u.content)??""})}),A.jsx("div",{className:"same-category",children:A.jsx(mo,{movie:_||{items:[],titlePage:"",type_list:""},title:"common.samecategory",loading:s,hasMore:a[h??""],loadMore:()=>c(h??"")})}),A.jsx("div",{className:"h",style:{height:"10vh"}})]})},zO=()=>{const n=F.useContext(f0);if(!n)throw new Error("YourComponent must be used within a MovieGenresProvider");const{movieGenres:e,title:t,loading:r}=n;return r?A.jsx("div",{children:A.jsx(Jo,{display:"flex",flexWrap:"wrap",gap:4,className:"loading",children:[...Array(14)].map((i,s)=>A.jsxs(Jo,{display:"flex",flexDirection:"column",gap:1,marginTop:"20px",width:"150px",children:[A.jsx(Or,{sx:{backgroundColor:"#616161"},variant:"rectangular",width:"120px",height:"180px"}),A.jsxs(Jo,{width:"100%",children:[A.jsx(Or,{sx:{backgroundColor:"#616161"},variant:"text",width:"100%",height:30}),A.jsx(Or,{sx:{backgroundColor:"#616161"},variant:"text",width:"80%"})]})]},s))})}):A.jsx(A.Fragment,{children:A.jsxs("div",{className:"cartoon",children:[" ",e&&A.jsx("div",{className:"cartoon",children:A.jsx(mo,{movie:{items:e,titlePage:"",type_list:""},title:t})})]})})};function KO(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var HT={exports:{}};(function(n,e){(function(t){var r=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,i=/^(?=([^\/?#]*))\1([^]*)$/,s=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,c={buildAbsoluteURL:function(u,d,h){if(h=h||{},u=u.trim(),d=d.trim(),!d){if(!h.alwaysNormalize)return u;var p=c.parseURL(u);if(!p)throw new Error("Error trying to parse base URL.");return p.path=c.normalizePath(p.path),c.buildURLFromParts(p)}var g=c.parseURL(d);if(!g)throw new Error("Error trying to parse relative URL.");if(g.scheme)return h.alwaysNormalize?(g.path=c.normalizePath(g.path),c.buildURLFromParts(g)):d;var x=c.parseURL(u);if(!x)throw new Error("Error trying to parse base URL.");if(!x.netLoc&&x.path&&x.path[0]!=="/"){var v=i.exec(x.path);x.netLoc=v[1],x.path=v[2]}x.netLoc&&!x.path&&(x.path="/");var S={scheme:x.scheme,netLoc:g.netLoc,path:null,params:g.params,query:g.query,fragment:g.fragment};if(!g.netLoc&&(S.netLoc=x.netLoc,g.path[0]!=="/"))if(!g.path)S.path=x.path,g.params||(S.params=x.params,g.query||(S.query=x.query));else{var T=x.path,_=T.substring(0,T.lastIndexOf("/")+1)+g.path;S.path=c.normalizePath(_)}return S.path===null&&(S.path=h.alwaysNormalize?c.normalizePath(g.path):g.path),c.buildURLFromParts(S)},parseURL:function(u){var d=r.exec(u);return d?{scheme:d[1]||"",netLoc:d[2]||"",path:d[3]||"",params:d[4]||"",query:d[5]||"",fragment:d[6]||""}:null},normalizePath:function(u){for(u=u.split("").reverse().join("").replace(s,"");u.length!==(u=u.replace(a,"")).length;);return u.split("").reverse().join("")},buildURLFromParts:function(u){return u.scheme+u.netLoc+u.path+u.params+u.query+u.fragment}};n.exports=c})()})(HT);var G0=HT.exports;function d1(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function or(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?d1(Object(t),!0).forEach(function(r){qO(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):d1(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function WO(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function YO(n){var e=WO(n,"string");return typeof e=="symbol"?e:String(e)}function qO(n,e,t){return e=YO(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function $n(){return $n=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},$n.apply(this,arguments)}const Ye=Number.isFinite||function(n){return typeof n=="number"&&isFinite(n)},XO=Number.isSafeInteger||function(n){return typeof n=="number"&&Math.abs(n)<=QO},QO=Number.MAX_SAFE_INTEGER||9007199254740991;let P=function(n){return n.MEDIA_ATTACHING="hlsMediaAttaching",n.MEDIA_ATTACHED="hlsMediaAttached",n.MEDIA_DETACHING="hlsMediaDetaching",n.MEDIA_DETACHED="hlsMediaDetached",n.BUFFER_RESET="hlsBufferReset",n.BUFFER_CODECS="hlsBufferCodecs",n.BUFFER_CREATED="hlsBufferCreated",n.BUFFER_APPENDING="hlsBufferAppending",n.BUFFER_APPENDED="hlsBufferAppended",n.BUFFER_EOS="hlsBufferEos",n.BUFFER_FLUSHING="hlsBufferFlushing",n.BUFFER_FLUSHED="hlsBufferFlushed",n.MANIFEST_LOADING="hlsManifestLoading",n.MANIFEST_LOADED="hlsManifestLoaded",n.MANIFEST_PARSED="hlsManifestParsed",n.LEVEL_SWITCHING="hlsLevelSwitching",n.LEVEL_SWITCHED="hlsLevelSwitched",n.LEVEL_LOADING="hlsLevelLoading",n.LEVEL_LOADED="hlsLevelLoaded",n.LEVEL_UPDATED="hlsLevelUpdated",n.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",n.LEVELS_UPDATED="hlsLevelsUpdated",n.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",n.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",n.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",n.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",n.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",n.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",n.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",n.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",n.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",n.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",n.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",n.CUES_PARSED="hlsCuesParsed",n.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",n.INIT_PTS_FOUND="hlsInitPtsFound",n.FRAG_LOADING="hlsFragLoading",n.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",n.FRAG_LOADED="hlsFragLoaded",n.FRAG_DECRYPTED="hlsFragDecrypted",n.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",n.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",n.FRAG_PARSING_METADATA="hlsFragParsingMetadata",n.FRAG_PARSED="hlsFragParsed",n.FRAG_BUFFERED="hlsFragBuffered",n.FRAG_CHANGED="hlsFragChanged",n.FPS_DROP="hlsFpsDrop",n.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",n.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",n.ERROR="hlsError",n.DESTROYING="hlsDestroying",n.KEY_LOADING="hlsKeyLoading",n.KEY_LOADED="hlsKeyLoaded",n.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",n.BACK_BUFFER_REACHED="hlsBackBufferReached",n.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",n}({}),ft=function(n){return n.NETWORK_ERROR="networkError",n.MEDIA_ERROR="mediaError",n.KEY_SYSTEM_ERROR="keySystemError",n.MUX_ERROR="muxError",n.OTHER_ERROR="otherError",n}({}),le=function(n){return n.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",n.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",n.KEY_SYSTEM_NO_SESSION="keySystemNoSession",n.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",n.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",n.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",n.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",n.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",n.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",n.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",n.MANIFEST_LOAD_ERROR="manifestLoadError",n.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",n.MANIFEST_PARSING_ERROR="manifestParsingError",n.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",n.LEVEL_EMPTY_ERROR="levelEmptyError",n.LEVEL_LOAD_ERROR="levelLoadError",n.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",n.LEVEL_PARSING_ERROR="levelParsingError",n.LEVEL_SWITCH_ERROR="levelSwitchError",n.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",n.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",n.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",n.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",n.FRAG_LOAD_ERROR="fragLoadError",n.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",n.FRAG_DECRYPT_ERROR="fragDecryptError",n.FRAG_PARSING_ERROR="fragParsingError",n.FRAG_GAP="fragGap",n.REMUX_ALLOC_ERROR="remuxAllocError",n.KEY_LOAD_ERROR="keyLoadError",n.KEY_LOAD_TIMEOUT="keyLoadTimeOut",n.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",n.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",n.BUFFER_APPEND_ERROR="bufferAppendError",n.BUFFER_APPENDING_ERROR="bufferAppendingError",n.BUFFER_STALLED_ERROR="bufferStalledError",n.BUFFER_FULL_ERROR="bufferFullError",n.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",n.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",n.INTERNAL_EXCEPTION="internalException",n.INTERNAL_ABORTED="aborted",n.UNKNOWN="unknown",n}({});const Fa=function(){},Pg={trace:Fa,debug:Fa,log:Fa,warn:Fa,info:Fa,error:Fa};let au=Pg;function JO(n){const e=self.console[n];return e?e.bind(self.console,`[${n}] >`):Fa}function ZO(n,...e){e.forEach(function(t){au[t]=n[t]?n[t].bind(n):JO(t)})}function eN(n,e){if(typeof console=="object"&&n===!0||typeof n=="object"){ZO(n,"debug","log","info","warn","error");try{au.log(`Debug logs enabled for "${e}" in hls.js version 1.5.19`)}catch{au=Pg}}else au=Pg}const J=au,tN=/^(\d+)x(\d+)$/,f1=/(.+?)=(".*?"|.*?)(?:,|$)/g;class En{constructor(e){typeof e=="string"&&(e=En.parseAttrList(e)),$n(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>e.substring(0,2)==="X-")}decimalInteger(e){const t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}hexadecimalInteger(e){if(this[e]){let t=(this[e]||"0x").slice(2);t=(t.length&1?"0":"")+t;const r=new Uint8Array(t.length/2);for(let i=0;i<t.length/2;i++)r[i]=parseInt(t.slice(i*2,i*2+2),16);return r}else return null}hexadecimalIntegerAsNumber(e){const t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,t){const r=this[e];return r?parseFloat(r):t}enumeratedString(e){return this[e]}bool(e){return this[e]==="YES"}decimalResolution(e){const t=tN.exec(this[e]);if(t!==null)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}static parseAttrList(e){let t;const r={},i='"';for(f1.lastIndex=0;(t=f1.exec(e))!==null;){let s=t[2];s.indexOf(i)===0&&s.lastIndexOf(i)===s.length-1&&(s=s.slice(1,-1));const a=t[1].trim();r[a]=s}return r}}function nN(n){return n!=="ID"&&n!=="CLASS"&&n!=="START-DATE"&&n!=="DURATION"&&n!=="END-DATE"&&n!=="END-ON-NEXT"}function rN(n){return n==="SCTE35-OUT"||n==="SCTE35-IN"}class GT{constructor(e,t){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,t){const r=t.attr;for(const i in r)if(Object.prototype.hasOwnProperty.call(e,i)&&e[i]!==r[i]){J.warn(`DATERANGE tag attribute: "${i}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=i;break}e=$n(new En({}),r,e)}if(this.attr=e,this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const r=new Date(this.attr["END-DATE"]);Ye(r.getTime())&&(this._endDate=r)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get startDate(){return this._startDate}get endDate(){if(this._endDate)return this._endDate;const e=this.duration;return e!==null?new Date(this._startDate.getTime()+e*1e3):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(Ye(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isValid(){return!!this.id&&!this._badValueForSameId&&Ye(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)}}class Hh{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var rn={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class VT{constructor(e){this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams={[rn.AUDIO]:null,[rn.VIDEO]:null,[rn.AUDIOVIDEO]:null},this.baseurl=e}setByteRange(e,t){const r=e.split("@",2);let i;r.length===1?i=(t==null?void 0:t.byteRangeEndOffset)||0:i=parseInt(r[1]),this._byteRange=[i,parseInt(r[0])+i]}get byteRange(){return this._byteRange?this._byteRange:[]}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=G0.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}}class Nm extends VT{constructor(e,t){super(t),this._decryptdata=null,this.rawProgramDateTime=null,this.programDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.stats=new Hh,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get decryptdata(){const{levelkeys:e}=this;if(!e&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const t=this.levelkeys.identity;if(t)this._decryptdata=t.getDecryptData(this.sn);else{const r=Object.keys(this.levelkeys);if(r.length===1)return this._decryptdata=this.levelkeys[r[0]].getDecryptData(this.sn)}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null||!Ye(this.programDateTime))return null;const e=Ye(this.duration)?this.duration:0;return this.programDateTime+e*1e3}get encrypted(){var e;if((e=this._decryptdata)!=null&&e.encrypted)return!0;if(this.levelkeys){const t=Object.keys(this.levelkeys),r=t.length;if(r>1||r===1&&this.levelkeys[t[0]].encrypted)return!0}return!1}setKeyFormat(e){if(this.levelkeys){const t=this.levelkeys[e];t&&!this._decryptdata&&(this._decryptdata=t.getDecryptData(this.sn))}}abortRequests(){var e,t;(e=this.loader)==null||e.abort(),(t=this.keyLoader)==null||t.abort()}setElementaryStreamInfo(e,t,r,i,s,a=!1){const{elementaryStreams:c}=this,u=c[e];if(!u){c[e]={startPTS:t,endPTS:r,startDTS:i,endDTS:s,partial:a};return}u.startPTS=Math.min(u.startPTS,t),u.endPTS=Math.max(u.endPTS,r),u.startDTS=Math.min(u.startDTS,i),u.endDTS=Math.max(u.endDTS,s)}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[rn.AUDIO]=null,e[rn.VIDEO]=null,e[rn.AUDIOVIDEO]=null}}class iN extends VT{constructor(e,t,r,i,s){super(r),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.stats=new Hh,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=t,this.index=i;const a=e.enumeratedString("BYTERANGE");a&&this.setByteRange(a,s),s&&(this.fragOffset=s.fragOffset+s.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}const sN=10;class oN{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e){this.advanced=!0,this.updated=!0;return}const t=this.lastPartSn-e.lastPartSn,r=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!r||!!t||!this.live,this.advanced=this.endSN>e.endSN||t>0||t===0&&r>0,this.updated||this.advanced?this.misses=Math.floor(e.misses*.6):this.misses=e.misses+1,this.availabilityDelay=e.availabilityDelay}get hasProgramDateTime(){return this.fragments.length?Ye(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||sN}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?(this.driftEnd-this.driftStart)*1e3/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){var e;return(e=this.fragments)!=null&&e.length?this.fragments[this.fragments.length-1].end:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].index:-1}get lastPartSn(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}function V0(n){return Uint8Array.from(atob(n),e=>e.charCodeAt(0))}function aN(n){const e=Dg(n).subarray(0,16),t=new Uint8Array(16);return t.set(e,16-e.length),t}function lN(n){const e=function(r,i,s){const a=r[i];r[i]=r[s],r[s]=a};e(n,0,3),e(n,1,2),e(n,4,5),e(n,6,7)}function cN(n){const e=n.split(":");let t=null;if(e[0]==="data"&&e.length===2){const r=e[1].split(";"),i=r[r.length-1].split(",");if(i.length===2){const s=i[0]==="base64",a=i[1];s?(r.splice(-1,1),t=V0(a)):t=aN(a)}}return t}function Dg(n){return Uint8Array.from(unescape(encodeURIComponent(n)),e=>e.charCodeAt(0))}const Zl=typeof self<"u"?self:void 0;var Zt={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},ei={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function Mm(n){switch(n){case ei.FAIRPLAY:return Zt.FAIRPLAY;case ei.PLAYREADY:return Zt.PLAYREADY;case ei.WIDEVINE:return Zt.WIDEVINE;case ei.CLEARKEY:return Zt.CLEARKEY}}var rf={CENC:"1077efecc0b24d02ace33c1e52e2fb4b",CLEARKEY:"e2719d58a985b3c9781ab030af78d30e",FAIRPLAY:"94ce86fb07ff4f43adb893d2fa968ca2",PLAYREADY:"9a04f07998404286ab92e65be0885f95",WIDEVINE:"edef8ba979d64acea3c827dcd51d21ed"};function Fm(n){if(n===rf.WIDEVINE)return Zt.WIDEVINE;if(n===rf.PLAYREADY)return Zt.PLAYREADY;if(n===rf.CENC||n===rf.CLEARKEY)return Zt.CLEARKEY}function $m(n){switch(n){case Zt.FAIRPLAY:return ei.FAIRPLAY;case Zt.PLAYREADY:return ei.PLAYREADY;case Zt.WIDEVINE:return ei.WIDEVINE;case Zt.CLEARKEY:return ei.CLEARKEY}}function sf(n){const{drmSystems:e,widevineLicenseUrl:t}=n,r=e?[Zt.FAIRPLAY,Zt.WIDEVINE,Zt.PLAYREADY,Zt.CLEARKEY].filter(i=>!!e[i]):[];return!r[Zt.WIDEVINE]&&t&&r.push(Zt.WIDEVINE),r}const zT=function(n){return Zl!=null&&(n=Zl.navigator)!=null&&n.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function uN(n,e,t,r){let i;switch(n){case Zt.FAIRPLAY:i=["cenc","sinf"];break;case Zt.WIDEVINE:case Zt.PLAYREADY:i=["cenc"];break;case Zt.CLEARKEY:i=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${n}`)}return dN(i,e,t,r)}function dN(n,e,t,r){return[{initDataTypes:n,persistentState:r.persistentState||"optional",distinctiveIdentifier:r.distinctiveIdentifier||"optional",sessionTypes:r.sessionTypes||[r.sessionType||"temporary"],audioCapabilities:e.map(s=>({contentType:`audio/mp4; codecs="${s}"`,robustness:r.audioRobustness||"",encryptionScheme:r.audioEncryptionScheme||null})),videoCapabilities:t.map(s=>({contentType:`video/mp4; codecs="${s}"`,robustness:r.videoRobustness||"",encryptionScheme:r.videoEncryptionScheme||null}))}]}function KT(n){const e=new Uint16Array(n.buffer,n.byteOffset,n.byteLength/2),t=String.fromCharCode.apply(null,Array.from(e)),r=t.substring(t.indexOf("<"),t.length),a=new DOMParser().parseFromString(r,"text/xml").getElementsByTagName("KID")[0];if(a){const c=a.childNodes[0]?a.childNodes[0].nodeValue:a.getAttribute("VALUE");if(c){const u=V0(c).subarray(0,16);return lN(u),u}}return null}function Va(n,e,t){return Uint8Array.prototype.slice?n.slice(e,t):new Uint8Array(Array.prototype.slice.call(n,e,t))}const z0=(n,e)=>e+10<=n.length&&n[e]===73&&n[e+1]===68&&n[e+2]===51&&n[e+3]<255&&n[e+4]<255&&n[e+6]<128&&n[e+7]<128&&n[e+8]<128&&n[e+9]<128,WT=(n,e)=>e+10<=n.length&&n[e]===51&&n[e+1]===68&&n[e+2]===73&&n[e+3]<255&&n[e+4]<255&&n[e+6]<128&&n[e+7]<128&&n[e+8]<128&&n[e+9]<128,yu=(n,e)=>{const t=e;let r=0;for(;z0(n,e);){r+=10;const i=Gh(n,e+6);r+=i,WT(n,e+10)&&(r+=10),e+=r}if(r>0)return n.subarray(t,t+r)},Gh=(n,e)=>{let t=0;return t=(n[e]&127)<<21,t|=(n[e+1]&127)<<14,t|=(n[e+2]&127)<<7,t|=n[e+3]&127,t},fN=(n,e)=>z0(n,e)&&Gh(n,e+6)+10<=n.length-e,K0=n=>{const e=qT(n);for(let t=0;t<e.length;t++){const r=e[t];if(YT(r))return vN(r)}},YT=n=>n&&n.key==="PRIV"&&n.info==="com.apple.streaming.transportStreamTimestamp",hN=n=>{const e=String.fromCharCode(n[0],n[1],n[2],n[3]),t=Gh(n,4),r=10;return{type:e,size:t,data:n.subarray(r,r+t)}},qT=n=>{let e=0;const t=[];for(;z0(n,e);){const r=Gh(n,e+6);e+=10;const i=e+r;for(;e+8<i;){const s=hN(n.subarray(e)),a=pN(s);a&&t.push(a),e+=s.size+10}WT(n,e)&&(e+=10)}return t},pN=n=>n.type==="PRIV"?mN(n):n.type[0]==="W"?yN(n):gN(n),mN=n=>{if(n.size<2)return;const e=js(n.data,!0),t=new Uint8Array(n.data.subarray(e.length+1));return{key:n.type,info:e,data:t.buffer}},gN=n=>{if(n.size<2)return;if(n.type==="TXXX"){let t=1;const r=js(n.data.subarray(t),!0);t+=r.length+1;const i=js(n.data.subarray(t));return{key:n.type,info:r,data:i}}const e=js(n.data.subarray(1));return{key:n.type,data:e}},yN=n=>{if(n.type==="WXXX"){if(n.size<2)return;let t=1;const r=js(n.data.subarray(t),!0);t+=r.length+1;const i=js(n.data.subarray(t));return{key:n.type,info:r,data:i}}const e=js(n.data);return{key:n.type,data:e}},vN=n=>{if(n.data.byteLength===8){const e=new Uint8Array(n.data),t=e[3]&1;let r=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return r/=45,t&&(r+=4772185884e-2),Math.round(r)}},js=(n,e=!1)=>{const t=xN();if(t){const d=t.decode(n);if(e){const h=d.indexOf("\0");return h!==-1?d.substring(0,h):d}return d.replace(/\0/g,"")}const r=n.length;let i,s,a,c="",u=0;for(;u<r;){if(i=n[u++],i===0&&e)return c;if(i===0||i===3)continue;switch(i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:c+=String.fromCharCode(i);break;case 12:case 13:s=n[u++],c+=String.fromCharCode((i&31)<<6|s&63);break;case 14:s=n[u++],a=n[u++],c+=String.fromCharCode((i&15)<<12|(s&63)<<6|(a&63)<<0);break}}return c};let Bm;function xN(){if(!navigator.userAgent.includes("PlayStation 4"))return!Bm&&typeof self.TextDecoder<"u"&&(Bm=new self.TextDecoder("utf-8")),Bm}const ks={hexDump:function(n){let e="";for(let t=0;t<n.length;t++){let r=n[t].toString(16);r.length<2&&(r="0"+r),e+=r}return e}},Qf=Math.pow(2,32)-1,SN=[].push,XT={video:1,audio:2,id3:3,text:4};function Kn(n){return String.fromCharCode.apply(null,n)}function QT(n,e){const t=n[e]<<8|n[e+1];return t<0?65536+t:t}function ot(n,e){const t=JT(n,e);return t<0?4294967296+t:t}function h1(n,e){let t=ot(n,e);return t*=Math.pow(2,32),t+=ot(n,e+4),t}function JT(n,e){return n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3]}function Um(n,e,t){n[e]=t>>24,n[e+1]=t>>16&255,n[e+2]=t>>8&255,n[e+3]=t&255}function EN(n){const e=n.byteLength;for(let t=0;t<e;){const r=ot(n,t);if(r>8&&n[t+4]===109&&n[t+5]===111&&n[t+6]===111&&n[t+7]===102)return!0;t=r>1?t+r:e}return!1}function St(n,e){const t=[];if(!e.length)return t;const r=n.byteLength;for(let i=0;i<r;){const s=ot(n,i),a=Kn(n.subarray(i+4,i+8)),c=s>1?i+s:r;if(a===e[0])if(e.length===1)t.push(n.subarray(i+8,c));else{const u=St(n.subarray(i+8,c),e.slice(1));u.length&&SN.apply(t,u)}i=c}return t}function TN(n){const e=[],t=n[0];let r=8;const i=ot(n,r);r+=4;let s=0,a=0;t===0?(s=ot(n,r),a=ot(n,r+4),r+=8):(s=h1(n,r),a=h1(n,r+8),r+=16),r+=2;let c=n.length+a;const u=QT(n,r);r+=2;for(let d=0;d<u;d++){let h=r;const p=ot(n,h);h+=4;const g=p&2147483647;if((p&2147483648)>>>31===1)return J.warn("SIDX has hierarchical references (not supported)"),null;const v=ot(n,h);h+=4,e.push({referenceSize:g,subsegmentDuration:v,info:{duration:v/i,start:c,end:c+g-1}}),c+=g,h+=4,r=h}return{earliestPresentationTime:s,timescale:i,version:t,referencesCount:u,references:e}}function ZT(n){const e=[],t=St(n,["moov","trak"]);for(let i=0;i<t.length;i++){const s=t[i],a=St(s,["tkhd"])[0];if(a){let c=a[0];const u=ot(a,c===0?12:20),d=St(s,["mdia","mdhd"])[0];if(d){c=d[0];const h=ot(d,c===0?12:20),p=St(s,["mdia","hdlr"])[0];if(p){const g=Kn(p.subarray(8,12)),x={soun:rn.AUDIO,vide:rn.VIDEO}[g];if(x){const v=St(s,["mdia","minf","stbl","stsd"])[0],S=bN(v);e[u]={timescale:h,type:x},e[x]=or({timescale:h,id:u},S)}}}}}return St(n,["moov","mvex","trex"]).forEach(i=>{const s=ot(i,4),a=e[s];a&&(a.default={duration:ot(i,12),flags:ot(i,20)})}),e}function bN(n){const e=n.subarray(8),t=e.subarray(86),r=Kn(e.subarray(4,8));let i=r;const s=r==="enca"||r==="encv";if(s){const c=St(e,[r])[0].subarray(r==="enca"?28:78);St(c,["sinf"]).forEach(d=>{const h=St(d,["schm"])[0];if(h){const p=Kn(h.subarray(4,8));if(p==="cbcs"||p==="cenc"){const g=St(d,["frma"])[0];g&&(i=Kn(g))}}})}switch(i){case"avc1":case"avc2":case"avc3":case"avc4":{const a=St(t,["avcC"])[0];i+="."+of(a[1])+of(a[2])+of(a[3]);break}case"mp4a":{const a=St(e,[r])[0],c=St(a.subarray(28),["esds"])[0];if(c&&c.length>12){let u=4;if(c[u++]!==3)break;u=jm(c,u),u+=2;const d=c[u++];if(d&128&&(u+=2),d&64&&(u+=c[u++]),c[u++]!==4)break;u=jm(c,u);const h=c[u++];if(h===64)i+="."+of(h);else break;if(u+=12,c[u++]!==5)break;u=jm(c,u);const p=c[u++];let g=(p&248)>>3;g===31&&(g+=1+((p&7)<<3)+((c[u]&224)>>5)),i+="."+g}break}case"hvc1":case"hev1":{const a=St(t,["hvcC"])[0],c=a[1],u=["","A","B","C"][c>>6],d=c&31,h=ot(a,2),p=(c&32)>>5?"H":"L",g=a[12],x=a.subarray(6,12);i+="."+u+d,i+="."+h.toString(16).toUpperCase(),i+="."+p+g;let v="";for(let S=x.length;S--;){const T=x[S];(T||v)&&(v="."+T.toString(16).toUpperCase()+v)}i+=v;break}case"dvh1":case"dvhe":{const a=St(t,["dvcC"])[0],c=a[2]>>1&127,u=a[2]<<5&32|a[3]>>3&31;i+="."+As(c)+"."+As(u);break}case"vp09":{const a=St(t,["vpcC"])[0],c=a[4],u=a[5],d=a[6]>>4&15;i+="."+As(c)+"."+As(u)+"."+As(d);break}case"av01":{const a=St(t,["av1C"])[0],c=a[1]>>>5,u=a[1]&31,d=a[2]>>>7?"H":"M",h=(a[2]&64)>>6,p=(a[2]&32)>>5,g=c===2&&h?p?12:10:h?10:8,x=(a[2]&16)>>4,v=(a[2]&8)>>3,S=(a[2]&4)>>2,T=a[2]&3;i+="."+c+"."+As(u)+d+"."+As(g)+"."+x+"."+v+S+T+"."+As(1)+"."+As(1)+"."+As(1)+"."+0;break}}return{codec:i,encrypted:s}}function jm(n,e){const t=e+5;for(;n[e++]&128&&e<t;);return e}function of(n){return("0"+n.toString(16).toUpperCase()).slice(-2)}function As(n){return(n<10?"0":"")+n}function wN(n,e){if(!n||!e)return n;const t=e.keyId;return t&&e.isCommonEncryption&&St(n,["moov","trak"]).forEach(i=>{const a=St(i,["mdia","minf","stbl","stsd"])[0].subarray(8);let c=St(a,["enca"]);const u=c.length>0;u||(c=St(a,["encv"])),c.forEach(d=>{const h=u?d.subarray(28):d.subarray(78);St(h,["sinf"]).forEach(g=>{const x=eb(g);if(x){const v=x.subarray(8,24);v.some(S=>S!==0)||(J.log(`[eme] Patching keyId in 'enc${u?"a":"v"}>sinf>>tenc' box: ${ks.hexDump(v)} -> ${ks.hexDump(t)}`),x.set(t,8))}})})}),n}function eb(n){const e=St(n,["schm"])[0];if(e){const t=Kn(e.subarray(4,8));if(t==="cbcs"||t==="cenc")return St(n,["schi","tenc"])[0]}return null}function _N(n,e){return St(e,["moof","traf"]).reduce((t,r)=>{const i=St(r,["tfdt"])[0],s=i[0],a=St(r,["tfhd"]).reduce((c,u)=>{const d=ot(u,4),h=n[d];if(h){let p=ot(i,4);if(s===1){if(p===Qf)return J.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),c;p*=Qf+1,p+=ot(i,8)}const g=h.timescale||9e4,x=p/g;if(Ye(x)&&(c===null||x<c))return x}return c},null);return a!==null&&Ye(a)&&(t===null||a<t)?a:t},null)}function LN(n,e){let t=0,r=0,i=0;const s=St(n,["moof","traf"]);for(let a=0;a<s.length;a++){const c=s[a],u=St(c,["tfhd"])[0],d=ot(u,4),h=e[d];if(!h)continue;const p=h.default,g=ot(u,0)|(p==null?void 0:p.flags);let x=p==null?void 0:p.duration;g&8&&(g&2?x=ot(u,12):x=ot(u,8));const v=h.timescale||9e4,S=St(c,["trun"]);for(let T=0;T<S.length;T++){if(t=CN(S[T]),!t&&x){const _=ot(S[T],4);t=x*_}h.type===rn.VIDEO?r+=t/v:h.type===rn.AUDIO&&(i+=t/v)}}if(r===0&&i===0){let a=1/0,c=0,u=0;const d=St(n,["sidx"]);for(let h=0;h<d.length;h++){const p=TN(d[h]);if(p!=null&&p.references){a=Math.min(a,p.earliestPresentationTime/p.timescale);const g=p.references.reduce((x,v)=>x+v.info.duration||0,0);c=Math.max(c,g+p.earliestPresentationTime/p.timescale),u=c-a}}if(u&&Ye(u))return u}return r||i}function CN(n){const e=ot(n,0);let t=8;e&1&&(t+=4),e&4&&(t+=4);let r=0;const i=ot(n,4);for(let s=0;s<i;s++){if(e&256){const a=ot(n,t);r+=a,t+=4}e&512&&(t+=4),e&1024&&(t+=4),e&2048&&(t+=4)}return r}function RN(n,e,t){St(e,["moof","traf"]).forEach(r=>{St(r,["tfhd"]).forEach(i=>{const s=ot(i,4),a=n[s];if(!a)return;const c=a.timescale||9e4;St(r,["tfdt"]).forEach(u=>{const d=u[0],h=t*c;if(h){let p=ot(u,4);if(d===0)p-=h,p=Math.max(p,0),Um(u,4,p);else{p*=Math.pow(2,32),p+=ot(u,8),p-=h,p=Math.max(p,0);const g=Math.floor(p/(Qf+1)),x=Math.floor(p%(Qf+1));Um(u,4,g),Um(u,8,x)}}})})})}function AN(n){const e={valid:null,remainder:null},t=St(n,["moof"]);if(t.length<2)return e.remainder=n,e;const r=t[t.length-1];return e.valid=Va(n,0,r.byteOffset-8),e.remainder=Va(n,r.byteOffset-8),e}function Oi(n,e){const t=new Uint8Array(n.length+e.length);return t.set(n),t.set(e,n.length),t}function p1(n,e){const t=[],r=e.samples,i=e.timescale,s=e.id;let a=!1;return St(r,["moof"]).map(u=>{const d=u.byteOffset-8;St(u,["traf"]).map(p=>{const g=St(p,["tfdt"]).map(x=>{const v=x[0];let S=ot(x,4);return v===1&&(S*=Math.pow(2,32),S+=ot(x,8)),S/i})[0];return g!==void 0&&(n=g),St(p,["tfhd"]).map(x=>{const v=ot(x,4),S=ot(x,0)&16777215,T=(S&1)!==0,_=(S&2)!==0,C=(S&8)!==0;let k=0;const O=(S&16)!==0;let w=0;const $=(S&32)!==0;let M=8;v===s&&(T&&(M+=8),_&&(M+=4),C&&(k=ot(x,M),M+=4),O&&(w=ot(x,M),M+=4),$&&(M+=4),e.type==="video"&&(a=kN(e.codec)),St(p,["trun"]).map(U=>{const W=U[0],R=ot(U,0)&16777215,G=(R&1)!==0;let fe=0;const ae=(R&4)!==0,xe=(R&256)!==0;let ye=0;const Ee=(R&512)!==0;let Pe=0;const ie=(R&1024)!==0,se=(R&2048)!==0;let B=0;const H=ot(U,4);let Q=8;G&&(fe=ot(U,Q),Q+=4),ae&&(Q+=4);let we=fe+d;for(let Ae=0;Ae<H;Ae++){if(xe?(ye=ot(U,Q),Q+=4):ye=k,Ee?(Pe=ot(U,Q),Q+=4):Pe=w,ie&&(Q+=4),se&&(W===0?B=ot(U,Q):B=JT(U,Q),Q+=4),e.type===rn.VIDEO){let Oe=0;for(;Oe<Pe;){const Me=ot(r,we);if(we+=4,IN(a,r[we])){const ct=r.subarray(we,we+Me);tb(ct,a?2:1,n+B/i,t)}we+=Me,Oe+=Me+4}}n+=ye/i}}))})})}),t}function kN(n){if(!n)return!1;const e=n.indexOf("."),t=e<0?n:n.substring(0,e);return t==="hvc1"||t==="hev1"||t==="dvh1"||t==="dvhe"}function IN(n,e){if(n){const t=e>>1&63;return t===39||t===40}else return(e&31)===6}function tb(n,e,t,r){const i=nb(n);let s=0;s+=e;let a=0,c=0,u=0;for(;s<i.length;){a=0;do{if(s>=i.length)break;u=i[s++],a+=u}while(u===255);c=0;do{if(s>=i.length)break;u=i[s++],c+=u}while(u===255);const d=i.length-s;let h=s;if(c<d)s+=c;else if(c>d){J.error(`Malformed SEI payload. ${c} is too small, only ${d} bytes left to parse.`);break}if(a===4){if(i[h++]===181){const g=QT(i,h);if(h+=2,g===49){const x=ot(i,h);if(h+=4,x===1195456820){const v=i[h++];if(v===3){const S=i[h++],T=31&S,_=64&S,C=_?2+T*3:0,k=new Uint8Array(C);if(_){k[0]=S;for(let O=1;O<C;O++)k[O]=i[h++]}r.push({type:v,payloadType:a,pts:t,bytes:k})}}}}}else if(a===5&&c>16){const p=[];for(let v=0;v<16;v++){const S=i[h++].toString(16);p.push(S.length==1?"0"+S:S),(v===3||v===5||v===7||v===9)&&p.push("-")}const g=c-16,x=new Uint8Array(g);for(let v=0;v<g;v++)x[v]=i[h++];r.push({payloadType:a,pts:t,uuid:p.join(""),userData:js(x),userDataBytes:x})}}}function nb(n){const e=n.byteLength,t=[];let r=1;for(;r<e-2;)n[r]===0&&n[r+1]===0&&n[r+2]===3?(t.push(r+2),r+=2):r++;if(t.length===0)return n;const i=e-t.length,s=new Uint8Array(i);let a=0;for(r=0;r<i;a++,r++)a===t[0]&&(a++,t.shift()),s[r]=n[a];return s}function PN(n){const e=n[0];let t="",r="",i=0,s=0,a=0,c=0,u=0,d=0;if(e===0){for(;Kn(n.subarray(d,d+1))!=="\0";)t+=Kn(n.subarray(d,d+1)),d+=1;for(t+=Kn(n.subarray(d,d+1)),d+=1;Kn(n.subarray(d,d+1))!=="\0";)r+=Kn(n.subarray(d,d+1)),d+=1;r+=Kn(n.subarray(d,d+1)),d+=1,i=ot(n,12),s=ot(n,16),c=ot(n,20),u=ot(n,24),d=28}else if(e===1){d+=4,i=ot(n,d),d+=4;const p=ot(n,d);d+=4;const g=ot(n,d);for(d+=4,a=2**32*p+g,XO(a)||(a=Number.MAX_SAFE_INTEGER,J.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),c=ot(n,d),d+=4,u=ot(n,d),d+=4;Kn(n.subarray(d,d+1))!=="\0";)t+=Kn(n.subarray(d,d+1)),d+=1;for(t+=Kn(n.subarray(d,d+1)),d+=1;Kn(n.subarray(d,d+1))!=="\0";)r+=Kn(n.subarray(d,d+1)),d+=1;r+=Kn(n.subarray(d,d+1)),d+=1}const h=n.subarray(d,n.byteLength);return{schemeIdUri:t,value:r,timeScale:i,presentationTime:a,presentationTimeDelta:s,eventDuration:c,id:u,payload:h}}function DN(n,...e){const t=e.length;let r=8,i=t;for(;i--;)r+=e[i].byteLength;const s=new Uint8Array(r);for(s[0]=r>>24&255,s[1]=r>>16&255,s[2]=r>>8&255,s[3]=r&255,s.set(n,4),i=0,r=8;i<t;i++)s.set(e[i],r),r+=e[i].byteLength;return s}function ON(n,e,t){if(n.byteLength!==16)throw new RangeError("Invalid system id");let r,i;r=0,i=new Uint8Array;let s;r>0?(s=new Uint8Array(4),e.length>0&&new DataView(s.buffer).setUint32(0,e.length,!1)):s=new Uint8Array;const a=new Uint8Array(4);return t&&t.byteLength>0&&new DataView(a.buffer).setUint32(0,t.byteLength,!1),DN([112,115,115,104],new Uint8Array([r,0,0,0]),n,s,i,a,t||new Uint8Array)}function NN(n){const e=[];if(n instanceof ArrayBuffer){const t=n.byteLength;let r=0;for(;r+32<t;){const i=new DataView(n,r),s=MN(i);e.push(s),r+=s.size}}return e}function MN(n){const e=n.getUint32(0),t=n.byteOffset,r=n.byteLength;if(r<e)return{offset:t,size:r};if(n.getUint32(4)!==1886614376)return{offset:t,size:e};const s=n.getUint32(8)>>>24;if(s!==0&&s!==1)return{offset:t,size:e};const a=n.buffer,c=ks.hexDump(new Uint8Array(a,t+12,16)),u=n.getUint32(28);let d=null,h=null;if(s===0){if(e-32<u||u<22)return{offset:t,size:e};h=new Uint8Array(a,t+32,u)}else if(s===1){if(!u||r<t+32+u*16+16)return{offset:t,size:e};d=[];for(let p=0;p<u;p++)d.push(new Uint8Array(a,t+32+p*16,16))}return{version:s,systemId:c,kids:d,data:h,offset:t,size:e}}let af={};class vu{static clearKeyUriToKeyIdMap(){af={}}constructor(e,t,r,i=[1],s=null){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=r,this.keyFormatVersions=i,this.iv=s,this.encrypted=e?e!=="NONE":!1,this.isCommonEncryption=this.encrypted&&e!=="AES-128"}isSupported(){if(this.method){if(this.method==="AES-128"||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case ei.FAIRPLAY:case ei.WIDEVINE:case ei.PLAYREADY:case ei.CLEARKEY:return["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(e){if(!this.encrypted||!this.uri)return null;if(this.method==="AES-128"&&this.uri&&!this.iv){typeof e!="number"&&(this.method==="AES-128"&&!this.iv&&J.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0);const r=FN(e);return new vu(this.method,this.uri,"identity",this.keyFormatVersions,r)}const t=cN(this.uri);if(t)switch(this.keyFormat){case ei.WIDEVINE:this.pssh=t,t.length>=22&&(this.keyId=t.subarray(t.length-22,t.length-6));break;case ei.PLAYREADY:{const r=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=ON(r,null,t),this.keyId=KT(t);break}default:{let r=t.subarray(0,16);if(r.length!==16){const i=new Uint8Array(16);i.set(r,16-r.length),r=i}this.keyId=r;break}}if(!this.keyId||this.keyId.byteLength!==16){let r=af[this.uri];if(!r){const i=Object.keys(af).length%Number.MAX_SAFE_INTEGER;r=new Uint8Array(16),new DataView(r.buffer,12,4).setUint32(0,i),af[this.uri]=r}this.keyId=r}return this}}function FN(n){const e=new Uint8Array(16);for(let t=12;t<16;t++)e[t]=n>>8*(15-t)&255;return e}const rb=/\{\$([a-zA-Z0-9-_]+)\}/g;function m1(n){return rb.test(n)}function Zr(n,e,t){if(n.variableList!==null||n.hasVariableRefs)for(let r=t.length;r--;){const i=t[r],s=e[i];s&&(e[i]=Og(n,s))}}function Og(n,e){if(n.variableList!==null||n.hasVariableRefs){const t=n.variableList;return e.replace(rb,r=>{const i=r.substring(2,r.length-1),s=t==null?void 0:t[i];return s===void 0?(n.playlistParsingError||(n.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${i}"`)),r):s})}return e}function g1(n,e,t){let r=n.variableList;r||(n.variableList=r={});let i,s;if("QUERYPARAM"in e){i=e.QUERYPARAM;try{const a=new self.URL(t).searchParams;if(a.has(i))s=a.get(i);else throw new Error(`"${i}" does not match any query parameter in URI: "${t}"`)}catch(a){n.playlistParsingError||(n.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${a.message}`))}}else i=e.NAME,s=e.VALUE;i in r?n.playlistParsingError||(n.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${i}"`)):r[i]=s||""}function $N(n,e,t){const r=e.IMPORT;if(t&&r in t){let i=n.variableList;i||(n.variableList=i={}),i[r]=t[r]}else n.playlistParsingError||(n.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${r}"`))}function Xa(n=!0){return typeof self>"u"?void 0:(n||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function BN(n){return typeof self<"u"&&n===self.ManagedMediaSource}const Jf={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function UN(n,e){const t=Jf[e];return!!t&&!!t[n.slice(0,4)]}function Hm(n,e,t=!0){return!n.split(",").some(r=>!ib(r,e,t))}function ib(n,e,t=!0){var r;const i=Xa(t);return(r=i==null?void 0:i.isTypeSupported(xu(n,e)))!=null?r:!1}function xu(n,e){return`${e}/mp4;codecs="${n}"`}function y1(n){if(n){const e=n.substring(0,4);return Jf.video[e]}return 2}function Zf(n){return n.split(",").reduce((e,t)=>{const r=Jf.video[t];return r?(r*2+e)/(e?3:2):(Jf.audio[t]+e)/(e?2:1)},0)}const Gm={};function jN(n,e=!0){if(Gm[n])return Gm[n];const t={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"]}[n];for(let r=0;r<t.length;r++)if(ib(t[r],"audio",e))return Gm[n]=t[r],t[r];return n}const HN=/flac|opus/i;function eh(n,e=!0){return n.replace(HN,t=>jN(t.toLowerCase(),e))}function v1(n,e){return n&&n!=="mp4a"?n:e&&e.split(",")[0]}function GN(n){const e=n.split(",");for(let t=0;t<e.length;t++){const r=e[t].split(".");if(r.length>2){let i=r.shift()+".";i+=parseInt(r.shift()).toString(16),i+=("000"+parseInt(r.shift()).toString(16)).slice(-4),e[t]=i}}return e.join(",")}const x1=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,S1=/#EXT-X-MEDIA:(.*)/g,VN=/^#EXT(?:INF|-X-TARGETDURATION):/m,E1=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),zN=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class Ns{static findGroup(e,t){for(let r=0;r<e.length;r++){const i=e[r];if(i.id===t)return i}}static resolve(e,t){return G0.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return VN.test(e)}static parseMasterPlaylist(e,t){const r=m1(e),i={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:r},s=[];x1.lastIndex=0;let a;for(;(a=x1.exec(e))!=null;)if(a[1]){var c;const d=new En(a[1]);Zr(i,d,["CODECS","SUPPLEMENTAL-CODECS","ALLOWED-CPC","PATHWAY-ID","STABLE-VARIANT-ID","AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS","NAME"]);const h=Og(i,a[2]),p={attrs:d,bitrate:d.decimalInteger("BANDWIDTH")||d.decimalInteger("AVERAGE-BANDWIDTH"),name:d.NAME,url:Ns.resolve(h,t)},g=d.decimalResolution("RESOLUTION");g&&(p.width=g.width,p.height=g.height),KN(d.CODECS,p),(c=p.unknownCodecs)!=null&&c.length||s.push(p),i.levels.push(p)}else if(a[3]){const d=a[3],h=a[4];switch(d){case"SESSION-DATA":{const p=new En(h);Zr(i,p,["DATA-ID","LANGUAGE","VALUE","URI"]);const g=p["DATA-ID"];g&&(i.sessionData===null&&(i.sessionData={}),i.sessionData[g]=p);break}case"SESSION-KEY":{const p=T1(h,t,i);p.encrypted&&p.isSupported()?(i.sessionKeys===null&&(i.sessionKeys=[]),i.sessionKeys.push(p)):J.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${h}"`);break}case"DEFINE":{{const p=new En(h);Zr(i,p,["NAME","VALUE","QUERYPARAM"]),g1(i,p,t)}break}case"CONTENT-STEERING":{const p=new En(h);Zr(i,p,["SERVER-URI","PATHWAY-ID"]),i.contentSteering={uri:Ns.resolve(p["SERVER-URI"],t),pathwayId:p["PATHWAY-ID"]||"."};break}case"START":{i.startTimeOffset=b1(h);break}}}const u=s.length>0&&s.length<i.levels.length;return i.levels=u?s:i.levels,i.levels.length===0&&(i.playlistParsingError=new Error("no levels found in manifest")),i}static parseMasterPlaylistMedia(e,t,r){let i;const s={},a=r.levels,c={AUDIO:a.map(d=>({id:d.attrs.AUDIO,audioCodec:d.audioCodec})),SUBTITLES:a.map(d=>({id:d.attrs.SUBTITLES,textCodec:d.textCodec})),"CLOSED-CAPTIONS":[]};let u=0;for(S1.lastIndex=0;(i=S1.exec(e))!==null;){const d=new En(i[1]),h=d.TYPE;if(h){const p=c[h],g=s[h]||[];s[h]=g,Zr(r,d,["URI","GROUP-ID","LANGUAGE","ASSOC-LANGUAGE","STABLE-RENDITION-ID","NAME","INSTREAM-ID","CHARACTERISTICS","CHANNELS"]);const x=d.LANGUAGE,v=d["ASSOC-LANGUAGE"],S=d.CHANNELS,T=d.CHARACTERISTICS,_=d["INSTREAM-ID"],C={attrs:d,bitrate:0,id:u++,groupId:d["GROUP-ID"]||"",name:d.NAME||x||"",type:h,default:d.bool("DEFAULT"),autoselect:d.bool("AUTOSELECT"),forced:d.bool("FORCED"),lang:x,url:d.URI?Ns.resolve(d.URI,t):""};if(v&&(C.assocLang=v),S&&(C.channels=S),T&&(C.characteristics=T),_&&(C.instreamId=_),p!=null&&p.length){const k=Ns.findGroup(p,C.groupId)||p[0];w1(C,k,"audioCodec"),w1(C,k,"textCodec")}g.push(C)}}return s}static parseLevelPlaylist(e,t,r,i,s,a){const c=new oN(t),u=c.fragments;let d=null,h=0,p=0,g=0,x=0,v=null,S=new Nm(i,t),T,_,C,k=-1,O=!1,w=null;for(E1.lastIndex=0,c.m3u8=e,c.hasVariableRefs=m1(e);(T=E1.exec(e))!==null;){O&&(O=!1,S=new Nm(i,t),S.start=g,S.sn=h,S.cc=x,S.level=r,d&&(S.initSegment=d,S.rawProgramDateTime=d.rawProgramDateTime,d.rawProgramDateTime=null,w&&(S.setByteRange(w),w=null)));const W=T[1];if(W){S.duration=parseFloat(W);const R=(" "+T[2]).slice(1);S.title=R||null,S.tagList.push(R?["INF",W,R]:["INF",W])}else if(T[3]){if(Ye(S.duration)){S.start=g,C&&C1(S,C,c),S.sn=h,S.level=r,S.cc=x,u.push(S);const R=(" "+T[3]).slice(1);S.relurl=Og(c,R),_1(S,v),v=S,g+=S.duration,h++,p=0,O=!0}}else if(T[4]){const R=(" "+T[4]).slice(1);v?S.setByteRange(R,v):S.setByteRange(R)}else if(T[5])S.rawProgramDateTime=(" "+T[5]).slice(1),S.tagList.push(["PROGRAM-DATE-TIME",S.rawProgramDateTime]),k===-1&&(k=u.length);else{if(T=T[0].match(zN),!T){J.warn("No matches on slow regex match for level playlist!");continue}for(_=1;_<T.length&&!(typeof T[_]<"u");_++);const R=(" "+T[_]).slice(1),G=(" "+T[_+1]).slice(1),fe=T[_+2]?(" "+T[_+2]).slice(1):"";switch(R){case"PLAYLIST-TYPE":c.type=G.toUpperCase();break;case"MEDIA-SEQUENCE":h=c.startSN=parseInt(G);break;case"SKIP":{const ae=new En(G);Zr(c,ae,["RECENTLY-REMOVED-DATERANGES"]);const xe=ae.decimalInteger("SKIPPED-SEGMENTS");if(Ye(xe)){c.skippedSegments=xe;for(let Ee=xe;Ee--;)u.unshift(null);h+=xe}const ye=ae.enumeratedString("RECENTLY-REMOVED-DATERANGES");ye&&(c.recentlyRemovedDateranges=ye.split("	"));break}case"TARGETDURATION":c.targetduration=Math.max(parseInt(G),1);break;case"VERSION":c.version=parseInt(G);break;case"INDEPENDENT-SEGMENTS":case"EXTM3U":break;case"ENDLIST":c.live=!1;break;case"#":(G||fe)&&S.tagList.push(fe?[G,fe]:[G]);break;case"DISCONTINUITY":x++,S.tagList.push(["DIS"]);break;case"GAP":S.gap=!0,S.tagList.push([R]);break;case"BITRATE":S.tagList.push([R,G]);break;case"DATERANGE":{const ae=new En(G);Zr(c,ae,["ID","CLASS","START-DATE","END-DATE","SCTE35-CMD","SCTE35-OUT","SCTE35-IN"]),Zr(c,ae,ae.clientAttrs);const xe=new GT(ae,c.dateRanges[ae.ID]);xe.isValid||c.skippedSegments?c.dateRanges[xe.id]=xe:J.warn(`Ignoring invalid DATERANGE tag: "${G}"`),S.tagList.push(["EXT-X-DATERANGE",G]);break}case"DEFINE":{{const ae=new En(G);Zr(c,ae,["NAME","VALUE","IMPORT","QUERYPARAM"]),"IMPORT"in ae?$N(c,ae,a):g1(c,ae,t)}break}case"DISCONTINUITY-SEQUENCE":x=parseInt(G);break;case"KEY":{const ae=T1(G,t,c);if(ae.isSupported()){if(ae.method==="NONE"){C=void 0;break}C||(C={}),C[ae.keyFormat]&&(C=$n({},C)),C[ae.keyFormat]=ae}else J.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${G}"`);break}case"START":c.startTimeOffset=b1(G);break;case"MAP":{const ae=new En(G);if(Zr(c,ae,["BYTERANGE","URI"]),S.duration){const xe=new Nm(i,t);L1(xe,ae,r,C),d=xe,S.initSegment=d,d.rawProgramDateTime&&!S.rawProgramDateTime&&(S.rawProgramDateTime=d.rawProgramDateTime)}else{const xe=S.byteRangeEndOffset;if(xe){const ye=S.byteRangeStartOffset;w=`${xe-ye}@${ye}`}else w=null;L1(S,ae,r,C),d=S,O=!0}break}case"SERVER-CONTROL":{const ae=new En(G);c.canBlockReload=ae.bool("CAN-BLOCK-RELOAD"),c.canSkipUntil=ae.optionalFloat("CAN-SKIP-UNTIL",0),c.canSkipDateRanges=c.canSkipUntil>0&&ae.bool("CAN-SKIP-DATERANGES"),c.partHoldBack=ae.optionalFloat("PART-HOLD-BACK",0),c.holdBack=ae.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{const ae=new En(G);c.partTarget=ae.decimalFloatingPoint("PART-TARGET");break}case"PART":{let ae=c.partList;ae||(ae=c.partList=[]);const xe=p>0?ae[ae.length-1]:void 0,ye=p++,Ee=new En(G);Zr(c,Ee,["BYTERANGE","URI"]);const Pe=new iN(Ee,S,t,ye,xe);ae.push(Pe),S.duration+=Pe.duration;break}case"PRELOAD-HINT":{const ae=new En(G);Zr(c,ae,["URI"]),c.preloadHint=ae;break}case"RENDITION-REPORT":{const ae=new En(G);Zr(c,ae,["URI"]),c.renditionReports=c.renditionReports||[],c.renditionReports.push(ae);break}default:J.warn(`line parsed but not handled: ${T}`);break}}}v&&!v.relurl?(u.pop(),g-=v.duration,c.partList&&(c.fragmentHint=v)):c.partList&&(_1(S,v),S.cc=x,c.fragmentHint=S,C&&C1(S,C,c));const $=u.length,M=u[0],U=u[$-1];if(g+=c.skippedSegments*c.targetduration,g>0&&$&&U){c.averagetargetduration=g/$;const W=U.sn;c.endSN=W!=="initSegment"?W:0,c.live||(U.endList=!0),M&&(c.startCC=M.cc)}else c.endSN=0,c.startCC=0;return c.fragmentHint&&(g+=c.fragmentHint.duration),c.totalduration=g,c.endCC=x,k>0&&WN(u,k),c}}function T1(n,e,t){var r,i;const s=new En(n);Zr(t,s,["KEYFORMAT","KEYFORMATVERSIONS","URI","IV","URI"]);const a=(r=s.METHOD)!=null?r:"",c=s.URI,u=s.hexadecimalInteger("IV"),d=s.KEYFORMATVERSIONS,h=(i=s.KEYFORMAT)!=null?i:"identity";c&&s.IV&&!u&&J.error(`Invalid IV: ${s.IV}`);const p=c?Ns.resolve(c,e):"",g=(d||"1").split("/").map(Number).filter(Number.isFinite);return new vu(a,p,h,g,u)}function b1(n){const t=new En(n).decimalFloatingPoint("TIME-OFFSET");return Ye(t)?t:null}function KN(n,e){let t=(n||"").split(/[ ,]+/).filter(r=>r);["video","audio","text"].forEach(r=>{const i=t.filter(s=>UN(s,r));i.length&&(e[`${r}Codec`]=i.join(","),t=t.filter(s=>i.indexOf(s)===-1))}),e.unknownCodecs=t}function w1(n,e,t){const r=e[t];r&&(n[t]=r)}function WN(n,e){let t=n[e];for(let r=e;r--;){const i=n[r];if(!i)return;i.programDateTime=t.programDateTime-i.duration*1e3,t=i}}function _1(n,e){n.rawProgramDateTime?n.programDateTime=Date.parse(n.rawProgramDateTime):e!=null&&e.programDateTime&&(n.programDateTime=e.endProgramDateTime),Ye(n.programDateTime)||(n.programDateTime=null,n.rawProgramDateTime=null)}function L1(n,e,t,r){n.relurl=e.URI,e.BYTERANGE&&n.setByteRange(e.BYTERANGE),n.level=t,n.sn="initSegment",r&&(n.levelkeys=r),n.initSegment=null}function C1(n,e,t){n.levelkeys=e;const{encryptedFragments:r}=t;(!r.length||r[r.length-1].levelkeys!==e)&&Object.keys(e).some(i=>e[i].isCommonEncryption)&&r.push(n)}var Dt={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},at={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};function R1(n){const{type:e}=n;switch(e){case Dt.AUDIO_TRACK:return at.AUDIO;case Dt.SUBTITLE_TRACK:return at.SUBTITLE;default:return at.MAIN}}function Vm(n,e){let t=n.url;return(t===void 0||t.indexOf("data:")===0)&&(t=e.url),t}class YN{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(P.MANIFEST_LOADING,this.onManifestLoading,this),e.on(P.LEVEL_LOADING,this.onLevelLoading,this),e.on(P.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(P.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}unregisterListeners(){const{hls:e}=this;e.off(P.MANIFEST_LOADING,this.onManifestLoading,this),e.off(P.LEVEL_LOADING,this.onLevelLoading,this),e.off(P.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(P.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}createInternalLoader(e){const t=this.hls.config,r=t.pLoader,i=t.loader,s=r||i,a=new s(t);return this.loaders[e.type]=a,a}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,t){const{url:r}=t;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:Dt.MANIFEST,url:r,deliveryDirectives:null})}onLevelLoading(e,t){const{id:r,level:i,pathwayId:s,url:a,deliveryDirectives:c}=t;this.load({id:r,level:i,pathwayId:s,responseType:"text",type:Dt.LEVEL,url:a,deliveryDirectives:c})}onAudioTrackLoading(e,t){const{id:r,groupId:i,url:s,deliveryDirectives:a}=t;this.load({id:r,groupId:i,level:null,responseType:"text",type:Dt.AUDIO_TRACK,url:s,deliveryDirectives:a})}onSubtitleTrackLoading(e,t){const{id:r,groupId:i,url:s,deliveryDirectives:a}=t;this.load({id:r,groupId:i,level:null,responseType:"text",type:Dt.SUBTITLE_TRACK,url:s,deliveryDirectives:a})}load(e){var t;const r=this.hls.config;let i=this.getInternalLoader(e);if(i){const d=i.context;if(d&&d.url===e.url&&d.level===e.level){J.trace("[playlist-loader]: playlist request ongoing");return}J.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),i.abort()}let s;if(e.type===Dt.MANIFEST?s=r.manifestLoadPolicy.default:s=$n({},r.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),i=this.createInternalLoader(e),Ye((t=e.deliveryDirectives)==null?void 0:t.part)){let d;if(e.type===Dt.LEVEL&&e.level!==null?d=this.hls.levels[e.level].details:e.type===Dt.AUDIO_TRACK&&e.id!==null?d=this.hls.audioTracks[e.id].details:e.type===Dt.SUBTITLE_TRACK&&e.id!==null&&(d=this.hls.subtitleTracks[e.id].details),d){const h=d.partTarget,p=d.targetduration;if(h&&p){const g=Math.max(h*3,p*.8)*1e3;s=$n({},s,{maxTimeToFirstByteMs:Math.min(g,s.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(g,s.maxTimeToFirstByteMs)})}}}const a=s.errorRetry||s.timeoutRetry||{},c={loadPolicy:s,timeout:s.maxLoadTimeMs,maxRetry:a.maxNumRetry||0,retryDelay:a.retryDelayMs||0,maxRetryDelay:a.maxRetryDelayMs||0},u={onSuccess:(d,h,p,g)=>{const x=this.getInternalLoader(p);this.resetInternalLoader(p.type);const v=d.data;if(v.indexOf("#EXTM3U")!==0){this.handleManifestParsingError(d,p,new Error("no EXTM3U delimiter"),g||null,h);return}h.parsing.start=performance.now(),Ns.isMediaPlaylist(v)?this.handleTrackOrLevelPlaylist(d,h,p,g||null,x):this.handleMasterPlaylist(d,h,p,g)},onError:(d,h,p,g)=>{this.handleNetworkError(h,p,!1,d,g)},onTimeout:(d,h,p)=>{this.handleNetworkError(h,p,!0,void 0,d)}};i.load(e,c,u)}handleMasterPlaylist(e,t,r,i){const s=this.hls,a=e.data,c=Vm(e,r),u=Ns.parseMasterPlaylist(a,c);if(u.playlistParsingError){this.handleManifestParsingError(e,r,u.playlistParsingError,i,t);return}const{contentSteering:d,levels:h,sessionData:p,sessionKeys:g,startTimeOffset:x,variableList:v}=u;this.variableList=v;const{AUDIO:S=[],SUBTITLES:T,"CLOSED-CAPTIONS":_}=Ns.parseMasterPlaylistMedia(a,c,u);S.length&&!S.some(k=>!k.url)&&h[0].audioCodec&&!h[0].attrs.AUDIO&&(J.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),S.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new En({}),bitrate:0,url:""})),s.trigger(P.MANIFEST_LOADED,{levels:h,audioTracks:S,subtitles:T,captions:_,contentSteering:d,url:c,stats:t,networkDetails:i,sessionData:p,sessionKeys:g,startTimeOffset:x,variableList:v})}handleTrackOrLevelPlaylist(e,t,r,i,s){const a=this.hls,{id:c,level:u,type:d}=r,h=Vm(e,r),p=0,g=Ye(u)?u:Ye(c)?c:0,x=R1(r),v=Ns.parseLevelPlaylist(e.data,h,g,x,p,this.variableList);if(d===Dt.MANIFEST){const S={attrs:new En({}),bitrate:0,details:v,name:"",url:h};a.trigger(P.MANIFEST_LOADED,{levels:[S],audioTracks:[],url:h,stats:t,networkDetails:i,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),r.levelDetails=v,this.handlePlaylistLoaded(v,e,t,r,i,s)}handleManifestParsingError(e,t,r,i,s){this.hls.trigger(P.ERROR,{type:ft.NETWORK_ERROR,details:le.MANIFEST_PARSING_ERROR,fatal:t.type===Dt.MANIFEST,url:e.url,err:r,error:r,reason:r.message,response:e,context:t,networkDetails:i,stats:s})}handleNetworkError(e,t,r=!1,i,s){let a=`A network ${r?"timeout":"error"+(i?" (status "+i.code+")":"")} occurred while loading ${e.type}`;e.type===Dt.LEVEL?a+=`: ${e.level} id: ${e.id}`:(e.type===Dt.AUDIO_TRACK||e.type===Dt.SUBTITLE_TRACK)&&(a+=` id: ${e.id} group-id: "${e.groupId}"`);const c=new Error(a);J.warn(`[playlist-loader]: ${a}`);let u=le.UNKNOWN,d=!1;const h=this.getInternalLoader(e);switch(e.type){case Dt.MANIFEST:u=r?le.MANIFEST_LOAD_TIMEOUT:le.MANIFEST_LOAD_ERROR,d=!0;break;case Dt.LEVEL:u=r?le.LEVEL_LOAD_TIMEOUT:le.LEVEL_LOAD_ERROR,d=!1;break;case Dt.AUDIO_TRACK:u=r?le.AUDIO_TRACK_LOAD_TIMEOUT:le.AUDIO_TRACK_LOAD_ERROR,d=!1;break;case Dt.SUBTITLE_TRACK:u=r?le.SUBTITLE_TRACK_LOAD_TIMEOUT:le.SUBTITLE_LOAD_ERROR,d=!1;break}h&&this.resetInternalLoader(e.type);const p={type:ft.NETWORK_ERROR,details:u,fatal:d,url:e.url,loader:h,context:e,error:c,networkDetails:t,stats:s};if(i){const g=(t==null?void 0:t.url)||e.url;p.response=or({url:g,data:void 0},i)}this.hls.trigger(P.ERROR,p)}handlePlaylistLoaded(e,t,r,i,s,a){const c=this.hls,{type:u,level:d,id:h,groupId:p,deliveryDirectives:g}=i,x=Vm(t,i),v=R1(i),S=typeof i.level=="number"&&v===at.MAIN?d:void 0;if(!e.fragments.length){const _=new Error("No Segments found in Playlist");c.trigger(P.ERROR,{type:ft.NETWORK_ERROR,details:le.LEVEL_EMPTY_ERROR,fatal:!1,url:x,error:_,reason:_.message,response:t,context:i,level:S,parent:v,networkDetails:s,stats:r});return}e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration"));const T=e.playlistParsingError;if(T){c.trigger(P.ERROR,{type:ft.NETWORK_ERROR,details:le.LEVEL_PARSING_ERROR,fatal:!1,url:x,error:T,reason:T.message,response:t,context:i,level:S,parent:v,networkDetails:s,stats:r});return}switch(e.live&&a&&(a.getCacheAge&&(e.ageHeader=a.getCacheAge()||0),(!a.getCacheAge||isNaN(e.ageHeader))&&(e.ageHeader=0)),u){case Dt.MANIFEST:case Dt.LEVEL:c.trigger(P.LEVEL_LOADED,{details:e,level:S||0,id:h||0,stats:r,networkDetails:s,deliveryDirectives:g});break;case Dt.AUDIO_TRACK:c.trigger(P.AUDIO_TRACK_LOADED,{details:e,id:h||0,groupId:p||"",stats:r,networkDetails:s,deliveryDirectives:g});break;case Dt.SUBTITLE_TRACK:c.trigger(P.SUBTITLE_TRACK_LOADED,{details:e,id:h||0,groupId:p||"",stats:r,networkDetails:s,deliveryDirectives:g});break}}}function sb(n,e){let t;try{t=new Event("addtrack")}catch{t=document.createEvent("Event"),t.initEvent("addtrack",!1,!1)}t.track=n,e.dispatchEvent(t)}function ob(n,e){const t=n.mode;if(t==="disabled"&&(n.mode="hidden"),n.cues&&!n.cues.getCueById(e.id))try{if(n.addCue(e),!n.cues.getCueById(e.id))throw new Error(`addCue is failed for: ${e}`)}catch(r){J.debug(`[texttrack-utils]: ${r}`);try{const i=new self.TextTrackCue(e.startTime,e.endTime,e.text);i.id=e.id,n.addCue(i)}catch(i){J.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${i}`)}}t==="disabled"&&(n.mode=t)}function Kl(n){const e=n.mode;if(e==="disabled"&&(n.mode="hidden"),n.cues)for(let t=n.cues.length;t--;)n.removeCue(n.cues[t]);e==="disabled"&&(n.mode=e)}function Ng(n,e,t,r){const i=n.mode;if(i==="disabled"&&(n.mode="hidden"),n.cues&&n.cues.length>0){const s=XN(n.cues,e,t);for(let a=0;a<s.length;a++)(!r||r(s[a]))&&n.removeCue(s[a])}i==="disabled"&&(n.mode=i)}function qN(n,e){if(e<n[0].startTime)return 0;const t=n.length-1;if(e>n[t].endTime)return-1;let r=0,i=t;for(;r<=i;){const s=Math.floor((i+r)/2);if(e<n[s].startTime)i=s-1;else if(e>n[s].startTime&&r<t)r=s+1;else return s}return n[r].startTime-e<e-n[i].startTime?r:i}function XN(n,e,t){const r=[],i=qN(n,e);if(i>-1)for(let s=i,a=n.length;s<a;s++){const c=n[s];if(c.startTime>=e&&c.endTime<=t)r.push(c);else if(c.startTime>t)return r}return r}function kf(n){const e=[];for(let t=0;t<n.length;t++){const r=n[t];(r.kind==="subtitles"||r.kind==="captions")&&r.label&&e.push(n[t])}return e}var ts={audioId3:"org.id3",dateRange:"com.apple.quicktime.HLS",emsg:"https://aomedia.org/emsg/ID3"};const QN=.25;function Mg(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}function A1(n,e,t,r,i){let s=new n(e,t,"");try{s.value=r,i&&(s.type=i)}catch{s=new n(e,t,JSON.stringify(i?or({type:i},r):r))}return s}const lf=(()=>{const n=Mg();try{n&&new n(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();function zm(n,e){return n.getTime()/1e3-e}function JN(n){return Uint8Array.from(n.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}class ZN{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null}_registerListeners(){const{hls:e}=this;e.on(P.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(P.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(P.MANIFEST_LOADING,this.onManifestLoading,this),e.on(P.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(P.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(P.LEVEL_UPDATED,this.onLevelUpdated,this)}_unregisterListeners(){const{hls:e}=this;e.off(P.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(P.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(P.MANIFEST_LOADING,this.onManifestLoading,this),e.off(P.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(P.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(P.LEVEL_UPDATED,this.onLevelUpdated,this)}onMediaAttached(e,t){this.media=t.media}onMediaDetaching(){this.id3Track&&(Kl(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const t=this.getID3Track(e.textTracks);return t.mode="hidden",t}getID3Track(e){if(this.media){for(let t=0;t<e.length;t++){const r=e[t];if(r.kind==="metadata"&&r.label==="id3")return sb(r,this.media),r}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,t){if(!this.media)return;const{hls:{config:{enableEmsgMetadataCues:r,enableID3MetadataCues:i}}}=this;if(!r&&!i)return;const{samples:s}=t;this.id3Track||(this.id3Track=this.createTrack(this.media));const a=Mg();if(a)for(let c=0;c<s.length;c++){const u=s[c].type;if(u===ts.emsg&&!r||!i)continue;const d=qT(s[c].data);if(d){const h=s[c].pts;let p=h+s[c].duration;p>lf&&(p=lf),p-h<=0&&(p=h+QN);for(let x=0;x<d.length;x++){const v=d[x];if(!YT(v)){this.updateId3CueEnds(h,u);const S=A1(a,h,p,v,u);S&&this.id3Track.addCue(S)}}}}}updateId3CueEnds(e,t){var r;const i=(r=this.id3Track)==null?void 0:r.cues;if(i)for(let s=i.length;s--;){const a=i[s];a.type===t&&a.startTime<e&&a.endTime===lf&&(a.endTime=e)}}onBufferFlushing(e,{startOffset:t,endOffset:r,type:i}){const{id3Track:s,hls:a}=this;if(!a)return;const{config:{enableEmsgMetadataCues:c,enableID3MetadataCues:u}}=a;if(s&&(c||u)){let d;i==="audio"?d=h=>h.type===ts.audioId3&&u:i==="video"?d=h=>h.type===ts.emsg&&c:d=h=>h.type===ts.audioId3&&u||h.type===ts.emsg&&c,Ng(s,t,r,d)}}onLevelUpdated(e,{details:t}){if(!this.media||!t.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)return;const{dateRangeCuesAppended:r,id3Track:i}=this,{dateRanges:s}=t,a=Object.keys(s);if(i){const h=Object.keys(r).filter(p=>!a.includes(p));for(let p=h.length;p--;){const g=h[p];Object.keys(r[g].cues).forEach(x=>{i.removeCue(r[g].cues[x])}),delete r[g]}}const c=t.fragments[t.fragments.length-1];if(a.length===0||!Ye(c==null?void 0:c.programDateTime))return;this.id3Track||(this.id3Track=this.createTrack(this.media));const u=c.programDateTime/1e3-c.start,d=Mg();for(let h=0;h<a.length;h++){const p=a[h],g=s[p],x=zm(g.startDate,u),v=r[p],S=(v==null?void 0:v.cues)||{};let T=(v==null?void 0:v.durationKnown)||!1,_=lf;const C=g.endDate;if(C)_=zm(C,u),T=!0;else if(g.endOnNext&&!T){const O=a.reduce((w,$)=>{if($!==g.id){const M=s[$];if(M.class===g.class&&M.startDate>g.startDate&&(!w||g.startDate<w.startDate))return M}return w},null);O&&(_=zm(O.startDate,u),T=!0)}const k=Object.keys(g.attr);for(let O=0;O<k.length;O++){const w=k[O];if(!nN(w))continue;const $=S[w];if($)T&&!v.durationKnown&&($.endTime=_);else if(d){let M=g.attr[w];rN(w)&&(M=JN(M));const U=A1(d,x,_,{key:w,data:M},ts.dateRange);U&&(U.id=p,this.id3Track.addCue(U),S[w]=U)}}r[p]={cues:S,dateRange:g,durationKnown:T}}}}class eM{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=()=>this.timeupdate(),this.hls=e,this.config=e.config,this.registerListeners()}get latency(){return this._latency||0}get maxLatency(){const{config:e,levelDetails:t}=this;return e.liveMaxLatencyDuration!==void 0?e.liveMaxLatencyDuration:t?e.liveMaxLatencyDurationCount*t.targetduration:0}get targetLatency(){const{levelDetails:e}=this;if(e===null)return null;const{holdBack:t,partHoldBack:r,targetduration:i}=e,{liveSyncDuration:s,liveSyncDurationCount:a,lowLatencyMode:c}=this.config,u=this.hls.userConfig;let d=c&&r||t;(u.liveSyncDuration||u.liveSyncDurationCount||d===0)&&(d=s!==void 0?s:a*i);const h=i;return d+Math.min(this.stallCount*1,h)}get liveSyncPosition(){const e=this.estimateLiveEdge(),t=this.targetLatency,r=this.levelDetails;if(e===null||t===null||r===null)return null;const i=r.edge,s=e-t-this.edgeStalled,a=i-r.totalduration,c=i-(this.config.lowLatencyMode&&r.partTarget||r.targetduration);return Math.min(Math.max(a,s),c)}get drift(){const{levelDetails:e}=this;return e===null?1:e.drift}get edgeStalled(){const{levelDetails:e}=this;if(e===null)return 0;const t=(this.config.lowLatencyMode&&e.partTarget||e.targetduration)*3;return Math.max(e.age-t,0)}get forwardBufferLength(){const{media:e,levelDetails:t}=this;if(!e||!t)return 0;const r=e.buffered.length;return(r?e.buffered.end(r-1):t.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null}registerListeners(){this.hls.on(P.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(P.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(P.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(P.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(P.ERROR,this.onError,this)}unregisterListeners(){this.hls.off(P.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(P.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.off(P.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(P.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.off(P.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)}onManifestLoading(){this.levelDetails=null,this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:t}){this.levelDetails=t,t.advanced&&this.timeupdate(),!t.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)}onError(e,t){var r;t.details===le.BUFFER_STALLED_ERROR&&(this.stallCount++,(r=this.levelDetails)!=null&&r.live&&J.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))}timeupdate(){const{media:e,levelDetails:t}=this;if(!e||!t)return;this.currentTime=e.currentTime;const r=this.computeLatency();if(r===null)return;this._latency=r;const{lowLatencyMode:i,maxLiveSyncPlaybackRate:s}=this.config;if(!i||s===1||!t.live)return;const a=this.targetLatency;if(a===null)return;const c=r-a,u=Math.min(this.maxLatency,a+t.targetduration);if(c<u&&c>.05&&this.forwardBufferLength>1){const h=Math.min(2,Math.max(1,s)),p=Math.round(2/(1+Math.exp(-.75*c-this.edgeStalled))*20)/20;e.playbackRate=Math.min(h,Math.max(1,p))}else e.playbackRate!==1&&e.playbackRate!==0&&(e.playbackRate=1)}estimateLiveEdge(){const{levelDetails:e}=this;return e===null?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return e===null?null:e-this.currentTime}}const Fg=["NONE","TYPE-0","TYPE-1",null];function tM(n){return Fg.indexOf(n)>-1}const th=["SDR","PQ","HLG"];function nM(n){return!!n&&th.indexOf(n)>-1}var If={No:"",Yes:"YES",v2:"v2"};function k1(n){const{canSkipUntil:e,canSkipDateRanges:t,age:r}=n,i=r<e/2;return e&&i?t?If.v2:If.Yes:If.No}class I1{constructor(e,t,r){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=r}addDirectives(e){const t=new self.URL(e);return this.msn!==void 0&&t.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href}}class ec{constructor(e){this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(t=>!!t).map(t=>t.substring(0,4)).join(","),this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return P1(this._audioGroups,e)}hasSubtitleGroup(e){return P1(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,t){if(t){if(e==="audio"){let r=this._audioGroups;r||(r=this._audioGroups=[]),r.indexOf(t)===-1&&r.push(t)}else if(e==="text"){let r=this._subtitleGroups;r||(r=this._subtitleGroups=[]),r.indexOf(t)===-1&&r.push(t)}}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return(e=this.audioGroups)==null?void 0:e[0]}get textGroupId(){var e;return(e=this.subtitleGroups)==null?void 0:e[0]}addFallback(){}}function P1(n,e){return!e||!n?!1:n.indexOf(e)!==-1}function Km(n,e){const t=e.startPTS;if(Ye(t)){let r=0,i;e.sn>n.sn?(r=t-n.start,i=n):(r=n.start-t,i=e),i.duration!==r&&(i.duration=r)}else e.sn>n.sn?n.cc===e.cc&&n.minEndPTS?e.start=n.start+(n.minEndPTS-n.start):e.start=n.start+n.duration:e.start=Math.max(n.start-e.duration,0)}function ab(n,e,t,r,i,s){r-t<=0&&(J.warn("Fragment should have a positive duration",e),r=t+e.duration,s=i+e.duration);let c=t,u=r;const d=e.startPTS,h=e.endPTS;if(Ye(d)){const T=Math.abs(d-t);Ye(e.deltaPTS)?e.deltaPTS=Math.max(T,e.deltaPTS):e.deltaPTS=T,c=Math.max(t,d),t=Math.min(t,d),i=Math.min(i,e.startDTS),u=Math.min(r,h),r=Math.max(r,h),s=Math.max(s,e.endDTS)}const p=t-e.start;e.start!==0&&(e.start=t),e.duration=r-e.start,e.startPTS=t,e.maxStartPTS=c,e.startDTS=i,e.endPTS=r,e.minEndPTS=u,e.endDTS=s;const g=e.sn;if(!n||g<n.startSN||g>n.endSN)return 0;let x;const v=g-n.startSN,S=n.fragments;for(S[v]=e,x=v;x>0;x--)Km(S[x],S[x-1]);for(x=v;x<S.length-1;x++)Km(S[x],S[x+1]);return n.fragmentHint&&Km(S[S.length-1],n.fragmentHint),n.PTSKnown=n.alignedSliding=!0,p}function rM(n,e){let t=null;const r=n.fragments;for(let c=r.length-1;c>=0;c--){const u=r[c].initSegment;if(u){t=u;break}}n.fragmentHint&&delete n.fragmentHint.endPTS;let i;oM(n,e,(c,u,d,h)=>{if(e.skippedSegments&&u.cc!==c.cc){const p=c.cc-u.cc;for(let g=d;g<h.length;g++)h[g].cc+=p}Ye(c.startPTS)&&Ye(c.endPTS)&&(u.start=u.startPTS=c.startPTS,u.startDTS=c.startDTS,u.maxStartPTS=c.maxStartPTS,u.endPTS=c.endPTS,u.endDTS=c.endDTS,u.minEndPTS=c.minEndPTS,u.duration=c.endPTS-c.startPTS,u.duration&&(i=u),e.PTSKnown=e.alignedSliding=!0),u.elementaryStreams=c.elementaryStreams,u.loader=c.loader,u.stats=c.stats,c.initSegment&&(u.initSegment=c.initSegment,t=c.initSegment)});const s=e.fragments;if(t&&(e.fragmentHint?s.concat(e.fragmentHint):s).forEach(u=>{var d;u&&(!u.initSegment||u.initSegment.relurl===((d=t)==null?void 0:d.relurl))&&(u.initSegment=t)}),e.skippedSegments){if(e.deltaUpdateFailed=s.some(c=>!c),e.deltaUpdateFailed){J.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let c=e.skippedSegments;c--;)s.shift();e.startSN=s[0].sn}else e.canSkipDateRanges&&(e.dateRanges=iM(n.dateRanges,e.dateRanges,e.recentlyRemovedDateranges));e.startCC=e.fragments[0].cc,e.endCC=s[s.length-1].cc}sM(n.partList,e.partList,(c,u)=>{u.elementaryStreams=c.elementaryStreams,u.stats=c.stats}),i?ab(e,i,i.startPTS,i.endPTS,i.startDTS,i.endDTS):lb(n,e),s.length&&(e.totalduration=e.edge-s[0].start),e.driftStartTime=n.driftStartTime,e.driftStart=n.driftStart;const a=e.advancedDateTime;if(e.advanced&&a){const c=e.edge;e.driftStart||(e.driftStartTime=a,e.driftStart=c),e.driftEndTime=a,e.driftEnd=c}else e.driftEndTime=n.driftEndTime,e.driftEnd=n.driftEnd,e.advancedDateTime=n.advancedDateTime}function iM(n,e,t){const r=$n({},n);return t&&t.forEach(i=>{delete r[i]}),Object.keys(e).forEach(i=>{const s=new GT(e[i].attr,r[i]);s.isValid?r[i]=s:J.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${JSON.stringify(e[i].attr)}"`)}),r}function sM(n,e,t){if(n&&e){let r=0;for(let i=0,s=n.length;i<=s;i++){const a=n[i],c=e[i+r];a&&c&&a.index===c.index&&a.fragment.sn===c.fragment.sn?t(a,c):r--}}}function oM(n,e,t){const r=e.skippedSegments,i=Math.max(n.startSN,e.startSN)-e.startSN,s=(n.fragmentHint?1:0)+(r?e.endSN:Math.min(n.endSN,e.endSN))-e.startSN,a=e.startSN-n.startSN,c=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,u=n.fragmentHint?n.fragments.concat(n.fragmentHint):n.fragments;for(let d=i;d<=s;d++){const h=u[a+d];let p=c[d];r&&!p&&d<r&&(p=e.fragments[d]=h),h&&p&&t(h,p,d,c)}}function lb(n,e){const t=e.startSN+e.skippedSegments-n.startSN,r=n.fragments;t<0||t>=r.length||$g(e,r[t].start)}function $g(n,e){if(e){const t=n.fragments;for(let r=n.skippedSegments;r<t.length;r++)t[r].start+=e;n.fragmentHint&&(n.fragmentHint.start+=e)}}function aM(n,e=1/0){let t=1e3*n.targetduration;if(n.updated){const r=n.fragments;if(r.length&&t*4>e){const s=r[r.length-1].duration*1e3;s<t&&(t=s)}}else t/=2;return Math.round(t)}function lM(n,e,t){if(!(n!=null&&n.details))return null;const r=n.details;let i=r.fragments[e-r.startSN];return i||(i=r.fragmentHint,i&&i.sn===e)?i:e<r.startSN&&t&&t.sn===e?t:null}function D1(n,e,t){var r;return n!=null&&n.details?cb((r=n.details)==null?void 0:r.partList,e,t):null}function cb(n,e,t){if(n)for(let r=n.length;r--;){const i=n[r];if(i.index===t&&i.fragment.sn===e)return i}return null}function ub(n){n.forEach((e,t)=>{const{details:r}=e;r!=null&&r.fragments&&r.fragments.forEach(i=>{i.level=t})})}function nh(n){switch(n.details){case le.FRAG_LOAD_TIMEOUT:case le.KEY_LOAD_TIMEOUT:case le.LEVEL_LOAD_TIMEOUT:case le.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function O1(n,e){const t=nh(e);return n.default[`${t?"timeout":"error"}Retry`]}function W0(n,e){const t=n.backoff==="linear"?1:Math.pow(2,e);return Math.min(t*n.retryDelayMs,n.maxRetryDelayMs)}function N1(n){return or(or({},n),{errorRetry:null,timeoutRetry:null})}function rh(n,e,t,r){if(!n)return!1;const i=r==null?void 0:r.code,s=e<n.maxNumRetry&&(cM(i)||!!t);return n.shouldRetry?n.shouldRetry(n,e,t,r,s):s}function cM(n){return n===0&&navigator.onLine===!1||!!n&&(n<400||n>499)}const db={search:function(n,e){let t=0,r=n.length-1,i=null,s=null;for(;t<=r;){i=(t+r)/2|0,s=n[i];const a=e(s);if(a>0)t=i+1;else if(a<0)r=i-1;else return s}return null}};function uM(n,e,t){if(e===null||!Array.isArray(n)||!n.length||!Ye(e))return null;const r=n[0].programDateTime;if(e<(r||0))return null;const i=n[n.length-1].endProgramDateTime;if(e>=(i||0))return null;t=t||0;for(let s=0;s<n.length;++s){const a=n[s];if(fM(e,t,a))return a}return null}function ih(n,e,t=0,r=0,i=.005){let s=null;if(n){s=e[n.sn-e[0].sn+1]||null;const c=n.endDTS-t;c>0&&c<15e-7&&(t+=15e-7)}else t===0&&e[0].start===0&&(s=e[0]);if(s&&((!n||n.level===s.level)&&Bg(t,r,s)===0||dM(s,n,Math.min(i,r))))return s;const a=db.search(e,Bg.bind(null,t,r));return a&&(a!==n||!s)?a:s}function dM(n,e,t){if(e&&e.start===0&&e.level<n.level&&(e.endPTS||0)>0){const r=e.tagList.reduce((i,s)=>(s[0]==="INF"&&(i+=parseFloat(s[1])),i),t);return n.start<=r}return!1}function Bg(n=0,e=0,t){if(t.start<=n&&t.start+t.duration>n)return 0;const r=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0));return t.start+t.duration-r<=n?1:t.start-r>n&&t.start?-1:0}function fM(n,e,t){const r=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0))*1e3;return(t.endProgramDateTime||0)-r>n}function hM(n,e){return db.search(n,t=>t.cc<e?1:t.cc>e?-1:0)}var hr={DoNothing:0,SendEndCallback:1,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,InsertDiscontinuity:4,RetryRequest:5},Ji={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2,SwitchToSDR:4};class pM{constructor(e){this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.log=void 0,this.warn=void 0,this.error=void 0,this.hls=e,this.log=J.log.bind(J,"[info]:"),this.warn=J.warn.bind(J,"[warning]:"),this.error=J.error.bind(J,"[error]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(P.ERROR,this.onError,this),e.on(P.MANIFEST_LOADING,this.onManifestLoading,this),e.on(P.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(P.ERROR,this.onError,this),e.off(P.ERROR,this.onErrorOut,this),e.off(P.MANIFEST_LOADING,this.onManifestLoading,this),e.off(P.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return(e==null?void 0:e.type)===at.MAIN?e.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(e,t){var r,i;if(t.fatal)return;const s=this.hls,a=t.context;switch(t.details){case le.FRAG_LOAD_ERROR:case le.FRAG_LOAD_TIMEOUT:case le.KEY_LOAD_ERROR:case le.KEY_LOAD_TIMEOUT:t.errorAction=this.getFragRetryOrSwitchAction(t);return;case le.FRAG_PARSING_ERROR:if((r=t.frag)!=null&&r.gap){t.errorAction={action:hr.DoNothing,flags:Ji.None};return}case le.FRAG_GAP:case le.FRAG_DECRYPT_ERROR:{t.errorAction=this.getFragRetryOrSwitchAction(t),t.errorAction.action=hr.SendAlternateToPenaltyBox;return}case le.LEVEL_EMPTY_ERROR:case le.LEVEL_PARSING_ERROR:{var c,u;const d=t.parent===at.MAIN?t.level:s.loadLevel;t.details===le.LEVEL_EMPTY_ERROR&&((c=t.context)!=null&&(u=c.levelDetails)!=null&&u.live)?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,d):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,d))}return;case le.LEVEL_LOAD_ERROR:case le.LEVEL_LOAD_TIMEOUT:typeof(a==null?void 0:a.level)=="number"&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,a.level));return;case le.AUDIO_TRACK_LOAD_ERROR:case le.AUDIO_TRACK_LOAD_TIMEOUT:case le.SUBTITLE_LOAD_ERROR:case le.SUBTITLE_TRACK_LOAD_TIMEOUT:if(a){const d=s.levels[s.loadLevel];if(d&&(a.type===Dt.AUDIO_TRACK&&d.hasAudioGroup(a.groupId)||a.type===Dt.SUBTITLE_TRACK&&d.hasSubtitleGroup(a.groupId))){t.errorAction=this.getPlaylistRetryOrSwitchAction(t,s.loadLevel),t.errorAction.action=hr.SendAlternateToPenaltyBox,t.errorAction.flags=Ji.MoveAllAlternatesMatchingHost;return}}return;case le.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const d=s.levels[s.loadLevel],h=d==null?void 0:d.attrs["HDCP-LEVEL"];h?t.errorAction={action:hr.SendAlternateToPenaltyBox,flags:Ji.MoveAllAlternatesMatchingHDCP,hdcpLevel:h}:this.keySystemError(t)}return;case le.BUFFER_ADD_CODEC_ERROR:case le.REMUX_ALLOC_ERROR:case le.BUFFER_APPEND_ERROR:t.errorAction=this.getLevelSwitchAction(t,(i=t.level)!=null?i:s.loadLevel);return;case le.INTERNAL_EXCEPTION:case le.BUFFER_APPENDING_ERROR:case le.BUFFER_FULL_ERROR:case le.LEVEL_SWITCH_ERROR:case le.BUFFER_STALLED_ERROR:case le.BUFFER_SEEK_OVER_HOLE:case le.BUFFER_NUDGE_ON_STALL:t.errorAction={action:hr.DoNothing,flags:Ji.None};return}t.type===ft.KEY_SYSTEM_ERROR&&this.keySystemError(t)}keySystemError(e){const t=this.getVariantLevelIndex(e.frag);e.levelRetry=!1,e.errorAction=this.getLevelSwitchAction(e,t)}getPlaylistRetryOrSwitchAction(e,t){const r=this.hls,i=O1(r.config.playlistLoadPolicy,e),s=this.playlistError++;if(rh(i,s,nh(e),e.response))return{action:hr.RetryRequest,flags:Ji.None,retryConfig:i,retryCount:s};const c=this.getLevelSwitchAction(e,t);return i&&(c.retryConfig=i,c.retryCount=s),c}getFragRetryOrSwitchAction(e){const t=this.hls,r=this.getVariantLevelIndex(e.frag),i=t.levels[r],{fragLoadPolicy:s,keyLoadPolicy:a}=t.config,c=O1(e.details.startsWith("key")?a:s,e),u=t.levels.reduce((h,p)=>h+p.fragmentError,0);if(i&&(e.details!==le.FRAG_GAP&&i.fragmentError++,rh(c,u,nh(e),e.response)))return{action:hr.RetryRequest,flags:Ji.None,retryConfig:c,retryCount:u};const d=this.getLevelSwitchAction(e,r);return c&&(d.retryConfig=c,d.retryCount=u),d}getLevelSwitchAction(e,t){const r=this.hls;t==null&&(t=r.loadLevel);const i=this.hls.levels[t];if(i){var s,a;const d=e.details;i.loadError++,d===le.BUFFER_APPEND_ERROR&&i.fragmentError++;let h=-1;const{levels:p,loadLevel:g,minAutoLevel:x,maxAutoLevel:v}=r;r.autoLevelEnabled||(r.loadLevel=-1);const S=(s=e.frag)==null?void 0:s.type,_=(S===at.AUDIO&&d===le.FRAG_PARSING_ERROR||e.sourceBufferName==="audio"&&(d===le.BUFFER_ADD_CODEC_ERROR||d===le.BUFFER_APPEND_ERROR))&&p.some(({audioCodec:$})=>i.audioCodec!==$),k=e.sourceBufferName==="video"&&(d===le.BUFFER_ADD_CODEC_ERROR||d===le.BUFFER_APPEND_ERROR)&&p.some(({codecSet:$,audioCodec:M})=>i.codecSet!==$&&i.audioCodec===M),{type:O,groupId:w}=(a=e.context)!=null?a:{};for(let $=p.length;$--;){const M=($+g)%p.length;if(M!==g&&M>=x&&M<=v&&p[M].loadError===0){var c,u;const U=p[M];if(d===le.FRAG_GAP&&S===at.MAIN&&e.frag){const W=p[M].details;if(W){const R=ih(e.frag,W.fragments,e.frag.start);if(R!=null&&R.gap)continue}}else{if(O===Dt.AUDIO_TRACK&&U.hasAudioGroup(w)||O===Dt.SUBTITLE_TRACK&&U.hasSubtitleGroup(w))continue;if(S===at.AUDIO&&(c=i.audioGroups)!=null&&c.some(W=>U.hasAudioGroup(W))||S===at.SUBTITLE&&(u=i.subtitleGroups)!=null&&u.some(W=>U.hasSubtitleGroup(W))||_&&i.audioCodec===U.audioCodec||!_&&i.audioCodec!==U.audioCodec||k&&i.codecSet===U.codecSet)continue}h=M;break}}if(h>-1&&r.loadLevel!==h)return e.levelRetry=!0,this.playlistError=0,{action:hr.SendAlternateToPenaltyBox,flags:Ji.None,nextAutoLevel:h}}return{action:hr.SendAlternateToPenaltyBox,flags:Ji.MoveAllAlternatesMatchingHost}}onErrorOut(e,t){var r;switch((r=t.errorAction)==null?void 0:r.action){case hr.DoNothing:break;case hr.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(t),!t.errorAction.resolved&&t.details!==le.FRAG_GAP?t.fatal=!0:/MediaSource readyState: ended/.test(t.error.message)&&(this.warn(`MediaSource ended after "${t.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError());break}if(t.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(e){const t=this.hls,r=e.errorAction;if(!r)return;const{flags:i,hdcpLevel:s,nextAutoLevel:a}=r;switch(i){case Ji.None:this.switchLevel(e,a);break;case Ji.MoveAllAlternatesMatchingHDCP:s&&(t.maxHdcpLevel=Fg[Fg.indexOf(s)-1],r.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${t.maxHdcpLevel}" or lower`);break}r.resolved||this.switchLevel(e,a)}switchLevel(e,t){t!==void 0&&e.errorAction&&(this.warn(`switching to level ${t} after ${e.details}`),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel)}}class Y0{constructor(e,t){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.log=void 0,this.warn=void 0,this.log=J.log.bind(J,`${t}:`),this.warn=J.warn.bind(J,`${t}:`),this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){this.timer!==-1&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.requestScheduled=-1,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,t,r){const i=t==null?void 0:t.renditionReports;if(i){let s=-1;for(let a=0;a<i.length;a++){const c=i[a];let u;try{u=new self.URL(c.URI,t.url).href}catch(d){J.warn(`Could not construct new URL for Rendition Report: ${d}`),u=c.URI||""}if(u===e){s=a;break}else u===e.substring(0,u.length)&&(s=a)}if(s!==-1){const a=i[s],c=parseInt(a["LAST-MSN"])||(t==null?void 0:t.lastPartSn);let u=parseInt(a["LAST-PART"])||(t==null?void 0:t.lastPartIndex);if(this.hls.config.lowLatencyMode){const h=Math.min(t.age-t.partTarget,t.targetduration);u>=0&&h>t.partTarget&&(u+=1)}const d=r&&k1(r);return new I1(c,u>=0?u:void 0,d)}}}loadPlaylist(e){this.requestScheduled===-1&&(this.requestScheduled=self.performance.now())}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}shouldReloadPlaylist(e){return this.timer===-1&&this.requestScheduled===-1&&this.shouldLoadPlaylist(e)}playlistLoaded(e,t,r){const{details:i,stats:s}=t,a=self.performance.now(),c=s.loading.first?Math.max(0,a-s.loading.first):0;if(i.advancedDateTime=Date.now()-c,i.live||r!=null&&r.live){if(i.reloaded(r),r&&this.log(`live playlist ${e} ${i.advanced?"REFRESHED "+i.lastPartSn+"-"+i.lastPartIndex:i.updated?"UPDATED":"MISSED"}`),r&&i.fragments.length>0&&rM(r,i),!this.canLoad||!i.live)return;let u,d,h;if(i.canBlockReload&&i.endSN&&i.advanced){const T=this.hls.config.lowLatencyMode,_=i.lastPartSn,C=i.endSN,k=i.lastPartIndex,O=k!==-1,w=_===C,$=T?0:k;O?(d=w?C+1:_,h=w?$:k+1):d=C+1;const M=i.age,U=M+i.ageHeader;let W=Math.min(U-i.partTarget,i.targetduration*1.5);if(W>0){if(r&&W>r.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${r.tuneInGoal} to: ${W} with playlist age: ${i.age}`),W=0;else{const R=Math.floor(W/i.targetduration);if(d+=R,h!==void 0){const G=Math.round(W%i.targetduration/i.partTarget);h+=G}this.log(`CDN Tune-in age: ${i.ageHeader}s last advanced ${M.toFixed(2)}s goal: ${W} skip sn ${R} to part ${h}`)}i.tuneInGoal=W}if(u=this.getDeliveryDirectives(i,t.deliveryDirectives,d,h),T||!w){this.loadPlaylist(u);return}}else(i.canBlockReload||i.canSkipUntil)&&(u=this.getDeliveryDirectives(i,t.deliveryDirectives,d,h));const p=this.hls.mainForwardBufferInfo,g=p?p.end-p.len:0,x=(i.edge-g)*1e3,v=aM(i,x);i.updated&&a>this.requestScheduled+v&&(this.requestScheduled=s.loading.start),d!==void 0&&i.canBlockReload?this.requestScheduled=s.loading.first+v-(i.partTarget*1e3||1e3):this.requestScheduled===-1||this.requestScheduled+v<a?this.requestScheduled=a:this.requestScheduled-a<=0&&(this.requestScheduled+=v);let S=this.requestScheduled-a;S=Math.max(0,S),this.log(`reload live playlist ${e} in ${Math.round(S)} ms`),this.timer=self.setTimeout(()=>this.loadPlaylist(u),S)}else this.clearTimer()}getDeliveryDirectives(e,t,r,i){let s=k1(e);return t!=null&&t.skip&&e.deltaUpdateFailed&&(r=t.msn,i=t.part,s=If.No),new I1(r,i,s)}checkRetry(e){const t=e.details,r=nh(e),i=e.errorAction,{action:s,retryCount:a=0,retryConfig:c}=i||{},u=!!i&&!!c&&(s===hr.RetryRequest||!i.resolved&&s===hr.SendAlternateToPenaltyBox);if(u){var d;if(this.requestScheduled=-1,a>=c.maxNumRetry)return!1;if(r&&(d=e.context)!=null&&d.deliveryDirectives)this.warn(`Retrying playlist loading ${a+1}/${c.maxNumRetry} after "${t}" without delivery-directives`),this.loadPlaylist();else{const h=W0(c,a);this.timer=self.setTimeout(()=>this.loadPlaylist(),h),this.warn(`Retrying playlist loading ${a+1}/${c.maxNumRetry} after "${t}" in ${h}ms`)}e.levelRetry=!0,i.resolved=!0}return u}}class $l{constructor(e,t=0,r=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=r}sample(e,t){const r=Math.pow(this.alpha_,e);this.estimate_=t*(1-r)+r*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class mM{constructor(e,t,r,i=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=r,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new $l(e),this.fast_=new $l(t),this.defaultTTFB_=i,this.ttfb_=new $l(e)}update(e,t){const{slow_:r,fast_:i,ttfb_:s}=this;r.halfLife!==e&&(this.slow_=new $l(e,r.getEstimate(),r.getTotalWeight())),i.halfLife!==t&&(this.fast_=new $l(t,i.getEstimate(),i.getTotalWeight())),s.halfLife!==e&&(this.ttfb_=new $l(e,s.getEstimate(),s.getTotalWeight()))}sample(e,t){e=Math.max(e,this.minDelayMs_);const r=8*t,i=e/1e3,s=r/i;this.fast_.sample(i,s),this.slow_.sample(i,s)}sampleTTFB(e){const t=e/1e3,r=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(r,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}destroy(){}}const fb={supported:!0,configurations:[],decodingInfoResults:[{supported:!0,powerEfficient:!0,smooth:!0}]},M1={};function gM(n,e,t,r,i,s){const a=n.audioCodec?n.audioGroups:null,c=s==null?void 0:s.audioCodec,u=s==null?void 0:s.channels,d=u?parseInt(u):c?1/0:2;let h=null;if(a!=null&&a.length)try{a.length===1&&a[0]?h=e.groups[a[0]].channels:h=a.reduce((p,g)=>{if(g){const x=e.groups[g];if(!x)throw new Error(`Audio track group ${g} not found`);Object.keys(x.channels).forEach(v=>{p[v]=(p[v]||0)+x.channels[v]})}return p},{2:0})}catch{return!0}return n.videoCodec!==void 0&&(n.width>1920&&n.height>1088||n.height>1920&&n.width>1088||n.frameRate>Math.max(r,30)||n.videoRange!=="SDR"&&n.videoRange!==t||n.bitrate>Math.max(i,8e6))||!!h&&Ye(d)&&Object.keys(h).some(p=>parseInt(p)>d)}function yM(n,e,t){const r=n.videoCodec,i=n.audioCodec;if(!r||!i||!t)return Promise.resolve(fb);const s={width:n.width,height:n.height,bitrate:Math.ceil(Math.max(n.bitrate*.9,n.averageBitrate)),framerate:n.frameRate||30},a=n.videoRange;a!=="SDR"&&(s.transferFunction=a.toLowerCase());const c=r.split(",").map(u=>({type:"media-source",video:or(or({},s),{},{contentType:xu(u,"video")})}));return i&&n.audioGroups&&n.audioGroups.forEach(u=>{var d;u&&((d=e.groups[u])==null||d.tracks.forEach(h=>{if(h.groupId===u){const p=h.channels||"",g=parseFloat(p);Ye(g)&&g>2&&c.push.apply(c,i.split(",").map(x=>({type:"media-source",audio:{contentType:xu(x,"audio"),channels:""+g}})))}}))}),Promise.all(c.map(u=>{const d=vM(u);return M1[d]||(M1[d]=t.decodingInfo(u))})).then(u=>({supported:!u.some(d=>!d.supported),configurations:c,decodingInfoResults:u})).catch(u=>({supported:!1,configurations:c,decodingInfoResults:[],error:u}))}function vM(n){const{audio:e,video:t}=n,r=t||e;if(r){const i=r.contentType.split('"')[1];if(t)return`r${t.height}x${t.width}f${Math.ceil(t.framerate)}${t.transferFunction||"sd"}_${i}_${Math.ceil(t.bitrate/1e5)}`;if(e)return`c${e.channels}${e.spatialRendering?"s":"n"}_${i}`}return""}function xM(){if(typeof matchMedia=="function"){const n=matchMedia("(dynamic-range: high)"),e=matchMedia("bad query");if(n.media!==e.media)return n.matches===!0}return!1}function SM(n,e){let t=!1,r=[];return n&&(t=n!=="SDR",r=[n]),e&&(r=e.allowedVideoRanges||th.slice(0),t=e.preferHDR!==void 0?e.preferHDR:xM(),t?r=r.filter(i=>i!=="SDR"):r=["SDR"]),{preferHDR:t,allowedVideoRanges:r}}function EM(n,e,t,r,i){const s=Object.keys(n),a=r==null?void 0:r.channels,c=r==null?void 0:r.audioCodec,u=a&&parseInt(a)===2;let d=!0,h=!1,p=1/0,g=1/0,x=1/0,v=0,S=[];const{preferHDR:T,allowedVideoRanges:_}=SM(e,i);for(let w=s.length;w--;){const $=n[s[w]];d=$.channels[2]>0,p=Math.min(p,$.minHeight),g=Math.min(g,$.minFramerate),x=Math.min(x,$.minBitrate);const M=_.filter(U=>$.videoRanges[U]>0);M.length>0&&(h=!0,S=M)}p=Ye(p)?p:0,g=Ye(g)?g:0;const C=Math.max(1080,p),k=Math.max(30,g);return x=Ye(x)?x:t,t=Math.max(x,t),h||(e=void 0,S=[]),{codecSet:s.reduce((w,$)=>{const M=n[$];if($===w)return w;if(M.minBitrate>t)return co($,`min bitrate of ${M.minBitrate} > current estimate of ${t}`),w;if(!M.hasDefaultAudio)return co($,"no renditions with default or auto-select sound found"),w;if(c&&$.indexOf(c.substring(0,4))%5!==0)return co($,`audio codec preference "${c}" not found`),w;if(a&&!u){if(!M.channels[a])return co($,`no renditions with ${a} channel sound found (channels options: ${Object.keys(M.channels)})`),w}else if((!c||u)&&d&&M.channels[2]===0)return co($,"no renditions with stereo sound found"),w;return M.minHeight>C?(co($,`min resolution of ${M.minHeight} > maximum of ${C}`),w):M.minFramerate>k?(co($,`min framerate of ${M.minFramerate} > maximum of ${k}`),w):S.some(U=>M.videoRanges[U]>0)?M.maxScore<v?(co($,`max score of ${M.maxScore} < selected max of ${v}`),w):w&&(Zf($)>=Zf(w)||M.fragmentError>n[w].fragmentError)?w:(v=M.maxScore,$):(co($,`no variants with VIDEO-RANGE of ${JSON.stringify(S)} found`),w)},void 0),videoRanges:S,preferHDR:T,minFramerate:g,minBitrate:x}}function co(n,e){J.log(`[abr] start candidates with "${n}" ignored because ${e}`)}function TM(n){return n.reduce((e,t)=>{let r=e.groups[t.groupId];r||(r=e.groups[t.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),r.tracks.push(t);const i=t.channels||"2";return r.channels[i]=(r.channels[i]||0)+1,r.hasDefault=r.hasDefault||t.default,r.hasAutoSelect=r.hasAutoSelect||t.autoselect,r.hasDefault&&(e.hasDefaultAudio=!0),r.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function bM(n,e,t,r){return n.slice(t,r+1).reduce((i,s)=>{if(!s.codecSet)return i;const a=s.audioGroups;let c=i[s.codecSet];c||(i[s.codecSet]=c={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!a,fragmentError:0}),c.minBitrate=Math.min(c.minBitrate,s.bitrate);const u=Math.min(s.height,s.width);return c.minHeight=Math.min(c.minHeight,u),c.minFramerate=Math.min(c.minFramerate,s.frameRate),c.maxScore=Math.max(c.maxScore,s.score),c.fragmentError+=s.fragmentError,c.videoRanges[s.videoRange]=(c.videoRanges[s.videoRange]||0)+1,a&&a.forEach(d=>{if(!d)return;const h=e.groups[d];h&&(c.hasDefaultAudio=c.hasDefaultAudio||e.hasDefaultAudio?h.hasDefault:h.hasAutoSelect||!e.hasDefaultAudio&&!e.hasAutoSelectAudio,Object.keys(h.channels).forEach(p=>{c.channels[p]=(c.channels[p]||0)+h.channels[p]}))}),i},{})}function Ms(n,e,t){if("attrs"in n){const r=e.indexOf(n);if(r!==-1)return r}for(let r=0;r<e.length;r++){const i=e[r];if(Xl(n,i,t))return r}return-1}function Xl(n,e,t){const{groupId:r,name:i,lang:s,assocLang:a,characteristics:c,default:u}=n,d=n.forced;return(r===void 0||e.groupId===r)&&(i===void 0||e.name===i)&&(s===void 0||e.lang===s)&&(s===void 0||e.assocLang===a)&&(u===void 0||e.default===u)&&(d===void 0||e.forced===d)&&(c===void 0||wM(c,e.characteristics))&&(t===void 0||t(n,e))}function wM(n,e=""){const t=n.split(","),r=e.split(",");return t.length===r.length&&!t.some(i=>r.indexOf(i)===-1)}function Bl(n,e){const{audioCodec:t,channels:r}=n;return(t===void 0||(e.audioCodec||"").substring(0,4)===t.substring(0,4))&&(r===void 0||r===(e.channels||"2"))}function _M(n,e,t,r,i){const s=e[r],c=e.reduce((g,x,v)=>{const S=x.uri;return(g[S]||(g[S]=[])).push(v),g},{})[s.uri];c.length>1&&(r=Math.max.apply(Math,c));const u=s.videoRange,d=s.frameRate,h=s.codecSet.substring(0,4),p=F1(e,r,g=>{if(g.videoRange!==u||g.frameRate!==d||g.codecSet.substring(0,4)!==h)return!1;const x=g.audioGroups,v=t.filter(S=>!x||x.indexOf(S.groupId)!==-1);return Ms(n,v,i)>-1});return p>-1?p:F1(e,r,g=>{const x=g.audioGroups,v=t.filter(S=>!x||x.indexOf(S.groupId)!==-1);return Ms(n,v,i)>-1})}function F1(n,e,t){for(let r=e;r>-1;r--)if(t(n[r]))return r;for(let r=e+1;r<n.length;r++)if(t(n[r]))return r;return-1}class LM{constructor(e){this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this._abandonRulesCheck=()=>{const{fragCurrent:t,partCurrent:r,hls:i}=this,{autoLevelEnabled:s,media:a}=i;if(!t||!a)return;const c=performance.now(),u=r?r.stats:t.stats,d=r?r.duration:t.duration,h=c-u.loading.start,p=i.minAutoLevel;if(u.aborted||u.loaded&&u.loaded===u.total||t.level<=p){this.clearTimer(),this._nextAutoLevel=-1;return}if(!s||a.paused||!a.playbackRate||!a.readyState)return;const g=i.mainForwardBufferInfo;if(g===null)return;const x=this.bwEstimator.getEstimateTTFB(),v=Math.abs(a.playbackRate);if(h<=Math.max(x,1e3*(d/(v*2))))return;const S=g.len/v,T=u.loading.first?u.loading.first-u.loading.start:-1,_=u.loaded&&T>-1,C=this.getBwEstimate(),k=i.levels,O=k[t.level],w=u.total||Math.max(u.loaded,Math.round(d*O.averageBitrate/8));let $=_?h-T:h;$<1&&_&&($=Math.min(h,u.loaded*8/C));const M=_?u.loaded*1e3/$:0,U=M?(w-u.loaded)/M:w*8/C+x/1e3;if(U<=S)return;const W=M?M*8:C;let R=Number.POSITIVE_INFINITY,G;for(G=t.level-1;G>p;G--){const ae=k[G].maxBitrate;if(R=this.getTimeToLoadFrag(x/1e3,W,d*ae,!k[G].details),R<S)break}if(R>=U||R>d*10)return;i.nextLoadLevel=i.nextAutoLevel=G,_?this.bwEstimator.sample(h-Math.min(x,T),u.loaded):this.bwEstimator.sampleTTFB(h);const fe=k[G].maxBitrate;this.getBwEstimate()*this.hls.config.abrBandWidthUpFactor>fe&&this.resetEstimator(fe),this.clearTimer(),J.warn(`[abr] Fragment ${t.sn}${r?" part "+r.index:""} of level ${t.level} is loading too slowly;
      Time to underbuffer: ${S.toFixed(3)} s
      Estimated load time for current fragment: ${U.toFixed(3)} s
      Estimated load time for down switch fragment: ${R.toFixed(3)} s
      TTFB estimate: ${T|0} ms
      Current BW estimate: ${Ye(C)?C|0:"Unknown"} bps
      New BW estimate: ${this.getBwEstimate()|0} bps
      Switching to level ${G} @ ${fe|0} bps`),i.trigger(P.FRAG_LOAD_EMERGENCY_ABORTED,{frag:t,part:r,stats:u})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(J.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new mM(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(P.MANIFEST_LOADING,this.onManifestLoading,this),e.on(P.FRAG_LOADING,this.onFragLoading,this),e.on(P.FRAG_LOADED,this.onFragLoaded,this),e.on(P.FRAG_BUFFERED,this.onFragBuffered,this),e.on(P.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(P.LEVEL_LOADED,this.onLevelLoaded,this),e.on(P.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(P.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(P.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(P.MANIFEST_LOADING,this.onManifestLoading,this),e.off(P.FRAG_LOADING,this.onFragLoading,this),e.off(P.FRAG_LOADED,this.onFragLoaded,this),e.off(P.FRAG_BUFFERED,this.onFragBuffered,this),e.off(P.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(P.LEVEL_LOADED,this.onLevelLoaded,this),e.off(P.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(P.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(P.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,t){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,t){const r=t.frag;if(!this.ignoreFragment(r)){if(!r.bitrateTest){var i;this.fragCurrent=r,this.partCurrent=(i=t.part)!=null?i:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,t){this.clearTimer()}onError(e,t){if(!t.fatal)switch(t.details){case le.BUFFER_ADD_CODEC_ERROR:case le.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case le.FRAG_LOAD_TIMEOUT:{const r=t.frag,{fragCurrent:i,partCurrent:s}=this;if(r&&i&&r.sn===i.sn&&r.level===i.level){const a=performance.now(),c=s?s.stats:r.stats,u=a-c.loading.start,d=c.loading.first?c.loading.first-c.loading.start:-1;if(c.loaded&&d>-1){const p=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(u-Math.min(p,d),c.loaded)}else this.bwEstimator.sampleTTFB(u)}break}}}getTimeToLoadFrag(e,t,r,i){const s=e+r/t,a=i?this.lastLevelLoadSec:0;return s+a}onLevelLoaded(e,t){const r=this.hls.config,{loading:i}=t.stats,s=i.end-i.start;Ye(s)&&(this.lastLevelLoadSec=s/1e3),t.details.live?this.bwEstimator.update(r.abrEwmaSlowLive,r.abrEwmaFastLive):this.bwEstimator.update(r.abrEwmaSlowVoD,r.abrEwmaFastVoD)}onFragLoaded(e,{frag:t,part:r}){const i=r?r.stats:t.stats;if(t.type===at.MAIN&&this.bwEstimator.sampleTTFB(i.loading.first-i.loading.start),!this.ignoreFragment(t)){if(this.clearTimer(),t.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const s=r?r.duration:t.duration,a=this.hls.levels[t.level],c=(a.loaded?a.loaded.bytes:0)+i.loaded,u=(a.loaded?a.loaded.duration:0)+s;a.loaded={bytes:c,duration:u},a.realBitrate=Math.round(8*c/u)}if(t.bitrateTest){const s={stats:i,frag:t,part:r,id:t.type};this.onFragBuffered(P.FRAG_BUFFERED,s),t.bitrateTest=!1}else this.lastLoadedFragLevel=t.level}}onFragBuffered(e,t){const{frag:r,part:i}=t,s=i!=null&&i.stats.loaded?i.stats:r.stats;if(s.aborted||this.ignoreFragment(r))return;const a=s.parsing.end-s.loading.start-Math.min(s.loading.first-s.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(a,s.loaded),s.bwEstimate=this.getBwEstimate(),r.bitrateTest?this.bitrateTestDelay=a/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==at.MAIN||e.sn==="initSegment"}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:t}=this.hls,r=this.getBwEstimate(),i=this.hls.config.maxStarvationDelay,s=this.findBestLevel(r,t,e,0,i,1,1);if(s>-1)return s;const a=this.hls.firstLevel,c=Math.min(Math.max(a,t),e);return J.warn(`[abr] Could not find best starting auto level. Defaulting to first in playlist ${a} clamped to ${c}`),c}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,r=this.bwEstimator.canEstimate(),i=this.lastLoadedFragLevel>-1;if(e!==-1&&(!r||!i||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;const s=r&&i?this.getNextABRAutoLevel():this.firstAutoLevel;if(e!==-1){const a=this.hls.levels;if(a.length>Math.max(e,s)&&a[e].loadError<=a[s].loadError)return e}return this._nextAutoLevel=s,this.nextAutoLevelKey=this.getAutoLevelKey(),s}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:t,hls:r}=this,{maxAutoLevel:i,config:s,minAutoLevel:a}=r,c=t?t.duration:e?e.duration:0,u=this.getBwEstimate(),d=this.getStarvationDelay();let h=s.abrBandWidthFactor,p=s.abrBandWidthUpFactor;if(d){const T=this.findBestLevel(u,a,i,d,0,h,p);if(T>=0)return T}let g=c?Math.min(c,s.maxStarvationDelay):s.maxStarvationDelay;if(!d){const T=this.bitrateTestDelay;T&&(g=(c?Math.min(c,s.maxLoadingDelay):s.maxLoadingDelay)-T,J.info(`[abr] bitrate test took ${Math.round(1e3*T)}ms, set first fragment max fetchDuration to ${Math.round(1e3*g)} ms`),h=p=1)}const x=this.findBestLevel(u,a,i,d,g,h,p);if(J.info(`[abr] ${d?"rebuffering expected":"buffer is empty"}, optimal quality level ${x}`),x>-1)return x;const v=r.levels[a],S=r.levels[r.loadLevel];return(v==null?void 0:v.bitrate)<(S==null?void 0:S.bitrate)?a:r.loadLevel}getStarvationDelay(){const e=this.hls,t=e.media;if(!t)return 1/0;const r=t&&t.playbackRate!==0?Math.abs(t.playbackRate):1,i=e.mainForwardBufferInfo;return(i?i.len:0)/r}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,t,r,i,s,a,c){var u;const d=i+s,h=this.lastLoadedFragLevel,p=h===-1?this.hls.firstLevel:h,{fragCurrent:g,partCurrent:x}=this,{levels:v,allAudioTracks:S,loadLevel:T,config:_}=this.hls;if(v.length===1)return 0;const C=v[p],k=!!(C!=null&&(u=C.details)!=null&&u.live),O=T===-1||h===-1;let w,$="SDR",M=(C==null?void 0:C.frameRate)||0;const{audioPreference:U,videoPreference:W}=_,R=this.audioTracksByGroup||(this.audioTracksByGroup=TM(S));if(O){if(this.firstSelection!==-1)return this.firstSelection;const ye=this.codecTiers||(this.codecTiers=bM(v,R,t,r)),Ee=EM(ye,$,e,U,W),{codecSet:Pe,videoRanges:ie,minFramerate:se,minBitrate:B,preferHDR:H}=Ee;w=Pe,$=H?ie[ie.length-1]:ie[0],M=se,e=Math.max(e,B),J.log(`[abr] picked start tier ${JSON.stringify(Ee)}`)}else w=C==null?void 0:C.codecSet,$=C==null?void 0:C.videoRange;const G=x?x.duration:g?g.duration:0,fe=this.bwEstimator.getEstimateTTFB()/1e3,ae=[];for(let ye=r;ye>=t;ye--){var xe;const Ee=v[ye],Pe=ye>p;if(!Ee)continue;if(_.useMediaCapabilities&&!Ee.supportedResult&&!Ee.supportedPromise){const Ae=navigator.mediaCapabilities;typeof(Ae==null?void 0:Ae.decodingInfo)=="function"&&gM(Ee,R,$,M,e,U)?(Ee.supportedPromise=yM(Ee,R,Ae),Ee.supportedPromise.then(Oe=>{if(!this.hls)return;Ee.supportedResult=Oe;const Me=this.hls.levels,ct=Me.indexOf(Ee);Oe.error?J.warn(`[abr] MediaCapabilities decodingInfo error: "${Oe.error}" for level ${ct} ${JSON.stringify(Oe)}`):Oe.supported||(J.warn(`[abr] Unsupported MediaCapabilities decodingInfo result for level ${ct} ${JSON.stringify(Oe)}`),ct>-1&&Me.length>1&&(J.log(`[abr] Removing unsupported level ${ct}`),this.hls.removeLevel(ct)))})):Ee.supportedResult=fb}if(w&&Ee.codecSet!==w||$&&Ee.videoRange!==$||Pe&&M>Ee.frameRate||!Pe&&M>0&&M<Ee.frameRate||Ee.supportedResult&&!((xe=Ee.supportedResult.decodingInfoResults)!=null&&xe[0].smooth)){ae.push(ye);continue}const ie=Ee.details,se=(x?ie==null?void 0:ie.partTarget:ie==null?void 0:ie.averagetargetduration)||G;let B;Pe?B=c*e:B=a*e;const H=G&&i>=G*2&&s===0?v[ye].averageBitrate:v[ye].maxBitrate,Q=this.getTimeToLoadFrag(fe,B,H*se,ie===void 0);if(B>=H&&(ye===h||Ee.loadError===0&&Ee.fragmentError===0)&&(Q<=fe||!Ye(Q)||k&&!this.bitrateTestDelay||Q<d)){const Ae=this.forcedAutoLevel;return ye!==T&&(Ae===-1||Ae!==T)&&(ae.length&&J.trace(`[abr] Skipped level(s) ${ae.join(",")} of ${r} max with CODECS and VIDEO-RANGE:"${v[ae[0]].codecs}" ${v[ae[0]].videoRange}; not compatible with "${C.codecs}" ${$}`),J.info(`[abr] switch candidate:${p}->${ye} adjustedbw(${Math.round(B)})-bitrate=${Math.round(B-H)} ttfb:${fe.toFixed(1)} avgDuration:${se.toFixed(1)} maxFetchDuration:${d.toFixed(1)} fetchDuration:${Q.toFixed(1)} firstSelection:${O} codecSet:${w} videoRange:${$} hls.loadLevel:${T}`)),O&&(this.firstSelection=ye),ye}}return-1}set nextAutoLevel(e){const{maxAutoLevel:t,minAutoLevel:r}=this.hls,i=Math.min(Math.max(e,r),t);this._nextAutoLevel!==i&&(this.nextAutoLevelKey="",this._nextAutoLevel=i)}}class CM{constructor(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}var rr={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class RM{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(P.BUFFER_APPENDED,this.onBufferAppended,this),e.on(P.FRAG_BUFFERED,this.onFragBuffered,this),e.on(P.FRAG_LOADED,this.onFragLoaded,this)}_unregisterListeners(){const{hls:e}=this;e.off(P.BUFFER_APPENDED,this.onBufferAppended,this),e.off(P.FRAG_BUFFERED,this.onFragBuffered,this),e.off(P.FRAG_LOADED,this.onFragLoaded,this)}destroy(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,t){const r=this.activePartLists[t];if(r)for(let i=r.length;i--;){const s=r[i];if(!s)break;const a=s.end;if(s.start<=e&&a!==null&&e<=a)return s}return this.getBufferedFrag(e,t)}getBufferedFrag(e,t){const{fragments:r}=this,i=Object.keys(r);for(let s=i.length;s--;){const a=r[i[s]];if((a==null?void 0:a.body.type)===t&&a.buffered){const c=a.body;if(c.start<=e&&e<=c.end)return c}}return null}detectEvictedFragments(e,t,r,i){this.timeRanges&&(this.timeRanges[e]=t);const s=(i==null?void 0:i.fragment.sn)||-1;Object.keys(this.fragments).forEach(a=>{const c=this.fragments[a];if(!c||s>=c.body.sn)return;if(!c.buffered&&!c.loaded){c.body.type===r&&this.removeFragment(c.body);return}const u=c.range[e];u&&u.time.some(d=>{const h=!this.isTimeBuffered(d.startPTS,d.endPTS,t);return h&&this.removeFragment(c.body),h})})}detectPartialFragments(e){const t=this.timeRanges,{frag:r,part:i}=e;if(!t||r.sn==="initSegment")return;const s=Ul(r),a=this.fragments[s];if(!a||a.buffered&&r.gap)return;const c=!r.relurl;Object.keys(t).forEach(u=>{const d=r.elementaryStreams[u];if(!d)return;const h=t[u],p=c||d.partial===!0;a.range[u]=this.getBufferedTimes(r,i,p,h)}),a.loaded=null,Object.keys(a.range).length?(a.buffered=!0,(a.body.endList=r.endList||a.body.endList)&&(this.endListFragments[a.body.type]=a),cf(a)||this.removeParts(r.sn-1,r.type)):this.removeFragment(a.body)}removeParts(e,t){const r=this.activePartLists[t];r&&(this.activePartLists[t]=r.filter(i=>i.fragment.sn>=e))}fragBuffered(e,t){const r=Ul(e);let i=this.fragments[r];!i&&t&&(i=this.fragments[r]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),i&&(i.loaded=null,i.buffered=!0)}getBufferedTimes(e,t,r,i){const s={time:[],partial:r},a=e.start,c=e.end,u=e.minEndPTS||c,d=e.maxStartPTS||a;for(let h=0;h<i.length;h++){const p=i.start(h)-this.bufferPadding,g=i.end(h)+this.bufferPadding;if(d>=p&&u<=g){s.time.push({startPTS:Math.max(a,i.start(h)),endPTS:Math.min(c,i.end(h))});break}else if(a<g&&c>p){const x=Math.max(a,i.start(h)),v=Math.min(c,i.end(h));v>x&&(s.partial=!0,s.time.push({startPTS:x,endPTS:v}))}else if(c<=p)break}return s}getPartialFragment(e){let t=null,r,i,s,a=0;const{bufferPadding:c,fragments:u}=this;return Object.keys(u).forEach(d=>{const h=u[d];h&&cf(h)&&(i=h.body.start-c,s=h.body.end+c,e>=i&&e<=s&&(r=Math.min(e-i,s-e),a<=r&&(t=h.body,a=r)))}),t}isEndListAppended(e){const t=this.endListFragments[e];return t!==void 0&&(t.buffered||cf(t))}getState(e){const t=Ul(e),r=this.fragments[t];return r?r.buffered?cf(r)?rr.PARTIAL:rr.OK:rr.APPENDING:rr.NOT_LOADED}isTimeBuffered(e,t,r){let i,s;for(let a=0;a<r.length;a++){if(i=r.start(a)-this.bufferPadding,s=r.end(a)+this.bufferPadding,e>=i&&t<=s)return!0;if(t<=i)return!1}return!1}onFragLoaded(e,t){const{frag:r,part:i}=t;if(r.sn==="initSegment"||r.bitrateTest)return;const s=i?null:t,a=Ul(r);this.fragments[a]={body:r,appendedPTS:null,loaded:s,buffered:!1,range:Object.create(null)}}onBufferAppended(e,t){const{frag:r,part:i,timeRanges:s}=t;if(r.sn==="initSegment")return;const a=r.type;if(i){let c=this.activePartLists[a];c||(this.activePartLists[a]=c=[]),c.push(i)}this.timeRanges=s,Object.keys(s).forEach(c=>{const u=s[c];this.detectEvictedFragments(c,u,a,i)})}onFragBuffered(e,t){this.detectPartialFragments(t)}hasFragment(e){const t=Ul(e);return!!this.fragments[t]}hasParts(e){var t;return!!((t=this.activePartLists[e])!=null&&t.length)}removeFragmentsInRange(e,t,r,i,s){i&&!this.hasGaps||Object.keys(this.fragments).forEach(a=>{const c=this.fragments[a];if(!c)return;const u=c.body;u.type!==r||i&&!u.gap||u.start<t&&u.end>e&&(c.buffered||s)&&this.removeFragment(u)})}removeFragment(e){const t=Ul(e);e.stats.loaded=0,e.clearElementaryStreamInfo();const r=this.activePartLists[e.type];if(r){const i=e.sn;this.activePartLists[e.type]=r.filter(s=>s.fragment.sn!==i)}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1}}function cf(n){var e,t,r;return n.buffered&&(n.body.gap||((e=n.range.video)==null?void 0:e.partial)||((t=n.range.audio)==null?void 0:t.partial)||((r=n.range.audiovideo)==null?void 0:r.partial))}function Ul(n){return`${n.type}_${n.level}_${n.sn}`}const AM={length:0,start:()=>0,end:()=>0};class mn{static isBuffered(e,t){try{if(e){const r=mn.getBuffered(e);for(let i=0;i<r.length;i++)if(t>=r.start(i)&&t<=r.end(i))return!0}}catch{}return!1}static bufferInfo(e,t,r){try{if(e){const i=mn.getBuffered(e),s=[];let a;for(a=0;a<i.length;a++)s.push({start:i.start(a),end:i.end(a)});return this.bufferedInfo(s,t,r)}}catch{}return{len:0,start:t,end:t,nextStart:void 0}}static bufferedInfo(e,t,r){t=Math.max(0,t),e.sort(function(d,h){const p=d.start-h.start;return p||h.end-d.end});let i=[];if(r)for(let d=0;d<e.length;d++){const h=i.length;if(h){const p=i[h-1].end;e[d].start-p<r?e[d].end>p&&(i[h-1].end=e[d].end):i.push(e[d])}else i.push(e[d])}else i=e;let s=0,a,c=t,u=t;for(let d=0;d<i.length;d++){const h=i[d].start,p=i[d].end;if(t+r>=h&&t<p)c=h,u=p,s=u-t;else if(t+r<h){a=h;break}}return{len:s,start:c||0,end:u||0,nextStart:a}}static getBuffered(e){try{return e.buffered}catch(t){return J.log("failed to get media.buffered",t),AM}}}class q0{constructor(e,t,r,i=0,s=-1,a=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=uf(),this.buffering={audio:uf(),video:uf(),audiovideo:uf()},this.level=e,this.sn=t,this.id=r,this.size=i,this.part=s,this.partial=a}}function uf(){return{start:0,executeStart:0,executeEnd:0,end:0}}function Pf(n,e){for(let r=0,i=n.length;r<i;r++){var t;if(((t=n[r])==null?void 0:t.cc)===e)return n[r]}return null}function kM(n,e,t){return!!(e&&(t.endCC>t.startCC||n&&n.cc<t.startCC))}function IM(n,e){const t=n.fragments,r=e.fragments;if(!r.length||!t.length){J.log("No fragments to align");return}const i=Pf(t,r[0].cc);if(!i||i&&!i.startPTS){J.log("No frag in previous level to align on");return}return i}function $1(n,e){if(n){const t=n.start+e;n.start=n.startPTS=t,n.endPTS=t+n.duration}}function hb(n,e){const t=e.fragments;for(let r=0,i=t.length;r<i;r++)$1(t[r],n);e.fragmentHint&&$1(e.fragmentHint,n),e.alignedSliding=!0}function PM(n,e,t){e&&(DM(n,t,e),!t.alignedSliding&&e&&sh(t,e),!t.alignedSliding&&e&&!t.skippedSegments&&lb(e,t))}function DM(n,e,t){if(kM(n,t,e)){const r=IM(t,e);r&&Ye(r.start)&&(J.log(`Adjusting PTS using last level due to CC increase within current level ${e.url}`),hb(r.start,e))}}function sh(n,e){if(!n.hasProgramDateTime||!e.hasProgramDateTime)return;const t=n.fragments,r=e.fragments;if(!t.length||!r.length)return;let i,s;const a=Math.min(e.endCC,n.endCC);e.startCC<a&&n.startCC<a&&(i=Pf(r,a),s=Pf(t,a)),(!i||!s)&&(i=r[Math.floor(r.length/2)],s=Pf(t,i.cc)||t[Math.floor(t.length/2)]);const c=i.programDateTime,u=s.programDateTime;if(!c||!u)return;const d=(u-c)/1e3-(s.start-i.start);hb(d,n)}const B1=Math.pow(2,17);class OM{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,t){const r=e.url;if(!r)return Promise.reject(new fo({type:ft.NETWORK_ERROR,details:le.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error(`Fragment does not have a ${r?"part list":"url"}`),networkDetails:null}));this.abort();const i=this.config,s=i.fLoader,a=i.loader;return new Promise((c,u)=>{if(this.loader&&this.loader.destroy(),e.gap)if(e.tagList.some(x=>x[0]==="GAP")){u(j1(e));return}else e.gap=!1;const d=this.loader=e.loader=s?new s(i):new a(i),h=U1(e),p=N1(i.fragLoadPolicy.default),g={loadPolicy:p,timeout:p.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:e.sn==="initSegment"?1/0:B1};e.stats=d.stats,d.load(h,g,{onSuccess:(x,v,S,T)=>{this.resetLoader(e,d);let _=x.data;S.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(_.slice(0,16)),_=_.slice(16)),c({frag:e,part:null,payload:_,networkDetails:T})},onError:(x,v,S,T)=>{this.resetLoader(e,d),u(new fo({type:ft.NETWORK_ERROR,details:le.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:or({url:r,data:void 0},x),error:new Error(`HTTP Error ${x.code} ${x.text}`),networkDetails:S,stats:T}))},onAbort:(x,v,S)=>{this.resetLoader(e,d),u(new fo({type:ft.NETWORK_ERROR,details:le.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:S,stats:x}))},onTimeout:(x,v,S)=>{this.resetLoader(e,d),u(new fo({type:ft.NETWORK_ERROR,details:le.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${g.timeout}ms`),networkDetails:S,stats:x}))},onProgress:(x,v,S,T)=>{t&&t({frag:e,part:null,payload:S,networkDetails:T})}})})}loadPart(e,t,r){this.abort();const i=this.config,s=i.fLoader,a=i.loader;return new Promise((c,u)=>{if(this.loader&&this.loader.destroy(),e.gap||t.gap){u(j1(e,t));return}const d=this.loader=e.loader=s?new s(i):new a(i),h=U1(e,t),p=N1(i.fragLoadPolicy.default),g={loadPolicy:p,timeout:p.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:B1};t.stats=d.stats,d.load(h,g,{onSuccess:(x,v,S,T)=>{this.resetLoader(e,d),this.updateStatsFromPart(e,t);const _={frag:e,part:t,payload:x.data,networkDetails:T};r(_),c(_)},onError:(x,v,S,T)=>{this.resetLoader(e,d),u(new fo({type:ft.NETWORK_ERROR,details:le.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:or({url:h.url,data:void 0},x),error:new Error(`HTTP Error ${x.code} ${x.text}`),networkDetails:S,stats:T}))},onAbort:(x,v,S)=>{e.stats.aborted=t.stats.aborted,this.resetLoader(e,d),u(new fo({type:ft.NETWORK_ERROR,details:le.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:S,stats:x}))},onTimeout:(x,v,S)=>{this.resetLoader(e,d),u(new fo({type:ft.NETWORK_ERROR,details:le.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error(`Timeout after ${g.timeout}ms`),networkDetails:S,stats:x}))}})})}updateStatsFromPart(e,t){const r=e.stats,i=t.stats,s=i.total;if(r.loaded+=i.loaded,s){const u=Math.round(e.duration/t.duration),d=Math.min(Math.round(r.loaded/s),u),p=(u-d)*Math.round(r.loaded/d);r.total=r.loaded+p}else r.total=Math.max(r.loaded,r.total);const a=r.loading,c=i.loading;a.start?a.first+=c.first-c.start:(a.start=c.start,a.first=c.first),a.end=c.end}resetLoader(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()}}function U1(n,e=null){const t=e||n,r={frag:n,part:e,responseType:"arraybuffer",url:t.url,headers:{},rangeStart:0,rangeEnd:0},i=t.byteRangeStartOffset,s=t.byteRangeEndOffset;if(Ye(i)&&Ye(s)){var a;let c=i,u=s;if(n.sn==="initSegment"&&((a=n.decryptdata)==null?void 0:a.method)==="AES-128"){const d=s-i;d%16&&(u=s+(16-d%16)),i!==0&&(r.resetIV=!0,c=i-16)}r.rangeStart=c,r.rangeEnd=u}return r}function j1(n,e){const t=new Error(`GAP ${n.gap?"tag":"attribute"} found`),r={type:ft.MEDIA_ERROR,details:le.FRAG_GAP,fatal:!1,frag:n,error:t,networkDetails:null};return e&&(r.part=e),(e||n).stats.aborted=!0,new fo(r)}class fo extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class NM{constructor(e,t){this.subtle=void 0,this.aesIV=void 0,this.subtle=e,this.aesIV=t}decrypt(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)}}class MM{constructor(e,t){this.subtle=void 0,this.key=void 0,this.subtle=e,this.key=t}expandKey(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}function FM(n){const e=n.byteLength,t=e&&new DataView(n.buffer).getUint8(e-1);return t?Va(n,0,e-t):n}class $M{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const t=new DataView(e),r=new Uint32Array(4);for(let i=0;i<4;i++)r[i]=t.getUint32(i*4);return r}initTable(){const e=this.sBox,t=this.invSBox,r=this.subMix,i=r[0],s=r[1],a=r[2],c=r[3],u=this.invSubMix,d=u[0],h=u[1],p=u[2],g=u[3],x=new Uint32Array(256);let v=0,S=0,T=0;for(T=0;T<256;T++)T<128?x[T]=T<<1:x[T]=T<<1^283;for(T=0;T<256;T++){let _=S^S<<1^S<<2^S<<3^S<<4;_=_>>>8^_&255^99,e[v]=_,t[_]=v;const C=x[v],k=x[C],O=x[k];let w=x[_]*257^_*16843008;i[v]=w<<24|w>>>8,s[v]=w<<16|w>>>16,a[v]=w<<8|w>>>24,c[v]=w,w=O*16843009^k*65537^C*257^v*16843008,d[_]=w<<24|w>>>8,h[_]=w<<16|w>>>16,p[_]=w<<8|w>>>24,g[_]=w,v?(v=C^x[x[x[O^C]]],S^=x[x[S]]):v=S=1}}expandKey(e){const t=this.uint8ArrayToUint32Array_(e);let r=!0,i=0;for(;i<t.length&&r;)r=t[i]===this.key[i],i++;if(r)return;this.key=t;const s=this.keySize=t.length;if(s!==4&&s!==6&&s!==8)throw new Error("Invalid aes key size="+s);const a=this.ksRows=(s+6+1)*4;let c,u;const d=this.keySchedule=new Uint32Array(a),h=this.invKeySchedule=new Uint32Array(a),p=this.sBox,g=this.rcon,x=this.invSubMix,v=x[0],S=x[1],T=x[2],_=x[3];let C,k;for(c=0;c<a;c++){if(c<s){C=d[c]=t[c];continue}k=C,c%s===0?(k=k<<8|k>>>24,k=p[k>>>24]<<24|p[k>>>16&255]<<16|p[k>>>8&255]<<8|p[k&255],k^=g[c/s|0]<<24):s>6&&c%s===4&&(k=p[k>>>24]<<24|p[k>>>16&255]<<16|p[k>>>8&255]<<8|p[k&255]),d[c]=C=(d[c-s]^k)>>>0}for(u=0;u<a;u++)c=a-u,u&3?k=d[c]:k=d[c-4],u<4||c<=4?h[u]=k:h[u]=v[p[k>>>24]]^S[p[k>>>16&255]]^T[p[k>>>8&255]]^_[p[k&255]],h[u]=h[u]>>>0}networkToHostOrderSwap(e){return e<<24|(e&65280)<<8|(e&16711680)>>8|e>>>24}decrypt(e,t,r){const i=this.keySize+6,s=this.invKeySchedule,a=this.invSBox,c=this.invSubMix,u=c[0],d=c[1],h=c[2],p=c[3],g=this.uint8ArrayToUint32Array_(r);let x=g[0],v=g[1],S=g[2],T=g[3];const _=new Int32Array(e),C=new Int32Array(_.length);let k,O,w,$,M,U,W,R,G,fe,ae,xe,ye,Ee;const Pe=this.networkToHostOrderSwap;for(;t<_.length;){for(G=Pe(_[t]),fe=Pe(_[t+1]),ae=Pe(_[t+2]),xe=Pe(_[t+3]),M=G^s[0],U=xe^s[1],W=ae^s[2],R=fe^s[3],ye=4,Ee=1;Ee<i;Ee++)k=u[M>>>24]^d[U>>16&255]^h[W>>8&255]^p[R&255]^s[ye],O=u[U>>>24]^d[W>>16&255]^h[R>>8&255]^p[M&255]^s[ye+1],w=u[W>>>24]^d[R>>16&255]^h[M>>8&255]^p[U&255]^s[ye+2],$=u[R>>>24]^d[M>>16&255]^h[U>>8&255]^p[W&255]^s[ye+3],M=k,U=O,W=w,R=$,ye=ye+4;k=a[M>>>24]<<24^a[U>>16&255]<<16^a[W>>8&255]<<8^a[R&255]^s[ye],O=a[U>>>24]<<24^a[W>>16&255]<<16^a[R>>8&255]<<8^a[M&255]^s[ye+1],w=a[W>>>24]<<24^a[R>>16&255]<<16^a[M>>8&255]<<8^a[U&255]^s[ye+2],$=a[R>>>24]<<24^a[M>>16&255]<<16^a[U>>8&255]<<8^a[W&255]^s[ye+3],C[t]=Pe(k^x),C[t+1]=Pe($^v),C[t+2]=Pe(w^S),C[t+3]=Pe(O^T),x=G,v=fe,S=ae,T=xe,t=t+4}return C.buffer}}const BM=16;class X0{constructor(e,{removePKCS7Padding:t=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=e.enableSoftwareAES,this.removePKCS7Padding=t,t)try{const r=self.crypto;r&&(this.subtle=r.subtle||r.webkitSubtle)}catch{}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:t}=this;if(!e||t)return this.reset(),null;const r=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?FM(r):r}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,t,r){return this.useSoftware?new Promise((i,s)=>{this.softwareDecrypt(new Uint8Array(e),t,r);const a=this.flush();a?i(a.buffer):s(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),t,r)}softwareDecrypt(e,t,r){const{currentIV:i,currentResult:s,remainderData:a}=this;this.logOnce("JS AES decrypt"),a&&(e=Oi(a,e),this.remainderData=null);const c=this.getValidChunk(e);if(!c.length)return null;i&&(r=i);let u=this.softwareDecrypter;u||(u=this.softwareDecrypter=new $M),u.expandKey(t);const d=s;return this.currentResult=u.decrypt(c.buffer,0,r),this.currentIV=Va(c,-16).buffer,d||null}webCryptoDecrypt(e,t,r){if(this.key!==t||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,t,r));this.key=t,this.fastAesKey=new MM(this.subtle,t)}return this.fastAesKey.expandKey().then(i=>this.subtle?(this.logOnce("WebCrypto AES decrypt"),new NM(this.subtle,new Uint8Array(r)).decrypt(e.buffer,i)):Promise.reject(new Error("web crypto not initialized"))).catch(i=>(J.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${i.name}: ${i.message}`),this.onWebCryptoError(e,t,r)))}onWebCryptoError(e,t,r){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,r);const i=this.flush();if(i)return i.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")}getValidChunk(e){let t=e;const r=e.length-e.length%BM;return r!==e.length&&(t=Va(e,0,r),this.remainderData=Va(e,r)),t}logOnce(e){this.logEnabled&&(J.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const UM={toString:function(n){let e="";const t=n.length;for(let r=0;r<t;r++)e+=`[${n.start(r).toFixed(3)}-${n.end(r).toFixed(3)}]`;return e}},ve={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class Q0 extends CM{constructor(e,t,r,i,s){super(),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=ve.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.loadedmetadata=!1,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.onvseeking=null,this.onvended=null,this.logPrefix="",this.log=void 0,this.warn=void 0,this.playlistType=s,this.logPrefix=i,this.log=J.log.bind(J,`${i}:`),this.warn=J.warn.bind(J,`${i}:`),this.hls=e,this.fragmentLoader=new OM(e.config),this.keyLoader=r,this.fragmentTracker=t,this.config=e.config,this.decrypter=new X0(e.config),e.on(P.MANIFEST_LOADED,this.onManifestLoaded,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;e!=null&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=ve.STOPPED}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}_streamEnded(e,t){if(t.live||e.nextStart||!e.end||!this.media)return!1;const r=t.partList;if(r!=null&&r.length){const s=r[r.length-1];return mn.isBuffered(this.media,s.start+s.duration/2)}const i=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(i)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null){var e;return(e=this.levelLastLoaded)==null?void 0:e.details}}onMediaAttached(e,t){const r=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),r.addEventListener("seeking",this.onvseeking),r.addEventListener("ended",this.onvended);const i=this.config;this.levels&&i.autoStartLoad&&this.state===ve.STOPPED&&this.startLoad(i.startPosition)}onMediaDetaching(){const e=this.media;e!=null&&e.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&this.onvseeking&&this.onvended&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}onMediaSeeking(){const{config:e,fragCurrent:t,media:r,mediaBuffer:i,state:s}=this,a=r?r.currentTime:0,c=mn.bufferInfo(i||r,a,e.maxBufferHole);if(this.log(`media seeking to ${Ye(a)?a.toFixed(3):a}, state: ${s}`),this.state===ve.ENDED)this.resetLoadingState();else if(t){const u=e.maxFragLookUpTolerance,d=t.start-u,h=t.start+t.duration+u;if(!c.len||h<c.start||d>c.end){const p=a>h;(a<d||p)&&(p&&t.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),t.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}r&&(this.fragmentTracker.removeFragmentsInRange(a,1/0,this.playlistType,!0),this.lastCurrentTime=a),!this.loadedmetadata&&!c.len&&(this.nextLoadPosition=this.startPosition=a),this.tickImmediate()}onMediaEnded(){this.startPosition=this.lastCurrentTime=0}onManifestLoaded(e,t){this.startTimeOffset=t.startTimeOffset,this.initPTS=[]}onHandlerDestroying(){this.hls.off(P.MANIFEST_LOADED,this.onManifestLoaded,this),this.stopLoad(),super.onHandlerDestroying(),this.hls=null}onHandlerDestroyed(){this.state=ve.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,t,r){this._loadFragForPlayback(e,t,r)}_loadFragForPlayback(e,t,r){const i=s=>{if(this.fragContextChanged(e)){this.warn(`Fragment ${e.sn}${s.part?" p: "+s.part.index:""} of level ${e.level} was dropped during download.`),this.fragmentTracker.removeFragment(e);return}e.stats.chunkCount++,this._handleFragmentLoadProgress(s)};this._doFragLoad(e,t,r,i).then(s=>{if(!s)return;const a=this.state;if(this.fragContextChanged(e)){(a===ve.FRAG_LOADING||!this.fragCurrent&&a===ve.PARSING)&&(this.fragmentTracker.removeFragment(e),this.state=ve.IDLE);return}"payload"in s&&(this.log(`Loaded fragment ${e.sn} of level ${e.level}`),this.hls.trigger(P.FRAG_LOADED,s)),this._handleFragmentLoadComplete(s)}).catch(s=>{this.state===ve.STOPPED||this.state===ve.ERROR||(this.warn(`Frag error: ${(s==null?void 0:s.message)||s}`),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var t;const{fragmentTracker:r}=this;if(r.getState(e)===rr.APPENDING){const s=e.type,a=this.getFwdBufferInfo(this.mediaBuffer,s),c=Math.max(e.duration,a?a.len:this.config.maxBufferLength),u=this.backtrackFragment;((u?e.sn-u.sn:0)===1||this.reduceMaxBufferLength(c,e.duration))&&r.removeFragment(e)}else((t=this.mediaBuffer)==null?void 0:t.buffered.length)===0?r.removeAllFragments():r.hasParts(e.type)&&(r.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),r.getState(e)===rr.PARTIAL&&r.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const t=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}flushMainBuffer(e,t,r=null){if(!(e-t))return;const i={startOffset:e,endOffset:t,type:r};this.hls.trigger(P.BUFFER_FLUSHING,i)}_loadInitSegment(e,t){this._doFragLoad(e,t).then(r=>{if(!r||this.fragContextChanged(e)||!this.levels)throw new Error("init load aborted");return r}).then(r=>{const{hls:i}=this,{payload:s}=r,a=e.decryptdata;if(s&&s.byteLength>0&&a!=null&&a.key&&a.iv&&a.method==="AES-128"){const c=self.performance.now();return this.decrypter.decrypt(new Uint8Array(s),a.key.buffer,a.iv.buffer).catch(u=>{throw i.trigger(P.ERROR,{type:ft.MEDIA_ERROR,details:le.FRAG_DECRYPT_ERROR,fatal:!1,error:u,reason:u.message,frag:e}),u}).then(u=>{const d=self.performance.now();return i.trigger(P.FRAG_DECRYPTED,{frag:e,payload:u,stats:{tstart:c,tdecrypt:d}}),r.payload=u,this.completeInitSegmentLoad(r)})}return this.completeInitSegmentLoad(r)}).catch(r=>{this.state===ve.STOPPED||this.state===ve.ERROR||(this.warn(r),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){const{levels:t}=this;if(!t)throw new Error("init load aborted, missing levels");const r=e.frag.stats;this.state=ve.IDLE,e.frag.data=new Uint8Array(e.payload),r.parsing.start=r.buffering.start=self.performance.now(),r.parsing.end=r.buffering.end=self.performance.now(),this.tick()}fragContextChanged(e){const{fragCurrent:t}=this;return!e||!t||e.sn!==t.sn||e.level!==t.level}fragBufferedComplete(e,t){var r,i,s,a;const c=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.playlistType===at.MAIN?"level":"track"} ${e.level} (frag:[${((r=e.startPTS)!=null?r:NaN).toFixed(3)}-${((i=e.endPTS)!=null?i:NaN).toFixed(3)}] > buffer:${c?UM.toString(mn.getBuffered(c)):"(detached)"})`),e.sn!=="initSegment"){var u;if(e.type!==at.SUBTITLE){const h=e.elementaryStreams;if(!Object.keys(h).some(p=>!!h[p])){this.state=ve.IDLE;return}}const d=(u=this.levels)==null?void 0:u[e.level];d!=null&&d.fragmentError&&(this.log(`Resetting level fragment error count of ${d.fragmentError} on frag buffered`),d.fragmentError=0)}this.state=ve.IDLE,c&&(!this.loadedmetadata&&e.type==at.MAIN&&c.buffered.length&&((s=this.fragCurrent)==null?void 0:s.sn)===((a=this.fragPrevious)==null?void 0:a.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())}seekToStartPos(){}_handleFragmentLoadComplete(e){const{transmuxer:t}=this;if(!t)return;const{frag:r,part:i,partsLoaded:s}=e,a=!s||s.length===0||s.some(u=>!u),c=new q0(r.level,r.sn,r.stats.chunkCount+1,0,i?i.index:-1,!a);t.flush(c)}_handleFragmentLoadProgress(e){}_doFragLoad(e,t,r=null,i){var s;const a=t==null?void 0:t.details;if(!this.levels||!a)throw new Error(`frag load aborted, missing level${a?"":" detail"}s`);let c=null;if(e.encrypted&&!((s=e.decryptdata)!=null&&s.key)?(this.log(`Loading key for ${e.sn} of [${a.startSN}-${a.endSN}], ${this.logPrefix==="[stream-controller]"?"level":"track"} ${e.level}`),this.state=ve.KEY_LOADING,this.fragCurrent=e,c=this.keyLoader.load(e).then(h=>{if(!this.fragContextChanged(h.frag))return this.hls.trigger(P.KEY_LOADED,h),this.state===ve.KEY_LOADING&&(this.state=ve.IDLE),h}),this.hls.trigger(P.KEY_LOADING,{frag:e}),this.fragCurrent===null&&(c=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))):!e.encrypted&&a.encryptedFragments.length&&this.keyLoader.loadClear(e,a.encryptedFragments),r=Math.max(e.start,r||0),this.config.lowLatencyMode&&e.sn!=="initSegment"){const h=a.partList;if(h&&i){r>e.end&&a.fragmentHint&&(e=a.fragmentHint);const p=this.getNextPart(h,e,r);if(p>-1){const g=h[p];this.log(`Loading part sn: ${e.sn} p: ${g.index} cc: ${e.cc} of playlist [${a.startSN}-${a.endSN}] parts [0-${p}-${h.length-1}] ${this.logPrefix==="[stream-controller]"?"level":"track"}: ${e.level}, target: ${parseFloat(r.toFixed(3))}`),this.nextLoadPosition=g.start+g.duration,this.state=ve.FRAG_LOADING;let x;return c?x=c.then(v=>!v||this.fragContextChanged(v.frag)?null:this.doFragPartsLoad(e,g,t,i)).catch(v=>this.handleFragLoadError(v)):x=this.doFragPartsLoad(e,g,t,i).catch(v=>this.handleFragLoadError(v)),this.hls.trigger(P.FRAG_LOADING,{frag:e,part:g,targetBufferTime:r}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):x}else if(!e.url||this.loadedEndOfParts(h,r))return Promise.resolve(null)}}this.log(`Loading fragment ${e.sn} cc: ${e.cc} ${a?"of ["+a.startSN+"-"+a.endSN+"] ":""}${this.logPrefix==="[stream-controller]"?"level":"track"}: ${e.level}, target: ${parseFloat(r.toFixed(3))}`),Ye(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=ve.FRAG_LOADING;const u=this.config.progressive;let d;return u&&c?d=c.then(h=>!h||this.fragContextChanged(h==null?void 0:h.frag)?null:this.fragmentLoader.load(e,i)).catch(h=>this.handleFragLoadError(h)):d=Promise.all([this.fragmentLoader.load(e,u?i:void 0),c]).then(([h])=>(!u&&h&&i&&i(h),h)).catch(h=>this.handleFragLoadError(h)),this.hls.trigger(P.FRAG_LOADING,{frag:e,targetBufferTime:r}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):d}doFragPartsLoad(e,t,r,i){return new Promise((s,a)=>{var c;const u=[],d=(c=r.details)==null?void 0:c.partList,h=p=>{this.fragmentLoader.loadPart(e,p,i).then(g=>{u[p.index]=g;const x=g.part;this.hls.trigger(P.FRAG_LOADED,g);const v=D1(r,e.sn,p.index+1)||cb(d,e.sn,p.index+1);if(v)h(v);else return s({frag:e,part:x,partsLoaded:u})}).catch(a)};h(t)})}handleFragLoadError(e){if("data"in e){const t=e.data;e.data&&t.details===le.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):this.hls.trigger(P.ERROR,t)}else this.hls.trigger(P.ERROR,{type:ft.OTHER_ERROR,details:le.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const t=this.getCurrentContext(e);if(!t||this.state!==ve.PARSING){!this.fragCurrent&&this.state!==ve.STOPPED&&this.state!==ve.ERROR&&(this.state=ve.IDLE);return}const{frag:r,part:i,level:s}=t,a=self.performance.now();r.stats.parsing.end=a,i&&(i.stats.parsing.end=a),this.updateLevelTiming(r,i,s,e.partial)}getCurrentContext(e){const{levels:t,fragCurrent:r}=this,{level:i,sn:s,part:a}=e;if(!(t!=null&&t[i]))return this.warn(`Levels object was unset while buffering fragment ${s} of level ${i}. The current chunk will not be buffered.`),null;const c=t[i],u=a>-1?D1(c,s,a):null,d=u?u.fragment:lM(c,s,r);return d?(r&&r!==d&&(d.stats=r.stats),{frag:d,part:u,level:c}):null}bufferFragmentData(e,t,r,i,s){var a;if(!e||this.state!==ve.PARSING)return;const{data1:c,data2:u}=e;let d=c;if(c&&u&&(d=Oi(c,u)),!((a=d)!=null&&a.length))return;const h={type:e.type,frag:t,part:r,chunkMeta:i,parent:t.type,data:d};if(this.hls.trigger(P.BUFFER_APPENDING,h),e.dropped&&e.independent&&!r){if(s)return;this.flushBufferGap(t)}}flushBufferGap(e){const t=this.media;if(!t)return;if(!mn.isBuffered(t,t.currentTime)){this.flushMainBuffer(0,e.start);return}const r=t.currentTime,i=mn.bufferInfo(t,r,0),s=e.duration,a=Math.min(this.config.maxFragLookUpTolerance*2,s*.25),c=Math.max(Math.min(e.start-a,i.end-a),r+a);e.start-c>a&&this.flushMainBuffer(c,e.start)}getFwdBufferInfo(e,t){const r=this.getLoadPosition();return Ye(r)?this.getFwdBufferInfoAtPos(e,r,t):null}getFwdBufferInfoAtPos(e,t,r){const{config:{maxBufferHole:i}}=this,s=mn.bufferInfo(e,t,i);if(s.len===0&&s.nextStart!==void 0){const a=this.fragmentTracker.getBufferedFrag(t,r);if(a&&s.nextStart<a.end)return mn.bufferInfo(e,t,Math.max(s.nextStart,i))}return s}getMaxBufferLength(e){const{config:t}=this;let r;return e?r=Math.max(8*t.maxBufferSize/e,t.maxBufferLength):r=t.maxBufferLength,Math.min(r,t.maxMaxBufferLength)}reduceMaxBufferLength(e,t){const r=this.config,i=Math.max(Math.min(e-t,r.maxBufferLength),t),s=Math.max(e-t*3,r.maxMaxBufferLength/2,i);return s>=i?(r.maxMaxBufferLength=s,this.warn(`Reduce max buffer length to ${s}s`),!0):!1}getAppendedFrag(e,t=at.MAIN){const r=this.fragmentTracker.getAppendedFrag(e,at.MAIN);return r&&"fragment"in r?r.fragment:r}getNextFragment(e,t){const r=t.fragments,i=r.length;if(!i)return null;const{config:s}=this,a=r[0].start;let c;if(t.live){const u=s.initialLiveManifestSize;if(i<u)return this.warn(`Not enough fragments to start playback (have: ${i}, need: ${u})`),null;(!t.PTSKnown&&!this.startFragRequested&&this.startPosition===-1||e<a)&&(c=this.getInitialLiveFragment(t,r),this.startPosition=this.nextLoadPosition=c?this.hls.liveSyncPosition||c.start:e)}else e<=a&&(c=r[0]);if(!c){const u=s.lowLatencyMode?t.partEnd:t.fragmentEnd;c=this.getFragmentAtPosition(e,u,t)}return this.mapToInitFragWhenRequired(c)}isLoopLoading(e,t){const r=this.fragmentTracker.getState(e);return(r===rr.OK||r===rr.PARTIAL&&!!e.gap)&&this.nextLoadPosition>t}getNextFragmentLoopLoading(e,t,r,i,s){const a=e.gap,c=this.getNextFragment(this.nextLoadPosition,t);if(c===null)return c;if(e=c,a&&e&&!e.gap&&r.nextStart){const u=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,r.nextStart,i);if(u!==null&&r.len+u.len>=s)return this.log(`buffer full after gaps in "${i}" playlist starting at sn: ${e.sn}`),null}return e}mapToInitFragWhenRequired(e){return e!=null&&e.initSegment&&!(e!=null&&e.initSegment.data)&&!this.bitrateTest?e.initSegment:e}getNextPart(e,t,r){let i=-1,s=!1,a=!0;for(let c=0,u=e.length;c<u;c++){const d=e[c];if(a=a&&!d.independent,i>-1&&r<d.start)break;const h=d.loaded;h?i=-1:(s||d.independent||a)&&d.fragment===t&&(i=c),s=h}return i}loadedEndOfParts(e,t){const r=e[e.length-1];return r&&t>r.start&&r.loaded}getInitialLiveFragment(e,t){const r=this.fragPrevious;let i=null;if(r){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${r.programDateTime}`),i=uM(t,r.endProgramDateTime,this.config.maxFragLookUpTolerance)),!i){const s=r.sn+1;if(s>=e.startSN&&s<=e.endSN){const a=t[s-e.startSN];r.cc===a.cc&&(i=a,this.log(`Live playlist, switching playlist, load frag with next SN: ${i.sn}`))}i||(i=hM(t,r.cc),i&&this.log(`Live playlist, switching playlist, load frag with same CC: ${i.sn}`))}}else{const s=this.hls.liveSyncPosition;s!==null&&(i=this.getFragmentAtPosition(s,this.bitrateTest?e.fragmentEnd:e.edge,e))}return i}getFragmentAtPosition(e,t,r){const{config:i}=this;let{fragPrevious:s}=this,{fragments:a,endSN:c}=r;const{fragmentHint:u}=r,{maxFragLookUpTolerance:d}=i,h=r.partList,p=!!(i.lowLatencyMode&&h!=null&&h.length&&u);p&&u&&!this.bitrateTest&&(a=a.concat(u),c=u.sn);let g;if(e<t){const x=e>t-d?0:d;g=ih(s,a,e,x)}else g=a[a.length-1];if(g){const x=g.sn-r.startSN,v=this.fragmentTracker.getState(g);if((v===rr.OK||v===rr.PARTIAL&&g.gap)&&(s=g),s&&g.sn===s.sn&&(!p||h[0].fragment.sn>g.sn)&&s&&g.level===s.level){const T=a[x+1];g.sn<c&&this.fragmentTracker.getState(T)!==rr.OK?g=T:g=null}}return g}synchronizeToLiveEdge(e){const{config:t,media:r}=this;if(!r)return;const i=this.hls.liveSyncPosition,s=r.currentTime,a=e.fragments[0].start,c=e.edge,u=s>=a-t.maxFragLookUpTolerance&&s<=c;if(i!==null&&r.duration>i&&(s<i||!u)){const d=t.liveMaxLatencyDuration!==void 0?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;(!u&&r.readyState<4||s<c-d)&&(this.loadedmetadata||(this.nextLoadPosition=i),r.readyState&&(this.warn(`Playback: ${s.toFixed(3)} is located too far from the end of live sliding playlist: ${c}, reset currentTime to : ${i.toFixed(3)}`),r.currentTime=i))}}alignPlaylists(e,t,r){const i=e.fragments.length;if(!i)return this.warn("No fragments in live playlist"),0;const s=e.fragments[0].start,a=!t,c=e.alignedSliding&&Ye(s);if(a||!c&&!s){const{fragPrevious:u}=this;PM(u,r,e);const d=e.fragments[0].start;return this.log(`Live playlist sliding: ${d.toFixed(2)} start-sn: ${t?t.startSN:"na"}->${e.startSN} prev-sn: ${u?u.sn:"na"} fragments: ${i}`),d}return s}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,e.partTarget*3)}setStartPosition(e,t){let r=this.startPosition;if(r<t&&(r=-1),r===-1||this.lastCurrentTime===-1){const i=this.startTimeOffset!==null,s=i?this.startTimeOffset:e.startTimeOffset;s!==null&&Ye(s)?(r=t+s,s<0&&(r+=e.totalduration),r=Math.min(Math.max(t,r),t+e.totalduration),this.log(`Start time offset ${s} found in ${i?"multivariant":"media"} playlist, adjust startPosition to ${r}`),this.startPosition=r):e.live?r=this.hls.liveSyncPosition||t:this.startPosition=r=0,this.lastCurrentTime=r}this.nextLoadPosition=r}getLoadPosition(){const{media:e}=this;let t=0;return this.loadedmetadata&&e?t=e.currentTime:this.nextLoadPosition&&(t=this.nextLoadPosition),t}handleFragLoadAborted(e,t){this.transmuxer&&e.sn!=="initSegment"&&e.stats.aborted&&(this.warn(`Fragment ${e.sn}${t?" part "+t.index:""} of level ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){(!this.fragCurrent||!this.fragContextChanged(e)&&this.state!==ve.FRAG_LOADING_WAITING_RETRY)&&(this.state=ve.IDLE)}onFragmentOrKeyLoadError(e,t){if(t.chunkMeta&&!t.frag){const h=this.getCurrentContext(t.chunkMeta);h&&(t.frag=h.frag)}const r=t.frag;if(!r||r.type!==e||!this.levels)return;if(this.fragContextChanged(r)){var i;this.warn(`Frag load error must match current frag to retry ${r.url} > ${(i=this.fragCurrent)==null?void 0:i.url}`);return}const s=t.details===le.FRAG_GAP;s&&this.fragmentTracker.fragBuffered(r,!0);const a=t.errorAction,{action:c,retryCount:u=0,retryConfig:d}=a||{};if(a&&c===hr.RetryRequest&&d){this.resetStartWhenNotLoaded(this.levelLastLoaded);const h=W0(d,u);this.warn(`Fragment ${r.sn} of ${e} ${r.level} errored with ${t.details}, retrying loading ${u+1}/${d.maxNumRetry} in ${h}ms`),a.resolved=!0,this.retryDate=self.performance.now()+h,this.state=ve.FRAG_LOADING_WAITING_RETRY}else if(d&&a)if(this.resetFragmentErrors(e),u<d.maxNumRetry)!s&&c!==hr.RemoveAlternatePermanently&&(a.resolved=!0);else{J.warn(`${t.details} reached or exceeded max retry (${u})`);return}else(a==null?void 0:a.action)===hr.SendAlternateToPenaltyBox?this.state=ve.WAITING_LEVEL:this.state=ve.ERROR;this.tickImmediate()}reduceLengthAndFlushBuffer(e){if(this.state===ve.PARSING||this.state===ve.PARSED){const t=e.frag,r=e.parent,i=this.getFwdBufferInfo(this.mediaBuffer,r),s=i&&i.len>.5;s&&this.reduceMaxBufferLength(i.len,(t==null?void 0:t.duration)||10);const a=!s;return a&&this.warn(`Buffer full error while media.currentTime is not buffered, flush ${r} buffer`),t&&(this.fragmentTracker.removeFragment(t),this.nextLoadPosition=t.start),this.resetLoadingState(),a}return!1}resetFragmentErrors(e){e===at.AUDIO&&(this.fragCurrent=null),this.loadedmetadata||(this.startFragRequested=!1),this.state!==ve.STOPPED&&(this.state=ve.IDLE)}afterBufferFlushed(e,t,r){if(!e)return;const i=mn.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,i,r),this.state===ve.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=ve.IDLE}resetStartWhenNotLoaded(e){if(!this.loadedmetadata){this.startFragRequested=!1;const t=e?e.details:null;t!=null&&t.live?(this.startPosition=-1,this.setStartPosition(t,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.warn(`The loading context changed while buffering fragment ${e.sn} of level ${e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,t,r,i){var s;const a=r.details;if(!a){this.warn("level.details undefined");return}if(!Object.keys(e.elementaryStreams).reduce((u,d)=>{const h=e.elementaryStreams[d];if(h){const p=h.endPTS-h.startPTS;if(p<=0)return this.warn(`Could not parse fragment ${e.sn} ${d} duration reliably (${p})`),u||!1;const g=i?0:ab(a,e,h.startPTS,h.endPTS,h.startDTS,h.endDTS);return this.hls.trigger(P.LEVEL_PTS_UPDATED,{details:a,level:r,drift:g,type:d,frag:e,start:h.startPTS,end:h.endPTS}),!0}return u},!1)&&((s=this.transmuxer)==null?void 0:s.error)===null){const u=new Error(`Found no media in fragment ${e.sn} of level ${e.level} resetting transmuxer to fallback to playlist timing`);if(r.fragmentError===0&&(r.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)),this.warn(u.message),this.hls.trigger(P.ERROR,{type:ft.MEDIA_ERROR,details:le.FRAG_PARSING_ERROR,fatal:!1,error:u,frag:e,reason:`Found no media in msn ${e.sn} of level "${r.url}"`}),!this.hls)return;this.resetTransmuxer()}this.state=ve.PARSED,this.hls.trigger(P.FRAG_PARSED,{frag:e,part:t})}resetTransmuxer(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)}recoverWorkerError(e){e.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.resetTransmuxer(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState())}set state(e){const t=this._state;t!==e&&(this._state=e,this.log(`${t}->${e}`))}get state(){return this._state}}class pb{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:t}=this;let r;if(e.length)e.length===1?r=e[0]:r=jM(e,t);else return new Uint8Array(0);return this.reset(),r}reset(){this.chunks.length=0,this.dataLength=0}}function jM(n,e){const t=new Uint8Array(e);let r=0;for(let i=0;i<n.length;i++){const s=n[i];t.set(s,r),r+=s.length}return t}function HM(){return typeof __HLS_WORKER_BUNDLE__=="function"}function GM(){const n=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),e=self.URL.createObjectURL(n);return{worker:new self.Worker(e),objectURL:e}}function VM(n){const e=new self.URL(n,self.location.href).href;return{worker:new self.Worker(e),scriptURL:e}}function Ds(n="",e=9e4){return{type:n,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}class J0{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,t,r,i){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,t){return!1}appendFrame(e,t,r){}demux(e,t){this.cachedData&&(e=Oi(this.cachedData,e),this.cachedData=null);let r=yu(e,0),i=r?r.length:0,s;const a=this._audioTrack,c=this._id3Track,u=r?K0(r):void 0,d=e.length;for((this.basePTS===null||this.frameIndex===0&&Ye(u))&&(this.basePTS=zM(u,t,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),r&&r.length>0&&c.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:r,type:ts.audioId3,duration:Number.POSITIVE_INFINITY});i<d;){if(this.canParse(e,i)){const h=this.appendFrame(a,e,i);h?(this.frameIndex++,this.lastPTS=h.sample.pts,i+=h.length,s=i):i=d}else fN(e,i)?(r=yu(e,i),c.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:r,type:ts.audioId3,duration:Number.POSITIVE_INFINITY}),i+=r.length,s=i):i++;if(i===d&&s!==d){const h=Va(e,s);this.cachedData?this.cachedData=Oi(this.cachedData,h):this.cachedData=h}}return{audioTrack:a,videoTrack:Ds(),id3Track:c,textTrack:Ds()}}demuxSampleAes(e,t,r){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:Ds(),id3Track:this._id3Track,textTrack:Ds()}}destroy(){}}const zM=(n,e,t)=>{if(Ye(n))return n*90;const r=t?t.baseTime*9e4/t.timescale:0;return e*9e4+r};function KM(n,e,t,r){let i,s,a,c;const u=navigator.userAgent.toLowerCase(),d=r,h=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];i=((e[t+2]&192)>>>6)+1;const p=(e[t+2]&60)>>>2;if(p>h.length-1){const g=new Error(`invalid ADTS sampling index:${p}`);n.emit(P.ERROR,P.ERROR,{type:ft.MEDIA_ERROR,details:le.FRAG_PARSING_ERROR,fatal:!0,error:g,reason:g.message});return}return a=(e[t+2]&1)<<2,a|=(e[t+3]&192)>>>6,J.log(`manifest codec:${r}, ADTS type:${i}, samplingIndex:${p}`),/firefox/i.test(u)?p>=6?(i=5,c=new Array(4),s=p-3):(i=2,c=new Array(2),s=p):u.indexOf("android")!==-1?(i=2,c=new Array(2),s=p):(i=5,c=new Array(4),r&&(r.indexOf("mp4a.40.29")!==-1||r.indexOf("mp4a.40.5")!==-1)||!r&&p>=6?s=p-3:((r&&r.indexOf("mp4a.40.2")!==-1&&(p>=6&&a===1||/vivaldi/i.test(u))||!r&&a===1)&&(i=2,c=new Array(2)),s=p)),c[0]=i<<3,c[0]|=(p&14)>>1,c[1]|=(p&1)<<7,c[1]|=a<<3,i===5&&(c[1]|=(s&14)>>1,c[2]=(s&1)<<7,c[2]|=8,c[3]=0),{config:c,samplerate:h[p],channelCount:a,codec:"mp4a.40."+i,manifestCodec:d}}function mb(n,e){return n[e]===255&&(n[e+1]&246)===240}function gb(n,e){return n[e+1]&1?7:9}function Z0(n,e){return(n[e+3]&3)<<11|n[e+4]<<3|(n[e+5]&224)>>>5}function WM(n,e){return e+5<n.length}function oh(n,e){return e+1<n.length&&mb(n,e)}function YM(n,e){return WM(n,e)&&mb(n,e)&&Z0(n,e)<=n.length-e}function qM(n,e){if(oh(n,e)){const t=gb(n,e);if(e+t>=n.length)return!1;const r=Z0(n,e);if(r<=t)return!1;const i=e+r;return i===n.length||oh(n,i)}return!1}function yb(n,e,t,r,i){if(!n.samplerate){const s=KM(e,t,r,i);if(!s)return;n.config=s.config,n.samplerate=s.samplerate,n.channelCount=s.channelCount,n.codec=s.codec,n.manifestCodec=s.manifestCodec,J.log(`parsed codec:${n.codec}, rate:${s.samplerate}, channels:${s.channelCount}`)}}function vb(n){return 1024*9e4/n}function XM(n,e){const t=gb(n,e);if(e+t<=n.length){const r=Z0(n,e)-t;if(r>0)return{headerLength:t,frameLength:r}}}function xb(n,e,t,r,i){const s=vb(n.samplerate),a=r+i*s,c=XM(e,t);let u;if(c){const{frameLength:p,headerLength:g}=c,x=g+p,v=Math.max(0,t+x-e.length);v?(u=new Uint8Array(x-g),u.set(e.subarray(t+g,e.length),0)):u=e.subarray(t+g,t+x);const S={unit:u,pts:a};return v||n.samples.push(S),{sample:S,length:x,missing:v}}const d=e.length-t;return u=new Uint8Array(d),u.set(e.subarray(t,e.length),0),{sample:{unit:u,pts:a},length:d,missing:-1}}let df=null;const QM=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],JM=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],ZM=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],eF=[0,1,1,4];function Sb(n,e,t,r,i){if(t+24>e.length)return;const s=Eb(e,t);if(s&&t+s.frameLength<=e.length){const a=s.samplesPerFrame*9e4/s.sampleRate,c=r+i*a,u={unit:e.subarray(t,t+s.frameLength),pts:c,dts:c};return n.config=[],n.channelCount=s.channelCount,n.samplerate=s.sampleRate,n.samples.push(u),{sample:u,length:s.frameLength,missing:0}}}function Eb(n,e){const t=n[e+1]>>3&3,r=n[e+1]>>1&3,i=n[e+2]>>4&15,s=n[e+2]>>2&3;if(t!==1&&i!==0&&i!==15&&s!==3){const a=n[e+2]>>1&1,c=n[e+3]>>6,u=t===3?3-r:r===3?3:4,d=QM[u*14+i-1]*1e3,p=JM[(t===3?0:t===2?1:2)*3+s],g=c===3?1:2,x=ZM[t][r],v=eF[r],S=x*8*v,T=Math.floor(x*d/p+a)*v;if(df===null){const k=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);df=k?parseInt(k[1]):0}return!!df&&df<=87&&r===2&&d>=224e3&&c===0&&(n[e+3]=n[e+3]|128),{sampleRate:p,channelCount:g,frameLength:T,samplesPerFrame:S}}}function ey(n,e){return n[e]===255&&(n[e+1]&224)===224&&(n[e+1]&6)!==0}function Tb(n,e){return e+1<n.length&&ey(n,e)}function tF(n,e){return ey(n,e)&&4<=n.length-e}function bb(n,e){if(e+1<n.length&&ey(n,e)){const r=Eb(n,e);let i=4;r!=null&&r.frameLength&&(i=r.frameLength);const s=e+i;return s===n.length||Tb(n,s)}return!1}class nF extends J0{constructor(e,t){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=t}resetInitSegment(e,t,r,i){super.resetInitSegment(e,t,r,i),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=yu(e,0);let r=(t==null?void 0:t.length)||0;if(bb(e,r))return!1;for(let i=e.length;r<i;r++)if(qM(e,r))return J.log("ADTS sync word found !"),!0;return!1}canParse(e,t){return YM(e,t)}appendFrame(e,t,r){yb(e,this.observer,t,r,e.manifestCodec);const i=xb(e,t,r,this.basePTS,this.frameIndex);if(i&&i.missing===0)return i}}const rF=/\/emsg[-/]ID3/i;class iF{constructor(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}resetTimeStamp(){}resetInitSegment(e,t,r,i){const s=this.videoTrack=Ds("video",1),a=this.audioTrack=Ds("audio",1),c=this.txtTrack=Ds("text",1);if(this.id3Track=Ds("id3",1),this.timeOffset=0,!(e!=null&&e.byteLength))return;const u=ZT(e);if(u.video){const{id:d,timescale:h,codec:p}=u.video;s.id=d,s.timescale=c.timescale=h,s.codec=p}if(u.audio){const{id:d,timescale:h,codec:p}=u.audio;a.id=d,a.timescale=h,a.codec=p}c.id=XT.text,s.sampleDuration=0,s.duration=a.duration=i}resetContiguity(){this.remainderData=null}static probe(e){return EN(e)}demux(e,t){this.timeOffset=t;let r=e;const i=this.videoTrack,s=this.txtTrack;if(this.config.progressive){this.remainderData&&(r=Oi(this.remainderData,e));const c=AN(r);this.remainderData=c.remainder,i.samples=c.valid||new Uint8Array}else i.samples=r;const a=this.extractID3Track(i,t);return s.samples=p1(t,i),{videoTrack:i,audioTrack:this.audioTrack,id3Track:a,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,t=this.videoTrack,r=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;const i=this.extractID3Track(t,this.timeOffset);return r.samples=p1(e,t),{videoTrack:t,audioTrack:Ds(),id3Track:i,textTrack:Ds()}}extractID3Track(e,t){const r=this.id3Track;if(e.samples.length){const i=St(e.samples,["emsg"]);i&&i.forEach(s=>{const a=PN(s);if(rF.test(a.schemeIdUri)){const c=Ye(a.presentationTime)?a.presentationTime/a.timeScale:t+a.presentationTimeDelta/a.timeScale;let u=a.eventDuration===4294967295?Number.POSITIVE_INFINITY:a.eventDuration/a.timeScale;u<=.001&&(u=Number.POSITIVE_INFINITY);const d=a.payload;r.samples.push({data:d,len:d.byteLength,dts:c,pts:c,type:ts.emsg,duration:u})}})}return r}demuxSampleAes(e,t,r){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){}}const wb=(n,e)=>{let t=0,r=5;e+=r;const i=new Uint32Array(1),s=new Uint32Array(1),a=new Uint8Array(1);for(;r>0;){a[0]=n[e];const c=Math.min(r,8),u=8-c;s[0]=4278190080>>>24+u<<u,i[0]=(a[0]&s[0])>>u,t=t?t<<c|i[0]:i[0],e+=1,r-=c}return t};class sF extends J0{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,t,r,i){super.resetInitSegment(e,t,r,i),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}}canParse(e,t){return t+64<e.length}appendFrame(e,t,r){const i=_b(e,t,r,this.basePTS,this.frameIndex);if(i!==-1)return{sample:e.samples[e.samples.length-1],length:i,missing:0}}static probe(e){if(!e)return!1;const t=yu(e,0);if(!t)return!1;const r=t.length;return e[r]===11&&e[r+1]===119&&K0(t)!==void 0&&wb(e,r)<16}}function _b(n,e,t,r,i){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return-1;const s=e[t+4]>>6;if(s>=3)return-1;const c=[48e3,44100,32e3][s],u=e[t+4]&63,h=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][u*3+s]*2;if(t+h>e.length)return-1;const p=e[t+6]>>5;let g=0;p===2?g+=2:(p&1&&p!==1&&(g+=2),p&4&&(g+=2));const x=(e[t+6]<<8|e[t+7])>>12-g&1,S=[2,1,2,3,3,4,4,5][p]+x,T=e[t+5]>>3,_=e[t+5]&7,C=new Uint8Array([s<<6|T<<1|_>>2,(_&3)<<6|p<<3|x<<2|u>>4,u<<4&224]),k=1536/c*9e4,O=r+i*k,w=e.subarray(t,t+h);return n.config=C,n.channelCount=S,n.samplerate=c,n.samples.push({unit:w,pts:O}),h}class oF{constructor(){this.VideoSample=null}createVideoSample(e,t,r,i){return{key:e,frame:!1,pts:t,dts:r,units:[],debug:i,length:0}}getLastNalUnit(e){var t;let r=this.VideoSample,i;if((!r||r.units.length===0)&&(r=e[e.length-1]),(t=r)!=null&&t.units){const s=r.units;i=s[s.length-1]}return i}pushAccessUnit(e,t){if(e.units.length&&e.frame){if(e.pts===void 0){const r=t.samples,i=r.length;if(i){const s=r[i-1];e.pts=s.pts,e.dts=s.dts}else{t.dropped++;return}}t.samples.push(e)}e.debug.length&&J.log(e.pts+"/"+e.dts+":"+e.debug)}}class H1{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,t=this.bytesAvailable,r=e.byteLength-t,i=new Uint8Array(4),s=Math.min(4,t);if(s===0)throw new Error("no bytes available");i.set(e.subarray(r,r+s)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=s*8,this.bytesAvailable-=s}skipBits(e){let t;e=Math.min(e,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e>>3,e-=t<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let t=Math.min(this.bitsAvailable,e);const r=this.word>>>32-t;if(e>32&&J.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return t=e-t,t>0&&this.bitsAvailable?r<<t|this.readBits(t):r}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if(this.word&2147483648>>>e)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}skipScalingList(e){let t=8,r=8,i;for(let s=0;s<e;s++)r!==0&&(i=this.readEG(),r=(t+i+256)%256),t=r===0?t:r}readSPS(){let e=0,t=0,r=0,i=0,s,a,c;const u=this.readUByte.bind(this),d=this.readBits.bind(this),h=this.readUEG.bind(this),p=this.readBoolean.bind(this),g=this.skipBits.bind(this),x=this.skipEG.bind(this),v=this.skipUEG.bind(this),S=this.skipScalingList.bind(this);u();const T=u();if(d(5),g(3),u(),v(),T===100||T===110||T===122||T===244||T===44||T===83||T===86||T===118||T===128){const $=h();if($===3&&g(1),v(),v(),g(1),p())for(a=$!==3?8:12,c=0;c<a;c++)p()&&(c<6?S(16):S(64))}v();const _=h();if(_===0)h();else if(_===1)for(g(1),x(),x(),s=h(),c=0;c<s;c++)x();v(),g(1);const C=h(),k=h(),O=d(1);O===0&&g(1),g(1),p()&&(e=h(),t=h(),r=h(),i=h());let w=[1,1];if(p()&&p())switch(u()){case 1:w=[1,1];break;case 2:w=[12,11];break;case 3:w=[10,11];break;case 4:w=[16,11];break;case 5:w=[40,33];break;case 6:w=[24,11];break;case 7:w=[20,11];break;case 8:w=[32,11];break;case 9:w=[80,33];break;case 10:w=[18,11];break;case 11:w=[15,11];break;case 12:w=[64,33];break;case 13:w=[160,99];break;case 14:w=[4,3];break;case 15:w=[3,2];break;case 16:w=[2,1];break;case 255:{w=[u()<<8|u(),u()<<8|u()];break}}return{width:Math.ceil((C+1)*16-e*2-t*2),height:(2-O)*(k+1)*16-(O?2:4)*(r+i),pixelRatio:w}}readSliceType(){return this.readUByte(),this.readUEG(),this.readUEG()}}class aF extends oF{parseAVCPES(e,t,r,i,s){const a=this.parseAVCNALu(e,r.data);let c=this.VideoSample,u,d=!1;r.data=null,c&&a.length&&!e.audFound&&(this.pushAccessUnit(c,e),c=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts,"")),a.forEach(h=>{var p;switch(h.type){case 1:{let S=!1;u=!0;const T=h.data;if(d&&T.length>4){const _=new H1(T).readSliceType();(_===2||_===4||_===7||_===9)&&(S=!0)}if(S){var g;(g=c)!=null&&g.frame&&!c.key&&(this.pushAccessUnit(c,e),c=this.VideoSample=null)}c||(c=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts,"")),c.frame=!0,c.key=S;break}case 5:u=!0,(p=c)!=null&&p.frame&&!c.key&&(this.pushAccessUnit(c,e),c=this.VideoSample=null),c||(c=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts,"")),c.key=!0,c.frame=!0;break;case 6:{u=!0,tb(h.data,1,r.pts,t.samples);break}case 7:{var x,v;u=!0,d=!0;const S=h.data,_=new H1(S).readSPS();if(!e.sps||e.width!==_.width||e.height!==_.height||((x=e.pixelRatio)==null?void 0:x[0])!==_.pixelRatio[0]||((v=e.pixelRatio)==null?void 0:v[1])!==_.pixelRatio[1]){e.width=_.width,e.height=_.height,e.pixelRatio=_.pixelRatio,e.sps=[S],e.duration=s;const C=S.subarray(1,4);let k="avc1.";for(let O=0;O<3;O++){let w=C[O].toString(16);w.length<2&&(w="0"+w),k+=w}e.codec=k}break}case 8:u=!0,e.pps=[h.data];break;case 9:u=!0,e.audFound=!0,c&&this.pushAccessUnit(c,e),c=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts,"");break;case 12:u=!0;break;default:u=!1,c&&(c.debug+="unknown NAL "+h.type+" ");break}c&&u&&c.units.push(h)}),i&&c&&(this.pushAccessUnit(c,e),this.VideoSample=null)}parseAVCNALu(e,t){const r=t.byteLength;let i=e.naluState||0;const s=i,a=[];let c=0,u,d,h,p=-1,g=0;for(i===-1&&(p=0,g=t[0]&31,i=0,c=1);c<r;){if(u=t[c++],!i){i=u?0:1;continue}if(i===1){i=u?0:2;continue}if(!u)i=3;else if(u===1){if(d=c-i-1,p>=0){const x={data:t.subarray(p,d),type:g};a.push(x)}else{const x=this.getLastNalUnit(e.samples);x&&(s&&c<=4-s&&x.state&&(x.data=x.data.subarray(0,x.data.byteLength-s)),d>0&&(x.data=Oi(x.data,t.subarray(0,d)),x.state=0))}c<r?(h=t[c]&31,p=c,g=h,i=0):i=-1}else i=0}if(p>=0&&i>=0){const x={data:t.subarray(p,r),type:g,state:i};a.push(x)}if(a.length===0){const x=this.getLastNalUnit(e.samples);x&&(x.data=Oi(x.data,t))}return e.naluState=i,a}}class lF{constructor(e,t,r){this.keyData=void 0,this.decrypter=void 0,this.keyData=r,this.decrypter=new X0(t,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer)}decryptAacSample(e,t,r){const i=e[t].unit;if(i.length<=16)return;const s=i.subarray(16,i.length-i.length%16),a=s.buffer.slice(s.byteOffset,s.byteOffset+s.length);this.decryptBuffer(a).then(c=>{const u=new Uint8Array(c);i.set(u,16),this.decrypter.isSync()||this.decryptAacSamples(e,t+1,r)})}decryptAacSamples(e,t,r){for(;;t++){if(t>=e.length){r();return}if(!(e[t].unit.length<32)&&(this.decryptAacSample(e,t,r),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const t=Math.floor((e.length-48)/160)*16+16,r=new Int8Array(t);let i=0;for(let s=32;s<e.length-16;s+=160,i+=16)r.set(e.subarray(s,s+16),i);return r}getAvcDecryptedUnit(e,t){const r=new Uint8Array(t);let i=0;for(let s=32;s<e.length-16;s+=160,i+=16)e.set(r.subarray(i,i+16),s);return e}decryptAvcSample(e,t,r,i,s){const a=nb(s.data),c=this.getAvcEncryptedData(a);this.decryptBuffer(c.buffer).then(u=>{s.data=this.getAvcDecryptedUnit(a,u),this.decrypter.isSync()||this.decryptAvcSamples(e,t,r+1,i)})}decryptAvcSamples(e,t,r,i){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,r=0){if(t>=e.length){i();return}const s=e[t].units;for(;!(r>=s.length);r++){const a=s[r];if(!(a.data.length<=48||a.type!==1&&a.type!==5)&&(this.decryptAvcSample(e,t,r,i,a),!this.decrypter.isSync()))return}}}}const tr=188;class Xo{constructor(e,t,r){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=t,this.typeSupported=r,this.videoParser=new aF}static probe(e){const t=Xo.syncOffset(e);return t>0&&J.warn(`MPEG2-TS detected but first sync word found @ offset ${t}`),t!==-1}static syncOffset(e){const t=e.length;let r=Math.min(tr*5,t-tr)+1,i=0;for(;i<r;){let s=!1,a=-1,c=0;for(let u=i;u<t;u+=tr)if(e[u]===71&&(t-u===tr||e[u+tr]===71)){if(c++,a===-1&&(a=u,a!==0&&(r=Math.min(a+tr*99,e.length-tr)+1)),s||(s=Ug(e,u)===0),s&&c>1&&(a===0&&c>2||u+tr>r))return a}else{if(c)return-1;break}i++}return-1}static createTrack(e,t){return{container:e==="video"||e==="audio"?"video/mp2t":void 0,type:e,id:XT[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:e==="audio"?t:void 0}}resetInitSegment(e,t,r,i){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=Xo.createTrack("video"),this._audioTrack=Xo.createTrack("audio",i),this._id3Track=Xo.createTrack("id3"),this._txtTrack=Xo.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=r,this._duration=i}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:t,_id3Track:r}=this;e&&(e.pesData=null),t&&(t.pesData=null),r&&(r.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,t,r=!1,i=!1){r||(this.sampleAes=null);let s;const a=this._videoTrack,c=this._audioTrack,u=this._id3Track,d=this._txtTrack;let h=a.pid,p=a.pesData,g=c.pid,x=u.pid,v=c.pesData,S=u.pesData,T=null,_=this.pmtParsed,C=this._pmtId,k=e.length;if(this.remainderData&&(e=Oi(this.remainderData,e),k=e.length,this.remainderData=null),k<tr&&!i)return this.remainderData=e,{audioTrack:c,videoTrack:a,id3Track:u,textTrack:d};const O=Math.max(0,Xo.syncOffset(e));k-=(k-O)%tr,k<e.byteLength&&!i&&(this.remainderData=new Uint8Array(e.buffer,k,e.buffer.byteLength-k));let w=0;for(let M=O;M<k;M+=tr)if(e[M]===71){const U=!!(e[M+1]&64),W=Ug(e,M),R=(e[M+3]&48)>>4;let G;if(R>1){if(G=M+5+e[M+4],G===M+tr)continue}else G=M+4;switch(W){case h:U&&(p&&(s=jl(p))&&this.videoParser.parseAVCPES(a,d,s,!1,this._duration),p={data:[],size:0}),p&&(p.data.push(e.subarray(G,M+tr)),p.size+=M+tr-G);break;case g:if(U){if(v&&(s=jl(v)))switch(c.segmentCodec){case"aac":this.parseAACPES(c,s);break;case"mp3":this.parseMPEGPES(c,s);break;case"ac3":this.parseAC3PES(c,s);break}v={data:[],size:0}}v&&(v.data.push(e.subarray(G,M+tr)),v.size+=M+tr-G);break;case x:U&&(S&&(s=jl(S))&&this.parseID3PES(u,s),S={data:[],size:0}),S&&(S.data.push(e.subarray(G,M+tr)),S.size+=M+tr-G);break;case 0:U&&(G+=e[G]+1),C=this._pmtId=cF(e,G);break;case C:{U&&(G+=e[G]+1);const fe=uF(e,G,this.typeSupported,r,this.observer);h=fe.videoPid,h>0&&(a.pid=h,a.segmentCodec=fe.segmentVideoCodec),g=fe.audioPid,g>0&&(c.pid=g,c.segmentCodec=fe.segmentAudioCodec),x=fe.id3Pid,x>0&&(u.pid=x),T!==null&&!_&&(J.warn(`MPEG-TS PMT found at ${M} after unknown PID '${T}'. Backtracking to sync byte @${O} to parse all TS packets.`),T=null,M=O-188),_=this.pmtParsed=!0;break}case 17:case 8191:break;default:T=W;break}}else w++;w>0&&ah(this.observer,new Error(`Found ${w} TS packet/s that do not start with 0x47`)),a.pesData=p,c.pesData=v,u.pesData=S;const $={audioTrack:c,videoTrack:a,id3Track:u,textTrack:d};return i&&this.extractRemainingSamples($),$}flush(){const{remainderData:e}=this;this.remainderData=null;let t;return e?t=this.demux(e,-1,!1,!0):t={videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t}extractRemainingSamples(e){const{audioTrack:t,videoTrack:r,id3Track:i,textTrack:s}=e,a=r.pesData,c=t.pesData,u=i.pesData;let d;if(a&&(d=jl(a))?(this.videoParser.parseAVCPES(r,s,d,!0,this._duration),r.pesData=null):r.pesData=a,c&&(d=jl(c))){switch(t.segmentCodec){case"aac":this.parseAACPES(t,d);break;case"mp3":this.parseMPEGPES(t,d);break;case"ac3":this.parseAC3PES(t,d);break}t.pesData=null}else c!=null&&c.size&&J.log("last AAC PES packet truncated,might overlap between fragments"),t.pesData=c;u&&(d=jl(u))?(this.parseID3PES(i,d),i.pesData=null):i.pesData=u}demuxSampleAes(e,t,r){const i=this.demux(e,r,!0,!this.config.progressive),s=this.sampleAes=new lF(this.observer,this.config,t);return this.decrypt(i,s)}decrypt(e,t){return new Promise(r=>{const{audioTrack:i,videoTrack:s}=e;i.samples&&i.segmentCodec==="aac"?t.decryptAacSamples(i.samples,0,()=>{s.samples?t.decryptAvcSamples(s.samples,0,0,()=>{r(e)}):r(e)}):s.samples&&t.decryptAvcSamples(s.samples,0,0,()=>{r(e)})})}destroy(){this._duration=0}parseAACPES(e,t){let r=0;const i=this.aacOverFlow;let s=t.data;if(i){this.aacOverFlow=null;const p=i.missing,g=i.sample.unit.byteLength;if(p===-1)s=Oi(i.sample.unit,s);else{const x=g-p;i.sample.unit.set(s.subarray(0,p),x),e.samples.push(i.sample),r=i.missing}}let a,c;for(a=r,c=s.length;a<c-1&&!oh(s,a);a++);if(a!==r){let p;const g=a<c-1;if(g?p=`AAC PES did not start with ADTS header,offset:${a}`:p="No ADTS header found in AAC PES",ah(this.observer,new Error(p),g),!g)return}yb(e,this.observer,s,a,this.audioCodec);let u;if(t.pts!==void 0)u=t.pts;else if(i){const p=vb(e.samplerate);u=i.sample.pts+p}else{J.warn("[tsdemuxer]: AAC PES unknown PTS");return}let d=0,h;for(;a<c;)if(h=xb(e,s,a,u,d),a+=h.length,h.missing){this.aacOverFlow=h;break}else for(d++;a<c-1&&!oh(s,a);a++);}parseMPEGPES(e,t){const r=t.data,i=r.length;let s=0,a=0;const c=t.pts;if(c===void 0){J.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;a<i;)if(Tb(r,a)){const u=Sb(e,r,a,c,s);if(u)a+=u.length,s++;else break}else a++}parseAC3PES(e,t){{const r=t.data,i=t.pts;if(i===void 0){J.warn("[tsdemuxer]: AC3 PES unknown PTS");return}const s=r.length;let a=0,c=0,u;for(;c<s&&(u=_b(e,r,c,i,a++))>0;)c+=u}}parseID3PES(e,t){if(t.pts===void 0){J.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const r=$n({},t,{type:this._videoTrack?ts.emsg:ts.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(r)}}function Ug(n,e){return((n[e+1]&31)<<8)+n[e+2]}function cF(n,e){return(n[e+10]&31)<<8|n[e+11]}function uF(n,e,t,r,i){const s={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},a=(n[e+1]&15)<<8|n[e+2],c=e+3+a-4,u=(n[e+10]&15)<<8|n[e+11];for(e+=12+u;e<c;){const d=Ug(n,e),h=(n[e+3]&15)<<8|n[e+4];switch(n[e]){case 207:if(!r){Wm("ADTS AAC");break}case 15:s.audioPid===-1&&(s.audioPid=d);break;case 21:s.id3Pid===-1&&(s.id3Pid=d);break;case 219:if(!r){Wm("H.264");break}case 27:s.videoPid===-1&&(s.videoPid=d,s.segmentVideoCodec="avc");break;case 3:case 4:!t.mpeg&&!t.mp3?J.log("MPEG audio found, not supported in this browser"):s.audioPid===-1&&(s.audioPid=d,s.segmentAudioCodec="mp3");break;case 193:if(!r){Wm("AC-3");break}case 129:t.ac3?s.audioPid===-1&&(s.audioPid=d,s.segmentAudioCodec="ac3"):J.log("AC-3 audio found, not supported in this browser");break;case 6:if(s.audioPid===-1&&h>0){let p=e+5,g=h;for(;g>2;){switch(n[p]){case 106:t.ac3!==!0?J.log("AC-3 audio found, not supported in this browser for now"):(s.audioPid=d,s.segmentAudioCodec="ac3");break}const v=n[p+1]+2;p+=v,g-=v}}break;case 194:case 135:return ah(i,new Error("Unsupported EC-3 in M2TS found")),s;case 36:return ah(i,new Error("Unsupported HEVC in M2TS found")),s}e+=h+5}return s}function ah(n,e,t){J.warn(`parsing error: ${e.message}`),n.emit(P.ERROR,P.ERROR,{type:ft.MEDIA_ERROR,details:le.FRAG_PARSING_ERROR,fatal:!1,levelRetry:t,error:e,reason:e.message})}function Wm(n){J.log(`${n} with AES-128-CBC encryption found in unencrypted stream`)}function jl(n){let e=0,t,r,i,s,a;const c=n.data;if(!n||n.size===0)return null;for(;c[0].length<19&&c.length>1;)c[0]=Oi(c[0],c[1]),c.splice(1,1);if(t=c[0],(t[0]<<16)+(t[1]<<8)+t[2]===1){if(r=(t[4]<<8)+t[5],r&&r>n.size-6)return null;const d=t[7];d&192&&(s=(t[9]&14)*536870912+(t[10]&255)*4194304+(t[11]&254)*16384+(t[12]&255)*128+(t[13]&254)/2,d&64?(a=(t[14]&14)*536870912+(t[15]&255)*4194304+(t[16]&254)*16384+(t[17]&255)*128+(t[18]&254)/2,s-a>60*9e4&&(J.warn(`${Math.round((s-a)/9e4)}s delta between PTS and DTS, align them`),s=a)):a=s),i=t[8];let h=i+9;if(n.size<=h)return null;n.size-=h;const p=new Uint8Array(n.size);for(let g=0,x=c.length;g<x;g++){t=c[g];let v=t.byteLength;if(h)if(h>v){h-=v;continue}else t=t.subarray(h),v-=h,h=0;p.set(t,e),e+=v}return r&&(r-=i+3),{data:p,pts:s,dts:a,len:r}}return null}class dF extends J0{resetInitSegment(e,t,r,i){super.resetInitSegment(e,t,r,i),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=yu(e,0);let r=(t==null?void 0:t.length)||0;if(t&&e[r]===11&&e[r+1]===119&&K0(t)!==void 0&&wb(e,r)<=16)return!1;for(let i=e.length;r<i;r++)if(bb(e,r))return J.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,t){return tF(e,t)}appendFrame(e,t,r){if(this.basePTS!==null)return Sb(e,t,r,this.basePTS,this.frameIndex)}}class G1{static getSilentFrame(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const Wo=Math.pow(2,32)-1;class te{static init(){te.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let e;for(e in te.types)te.types.hasOwnProperty(e)&&(te.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);te.HDLR_TYPES={video:t,audio:r};const i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),s=new Uint8Array([0,0,0,0,0,0,0,0]);te.STTS=te.STSC=te.STCO=s,te.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),te.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),te.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),te.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const a=new Uint8Array([105,115,111,109]),c=new Uint8Array([97,118,99,49]),u=new Uint8Array([0,0,0,1]);te.FTYP=te.box(te.types.ftyp,a,u,a,c),te.DINF=te.box(te.types.dinf,te.box(te.types.dref,i))}static box(e,...t){let r=8,i=t.length;const s=i;for(;i--;)r+=t[i].byteLength;const a=new Uint8Array(r);for(a[0]=r>>24&255,a[1]=r>>16&255,a[2]=r>>8&255,a[3]=r&255,a.set(e,4),i=0,r=8;i<s;i++)a.set(t[i],r),r+=t[i].byteLength;return a}static hdlr(e){return te.box(te.types.hdlr,te.HDLR_TYPES[e])}static mdat(e){return te.box(te.types.mdat,e)}static mdhd(e,t){t*=e;const r=Math.floor(t/(Wo+1)),i=Math.floor(t%(Wo+1));return te.box(te.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,r>>24,r>>16&255,r>>8&255,r&255,i>>24,i>>16&255,i>>8&255,i&255,85,196,0,0]))}static mdia(e){return te.box(te.types.mdia,te.mdhd(e.timescale,e.duration),te.hdlr(e.type),te.minf(e))}static mfhd(e){return te.box(te.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}static minf(e){return e.type==="audio"?te.box(te.types.minf,te.box(te.types.smhd,te.SMHD),te.DINF,te.stbl(e)):te.box(te.types.minf,te.box(te.types.vmhd,te.VMHD),te.DINF,te.stbl(e))}static moof(e,t,r){return te.box(te.types.moof,te.mfhd(e),te.traf(r,t))}static moov(e){let t=e.length;const r=[];for(;t--;)r[t]=te.trak(e[t]);return te.box.apply(null,[te.types.moov,te.mvhd(e[0].timescale,e[0].duration)].concat(r).concat(te.mvex(e)))}static mvex(e){let t=e.length;const r=[];for(;t--;)r[t]=te.trex(e[t]);return te.box.apply(null,[te.types.mvex,...r])}static mvhd(e,t){t*=e;const r=Math.floor(t/(Wo+1)),i=Math.floor(t%(Wo+1)),s=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,r>>24,r>>16&255,r>>8&255,r&255,i>>24,i>>16&255,i>>8&255,i&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return te.box(te.types.mvhd,s)}static sdtp(e){const t=e.samples||[],r=new Uint8Array(4+t.length);let i,s;for(i=0;i<t.length;i++)s=t[i].flags,r[i+4]=s.dependsOn<<4|s.isDependedOn<<2|s.hasRedundancy;return te.box(te.types.sdtp,r)}static stbl(e){return te.box(te.types.stbl,te.stsd(e),te.box(te.types.stts,te.STTS),te.box(te.types.stsc,te.STSC),te.box(te.types.stsz,te.STSZ),te.box(te.types.stco,te.STCO))}static avc1(e){let t=[],r=[],i,s,a;for(i=0;i<e.sps.length;i++)s=e.sps[i],a=s.byteLength,t.push(a>>>8&255),t.push(a&255),t=t.concat(Array.prototype.slice.call(s));for(i=0;i<e.pps.length;i++)s=e.pps[i],a=s.byteLength,r.push(a>>>8&255),r.push(a&255),r=r.concat(Array.prototype.slice.call(s));const c=te.box(te.types.avcC,new Uint8Array([1,t[3],t[4],t[5],255,224|e.sps.length].concat(t).concat([e.pps.length]).concat(r))),u=e.width,d=e.height,h=e.pixelRatio[0],p=e.pixelRatio[1];return te.box(te.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,u>>8&255,u&255,d>>8&255,d&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),c,te.box(te.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),te.box(te.types.pasp,new Uint8Array([h>>24,h>>16&255,h>>8&255,h&255,p>>24,p>>16&255,p>>8&255,p&255])))}static esds(e){const t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))}static audioStsd(e){const t=e.samplerate;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,t&255,0,0])}static mp4a(e){return te.box(te.types.mp4a,te.audioStsd(e),te.box(te.types.esds,te.esds(e)))}static mp3(e){return te.box(te.types[".mp3"],te.audioStsd(e))}static ac3(e){return te.box(te.types["ac-3"],te.audioStsd(e),te.box(te.types.dac3,e.config))}static stsd(e){return e.type==="audio"?e.segmentCodec==="mp3"&&e.codec==="mp3"?te.box(te.types.stsd,te.STSD,te.mp3(e)):e.segmentCodec==="ac3"?te.box(te.types.stsd,te.STSD,te.ac3(e)):te.box(te.types.stsd,te.STSD,te.mp4a(e)):te.box(te.types.stsd,te.STSD,te.avc1(e))}static tkhd(e){const t=e.id,r=e.duration*e.timescale,i=e.width,s=e.height,a=Math.floor(r/(Wo+1)),c=Math.floor(r%(Wo+1));return te.box(te.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,t&255,0,0,0,0,a>>24,a>>16&255,a>>8&255,a&255,c>>24,c>>16&255,c>>8&255,c&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,i&255,0,0,s>>8&255,s&255,0,0]))}static traf(e,t){const r=te.sdtp(e),i=e.id,s=Math.floor(t/(Wo+1)),a=Math.floor(t%(Wo+1));return te.box(te.types.traf,te.box(te.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,i&255])),te.box(te.types.tfdt,new Uint8Array([1,0,0,0,s>>24,s>>16&255,s>>8&255,s&255,a>>24,a>>16&255,a>>8&255,a&255])),te.trun(e,r.length+16+20+8+16+8+8),r)}static trak(e){return e.duration=e.duration||4294967295,te.box(te.types.trak,te.tkhd(e),te.mdia(e))}static trex(e){const t=e.id;return te.box(te.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,t){const r=e.samples||[],i=r.length,s=12+16*i,a=new Uint8Array(s);let c,u,d,h,p,g;for(t+=8+s,a.set([e.type==="video"?1:0,0,15,1,i>>>24&255,i>>>16&255,i>>>8&255,i&255,t>>>24&255,t>>>16&255,t>>>8&255,t&255],0),c=0;c<i;c++)u=r[c],d=u.duration,h=u.size,p=u.flags,g=u.cts,a.set([d>>>24&255,d>>>16&255,d>>>8&255,d&255,h>>>24&255,h>>>16&255,h>>>8&255,h&255,p.isLeading<<2|p.dependsOn,p.isDependedOn<<6|p.hasRedundancy<<4|p.paddingValue<<1|p.isNonSync,p.degradPrio&61440,p.degradPrio&15,g>>>24&255,g>>>16&255,g>>>8&255,g&255],12+16*c);return te.box(te.types.trun,a)}static initSegment(e){te.types||te.init();const t=te.moov(e);return Oi(te.FTYP,t)}}te.types=void 0;te.HDLR_TYPES=void 0;te.STTS=void 0;te.STSC=void 0;te.STCO=void 0;te.STSZ=void 0;te.VMHD=void 0;te.SMHD=void 0;te.STSD=void 0;te.FTYP=void 0;te.DINF=void 0;const Lb=9e4;function ty(n,e,t=1,r=!1){const i=n*e*t;return r?Math.round(i):i}function fF(n,e,t=1,r=!1){return ty(n,e,1/t,r)}function eu(n,e=!1){return ty(n,1e3,1/Lb,e)}function hF(n,e=1){return ty(n,Lb,1/e)}const pF=10*1e3,V1=1024,mF=1152,gF=1536;let Hl=null,Ym=null;class Df{constructor(e,t,r,i=""){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=t,this.typeSupported=r,this.ISGenerated=!1,Hl===null){const a=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Hl=a?parseInt(a[1]):0}if(Ym===null){const s=navigator.userAgent.match(/Safari\/(\d+)/i);Ym=s?parseInt(s[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){J.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e}resetNextTimestamp(){J.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){J.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let t=!1;const r=e[0].pts,i=e.reduce((s,a)=>{let c=a.pts,u=c-s;return u<-4294967296&&(t=!0,c=Pi(c,r),u=c-s),u>0?s:c},r);return t&&J.debug("PTS rollover detected"),i}remux(e,t,r,i,s,a,c,u){let d,h,p,g,x,v,S=s,T=s;const _=e.pid>-1,C=t.pid>-1,k=t.samples.length,O=e.samples.length>0,w=c&&k>0||k>1;if((!_||O)&&(!C||w)||this.ISGenerated||c){if(this.ISGenerated){var M,U,W,R;const xe=this.videoTrackConfig;xe&&(t.width!==xe.width||t.height!==xe.height||((M=t.pixelRatio)==null?void 0:M[0])!==((U=xe.pixelRatio)==null?void 0:U[0])||((W=t.pixelRatio)==null?void 0:W[1])!==((R=xe.pixelRatio)==null?void 0:R[1]))&&this.resetInitSegment()}else p=this.generateIS(e,t,s,a);const G=this.isVideoContiguous;let fe=-1,ae;if(w&&(fe=yF(t.samples),!G&&this.config.forceKeyFrameOnDiscontinuity))if(v=!0,fe>0){J.warn(`[mp4-remuxer]: Dropped ${fe} out of ${k} video samples due to a missing keyframe`);const xe=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(fe),t.dropped+=fe,T+=(t.samples[0].pts-xe)/t.inputTimeScale,ae=T}else fe===-1&&(J.warn(`[mp4-remuxer]: No keyframe found out of ${k} video samples`),v=!1);if(this.ISGenerated){if(O&&w){const xe=this.getVideoStartPts(t.samples),Ee=(Pi(e.samples[0].pts,xe)-xe)/t.inputTimeScale;S+=Math.max(0,Ee),T+=Math.max(0,-Ee)}if(O){if(e.samplerate||(J.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),p=this.generateIS(e,t,s,a)),h=this.remuxAudio(e,S,this.isAudioContiguous,a,C||w||u===at.AUDIO?T:void 0),w){const xe=h?h.endPTS-h.startPTS:0;t.inputTimeScale||(J.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),p=this.generateIS(e,t,s,a)),d=this.remuxVideo(t,T,G,xe)}}else w&&(d=this.remuxVideo(t,T,G,0));d&&(d.firstKeyFrame=fe,d.independent=fe!==-1,d.firstKeyFramePTS=ae)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(r.samples.length&&(x=Cb(r,s,this._initPTS,this._initDTS)),i.samples.length&&(g=Rb(i,s,this._initPTS))),{audio:h,video:d,initSegment:p,independent:v,text:g,id3:x}}generateIS(e,t,r,i){const s=e.samples,a=t.samples,c=this.typeSupported,u={},d=this._initPTS;let h=!d||i,p="audio/mp4",g,x,v;if(h&&(g=x=1/0),e.config&&s.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":c.mpeg?(p="audio/mpeg",e.codec=""):c.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3";break}u.audio={id:"audio",container:p,codec:e.codec,initSegment:e.segmentCodec==="mp3"&&c.mpeg?new Uint8Array(0):te.initSegment([e]),metadata:{channelCount:e.channelCount}},h&&(v=e.inputTimeScale,!d||v!==d.timescale?g=x=s[0].pts-Math.round(v*r):h=!1)}if(t.sps&&t.pps&&a.length){if(t.timescale=t.inputTimeScale,u.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:te.initSegment([t]),metadata:{width:t.width,height:t.height}},h)if(v=t.inputTimeScale,!d||v!==d.timescale){const S=this.getVideoStartPts(a),T=Math.round(v*r);x=Math.min(x,Pi(a[0].dts,S)-T),g=Math.min(g,S-T)}else h=!1;this.videoTrackConfig={width:t.width,height:t.height,pixelRatio:t.pixelRatio}}if(Object.keys(u).length)return this.ISGenerated=!0,h?(this._initPTS={baseTime:g,timescale:v},this._initDTS={baseTime:x,timescale:v}):g=v=void 0,{tracks:u,initPTS:g,timescale:v}}remuxVideo(e,t,r,i){const s=e.inputTimeScale,a=e.samples,c=[],u=a.length,d=this._initPTS;let h=this.nextAvcDts,p=8,g=this.videoSampleDuration,x,v,S=Number.POSITIVE_INFINITY,T=Number.NEGATIVE_INFINITY,_=!1;if(!r||h===null){const se=t*s,B=a[0].pts-Pi(a[0].dts,a[0].pts);Hl&&h!==null&&Math.abs(se-B-h)<15e3?r=!0:h=se-B}const C=d.baseTime*s/d.timescale;for(let se=0;se<u;se++){const B=a[se];B.pts=Pi(B.pts-C,h),B.dts=Pi(B.dts-C,h),B.dts<a[se>0?se-1:se].dts&&(_=!0)}_&&a.sort(function(se,B){const H=se.dts-B.dts,Q=se.pts-B.pts;return H||Q}),x=a[0].dts,v=a[a.length-1].dts;const k=v-x,O=k?Math.round(k/(u-1)):g||e.inputTimeScale/30;if(r){const se=x-h,B=se>O,H=se<-1;if((B||H)&&(B?J.warn(`AVC: ${eu(se,!0)} ms (${se}dts) hole between fragments detected at ${t.toFixed(3)}`):J.warn(`AVC: ${eu(-se,!0)} ms (${se}dts) overlapping between fragments detected at ${t.toFixed(3)}`),!H||h>=a[0].pts||Hl)){x=h;const Q=a[0].pts-se;if(B)a[0].dts=x,a[0].pts=Q;else for(let we=0;we<a.length&&!(a[we].dts>Q);we++)a[we].dts-=se,a[we].pts-=se;J.log(`Video: Initial PTS/DTS adjusted: ${eu(Q,!0)}/${eu(x,!0)}, delta: ${eu(se,!0)} ms`)}}x=Math.max(0,x);let w=0,$=0,M=x;for(let se=0;se<u;se++){const B=a[se],H=B.units,Q=H.length;let we=0;for(let Ae=0;Ae<Q;Ae++)we+=H[Ae].data.length;$+=we,w+=Q,B.length=we,B.dts<M?(B.dts=M,M+=O/4|0||1):M=B.dts,S=Math.min(B.pts,S),T=Math.max(B.pts,T)}v=a[u-1].dts;const U=$+4*w+8;let W;try{W=new Uint8Array(U)}catch(se){this.observer.emit(P.ERROR,P.ERROR,{type:ft.MUX_ERROR,details:le.REMUX_ALLOC_ERROR,fatal:!1,error:se,bytes:U,reason:`fail allocating video mdat ${U}`});return}const R=new DataView(W.buffer);R.setUint32(0,U),W.set(te.types.mdat,4);let G=!1,fe=Number.POSITIVE_INFINITY,ae=Number.POSITIVE_INFINITY,xe=Number.NEGATIVE_INFINITY,ye=Number.NEGATIVE_INFINITY;for(let se=0;se<u;se++){const B=a[se],H=B.units;let Q=0;for(let Oe=0,Me=H.length;Oe<Me;Oe++){const ct=H[Oe],Ce=ct.data,nt=ct.data.byteLength;R.setUint32(p,nt),p+=4,W.set(Ce,p),p+=nt,Q+=4+nt}let we;if(se<u-1)g=a[se+1].dts-B.dts,we=a[se+1].pts-B.pts;else{const Oe=this.config,Me=se>0?B.dts-a[se-1].dts:O;if(we=se>0?B.pts-a[se-1].pts:O,Oe.stretchShortVideoTrack&&this.nextAudioPts!==null){const ct=Math.floor(Oe.maxBufferHole*s),Ce=(i?S+i*s:this.nextAudioPts)-B.pts;Ce>ct?(g=Ce-Me,g<0?g=Me:G=!0,J.log(`[mp4-remuxer]: It is approximately ${Ce/90} ms to the next segment; using duration ${g/90} ms for the last video frame.`)):g=Me}else g=Me}const Ae=Math.round(B.pts-B.dts);fe=Math.min(fe,g),xe=Math.max(xe,g),ae=Math.min(ae,we),ye=Math.max(ye,we),c.push(new z1(B.key,g,Q,Ae))}if(c.length){if(Hl){if(Hl<70){const se=c[0].flags;se.dependsOn=2,se.isNonSync=0}}else if(Ym&&ye-ae<xe-fe&&O/xe<.025&&c[0].cts===0){J.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let se=x;for(let B=0,H=c.length;B<H;B++){const Q=se+c[B].duration,we=se+c[B].cts;if(B<H-1){const Ae=Q+c[B+1].cts;c[B].duration=Ae-we}else c[B].duration=B?c[B-1].duration:O;c[B].cts=0,se=Q}}}g=G||!g?O:g,this.nextAvcDts=h=v+g,this.videoSampleDuration=g,this.isVideoContiguous=!0;const ie={data1:te.moof(e.sequenceNumber++,x,$n({},e,{samples:c})),data2:W,startPTS:S/s,endPTS:(T+g)/s,startDTS:x/s,endDTS:h/s,type:"video",hasAudio:!1,hasVideo:!0,nb:c.length,dropped:e.dropped};return e.samples=[],e.dropped=0,ie}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return mF;case"ac3":return gF;default:return V1}}remuxAudio(e,t,r,i,s){const a=e.inputTimeScale,c=e.samplerate?e.samplerate:a,u=a/c,d=this.getSamplesPerFrame(e),h=d*u,p=this._initPTS,g=e.segmentCodec==="mp3"&&this.typeSupported.mpeg,x=[],v=s!==void 0;let S=e.samples,T=g?0:8,_=this.nextAudioPts||-1;const C=t*a,k=p.baseTime*a/p.timescale;if(this.isAudioContiguous=r=r||S.length&&_>0&&(i&&Math.abs(C-_)<9e3||Math.abs(Pi(S[0].pts-k,C)-_)<20*h),S.forEach(function(Ee){Ee.pts=Pi(Ee.pts-k,C)}),!r||_<0){if(S=S.filter(Ee=>Ee.pts>=0),!S.length)return;s===0?_=0:i&&!v?_=Math.max(0,C):_=S[0].pts}if(e.segmentCodec==="aac"){const Ee=this.config.maxAudioFramesDrift;for(let Pe=0,ie=_;Pe<S.length;Pe++){const se=S[Pe],B=se.pts,H=B-ie,Q=Math.abs(1e3*H/a);if(H<=-Ee*h&&v)Pe===0&&(J.warn(`Audio frame @ ${(B/a).toFixed(3)}s overlaps nextAudioPts by ${Math.round(1e3*H/a)} ms.`),this.nextAudioPts=_=ie=B);else if(H>=Ee*h&&Q<pF&&v){let we=Math.round(H/h);ie=B-we*h,ie<0&&(we--,ie+=h),Pe===0&&(this.nextAudioPts=_=ie),J.warn(`[mp4-remuxer]: Injecting ${we} audio frame @ ${(ie/a).toFixed(3)}s due to ${Math.round(1e3*H/a)} ms gap.`);for(let Ae=0;Ae<we;Ae++){const Oe=Math.max(ie,0);let Me=G1.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);Me||(J.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),Me=se.unit.subarray()),S.splice(Pe,0,{unit:Me,pts:Oe}),ie+=h,Pe++}}se.pts=ie,ie+=h}}let O=null,w=null,$,M=0,U=S.length;for(;U--;)M+=S[U].unit.byteLength;for(let Ee=0,Pe=S.length;Ee<Pe;Ee++){const ie=S[Ee],se=ie.unit;let B=ie.pts;if(w!==null){const Q=x[Ee-1];Q.duration=Math.round((B-w)/u)}else if(r&&e.segmentCodec==="aac"&&(B=_),O=B,M>0){M+=T;try{$=new Uint8Array(M)}catch(Q){this.observer.emit(P.ERROR,P.ERROR,{type:ft.MUX_ERROR,details:le.REMUX_ALLOC_ERROR,fatal:!1,error:Q,bytes:M,reason:`fail allocating audio mdat ${M}`});return}g||(new DataView($.buffer).setUint32(0,M),$.set(te.types.mdat,4))}else return;$.set(se,T);const H=se.byteLength;T+=H,x.push(new z1(!0,d,H,0)),w=B}const W=x.length;if(!W)return;const R=x[x.length-1];this.nextAudioPts=_=w+u*R.duration;const G=g?new Uint8Array(0):te.moof(e.sequenceNumber++,O/u,$n({},e,{samples:x}));e.samples=[];const fe=O/a,ae=_/a,ye={data1:G,data2:$,startPTS:fe,endPTS:ae,startDTS:fe,endDTS:ae,type:"audio",hasAudio:!0,hasVideo:!1,nb:W};return this.isAudioContiguous=!0,ye}remuxEmptyAudio(e,t,r,i){const s=e.inputTimeScale,a=e.samplerate?e.samplerate:s,c=s/a,u=this.nextAudioPts,d=this._initDTS,h=d.baseTime*9e4/d.timescale,p=(u!==null?u:i.startDTS*s)+h,g=i.endDTS*s+h,x=c*V1,v=Math.ceil((g-p)/x),S=G1.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(J.warn("[mp4-remuxer]: remux empty Audio"),!S){J.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec");return}const T=[];for(let _=0;_<v;_++){const C=p+_*x;T.push({unit:S,pts:C,dts:C})}return e.samples=T,this.remuxAudio(e,t,r,!1)}}function Pi(n,e){let t;if(e===null)return n;for(e<n?t=-8589934592:t=8589934592;Math.abs(n-e)>4294967296;)n+=t;return n}function yF(n){for(let e=0;e<n.length;e++)if(n[e].key)return e;return-1}function Cb(n,e,t,r){const i=n.samples.length;if(!i)return;const s=n.inputTimeScale;for(let c=0;c<i;c++){const u=n.samples[c];u.pts=Pi(u.pts-t.baseTime*s/t.timescale,e*s)/s,u.dts=Pi(u.dts-r.baseTime*s/r.timescale,e*s)/s}const a=n.samples;return n.samples=[],{samples:a}}function Rb(n,e,t){const r=n.samples.length;if(!r)return;const i=n.inputTimeScale;for(let a=0;a<r;a++){const c=n.samples[a];c.pts=Pi(c.pts-t.baseTime*i/t.timescale,e*i)/i}n.samples.sort((a,c)=>a.pts-c.pts);const s=n.samples;return n.samples=[],{samples:s}}class z1{constructor(e,t,r,i){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=t,this.size=r,this.cts=i,this.flags={isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:e?2:1,isNonSync:e?0:1}}}class vF{constructor(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null}destroy(){}resetTimeStamp(e){this.initPTS=e,this.lastEndTime=null}resetNextTimestamp(){this.lastEndTime=null}resetInitSegment(e,t,r,i){this.audioCodec=t,this.videoCodec=r,this.generateInitSegment(wN(e,i)),this.emitInitSegment=!0}generateInitSegment(e){let{audioCodec:t,videoCodec:r}=this;if(!(e!=null&&e.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const i=this.initData=ZT(e);i.audio&&(t=K1(i.audio,rn.AUDIO)),i.video&&(r=K1(i.video,rn.VIDEO));const s={};i.audio&&i.video?s.audiovideo={container:"video/mp4",codec:t+","+r,initSegment:e,id:"main"}:i.audio?s.audio={container:"audio/mp4",codec:t,initSegment:e,id:"audio"}:i.video?s.video={container:"video/mp4",codec:r,initSegment:e,id:"main"}:J.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=s}remux(e,t,r,i,s,a){var c,u;let{initPTS:d,lastEndTime:h}=this;const p={audio:void 0,video:void 0,text:i,id3:r,initSegment:void 0};Ye(h)||(h=this.lastEndTime=s||0);const g=t.samples;if(!(g!=null&&g.length))return p;const x={initPTS:void 0,timescale:1};let v=this.initData;if((c=v)!=null&&c.length||(this.generateInitSegment(g),v=this.initData),!((u=v)!=null&&u.length))return J.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),p;this.emitInitSegment&&(x.tracks=this.initTracks,this.emitInitSegment=!1);const S=LN(g,v),T=_N(v,g),_=T===null?s:T;(xF(d,_,s,S)||x.timescale!==d.timescale&&a)&&(x.initPTS=_-s,d&&d.timescale===1&&J.warn(`Adjusting initPTS by ${x.initPTS-d.baseTime}`),this.initPTS=d={baseTime:x.initPTS,timescale:1});const C=e?_-d.baseTime/d.timescale:h,k=C+S;RN(v,g,d.baseTime/d.timescale),S>0?this.lastEndTime=k:(J.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const O=!!v.audio,w=!!v.video;let $="";O&&($+="audio"),w&&($+="video");const M={data1:g,startPTS:C,startDTS:C,endPTS:k,endDTS:k,type:$,hasAudio:O,hasVideo:w,nb:1,dropped:0};return p.audio=M.type==="audio"?M:void 0,p.video=M.type!=="audio"?M:void 0,p.initSegment=x,p.id3=Cb(r,s,d,d),i.samples.length&&(p.text=Rb(i,s,d)),p}}function xF(n,e,t,r){if(n===null)return!0;const i=Math.max(r,1),s=e-n.baseTime/n.timescale;return Math.abs(s-t)>i}function K1(n,e){const t=n==null?void 0:n.codec;if(t&&t.length>4)return t;if(e===rn.AUDIO){if(t==="ec-3"||t==="ac-3"||t==="alac")return t;if(t==="fLaC"||t==="Opus")return eh(t,!1);const r="mp4a.40.5";return J.info(`Parsed audio codec "${t}" or audio object type not handled. Using "${r}"`),r}return J.warn(`Unhandled video codec "${t}"`),t==="hvc1"||t==="hev1"?"hvc1.1.6.L120.90":t==="av01"?"av01.0.04M.08":"avc1.42e01e"}let ho;try{ho=self.performance.now.bind(self.performance)}catch{J.debug("Unable to use Performance API on this environment"),ho=Zl==null?void 0:Zl.Date.now}const Of=[{demux:iF,remux:vF},{demux:Xo,remux:Df},{demux:nF,remux:Df},{demux:dF,remux:Df}];Of.splice(2,0,{demux:sF,remux:Df});class W1{constructor(e,t,r,i,s){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=r,this.vendor=i,this.id=s}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,t,r,i){const s=r.transmuxing;s.executeStart=ho();let a=new Uint8Array(e);const{currentTransmuxState:c,transmuxConfig:u}=this;i&&(this.currentTransmuxState=i);const{contiguous:d,discontinuity:h,trackSwitch:p,accurateTimeOffset:g,timeOffset:x,initSegmentChange:v}=i||c,{audioCodec:S,videoCodec:T,defaultInitPts:_,duration:C,initSegmentData:k}=u,O=SF(a,t);if(O&&O.method==="AES-128"){const U=this.getDecrypter();if(U.isSync()){let W=U.softwareDecrypt(a,O.key.buffer,O.iv.buffer);if(r.part>-1&&(W=U.flush()),!W)return s.executeEnd=ho(),qm(r);a=new Uint8Array(W)}else return this.decryptionPromise=U.webCryptoDecrypt(a,O.key.buffer,O.iv.buffer).then(W=>{const R=this.push(W,null,r);return this.decryptionPromise=null,R}),this.decryptionPromise}const w=this.needsProbing(h,p);if(w){const U=this.configureTransmuxer(a);if(U)return J.warn(`[transmuxer] ${U.message}`),this.observer.emit(P.ERROR,P.ERROR,{type:ft.MEDIA_ERROR,details:le.FRAG_PARSING_ERROR,fatal:!1,error:U,reason:U.message}),s.executeEnd=ho(),qm(r)}(h||p||v||w)&&this.resetInitSegment(k,S,T,C,t),(h||v||w)&&this.resetInitialTimestamp(_),d||this.resetContiguity();const $=this.transmux(a,O,x,g,r),M=this.currentTransmuxState;return M.contiguous=!0,M.discontinuity=!1,M.trackSwitch=!1,s.executeEnd=ho(),$}flush(e){const t=e.transmuxing;t.executeStart=ho();const{decrypter:r,currentTransmuxState:i,decryptionPromise:s}=this;if(s)return s.then(()=>this.flush(e));const a=[],{timeOffset:c}=i;if(r){const p=r.flush();p&&a.push(this.push(p,null,e))}const{demuxer:u,remuxer:d}=this;if(!u||!d)return t.executeEnd=ho(),[qm(e)];const h=u.flush(c);return Nf(h)?h.then(p=>(this.flushRemux(a,p,e),a)):(this.flushRemux(a,h,e),a)}flushRemux(e,t,r){const{audioTrack:i,videoTrack:s,id3Track:a,textTrack:c}=t,{accurateTimeOffset:u,timeOffset:d}=this.currentTransmuxState;J.log(`[transmuxer.ts]: Flushed fragment ${r.sn}${r.part>-1?" p: "+r.part:""} of level ${r.level}`);const h=this.remuxer.remux(i,s,a,c,d,u,!0,this.id);e.push({remuxResult:h,chunkMeta:r}),r.transmuxing.executeEnd=ho()}resetInitialTimestamp(e){const{demuxer:t,remuxer:r}=this;!t||!r||(t.resetTimeStamp(e),r.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:t}=this;!e||!t||(e.resetContiguity(),t.resetNextTimestamp())}resetInitSegment(e,t,r,i,s){const{demuxer:a,remuxer:c}=this;!a||!c||(a.resetInitSegment(e,t,r,i),c.resetInitSegment(e,t,r,s))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,t,r,i,s){let a;return t&&t.method==="SAMPLE-AES"?a=this.transmuxSampleAes(e,t,r,i,s):a=this.transmuxUnencrypted(e,r,i,s),a}transmuxUnencrypted(e,t,r,i){const{audioTrack:s,videoTrack:a,id3Track:c,textTrack:u}=this.demuxer.demux(e,t,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(s,a,c,u,t,r,!1,this.id),chunkMeta:i}}transmuxSampleAes(e,t,r,i,s){return this.demuxer.demuxSampleAes(e,t,r).then(a=>({remuxResult:this.remuxer.remux(a.audioTrack,a.videoTrack,a.id3Track,a.textTrack,r,i,!1,this.id),chunkMeta:s}))}configureTransmuxer(e){const{config:t,observer:r,typeSupported:i,vendor:s}=this;let a;for(let g=0,x=Of.length;g<x;g++){var c;if((c=Of[g].demux)!=null&&c.probe(e)){a=Of[g];break}}if(!a)return new Error("Failed to find demuxer by probing fragment data");const u=this.demuxer,d=this.remuxer,h=a.remux,p=a.demux;(!d||!(d instanceof h))&&(this.remuxer=new h(r,t,i,s)),(!u||!(u instanceof p))&&(this.demuxer=new p(r,t,i),this.probe=p.probe)}needsProbing(e,t){return!this.demuxer||!this.remuxer||e||t}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new X0(this.config)),e}}function SF(n,e){let t=null;return n.byteLength>0&&(e==null?void 0:e.key)!=null&&e.iv!==null&&e.method!=null&&(t=e),t}const qm=n=>({remuxResult:{},chunkMeta:n});function Nf(n){return"then"in n&&n.then instanceof Function}class EF{constructor(e,t,r,i,s){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=r,this.duration=i,this.defaultInitPts=s||null}}class TF{constructor(e,t,r,i,s,a){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=r,this.trackSwitch=i,this.timeOffset=s,this.initSegmentChange=a}}var Ab={exports:{}};(function(n){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function i(u,d,h){this.fn=u,this.context=d,this.once=h||!1}function s(u,d,h,p,g){if(typeof h!="function")throw new TypeError("The listener must be a function");var x=new i(h,p||u,g),v=t?t+d:d;return u._events[v]?u._events[v].fn?u._events[v]=[u._events[v],x]:u._events[v].push(x):(u._events[v]=x,u._eventsCount++),u}function a(u,d){--u._eventsCount===0?u._events=new r:delete u._events[d]}function c(){this._events=new r,this._eventsCount=0}c.prototype.eventNames=function(){var d=[],h,p;if(this._eventsCount===0)return d;for(p in h=this._events)e.call(h,p)&&d.push(t?p.slice(1):p);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(h)):d},c.prototype.listeners=function(d){var h=t?t+d:d,p=this._events[h];if(!p)return[];if(p.fn)return[p.fn];for(var g=0,x=p.length,v=new Array(x);g<x;g++)v[g]=p[g].fn;return v},c.prototype.listenerCount=function(d){var h=t?t+d:d,p=this._events[h];return p?p.fn?1:p.length:0},c.prototype.emit=function(d,h,p,g,x,v){var S=t?t+d:d;if(!this._events[S])return!1;var T=this._events[S],_=arguments.length,C,k;if(T.fn){switch(T.once&&this.removeListener(d,T.fn,void 0,!0),_){case 1:return T.fn.call(T.context),!0;case 2:return T.fn.call(T.context,h),!0;case 3:return T.fn.call(T.context,h,p),!0;case 4:return T.fn.call(T.context,h,p,g),!0;case 5:return T.fn.call(T.context,h,p,g,x),!0;case 6:return T.fn.call(T.context,h,p,g,x,v),!0}for(k=1,C=new Array(_-1);k<_;k++)C[k-1]=arguments[k];T.fn.apply(T.context,C)}else{var O=T.length,w;for(k=0;k<O;k++)switch(T[k].once&&this.removeListener(d,T[k].fn,void 0,!0),_){case 1:T[k].fn.call(T[k].context);break;case 2:T[k].fn.call(T[k].context,h);break;case 3:T[k].fn.call(T[k].context,h,p);break;case 4:T[k].fn.call(T[k].context,h,p,g);break;default:if(!C)for(w=1,C=new Array(_-1);w<_;w++)C[w-1]=arguments[w];T[k].fn.apply(T[k].context,C)}}return!0},c.prototype.on=function(d,h,p){return s(this,d,h,p,!1)},c.prototype.once=function(d,h,p){return s(this,d,h,p,!0)},c.prototype.removeListener=function(d,h,p,g){var x=t?t+d:d;if(!this._events[x])return this;if(!h)return a(this,x),this;var v=this._events[x];if(v.fn)v.fn===h&&(!g||v.once)&&(!p||v.context===p)&&a(this,x);else{for(var S=0,T=[],_=v.length;S<_;S++)(v[S].fn!==h||g&&!v[S].once||p&&v[S].context!==p)&&T.push(v[S]);T.length?this._events[x]=T.length===1?T[0]:T:a(this,x)}return this},c.prototype.removeAllListeners=function(d){var h;return d?(h=t?t+d:d,this._events[h]&&a(this,h)):(this._events=new r,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=t,c.EventEmitter=c,n.exports=c})(Ab);var bF=Ab.exports,ny=KO(bF);class kb{constructor(e,t,r,i){this.error=null,this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;const s=e.config;this.hls=e,this.id=t,this.useWorker=!!s.enableWorker,this.onTransmuxComplete=r,this.onFlush=i;const a=(d,h)=>{h=h||{},h.frag=this.frag,h.id=this.id,d===P.ERROR&&(this.error=h.error),this.hls.trigger(d,h)};this.observer=new ny,this.observer.on(P.FRAG_DECRYPTED,a),this.observer.on(P.ERROR,a);const c=Xa(s.preferManagedMediaSource)||{isTypeSupported:()=>!1},u={mpeg:c.isTypeSupported("audio/mpeg"),mp3:c.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:c.isTypeSupported('audio/mp4; codecs="ac-3"')};if(this.useWorker&&typeof Worker<"u"&&(s.workerPath||HM())){try{s.workerPath?(J.log(`loading Web Worker ${s.workerPath} for "${t}"`),this.workerContext=VM(s.workerPath)):(J.log(`injecting Web Worker for "${t}"`),this.workerContext=GM()),this.onwmsg=p=>this.onWorkerMessage(p);const{worker:h}=this.workerContext;h.addEventListener("message",this.onwmsg),h.onerror=p=>{const g=new Error(`${p.message}  (${p.filename}:${p.lineno})`);s.enableWorker=!1,J.warn(`Error in "${t}" Web Worker, fallback to inline`),this.hls.trigger(P.ERROR,{type:ft.OTHER_ERROR,details:le.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:g})},h.postMessage({cmd:"init",typeSupported:u,vendor:"",id:t,config:JSON.stringify(s)})}catch(h){J.warn(`Error setting up "${t}" Web Worker, fallback to inline`,h),this.resetWorker(),this.error=null,this.transmuxer=new W1(this.observer,u,s,"",t)}return}this.transmuxer=new W1(this.observer,u,s,"",t)}resetWorker(){if(this.workerContext){const{worker:e,objectURL:t}=this.workerContext;t&&self.URL.revokeObjectURL(t),e.removeEventListener("message",this.onwmsg),e.onerror=null,e.terminate(),this.workerContext=null}}destroy(){if(this.workerContext)this.resetWorker(),this.onwmsg=void 0;else{const t=this.transmuxer;t&&(t.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null}push(e,t,r,i,s,a,c,u,d,h){var p,g;d.transmuxing.start=self.performance.now();const{transmuxer:x}=this,v=a?a.start:s.start,S=s.decryptdata,T=this.frag,_=!(T&&s.cc===T.cc),C=!(T&&d.level===T.level),k=T?d.sn-T.sn:-1,O=this.part?d.part-this.part.index:-1,w=k===0&&d.id>1&&d.id===(T==null?void 0:T.stats.chunkCount),$=!C&&(k===1||k===0&&(O===1||w&&O<=0)),M=self.performance.now();(C||k||s.stats.parsing.start===0)&&(s.stats.parsing.start=M),a&&(O||!$)&&(a.stats.parsing.start=M);const U=!(T&&((p=s.initSegment)==null?void 0:p.url)===((g=T.initSegment)==null?void 0:g.url)),W=new TF(_,$,u,C,v,U);if(!$||_||U){J.log(`[transmuxer-interface, ${s.type}]: Starting new transmux session for sn: ${d.sn} p: ${d.part} level: ${d.level} id: ${d.id}
        discontinuity: ${_}
        trackSwitch: ${C}
        contiguous: ${$}
        accurateTimeOffset: ${u}
        timeOffset: ${v}
        initSegmentChange: ${U}`);const R=new EF(r,i,t,c,h);this.configureTransmuxer(R)}if(this.frag=s,this.part=a,this.workerContext)this.workerContext.worker.postMessage({cmd:"demux",data:e,decryptdata:S,chunkMeta:d,state:W},e instanceof ArrayBuffer?[e]:[]);else if(x){const R=x.push(e,S,d,W);Nf(R)?(x.async=!0,R.then(G=>{this.handleTransmuxComplete(G)}).catch(G=>{this.transmuxerError(G,d,"transmuxer-interface push error")})):(x.async=!1,this.handleTransmuxComplete(R))}}flush(e){e.transmuxing.start=self.performance.now();const{transmuxer:t}=this;if(this.workerContext)this.workerContext.worker.postMessage({cmd:"flush",chunkMeta:e});else if(t){let r=t.flush(e);Nf(r)||t.async?(Nf(r)||(r=Promise.resolve(r)),r.then(s=>{this.handleFlushResult(s,e)}).catch(s=>{this.transmuxerError(s,e,"transmuxer-interface flush error")})):this.handleFlushResult(r,e)}}transmuxerError(e,t,r){this.hls&&(this.error=e,this.hls.trigger(P.ERROR,{type:ft.MEDIA_ERROR,details:le.FRAG_PARSING_ERROR,chunkMeta:t,frag:this.frag||void 0,fatal:!1,error:e,err:e,reason:r}))}handleFlushResult(e,t){e.forEach(r=>{this.handleTransmuxComplete(r)}),this.onFlush(t)}onWorkerMessage(e){const t=e.data;if(!(t!=null&&t.event)){J.warn(`worker message received with no ${t?"event name":"data"}`);return}const r=this.hls;if(this.hls)switch(t.event){case"init":{var i;const s=(i=this.workerContext)==null?void 0:i.objectURL;s&&self.URL.revokeObjectURL(s);break}case"transmuxComplete":{this.handleTransmuxComplete(t.data);break}case"flush":{this.onFlush(t.data);break}case"workerLog":J[t.data.logType]&&J[t.data.logType](t.data.message);break;default:{t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,r.trigger(t.event,t.data);break}}}configureTransmuxer(e){const{transmuxer:t}=this;this.workerContext?this.workerContext.worker.postMessage({cmd:"configure",config:e}):t&&t.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}function Ib(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(!tc(n[t].attrs,e[t].attrs))return!1;return!0}function tc(n,e,t){const r=n["STABLE-RENDITION-ID"];return r&&!t?r===e["STABLE-RENDITION-ID"]:!(t||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(i=>n[i]!==e[i])}function jg(n,e){return e.label.toLowerCase()===n.name.toLowerCase()&&(!e.language||e.language.toLowerCase()===(n.lang||"").toLowerCase())}const Y1=100;class wF extends Q0{constructor(e,t,r){super(e,t,r,"[audio-stream-controller]",at.AUDIO),this.videoBuffer=null,this.videoTrackCC=-1,this.waitingVideoCC=-1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null,this.bufferedTrack=null,this.switchingTrack=null}_registerListeners(){const{hls:e}=this;e.on(P.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(P.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(P.MANIFEST_LOADING,this.onManifestLoading,this),e.on(P.LEVEL_LOADED,this.onLevelLoaded,this),e.on(P.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(P.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(P.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(P.ERROR,this.onError,this),e.on(P.BUFFER_RESET,this.onBufferReset,this),e.on(P.BUFFER_CREATED,this.onBufferCreated,this),e.on(P.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(P.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(P.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(P.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(P.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(P.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(P.MANIFEST_LOADING,this.onManifestLoading,this),e.off(P.LEVEL_LOADED,this.onLevelLoaded,this),e.off(P.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(P.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(P.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(P.ERROR,this.onError,this),e.off(P.BUFFER_RESET,this.onBufferReset,this),e.off(P.BUFFER_CREATED,this.onBufferCreated,this),e.off(P.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(P.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(P.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(P.FRAG_BUFFERED,this.onFragBuffered,this)}onInitPtsFound(e,{frag:t,id:r,initPTS:i,timescale:s}){if(r==="main"){const a=t.cc;this.initPTS[t.cc]={baseTime:i,timescale:s},this.log(`InitPTS for cc: ${a} found from main: ${i}`),this.videoTrackCC=a,this.state===ve.WAITING_INIT_PTS&&this.tick()}}startLoad(e){if(!this.levels){this.startPosition=e,this.state=ve.STOPPED;return}const t=this.lastCurrentTime;this.stopLoad(),this.setInterval(Y1),t>0&&e===-1?(this.log(`Override startPosition with lastCurrentTime @${t.toFixed(3)}`),e=t,this.state=ve.IDLE):(this.loadedmetadata=!1,this.state=ve.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}doTick(){switch(this.state){case ve.IDLE:this.doTickIdle();break;case ve.WAITING_TRACK:{var e;const{levels:r,trackId:i}=this,s=r==null||(e=r[i])==null?void 0:e.details;if(s){if(this.waitForCdnTuneIn(s))break;this.state=ve.WAITING_INIT_PTS}break}case ve.FRAG_LOADING_WAITING_RETRY:{var t;const r=performance.now(),i=this.retryDate;if(!i||r>=i||(t=this.media)!=null&&t.seeking){const{levels:s,trackId:a}=this;this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded((s==null?void 0:s[a])||null),this.state=ve.IDLE}break}case ve.WAITING_INIT_PTS:{const r=this.waitingData;if(r){const{frag:i,part:s,cache:a,complete:c}=r;if(this.initPTS[i.cc]!==void 0){this.waitingData=null,this.waitingVideoCC=-1,this.state=ve.FRAG_LOADING;const u=a.flush(),d={frag:i,part:s,payload:u,networkDetails:null};this._handleFragmentLoadProgress(d),c&&super._handleFragmentLoadComplete(d)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log(`Waiting fragment cc (${i.cc}) cancelled because video is at cc ${this.videoTrackCC}`),this.clearWaitingFragment();else{const u=this.getLoadPosition(),d=mn.bufferInfo(this.mediaBuffer,u,this.config.maxBufferHole);Bg(d.end,this.config.maxFragLookUpTolerance,i)<0&&(this.log(`Waiting fragment cc (${i.cc}) @ ${i.start} cancelled because another fragment at ${d.end} is needed`),this.clearWaitingFragment())}}else this.state=ve.IDLE}}this.onTickEnd()}clearWaitingFragment(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=ve.IDLE)}resetLoadingState(){this.clearWaitingFragment(),super.resetLoadingState()}onTickEnd(){const{media:e}=this;e!=null&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){const{hls:e,levels:t,media:r,trackId:i}=this,s=e.config;if(!this.buffering||!r&&(this.startFragRequested||!s.startFragPrefetch)||!(t!=null&&t[i]))return;const a=t[i],c=a.details;if(!c||c.live&&this.levelLastLoaded!==a||this.waitForCdnTuneIn(c)){this.state=ve.WAITING_TRACK;return}const u=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&u&&(this.bufferFlushed=!1,this.afterBufferFlushed(u,rn.AUDIO,at.AUDIO));const d=this.getFwdBufferInfo(u,at.AUDIO);if(d===null)return;const{bufferedTrack:h,switchingTrack:p}=this;if(!p&&this._streamEnded(d,c)){e.trigger(P.BUFFER_EOS,{type:"audio"}),this.state=ve.ENDED;return}const g=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,at.MAIN),x=d.len,v=this.getMaxBufferLength(g==null?void 0:g.len),S=c.fragments,T=S[0].start;let _=this.flushing?this.getLoadPosition():d.end;if(p&&r){const w=this.getLoadPosition();h&&!tc(p.attrs,h.attrs)&&(_=w),c.PTSKnown&&w<T&&(d.end>T||d.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),r.currentTime=T+.05)}if(x>=v&&!p&&_<S[S.length-1].start)return;let C=this.getNextFragment(_,c),k=!1;if(C&&this.isLoopLoading(C,_)&&(k=!!C.gap,C=this.getNextFragmentLoopLoading(C,c,d,at.MAIN,v)),!C){this.bufferFlushed=!0;return}const O=g&&C.start>g.end+c.targetduration;if(O||!(g!=null&&g.len)&&d.len){const w=this.getAppendedFrag(C.start,at.MAIN);if(w===null||(k||(k=!!w.gap||!!O&&g.len===0),O&&!k||k&&d.nextStart&&d.nextStart<w.end))return}this.loadFragment(C,a,_)}getMaxBufferLength(e){const t=super.getMaxBufferLength();return e?Math.min(Math.max(t,e),this.config.maxMaxBufferLength):t}onMediaDetaching(){this.videoBuffer=null,this.bufferFlushed=this.flushing=!1,super.onMediaDetaching()}onAudioTracksUpdated(e,{audioTracks:t}){this.resetTransmuxer(),this.levels=t.map(r=>new ec(r))}onAudioTrackSwitching(e,t){const r=!!t.url;this.trackId=t.id;const{fragCurrent:i}=this;i&&(i.abortRequests(),this.removeUnbufferedFrags(i.start)),this.resetLoadingState(),r?this.setInterval(Y1):this.resetTransmuxer(),r?(this.switchingTrack=t,this.state=ve.IDLE,this.flushAudioIfNeeded(t)):(this.switchingTrack=null,this.bufferedTrack=t,this.state=ve.STOPPED),this.tick()}onManifestLoading(){this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=this.flushing=!1,this.levels=this.mainDetails=this.waitingData=this.bufferedTrack=this.cachedTrackLoadedData=this.switchingTrack=null,this.startFragRequested=!1,this.trackId=this.videoTrackCC=this.waitingVideoCC=-1}onLevelLoaded(e,t){this.mainDetails=t.details,this.cachedTrackLoadedData!==null&&(this.hls.trigger(P.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)}onAudioTrackLoaded(e,t){var r;if(this.mainDetails==null){this.cachedTrackLoadedData=t;return}const{levels:i}=this,{details:s,id:a}=t;if(!i){this.warn(`Audio tracks were reset while loading level ${a}`);return}this.log(`Audio track ${a} loaded [${s.startSN},${s.endSN}]${s.lastPartSn?`[part-${s.lastPartSn}-${s.lastPartIndex}]`:""},duration:${s.totalduration}`);const c=i[a];let u=0;if(s.live||(r=c.details)!=null&&r.live){this.checkLiveUpdate(s);const h=this.mainDetails;if(s.deltaUpdateFailed||!h)return;if(!c.details&&s.hasProgramDateTime&&h.hasProgramDateTime)sh(s,h),u=s.fragments[0].start;else{var d;u=this.alignPlaylists(s,c.details,(d=this.levelLastLoaded)==null?void 0:d.details)}}c.details=s,this.levelLastLoaded=c,!this.startFragRequested&&(this.mainDetails||!s.live)&&this.setStartPosition(this.mainDetails||s,u),this.state===ve.WAITING_TRACK&&!this.waitForCdnTuneIn(s)&&(this.state=ve.IDLE),this.tick()}_handleFragmentLoadProgress(e){var t;const{frag:r,part:i,payload:s}=e,{config:a,trackId:c,levels:u}=this;if(!u){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${r.sn} of level ${r.level} will not be buffered`);return}const d=u[c];if(!d){this.warn("Audio track is undefined on fragment load progress");return}const h=d.details;if(!h){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(r.start);return}const p=a.defaultAudioCodec||d.audioCodec||"mp4a.40.2";let g=this.transmuxer;g||(g=this.transmuxer=new kb(this.hls,at.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const x=this.initPTS[r.cc],v=(t=r.initSegment)==null?void 0:t.data;if(x!==void 0){const T=i?i.index:-1,_=T!==-1,C=new q0(r.level,r.sn,r.stats.chunkCount,s.byteLength,T,_);g.push(s,v,p,"",r,i,h.totalduration,!1,C,x)}else{this.log(`Unknown video PTS for cc ${r.cc}, waiting for video PTS before demuxing audio frag ${r.sn} of [${h.startSN} ,${h.endSN}],track ${c}`);const{cache:S}=this.waitingData=this.waitingData||{frag:r,part:i,cache:new pb,complete:!1};S.push(new Uint8Array(s)),this.waitingVideoCC=this.videoTrackCC,this.state=ve.WAITING_INIT_PTS}}_handleFragmentLoadComplete(e){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1}onBufferCreated(e,t){const r=t.tracks.audio;r&&(this.mediaBuffer=r.buffer||null),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer||null)}onFragBuffered(e,t){const{frag:r,part:i}=t;if(r.type!==at.AUDIO){if(!this.loadedmetadata&&r.type===at.MAIN){const s=this.videoBuffer||this.media;s&&mn.getBuffered(s).length&&(this.loadedmetadata=!0)}return}if(this.fragContextChanged(r)){this.warn(`Fragment ${r.sn}${i?" p: "+i.index:""} of level ${r.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(r.sn!=="initSegment"){this.fragPrevious=r;const s=this.switchingTrack;s&&(this.bufferedTrack=s,this.switchingTrack=null,this.hls.trigger(P.AUDIO_TRACK_SWITCHED,or({},s)))}this.fragBufferedComplete(r,i)}onError(e,t){var r;if(t.fatal){this.state=ve.ERROR;return}switch(t.details){case le.FRAG_GAP:case le.FRAG_PARSING_ERROR:case le.FRAG_DECRYPT_ERROR:case le.FRAG_LOAD_ERROR:case le.FRAG_LOAD_TIMEOUT:case le.KEY_LOAD_ERROR:case le.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(at.AUDIO,t);break;case le.AUDIO_TRACK_LOAD_ERROR:case le.AUDIO_TRACK_LOAD_TIMEOUT:case le.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===ve.WAITING_TRACK&&((r=t.context)==null?void 0:r.type)===Dt.AUDIO_TRACK&&(this.state=ve.IDLE);break;case le.BUFFER_APPEND_ERROR:case le.BUFFER_FULL_ERROR:if(!t.parent||t.parent!=="audio")return;if(t.details===le.BUFFER_APPEND_ERROR){this.resetLoadingState();return}this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case le.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}onBufferFlushing(e,{type:t}){t!==rn.VIDEO&&(this.flushing=!0)}onBufferFlushed(e,{type:t}){if(t!==rn.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===ve.ENDED&&(this.state=ve.IDLE);const r=this.mediaBuffer||this.media;r&&(this.afterBufferFlushed(r,t,at.AUDIO),this.tick())}}_handleTransmuxComplete(e){var t;const r="audio",{hls:i}=this,{remuxResult:s,chunkMeta:a}=e,c=this.getCurrentContext(a);if(!c){this.resetWhenMissingContext(a);return}const{frag:u,part:d,level:h}=c,{details:p}=h,{audio:g,text:x,id3:v,initSegment:S}=s;if(this.fragContextChanged(u)||!p){this.fragmentTracker.removeFragment(u);return}if(this.state=ve.PARSING,this.switchingTrack&&g&&this.completeAudioSwitch(this.switchingTrack),S!=null&&S.tracks){const T=u.initSegment||u;this._bufferInitSegment(h,S.tracks,T,a),i.trigger(P.FRAG_PARSING_INIT_SEGMENT,{frag:T,id:r,tracks:S.tracks})}if(g){const{startPTS:T,endPTS:_,startDTS:C,endDTS:k}=g;d&&(d.elementaryStreams[rn.AUDIO]={startPTS:T,endPTS:_,startDTS:C,endDTS:k}),u.setElementaryStreamInfo(rn.AUDIO,T,_,C,k),this.bufferFragmentData(g,u,d,a)}if(v!=null&&(t=v.samples)!=null&&t.length){const T=$n({id:r,frag:u,details:p},v);i.trigger(P.FRAG_PARSING_METADATA,T)}if(x){const T=$n({id:r,frag:u,details:p},x);i.trigger(P.FRAG_PARSING_USERDATA,T)}}_bufferInitSegment(e,t,r,i){if(this.state!==ve.PARSING)return;t.video&&delete t.video;const s=t.audio;if(!s)return;s.id="audio";const a=e.audioCodec;this.log(`Init audio buffer, container:${s.container}, codecs[level/parsed]=[${a}/${s.codec}]`),a&&a.split(",").length===1&&(s.levelCodec=a),this.hls.trigger(P.BUFFER_CODECS,t);const c=s.initSegment;if(c!=null&&c.byteLength){const u={type:"audio",frag:r,part:null,chunkMeta:i,parent:r.type,data:c};this.hls.trigger(P.BUFFER_APPENDING,u)}this.tickImmediate()}loadFragment(e,t,r){const i=this.fragmentTracker.getState(e);if(this.fragCurrent=e,this.switchingTrack||i===rr.NOT_LOADED||i===rr.PARTIAL){var s;if(e.sn==="initSegment")this._loadInitSegment(e,t);else if((s=t.details)!=null&&s.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=ve.WAITING_INIT_PTS;const a=this.mainDetails;a&&a.fragments[0].start!==t.details.fragments[0].start&&sh(t.details,a)}else this.startFragRequested=!0,super.loadFragment(e,t,r)}else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){const{media:t,bufferedTrack:r}=this,i=r==null?void 0:r.attrs,s=e.attrs;t&&i&&(i.CHANNELS!==s.CHANNELS||r.name!==e.name||r.lang!==e.lang)&&(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null)}completeAudioSwitch(e){const{hls:t}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,t.trigger(P.AUDIO_TRACK_SWITCHED,or({},e))}}class _F extends Y0{constructor(e){super(e,"[audio-track-controller]"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(P.MANIFEST_LOADING,this.onManifestLoading,this),e.on(P.MANIFEST_PARSED,this.onManifestParsed,this),e.on(P.LEVEL_LOADING,this.onLevelLoading,this),e.on(P.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(P.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(P.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(P.MANIFEST_LOADING,this.onManifestLoading,this),e.off(P.MANIFEST_PARSED,this.onManifestParsed,this),e.off(P.LEVEL_LOADING,this.onLevelLoading,this),e.off(P.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(P.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(P.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.audioTracks||[]}onAudioTrackLoaded(e,t){const{id:r,groupId:i,details:s}=t,a=this.tracksInGroup[r];if(!a||a.groupId!==i){this.warn(`Audio track with id:${r} and group:${i} not found in active group ${a==null?void 0:a.groupId}`);return}const c=a.details;a.details=t.details,this.log(`Audio track ${r} "${a.name}" lang:${a.lang} group:${i} loaded [${s.startSN}-${s.endSN}]`),r===this.trackId&&this.playlistLoaded(r,t,c)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const r=t.audioGroups||null,i=this.groupIds;let s=this.currentTrack;if(!r||(i==null?void 0:i.length)!==(r==null?void 0:r.length)||r!=null&&r.some(c=>(i==null?void 0:i.indexOf(c))===-1)){this.groupIds=r,this.trackId=-1,this.currentTrack=null;const c=this.tracks.filter(g=>!r||r.indexOf(g.groupId)!==-1);if(c.length)this.selectDefaultTrack&&!c.some(g=>g.default)&&(this.selectDefaultTrack=!1),c.forEach((g,x)=>{g.id=x});else if(!s&&!this.tracksInGroup.length)return;this.tracksInGroup=c;const u=this.hls.config.audioPreference;if(!s&&u){const g=Ms(u,c,Bl);if(g>-1)s=c[g];else{const x=Ms(u,this.tracks);s=this.tracks[x]}}let d=this.findTrackId(s);d===-1&&s&&(d=this.findTrackId(null));const h={audioTracks:c};this.log(`Updating audio tracks, ${c.length} track(s) found in group(s): ${r==null?void 0:r.join(",")}`),this.hls.trigger(P.AUDIO_TRACKS_UPDATED,h);const p=this.trackId;if(d!==-1&&p===-1)this.setAudioTrack(d);else if(c.length&&p===-1){var a;const g=new Error(`No audio track selected for current audio group-ID(s): ${(a=this.groupIds)==null?void 0:a.join(",")} track count: ${c.length}`);this.warn(g.message),this.hls.trigger(P.ERROR,{type:ft.MEDIA_ERROR,details:le.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:g})}}else this.shouldReloadPlaylist(s)&&this.setAudioTrack(this.trackId)}onError(e,t){t.fatal||!t.context||t.context.type===Dt.AUDIO_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&(this.requestScheduled=-1,this.checkRetry(t))}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const t=this.hls;if(t.config.audioPreference=e,e){const r=this.allAudioTracks;if(this.selectDefaultTrack=!1,r.length){const i=this.currentTrack;if(i&&Xl(e,i,Bl))return i;const s=Ms(e,this.tracksInGroup,Bl);if(s>-1){const a=this.tracksInGroup[s];return this.setAudioTrack(s),a}else if(i){let a=t.loadLevel;a===-1&&(a=t.firstAutoLevel);const c=_M(e,t.levels,r,a,Bl);if(c===-1)return null;t.nextLoadLevel=c}if(e.channels||e.audioCodec){const a=Ms(e,r);if(a>-1)return r[a]}}}return null}setAudioTrack(e){const t=this.tracksInGroup;if(e<0||e>=t.length){this.warn(`Invalid audio track id: ${e}`);return}this.clearTimer(),this.selectDefaultTrack=!1;const r=this.currentTrack,i=t[e],s=i.details&&!i.details.live;if(e===this.trackId&&i===r&&s||(this.log(`Switching to audio-track ${e} "${i.name}" lang:${i.lang} group:${i.groupId} channels:${i.channels}`),this.trackId=e,this.currentTrack=i,this.hls.trigger(P.AUDIO_TRACK_SWITCHING,or({},i)),s))return;const a=this.switchParams(i.url,r==null?void 0:r.details,i.details);this.loadPlaylist(a)}findTrackId(e){const t=this.tracksInGroup;for(let r=0;r<t.length;r++){const i=t[r];if(!(this.selectDefaultTrack&&!i.default)&&(!e||Xl(e,i,Bl)))return r}if(e){const{name:r,lang:i,assocLang:s,characteristics:a,audioCodec:c,channels:u}=e;for(let d=0;d<t.length;d++){const h=t[d];if(Xl({name:r,lang:i,assocLang:s,characteristics:a,audioCodec:c,channels:u},h,Bl))return d}for(let d=0;d<t.length;d++){const h=t[d];if(tc(e.attrs,h.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return d}for(let d=0;d<t.length;d++){const h=t[d];if(tc(e.attrs,h.attrs,["LANGUAGE"]))return d}}return-1}loadPlaylist(e){const t=this.currentTrack;if(this.shouldLoadPlaylist(t)&&t){super.loadPlaylist();const r=t.id,i=t.groupId;let s=t.url;if(e)try{s=e.addDirectives(s)}catch(a){this.warn(`Could not construct new URL with HLS Delivery Directives: ${a}`)}this.log(`loading audio-track playlist ${r} "${t.name}" lang:${t.lang} group:${i}`),this.clearTimer(),this.hls.trigger(P.AUDIO_TRACK_LOADING,{url:s,id:r,groupId:i,deliveryDirectives:e||null})}}}const q1=500;class LF extends Q0{constructor(e,t,r){super(e,t,r,"[subtitle-stream-controller]",at.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}_registerListeners(){const{hls:e}=this;e.on(P.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(P.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(P.MANIFEST_LOADING,this.onManifestLoading,this),e.on(P.LEVEL_LOADED,this.onLevelLoaded,this),e.on(P.ERROR,this.onError,this),e.on(P.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(P.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(P.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(P.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(P.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(P.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(P.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(P.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(P.MANIFEST_LOADING,this.onManifestLoading,this),e.off(P.LEVEL_LOADED,this.onLevelLoaded,this),e.off(P.ERROR,this.onError,this),e.off(P.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(P.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(P.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(P.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(P.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(P.FRAG_BUFFERED,this.onFragBuffered,this)}startLoad(e){this.stopLoad(),this.state=ve.IDLE,this.setInterval(q1),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}onManifestLoading(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()}onMediaDetaching(){this.tracksBuffered=[],super.onMediaDetaching()}onLevelLoaded(e,t){this.mainDetails=t.details}onSubtitleFragProcessed(e,t){const{frag:r,success:i}=t;if(this.fragPrevious=r,this.state=ve.IDLE,!i)return;const s=this.tracksBuffered[this.currentTrackId];if(!s)return;let a;const c=r.start;for(let d=0;d<s.length;d++)if(c>=s[d].start&&c<=s[d].end){a=s[d];break}const u=r.start+r.duration;a?a.end=u:(a={start:c,end:u},s.push(a)),this.fragmentTracker.fragBuffered(r),this.fragBufferedComplete(r,null)}onBufferFlushing(e,t){const{startOffset:r,endOffset:i}=t;if(r===0&&i!==Number.POSITIVE_INFINITY){const s=i-1;if(s<=0)return;t.endOffsetSubtitles=Math.max(0,s),this.tracksBuffered.forEach(a=>{for(let c=0;c<a.length;){if(a[c].end<=s){a.shift();continue}else if(a[c].start<s)a[c].start=s;else break;c++}}),this.fragmentTracker.removeFragmentsInRange(r,s,at.SUBTITLE)}}onFragBuffered(e,t){if(!this.loadedmetadata&&t.frag.type===at.MAIN){var r;(r=this.media)!=null&&r.buffered.length&&(this.loadedmetadata=!0)}}onError(e,t){const r=t.frag;(r==null?void 0:r.type)===at.SUBTITLE&&(t.details===le.FRAG_GAP&&this.fragmentTracker.fragBuffered(r,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==ve.STOPPED&&(this.state=ve.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:t}){if(this.levels&&Ib(this.levels,t)){this.levels=t.map(r=>new ec(r));return}this.tracksBuffered=[],this.levels=t.map(r=>{const i=new ec(r);return this.tracksBuffered[i.id]=[],i}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,at.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(e,t){var r;if(this.currentTrackId=t.id,!((r=this.levels)!=null&&r.length)||this.currentTrackId===-1){this.clearInterval();return}const i=this.levels[this.currentTrackId];i!=null&&i.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,i&&this.setInterval(q1)}onSubtitleTrackLoaded(e,t){var r;const{currentTrackId:i,levels:s}=this,{details:a,id:c}=t;if(!s){this.warn(`Subtitle tracks were reset while loading level ${c}`);return}const u=s[c];if(c>=s.length||!u)return;this.log(`Subtitle track ${c} loaded [${a.startSN},${a.endSN}]${a.lastPartSn?`[part-${a.lastPartSn}-${a.lastPartIndex}]`:""},duration:${a.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let d=0;if(a.live||(r=u.details)!=null&&r.live){const p=this.mainDetails;if(a.deltaUpdateFailed||!p)return;const g=p.fragments[0];if(!u.details)a.hasProgramDateTime&&p.hasProgramDateTime?(sh(a,p),d=a.fragments[0].start):g&&(d=g.start,$g(a,d));else{var h;d=this.alignPlaylists(a,u.details,(h=this.levelLastLoaded)==null?void 0:h.details),d===0&&g&&(d=g.start,$g(a,d))}}u.details=a,this.levelLastLoaded=u,c===i&&(!this.startFragRequested&&(this.mainDetails||!a.live)&&this.setStartPosition(this.mainDetails||a,d),this.tick(),a.live&&!this.fragCurrent&&this.media&&this.state===ve.IDLE&&(ih(null,a.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),u.details=void 0)))}_handleFragmentLoadComplete(e){const{frag:t,payload:r}=e,i=t.decryptdata,s=this.hls;if(!this.fragContextChanged(t)&&r&&r.byteLength>0&&i!=null&&i.key&&i.iv&&i.method==="AES-128"){const a=performance.now();this.decrypter.decrypt(new Uint8Array(r),i.key.buffer,i.iv.buffer).catch(c=>{throw s.trigger(P.ERROR,{type:ft.MEDIA_ERROR,details:le.FRAG_DECRYPT_ERROR,fatal:!1,error:c,reason:c.message,frag:t}),c}).then(c=>{const u=performance.now();s.trigger(P.FRAG_DECRYPTED,{frag:t,payload:c,stats:{tstart:a,tdecrypt:u}})}).catch(c=>{this.warn(`${c.name}: ${c.message}`),this.state=ve.IDLE})}}doTick(){if(!this.media){this.state=ve.IDLE;return}if(this.state===ve.IDLE){const{currentTrackId:e,levels:t}=this,r=t==null?void 0:t[e];if(!r||!t.length||!r.details)return;const{config:i}=this,s=this.getLoadPosition(),a=mn.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],s,i.maxBufferHole),{end:c,len:u}=a,d=this.getFwdBufferInfo(this.media,at.MAIN),h=r.details,p=this.getMaxBufferLength(d==null?void 0:d.len)+h.levelTargetDuration;if(u>p)return;const g=h.fragments,x=g.length,v=h.edge;let S=null;const T=this.fragPrevious;if(c<v){const _=i.maxFragLookUpTolerance,C=c>v-_?0:_;S=ih(T,g,Math.max(g[0].start,c),C),!S&&T&&T.start<g[0].start&&(S=g[0])}else S=g[x-1];if(!S)return;if(S=this.mapToInitFragWhenRequired(S),S.sn!=="initSegment"){const _=S.sn-h.startSN,C=g[_-1];C&&C.cc===S.cc&&this.fragmentTracker.getState(C)===rr.NOT_LOADED&&(S=C)}this.fragmentTracker.getState(S)===rr.NOT_LOADED&&this.loadFragment(S,r,c)}}getMaxBufferLength(e){const t=super.getMaxBufferLength();return e?Math.max(t,e):t}loadFragment(e,t,r){this.fragCurrent=e,e.sn==="initSegment"?this._loadInitSegment(e,t):(this.startFragRequested=!0,super.loadFragment(e,t,r))}get mediaBufferTimeRanges(){return new CF(this.tracksBuffered[this.currentTrackId]||[])}}class CF{constructor(e){this.buffered=void 0;const t=(r,i,s)=>{if(i=i>>>0,i>s-1)throw new DOMException(`Failed to execute '${r}' on 'TimeRanges': The index provided (${i}) is greater than the maximum bound (${s})`);return e[i][r]};this.buffered={get length(){return e.length},end(r){return t("end",r,e.length)},start(r){return t("start",r,e.length)}}}}class RF extends Y0{constructor(e){super(e,"[subtitle-track-controller]"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let t=null;const r=kf(this.media.textTracks);for(let s=0;s<r.length;s++)if(r[s].mode==="hidden")t=r[s];else if(r[s].mode==="showing"){t=r[s];break}const i=this.findTrackForTextTrack(t);this.subtitleTrack!==i&&this.setSubtitleTrack(i)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(P.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(P.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(P.MANIFEST_LOADING,this.onManifestLoading,this),e.on(P.MANIFEST_PARSED,this.onManifestParsed,this),e.on(P.LEVEL_LOADING,this.onLevelLoading,this),e.on(P.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(P.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(P.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(P.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(P.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(P.MANIFEST_LOADING,this.onManifestLoading,this),e.off(P.MANIFEST_PARSED,this.onManifestParsed,this),e.off(P.LEVEL_LOADING,this.onLevelLoading,this),e.off(P.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(P.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(P.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(){if(!this.media)return;self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),kf(this.media.textTracks).forEach(t=>{Kl(t)}),this.subtitleTrack=-1,this.media=null}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.subtitleTracks}onSubtitleTrackLoaded(e,t){const{id:r,groupId:i,details:s}=t,a=this.tracksInGroup[r];if(!a||a.groupId!==i){this.warn(`Subtitle track with id:${r} and group:${i} not found in active group ${a==null?void 0:a.groupId}`);return}const c=a.details;a.details=t.details,this.log(`Subtitle track ${r} "${a.name}" lang:${a.lang} group:${i} loaded [${s.startSN}-${s.endSN}]`),r===this.trackId&&this.playlistLoaded(r,t,c)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const r=t.subtitleGroups||null,i=this.groupIds;let s=this.currentTrack;if(!r||(i==null?void 0:i.length)!==(r==null?void 0:r.length)||r!=null&&r.some(a=>(i==null?void 0:i.indexOf(a))===-1)){this.groupIds=r,this.trackId=-1,this.currentTrack=null;const a=this.tracks.filter(h=>!r||r.indexOf(h.groupId)!==-1);if(a.length)this.selectDefaultTrack&&!a.some(h=>h.default)&&(this.selectDefaultTrack=!1),a.forEach((h,p)=>{h.id=p});else if(!s&&!this.tracksInGroup.length)return;this.tracksInGroup=a;const c=this.hls.config.subtitlePreference;if(!s&&c){this.selectDefaultTrack=!1;const h=Ms(c,a);if(h>-1)s=a[h];else{const p=Ms(c,this.tracks);s=this.tracks[p]}}let u=this.findTrackId(s);u===-1&&s&&(u=this.findTrackId(null));const d={subtitleTracks:a};this.log(`Updating subtitle tracks, ${a.length} track(s) found in "${r==null?void 0:r.join(",")}" group-id`),this.hls.trigger(P.SUBTITLE_TRACKS_UPDATED,d),u!==-1&&this.trackId===-1&&this.setSubtitleTrack(u)}else this.shouldReloadPlaylist(s)&&this.setSubtitleTrack(this.trackId)}findTrackId(e){const t=this.tracksInGroup,r=this.selectDefaultTrack;for(let i=0;i<t.length;i++){const s=t[i];if(!(r&&!s.default||!r&&!e)&&(!e||Xl(s,e)))return i}if(e){for(let i=0;i<t.length;i++){const s=t[i];if(tc(e.attrs,s.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return i}for(let i=0;i<t.length;i++){const s=t[i];if(tc(e.attrs,s.attrs,["LANGUAGE"]))return i}}return-1}findTrackForTextTrack(e){if(e){const t=this.tracksInGroup;for(let r=0;r<t.length;r++){const i=t[r];if(jg(i,e))return r}}return-1}onError(e,t){t.fatal||!t.context||t.context.type===Dt.SUBTITLE_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&this.checkRetry(t)}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){const t=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,t.length){const r=this.currentTrack;if(r&&Xl(e,r))return r;const i=Ms(e,this.tracksInGroup);if(i>-1){const s=this.tracksInGroup[i];return this.setSubtitleTrack(i),s}else{if(r)return null;{const s=Ms(e,t);if(s>-1)return t[s]}}}}return null}loadPlaylist(e){super.loadPlaylist();const t=this.currentTrack;if(this.shouldLoadPlaylist(t)&&t){const r=t.id,i=t.groupId;let s=t.url;if(e)try{s=e.addDirectives(s)}catch(a){this.warn(`Could not construct new URL with HLS Delivery Directives: ${a}`)}this.log(`Loading subtitle playlist for id ${r}`),this.hls.trigger(P.SUBTITLE_TRACK_LOADING,{url:s,id:r,groupId:i,deliveryDirectives:e||null})}}toggleTrackModes(){const{media:e}=this;if(!e)return;const t=kf(e.textTracks),r=this.currentTrack;let i;if(r&&(i=t.filter(s=>jg(r,s))[0],i||this.warn(`Unable to find subtitle TextTrack with name "${r.name}" and language "${r.lang}"`)),[].slice.call(t).forEach(s=>{s.mode!=="disabled"&&s!==i&&(s.mode="disabled")}),i){const s=this.subtitleDisplay?"showing":"hidden";i.mode!==s&&(i.mode=s)}}setSubtitleTrack(e){const t=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=e;return}if(e<-1||e>=t.length||!Ye(e)){this.warn(`Invalid subtitle track id: ${e}`);return}this.clearTimer(),this.selectDefaultTrack=!1;const r=this.currentTrack,i=t[e]||null;if(this.trackId=e,this.currentTrack=i,this.toggleTrackModes(),!i){this.hls.trigger(P.SUBTITLE_TRACK_SWITCH,{id:e});return}const s=!!i.details&&!i.details.live;if(e===this.trackId&&i===r&&s)return;this.log(`Switching to subtitle-track ${e}`+(i?` "${i.name}" lang:${i.lang} group:${i.groupId}`:""));const{id:a,groupId:c="",name:u,type:d,url:h}=i;this.hls.trigger(P.SUBTITLE_TRACK_SWITCH,{id:a,groupId:c,name:u,type:d,url:h});const p=this.switchParams(i.url,r==null?void 0:r.details,i.details);this.loadPlaylist(p)}}class AF{constructor(e){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=e}append(e,t,r){const i=this.queues[t];i.push(e),i.length===1&&!r&&this.executeNext(t)}insertAbort(e,t){this.queues[t].unshift(e),this.executeNext(t)}appendBlocker(e){let t;const r=new Promise(s=>{t=s}),i={execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};return this.append(i,e),r}executeNext(e){const t=this.queues[e];if(t.length){const r=t[0];try{r.execute()}catch(i){J.warn(`[buffer-operation-queue]: Exception executing "${e}" SourceBuffer operation: ${i}`),r.onError(i);const s=this.buffers[e];s!=null&&s.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){this.queues[e].shift(),this.executeNext(e)}current(e){return this.queues[e][0]}}const X1=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/;class kF{constructor(e){this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendSource=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this.log=void 0,this.warn=void 0,this.error=void 0,this._onEndStreaming=r=>{this.hls&&this.hls.pauseBuffering()},this._onStartStreaming=r=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=()=>{const{media:r,mediaSource:i}=this;this.log("Media source opened"),r&&(r.removeEventListener("emptied",this._onMediaEmptied),this.updateMediaElementDuration(),this.hls.trigger(P.MEDIA_ATTACHED,{media:r,mediaSource:i})),i&&i.removeEventListener("sourceopen",this._onMediaSourceOpen),this.checkPendingTracks()},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:r,_objectUrl:i}=this;r!==i&&J.error(`Media element src was set while attaching MediaSource (${i} > ${r})`)},this.hls=e;const t="[buffer-controller]";this.appendSource=BN(Xa(e.config.preferManagedMediaSource)),this.log=J.log.bind(J,t),this.warn=J.warn.bind(J,t),this.error=J.error.bind(J,t),this._initSourceBuffer(),this.registerListeners()}hasSourceTypes(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null,this.hls=null}registerListeners(){const{hls:e}=this;e.on(P.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(P.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(P.MANIFEST_LOADING,this.onManifestLoading,this),e.on(P.MANIFEST_PARSED,this.onManifestParsed,this),e.on(P.BUFFER_RESET,this.onBufferReset,this),e.on(P.BUFFER_APPENDING,this.onBufferAppending,this),e.on(P.BUFFER_CODECS,this.onBufferCodecs,this),e.on(P.BUFFER_EOS,this.onBufferEos,this),e.on(P.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(P.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(P.FRAG_PARSED,this.onFragParsed,this),e.on(P.FRAG_CHANGED,this.onFragChanged,this)}unregisterListeners(){const{hls:e}=this;e.off(P.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(P.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(P.MANIFEST_LOADING,this.onManifestLoading,this),e.off(P.MANIFEST_PARSED,this.onManifestParsed,this),e.off(P.BUFFER_RESET,this.onBufferReset,this),e.off(P.BUFFER_APPENDING,this.onBufferAppending,this),e.off(P.BUFFER_CODECS,this.onBufferCodecs,this),e.off(P.BUFFER_EOS,this.onBufferEos,this),e.off(P.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(P.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(P.FRAG_PARSED,this.onFragParsed,this),e.off(P.FRAG_CHANGED,this.onFragChanged,this)}_initSourceBuffer(){this.sourceBuffer={},this.operationQueue=new AF(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.appendErrors={audio:0,video:0,audiovideo:0},this.lastMpegAudioChunk=null}onManifestLoading(){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,t){let r=2;(t.audio&&!t.video||!t.altAudio)&&(r=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=r,this.log(`${this.bufferCodecEventsExpected} bufferCodec event(s) expected`)}onMediaAttaching(e,t){const r=this.media=t.media,i=Xa(this.appendSource);if(r&&i){var s;const a=this.mediaSource=new i;this.log(`created media source: ${(s=a.constructor)==null?void 0:s.name}`),a.addEventListener("sourceopen",this._onMediaSourceOpen),a.addEventListener("sourceended",this._onMediaSourceEnded),a.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(a.addEventListener("startstreaming",this._onStartStreaming),a.addEventListener("endstreaming",this._onEndStreaming));const c=this._objectUrl=self.URL.createObjectURL(a);if(this.appendSource)try{r.removeAttribute("src");const u=self.ManagedMediaSource;r.disableRemotePlayback=r.disableRemotePlayback||u&&a instanceof u,Q1(r),IF(r,c),r.load()}catch{r.src=c}else r.src=c;r.addEventListener("emptied",this._onMediaEmptied)}}onMediaDetaching(){const{media:e,mediaSource:t,_objectUrl:r}=this;if(t){if(this.log("media source detaching"),t.readyState==="open")try{t.endOfStream()}catch(i){this.warn(`onMediaDetaching: ${i.message} while calling endOfStream`)}this.onBufferReset(),t.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("sourceended",this._onMediaSourceEnded),t.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(t.removeEventListener("startstreaming",this._onStartStreaming),t.removeEventListener("endstreaming",this._onEndStreaming)),e&&(e.removeEventListener("emptied",this._onMediaEmptied),r&&self.URL.revokeObjectURL(r),this.mediaSrc===r?(e.removeAttribute("src"),this.appendSource&&Q1(e),e.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(P.MEDIA_DETACHED,void 0)}onBufferReset(){this.getSourceBufferTypes().forEach(e=>{this.resetBuffer(e)}),this._initSourceBuffer(),this.hls.resumeBuffering()}resetBuffer(e){const t=this.sourceBuffer[e];try{if(t){var r;this.removeBufferListeners(e),this.sourceBuffer[e]=void 0,(r=this.mediaSource)!=null&&r.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(t)}}catch(i){this.warn(`onBufferReset ${e}`,i)}}onBufferCodecs(e,t){const r=this.getSourceBufferTypes().length,i=Object.keys(t);if(i.forEach(a=>{if(r){const u=this.tracks[a];if(u&&typeof u.buffer.changeType=="function"){var c;const{id:d,codec:h,levelCodec:p,container:g,metadata:x}=t[a],v=v1(u.codec,u.levelCodec),S=v==null?void 0:v.replace(X1,"$1");let T=v1(h,p);const _=(c=T)==null?void 0:c.replace(X1,"$1");if(T&&S!==_){a.slice(0,5)==="audio"&&(T=eh(T,this.appendSource));const C=`${g};codecs=${T}`;this.appendChangeType(a,C),this.log(`switching codec ${v} to ${T}`),this.tracks[a]={buffer:u.buffer,codec:h,container:g,levelCodec:p,metadata:x,id:d}}}}else this.pendingTracks[a]=t[a]}),r)return;const s=Math.max(this.bufferCodecEventsExpected-1,0);this.bufferCodecEventsExpected!==s&&(this.log(`${s} bufferCodec event(s) expected ${i.join(",")}`),this.bufferCodecEventsExpected=s),this.mediaSource&&this.mediaSource.readyState==="open"&&this.checkPendingTracks()}appendChangeType(e,t){const{operationQueue:r}=this,i={execute:()=>{const s=this.sourceBuffer[e];s&&(this.log(`changing ${e} sourceBuffer type to ${t}`),s.changeType(t)),r.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:s=>{this.warn(`Failed to change ${e} SourceBuffer type`,s)}};r.append(i,e,!!this.pendingTracks[e])}onBufferAppending(e,t){const{hls:r,operationQueue:i,tracks:s}=this,{data:a,type:c,frag:u,part:d,chunkMeta:h}=t,p=h.buffering[c],g=self.performance.now();p.start=g;const x=u.stats.buffering,v=d?d.stats.buffering:null;x.start===0&&(x.start=g),v&&v.start===0&&(v.start=g);const S=s.audio;let T=!1;c==="audio"&&(S==null?void 0:S.container)==="audio/mpeg"&&(T=!this.lastMpegAudioChunk||h.id===1||this.lastMpegAudioChunk.sn!==h.sn,this.lastMpegAudioChunk=h);const _=u.start,C={execute:()=>{if(p.executeStart=self.performance.now(),T){const k=this.sourceBuffer[c];if(k){const O=_-k.timestampOffset;Math.abs(O)>=.1&&(this.log(`Updating audio SourceBuffer timestampOffset to ${_} (delta: ${O}) sn: ${u.sn})`),k.timestampOffset=_)}}this.appendExecutor(a,c)},onStart:()=>{},onComplete:()=>{const k=self.performance.now();p.executeEnd=p.end=k,x.first===0&&(x.first=k),v&&v.first===0&&(v.first=k);const{sourceBuffer:O}=this,w={};for(const $ in O)w[$]=mn.getBuffered(O[$]);this.appendErrors[c]=0,c==="audio"||c==="video"?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(P.BUFFER_APPENDED,{type:c,frag:u,part:d,chunkMeta:h,parent:u.type,timeRanges:w})},onError:k=>{const O={type:ft.MEDIA_ERROR,parent:u.type,details:le.BUFFER_APPEND_ERROR,sourceBufferName:c,frag:u,part:d,chunkMeta:h,error:k,err:k,fatal:!1};if(k.code===DOMException.QUOTA_EXCEEDED_ERR)O.details=le.BUFFER_FULL_ERROR;else{const w=++this.appendErrors[c];O.details=le.BUFFER_APPEND_ERROR,this.warn(`Failed ${w}/${r.config.appendErrorMaxRetry} times to append segment in "${c}" sourceBuffer`),w>=r.config.appendErrorMaxRetry&&(O.fatal=!0)}r.trigger(P.ERROR,O)}};i.append(C,c,!!this.pendingTracks[c])}onBufferFlushing(e,t){const{operationQueue:r}=this,i=s=>({execute:this.removeExecutor.bind(this,s,t.startOffset,t.endOffset),onStart:()=>{},onComplete:()=>{this.hls.trigger(P.BUFFER_FLUSHED,{type:s})},onError:a=>{this.warn(`Failed to remove from ${s} SourceBuffer`,a)}});t.type?r.append(i(t.type),t.type):this.getSourceBufferTypes().forEach(s=>{r.append(i(s),s)})}onFragParsed(e,t){const{frag:r,part:i}=t,s=[],a=i?i.elementaryStreams:r.elementaryStreams;a[rn.AUDIOVIDEO]?s.push("audiovideo"):(a[rn.AUDIO]&&s.push("audio"),a[rn.VIDEO]&&s.push("video"));const c=()=>{const u=self.performance.now();r.stats.buffering.end=u,i&&(i.stats.buffering.end=u);const d=i?i.stats:r.stats;this.hls.trigger(P.FRAG_BUFFERED,{frag:r,part:i,stats:d,id:r.type})};s.length===0&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${r.type} level: ${r.level} sn: ${r.sn}`),this.blockBuffers(c,s)}onFragChanged(e,t){this.trimBuffers()}onBufferEos(e,t){this.getSourceBufferTypes().reduce((i,s)=>{const a=this.sourceBuffer[s];return a&&(!t.type||t.type===s)&&(a.ending=!0,a.ended||(a.ended=!0,this.log(`${s} sourceBuffer now EOS`))),i&&!!(!a||a.ended)},!0)&&(this.log("Queueing mediaSource.endOfStream()"),this.blockBuffers(()=>{this.getSourceBufferTypes().forEach(s=>{const a=this.sourceBuffer[s];a&&(a.ending=!1)});const{mediaSource:i}=this;if(!i||i.readyState!=="open"){i&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${i.readyState}`);return}this.log("Calling mediaSource.endOfStream()"),i.endOfStream()}))}onLevelUpdated(e,{details:t}){t.fragments.length&&(this.details=t,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())}trimBuffers(){const{hls:e,details:t,media:r}=this;if(!r||t===null||!this.getSourceBufferTypes().length)return;const s=e.config,a=r.currentTime,c=t.levelTargetDuration,u=t.live&&s.liveBackBufferLength!==null?s.liveBackBufferLength:s.backBufferLength;if(Ye(u)&&u>0){const d=Math.max(u,c),h=Math.floor(a/c)*c-d;this.flushBackBuffer(a,c,h)}if(Ye(s.frontBufferFlushThreshold)&&s.frontBufferFlushThreshold>0){const d=Math.max(s.maxBufferLength,s.frontBufferFlushThreshold),h=Math.max(d,c),p=Math.floor(a/c)*c+h;this.flushFrontBuffer(a,c,p)}}flushBackBuffer(e,t,r){const{details:i,sourceBuffer:s}=this;this.getSourceBufferTypes().forEach(c=>{const u=s[c];if(u){const d=mn.getBuffered(u);if(d.length>0&&r>d.start(0)){if(this.hls.trigger(P.BACK_BUFFER_REACHED,{bufferEnd:r}),i!=null&&i.live)this.hls.trigger(P.LIVE_BACK_BUFFER_REACHED,{bufferEnd:r});else if(u.ended&&d.end(d.length-1)-e<t*2){this.log(`Cannot flush ${c} back buffer while SourceBuffer is in ended state`);return}this.hls.trigger(P.BUFFER_FLUSHING,{startOffset:0,endOffset:r,type:c})}}})}flushFrontBuffer(e,t,r){const{sourceBuffer:i}=this;this.getSourceBufferTypes().forEach(a=>{const c=i[a];if(c){const u=mn.getBuffered(c),d=u.length;if(d<2)return;const h=u.start(d-1),p=u.end(d-1);if(r>h||e>=h&&e<=p)return;if(c.ended&&e-p<2*t){this.log(`Cannot flush ${a} front buffer while SourceBuffer is in ended state`);return}this.hls.trigger(P.BUFFER_FLUSHING,{startOffset:h,endOffset:1/0,type:a})}})}updateMediaElementDuration(){if(!this.details||!this.media||!this.mediaSource||this.mediaSource.readyState!=="open")return;const{details:e,hls:t,media:r,mediaSource:i}=this,s=e.fragments[0].start+e.totalduration,a=r.duration,c=Ye(i.duration)?i.duration:0;e.live&&t.config.liveDurationInfinity?(i.duration=1/0,this.updateSeekableRange(e)):(s>c&&s>a||!Ye(a))&&(this.log(`Updating Media Source duration to ${s.toFixed(3)}`),i.duration=s)}updateSeekableRange(e){const t=this.mediaSource,r=e.fragments;if(r.length&&e.live&&t!=null&&t.setLiveSeekableRange){const s=Math.max(0,r[0].start),a=Math.max(s,s+e.totalduration);this.log(`Media Source duration is set to ${t.duration}. Setting seekable range to ${s}-${a}.`),t.setLiveSeekableRange(s,a)}}checkPendingTracks(){const{bufferCodecEventsExpected:e,operationQueue:t,pendingTracks:r}=this,i=Object.keys(r).length;if(i&&(!e||i===2||"audiovideo"in r)){this.createSourceBuffers(r),this.pendingTracks={};const s=this.getSourceBufferTypes();if(s.length)this.hls.trigger(P.BUFFER_CREATED,{tracks:this.tracks}),s.forEach(a=>{t.executeNext(a)});else{const a=new Error("could not create source buffer for media codec(s)");this.hls.trigger(P.ERROR,{type:ft.MEDIA_ERROR,details:le.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:a,reason:a.message})}}}createSourceBuffers(e){const{sourceBuffer:t,mediaSource:r}=this;if(!r)throw Error("createSourceBuffers called when mediaSource was null");for(const s in e)if(!t[s]){var i;const a=e[s];if(!a)throw Error(`source buffer exists for track ${s}, however track does not`);let c=((i=a.levelCodec)==null?void 0:i.indexOf(","))===-1?a.levelCodec:a.codec;c&&s.slice(0,5)==="audio"&&(c=eh(c,this.appendSource));const u=`${a.container};codecs=${c}`;this.log(`creating sourceBuffer(${u})`);try{const d=t[s]=r.addSourceBuffer(u),h=s;this.addBufferListener(h,"updatestart",this._onSBUpdateStart),this.addBufferListener(h,"updateend",this._onSBUpdateEnd),this.addBufferListener(h,"error",this._onSBUpdateError),this.appendSource&&this.addBufferListener(h,"bufferedchange",(p,g)=>{const x=g.removedRanges;x!=null&&x.length&&this.hls.trigger(P.BUFFER_FLUSHED,{type:s})}),this.tracks[s]={buffer:d,codec:c,container:a.container,levelCodec:a.levelCodec,metadata:a.metadata,id:a.id}}catch(d){this.error(`error while trying to add sourceBuffer: ${d.message}`),this.hls.trigger(P.ERROR,{type:ft.MEDIA_ERROR,details:le.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:d,sourceBufferName:s,mimeType:u})}}}get mediaSrc(){var e,t;const r=((e=this.media)==null||(t=e.querySelector)==null?void 0:t.call(e,"source"))||this.media;return r==null?void 0:r.src}_onSBUpdateStart(e){const{operationQueue:t}=this;t.current(e).onStart()}_onSBUpdateEnd(e){var t;if(((t=this.mediaSource)==null?void 0:t.readyState)==="closed"){this.resetBuffer(e);return}const{operationQueue:r}=this;r.current(e).onComplete(),r.shiftAndExecuteNext(e)}_onSBUpdateError(e,t){var r;const i=new Error(`${e} SourceBuffer error. MediaSource readyState: ${(r=this.mediaSource)==null?void 0:r.readyState}`);this.error(`${i}`,t),this.hls.trigger(P.ERROR,{type:ft.MEDIA_ERROR,details:le.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:i,fatal:!1});const s=this.operationQueue.current(e);s&&s.onError(i)}removeExecutor(e,t,r){const{media:i,mediaSource:s,operationQueue:a,sourceBuffer:c}=this,u=c[e];if(!i||!s||!u){this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),a.shiftAndExecuteNext(e);return}const d=Ye(i.duration)?i.duration:1/0,h=Ye(s.duration)?s.duration:1/0,p=Math.max(0,t),g=Math.min(r,d,h);g>p&&(!u.ending||u.ended)?(u.ended=!1,this.log(`Removing [${p},${g}] from the ${e} SourceBuffer`),u.remove(p,g)):a.shiftAndExecuteNext(e)}appendExecutor(e,t){const r=this.sourceBuffer[t];if(!r){if(!this.pendingTracks[t])throw new Error(`Attempting to append to the ${t} SourceBuffer, but it does not exist`);return}r.ended=!1,r.appendBuffer(e)}blockBuffers(e,t=this.getSourceBufferTypes()){if(!t.length){this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);return}const{operationQueue:r}=this,i=t.map(s=>r.appendBlocker(s));Promise.all(i).then(()=>{e(),t.forEach(s=>{const a=this.sourceBuffer[s];a!=null&&a.updating||r.shiftAndExecuteNext(s)})})}getSourceBufferTypes(){return Object.keys(this.sourceBuffer)}addBufferListener(e,t,r){const i=this.sourceBuffer[e];if(!i)return;const s=r.bind(this,e);this.listeners[e].push({event:t,listener:s}),i.addEventListener(t,s)}removeBufferListeners(e){const t=this.sourceBuffer[e];t&&this.listeners[e].forEach(r=>{t.removeEventListener(r.event,r.listener)})}}function Q1(n){const e=n.querySelectorAll("source");[].slice.call(e).forEach(t=>{n.removeChild(t)})}function IF(n,e){const t=self.document.createElement("source");t.type="video/mp4",t.src=e,n.appendChild(t)}const PF={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},Pb=n=>String.fromCharCode(PF[n]||n),Zi=15,uo=100,DF={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},OF={17:2,18:4,21:6,22:8,23:10,19:13,20:15},NF={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},MF={25:2,26:4,29:6,30:8,31:10,27:13,28:15},FF=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class $F{constructor(){this.time=null,this.verboseLevel=0}log(e,t){if(this.verboseLevel>=e){const r=typeof t=="function"?t():t;J.log(`${this.time} [${e}] ${r}`)}}}const Ma=function(e){const t=[];for(let r=0;r<e.length;r++)t.push(e[r].toString(16));return t};class Db{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const t=["foreground","underline","italics","background","flash"];for(let r=0;r<t.length;r++){const i=t[r];e.hasOwnProperty(i)&&(this[i]=e[i])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class BF{constructor(){this.uchar=" ",this.penState=new Db}reset(){this.uchar=" ",this.penState.reset()}setChar(e,t){this.uchar=e,this.penState.copy(t)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class UF{constructor(e){this.chars=[],this.pos=0,this.currPenState=new Db,this.cueStartTime=null,this.logger=void 0;for(let t=0;t<uo;t++)this.chars.push(new BF);this.logger=e}equals(e){for(let t=0;t<uo;t++)if(!this.chars[t].equals(e.chars[t]))return!1;return!0}copy(e){for(let t=0;t<uo;t++)this.chars[t].copy(e.chars[t])}isEmpty(){let e=!0;for(let t=0;t<uo;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>uo&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=uo)}moveCursor(e){const t=this.pos+e;if(e>1)for(let r=this.pos+1;r<t+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(t)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const t=Pb(e);if(this.pos>=uo){this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1)}clearFromPos(e){let t;for(t=e;t<uo;t++)this.chars[t].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let t=!0;for(let r=0;r<uo;r++){const i=this.chars[r].uchar;i!==" "&&(t=!1),e.push(i)}return t?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}class Xm{constructor(e){this.rows=[],this.currRow=Zi-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let t=0;t<Zi;t++)this.rows.push(new UF(e));this.logger=e}reset(){for(let e=0;e<Zi;e++)this.rows[e].clear();this.currRow=Zi-1}equals(e){let t=!0;for(let r=0;r<Zi;r++)if(!this.rows[r].equals(e.rows[r])){t=!1;break}return t}copy(e){for(let t=0;t<Zi;t++)this.rows[t].copy(e.rows[t])}isEmpty(){let e=!0;for(let t=0;t<Zi;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+JSON.stringify(e));let t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(let c=0;c<Zi;c++)this.rows[c].clear();const s=this.currRow+1-this.nrRollUpRows,a=this.lastOutputScreen;if(a){const c=a.rows[s].cueStartTime,u=this.logger.time;if(c!==null&&u!==null&&c<u)for(let d=0;d<this.nrRollUpRows;d++)this.rows[t-this.nrRollUpRows+d+1].copy(a.rows[s+d])}}this.currRow=t;const r=this.rows[this.currRow];if(e.indent!==null){const s=e.indent,a=Math.max(s-1,0);r.setCursor(e.indent),e.color=r.chars[a].penState.foreground}const i={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(i)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const t=[];let r="",i=-1;for(let s=0;s<Zi;s++){const a=this.rows[s].getTextString();a&&(i=s+1,e?t.push("Row "+i+": '"+a+"'"):t.push(a.trim()))}return t.length>0&&(e?r="["+t.join(" | ")+"]":r=t.join(`
`)),r}getTextAndFormat(){return this.rows}}class J1{constructor(e,t,r){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new Xm(r),this.nonDisplayedMemory=new Xm(r),this.lastOutputScreen=new Xm(r),this.currRollUpRow=this.displayedMemory.rows[Zi-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=r}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[Zi-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let r=0;r<e.length;r++)this.writeScreen.insertChar(e[r]);const t=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>t+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{const r=Math.floor(e/2)-16,i=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=i[r]}this.logger.log(2,"MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)}outputDataUpdate(e=!1){const t=this.logger.time;t!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=t:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class Z1{constructor(e,t,r){this.channels=void 0,this.currentChannel=0,this.cmdHistory=HF(),this.logger=void 0;const i=this.logger=new $F;this.channels=[null,new J1(e,t,i),new J1(e+1,r,i)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,t){this.channels[e].setHandler(t)}addData(e,t){this.logger.time=e;for(let r=0;r<t.length;r+=2){const i=t[r]&127,s=t[r+1]&127;let a=!1,c=null;if(i===0&&s===0)continue;this.logger.log(3,()=>"["+Ma([t[r],t[r+1]])+"] -> ("+Ma([i,s])+")");const u=this.cmdHistory;if(i>=16&&i<=31){if(jF(i,s,u)){ff(null,null,u),this.logger.log(3,()=>"Repeated command ("+Ma([i,s])+") is dropped");continue}ff(i,s,this.cmdHistory),a=this.parseCmd(i,s),a||(a=this.parseMidrow(i,s)),a||(a=this.parsePAC(i,s)),a||(a=this.parseBackgroundAttributes(i,s))}else ff(null,null,u);if(!a&&(c=this.parseChars(i,s),c)){const h=this.currentChannel;h&&h>0?this.channels[h].insertChars(c):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!a&&!c&&this.logger.log(2,()=>"Couldn't parse cleaned data "+Ma([i,s])+" orig: "+Ma([t[r],t[r+1]]))}}parseCmd(e,t){const r=(e===20||e===28||e===21||e===29)&&t>=32&&t<=47,i=(e===23||e===31)&&t>=33&&t<=35;if(!(r||i))return!1;const s=e===20||e===21||e===23?1:2,a=this.channels[s];return e===20||e===21||e===28||e===29?t===32?a.ccRCL():t===33?a.ccBS():t===34?a.ccAOF():t===35?a.ccAON():t===36?a.ccDER():t===37?a.ccRU(2):t===38?a.ccRU(3):t===39?a.ccRU(4):t===40?a.ccFON():t===41?a.ccRDC():t===42?a.ccTR():t===43?a.ccRTD():t===44?a.ccEDM():t===45?a.ccCR():t===46?a.ccENM():t===47&&a.ccEOC():a.ccTO(t-32),this.currentChannel=s,!0}parseMidrow(e,t){let r=0;if((e===17||e===25)&&t>=32&&t<=47){if(e===17?r=1:r=2,r!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const i=this.channels[r];return i?(i.ccMIDROW(t),this.logger.log(3,()=>"MIDROW ("+Ma([e,t])+")"),!0):!1}return!1}parsePAC(e,t){let r;const i=(e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127,s=(e===16||e===24)&&t>=64&&t<=95;if(!(i||s))return!1;const a=e<=23?1:2;t>=64&&t<=95?r=a===1?DF[e]:NF[e]:r=a===1?OF[e]:MF[e];const c=this.channels[a];return c?(c.setPAC(this.interpretPAC(r,t)),this.currentChannel=a,!0):!1}interpretPAC(e,t){let r;const i={color:null,italics:!1,indent:null,underline:!1,row:e};return t>95?r=t-96:r=t-64,i.underline=(r&1)===1,r<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(i.italics=!0,i.color="white"):i.indent=Math.floor((r-16)/2)*4,i}parseChars(e,t){let r,i=null,s=null;if(e>=25?(r=2,s=e-8):(r=1,s=e),s>=17&&s<=19){let a;s===17?a=t+80:s===18?a=t+112:a=t+144,this.logger.log(2,()=>"Special char '"+Pb(a)+"' in channel "+r),i=[a]}else e>=32&&e<=127&&(i=t===0?[e]:[e,t]);return i&&this.logger.log(3,()=>"Char codes =  "+Ma(i).join(",")),i}parseBackgroundAttributes(e,t){const r=(e===16||e===24)&&t>=32&&t<=47,i=(e===23||e===31)&&t>=45&&t<=47;if(!(r||i))return!1;let s;const a={};e===16||e===24?(s=Math.floor((t-32)/2),a.background=FF[s],t%2===1&&(a.background=a.background+"_semi")):t===45?a.background="transparent":(a.foreground="black",t===47&&(a.underline=!0));const c=e<=23?1:2;return this.channels[c].setBkgData(a),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const t=this.channels[e];t&&t.reset()}ff(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let t=0;t<this.channels.length;t++){const r=this.channels[t];r&&r.cueSplitAtTime(e)}}}function ff(n,e,t){t.a=n,t.b=e}function jF(n,e,t){return t.a===n&&t.b===e}function HF(){return{a:null,b:null}}class hf{constructor(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,t,r){(this.startTime===null||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}var ry=function(){if(Zl!=null&&Zl.VTTCue)return self.VTTCue;const n=["","lr","rl"],e=["start","middle","end","left","right"];function t(c,u){if(typeof u!="string"||!Array.isArray(c))return!1;const d=u.toLowerCase();return~c.indexOf(d)?d:!1}function r(c){return t(n,c)}function i(c){return t(e,c)}function s(c,...u){let d=1;for(;d<arguments.length;d++){const h=arguments[d];for(const p in h)c[p]=h[p]}return c}function a(c,u,d){const h=this,p={enumerable:!0};h.hasBeenReset=!1;let g="",x=!1,v=c,S=u,T=d,_=null,C="",k=!0,O="auto",w="start",$=50,M="middle",U=50,W="middle";Object.defineProperty(h,"id",s({},p,{get:function(){return g},set:function(R){g=""+R}})),Object.defineProperty(h,"pauseOnExit",s({},p,{get:function(){return x},set:function(R){x=!!R}})),Object.defineProperty(h,"startTime",s({},p,{get:function(){return v},set:function(R){if(typeof R!="number")throw new TypeError("Start time must be set to a number.");v=R,this.hasBeenReset=!0}})),Object.defineProperty(h,"endTime",s({},p,{get:function(){return S},set:function(R){if(typeof R!="number")throw new TypeError("End time must be set to a number.");S=R,this.hasBeenReset=!0}})),Object.defineProperty(h,"text",s({},p,{get:function(){return T},set:function(R){T=""+R,this.hasBeenReset=!0}})),Object.defineProperty(h,"region",s({},p,{get:function(){return _},set:function(R){_=R,this.hasBeenReset=!0}})),Object.defineProperty(h,"vertical",s({},p,{get:function(){return C},set:function(R){const G=r(R);if(G===!1)throw new SyntaxError("An invalid or illegal string was specified.");C=G,this.hasBeenReset=!0}})),Object.defineProperty(h,"snapToLines",s({},p,{get:function(){return k},set:function(R){k=!!R,this.hasBeenReset=!0}})),Object.defineProperty(h,"line",s({},p,{get:function(){return O},set:function(R){if(typeof R!="number"&&R!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");O=R,this.hasBeenReset=!0}})),Object.defineProperty(h,"lineAlign",s({},p,{get:function(){return w},set:function(R){const G=i(R);if(!G)throw new SyntaxError("An invalid or illegal string was specified.");w=G,this.hasBeenReset=!0}})),Object.defineProperty(h,"position",s({},p,{get:function(){return $},set:function(R){if(R<0||R>100)throw new Error("Position must be between 0 and 100.");$=R,this.hasBeenReset=!0}})),Object.defineProperty(h,"positionAlign",s({},p,{get:function(){return M},set:function(R){const G=i(R);if(!G)throw new SyntaxError("An invalid or illegal string was specified.");M=G,this.hasBeenReset=!0}})),Object.defineProperty(h,"size",s({},p,{get:function(){return U},set:function(R){if(R<0||R>100)throw new Error("Size must be between 0 and 100.");U=R,this.hasBeenReset=!0}})),Object.defineProperty(h,"align",s({},p,{get:function(){return W},set:function(R){const G=i(R);if(!G)throw new SyntaxError("An invalid or illegal string was specified.");W=G,this.hasBeenReset=!0}})),h.displayState=void 0}return a.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},a}();class GF{decode(e,t){if(!e)return"";if(typeof e!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function Ob(n){function e(r,i,s,a){return(r|0)*3600+(i|0)*60+(s|0)+parseFloat(a||0)}const t=n.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return t?parseFloat(t[2])>59?e(t[2],t[3],0,t[4]):e(t[1],t[2],t[3],t[4]):null}class VF{constructor(){this.values=Object.create(null)}set(e,t){!this.get(e)&&t!==""&&(this.values[e]=t)}get(e,t,r){return r?this.has(e)?this.values[e]:t[r]:this.has(e)?this.values[e]:t}has(e){return e in this.values}alt(e,t,r){for(let i=0;i<r.length;++i)if(t===r[i]){this.set(e,t);break}}integer(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))}percent(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){const r=parseFloat(t);if(r>=0&&r<=100)return this.set(e,r),!0}return!1}}function Nb(n,e,t,r){const i=r?n.split(r):[n];for(const s in i){if(typeof i[s]!="string")continue;const a=i[s].split(t);if(a.length!==2)continue;const c=a[0],u=a[1];e(c,u)}}const Hg=new ry(0,0,""),pf=Hg.align==="middle"?"middle":"center";function zF(n,e,t){const r=n;function i(){const c=Ob(n);if(c===null)throw new Error("Malformed timestamp: "+r);return n=n.replace(/^[^\sa-zA-Z-]+/,""),c}function s(c,u){const d=new VF;Nb(c,function(g,x){let v;switch(g){case"region":for(let S=t.length-1;S>=0;S--)if(t[S].id===x){d.set(g,t[S].region);break}break;case"vertical":d.alt(g,x,["rl","lr"]);break;case"line":v=x.split(","),d.integer(g,v[0]),d.percent(g,v[0])&&d.set("snapToLines",!1),d.alt(g,v[0],["auto"]),v.length===2&&d.alt("lineAlign",v[1],["start",pf,"end"]);break;case"position":v=x.split(","),d.percent(g,v[0]),v.length===2&&d.alt("positionAlign",v[1],["start",pf,"end","line-left","line-right","auto"]);break;case"size":d.percent(g,x);break;case"align":d.alt(g,x,["start",pf,"end","left","right"]);break}},/:/,/\s/),u.region=d.get("region",null),u.vertical=d.get("vertical","");let h=d.get("line","auto");h==="auto"&&Hg.line===-1&&(h=-1),u.line=h,u.lineAlign=d.get("lineAlign","start"),u.snapToLines=d.get("snapToLines",!0),u.size=d.get("size",100),u.align=d.get("align",pf);let p=d.get("position","auto");p==="auto"&&Hg.position===50&&(p=u.align==="start"||u.align==="left"?0:u.align==="end"||u.align==="right"?100:50),u.position=p}function a(){n=n.replace(/^\s+/,"")}if(a(),e.startTime=i(),a(),n.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+r);n=n.slice(3),a(),e.endTime=i(),a(),s(n,e)}function Mb(n){return n.replace(/<br(?: \/)?>/gi,`
`)}class KF{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new GF,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const t=this;e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));function r(){let s=t.buffer,a=0;for(s=Mb(s);a<s.length&&s[a]!=="\r"&&s[a]!==`
`;)++a;const c=s.slice(0,a);return s[a]==="\r"&&++a,s[a]===`
`&&++a,t.buffer=s.slice(a),c}function i(s){Nb(s,function(a,c){},/:/)}try{let s="";if(t.state==="INITIAL"){if(!/\r\n|\n/.test(t.buffer))return this;s=r();const c=s.match(/^()?WEBVTT([ \t].*)?$/);if(!(c!=null&&c[0]))throw new Error("Malformed WebVTT signature.");t.state="HEADER"}let a=!1;for(;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(a?a=!1:s=r(),t.state){case"HEADER":/:/.test(s)?i(s):s||(t.state="ID");continue;case"NOTE":s||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(s)){t.state="NOTE";break}if(!s)continue;if(t.cue=new ry(0,0,""),t.state="CUE",s.indexOf("-->")===-1){t.cue.id=s;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{zF(s,t.cue,t.regionList)}catch{t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":{const c=s.indexOf("-->")!==-1;if(!s||c&&(a=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(t.cue===null)continue;t.cue.text&&(t.cue.text+=`
`),t.cue.text+=s}continue;case"BADCUE":s||(t.state="ID")}}}catch{t.state==="CUETEXT"&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state=t.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||e.state==="HEADER")&&(e.buffer+=`

`,e.parse()),e.state==="INITIAL"||e.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(t){e.onparsingerror&&e.onparsingerror(t)}return e.onflush&&e.onflush(),this}}const WF=/\r\n|\n\r|\n|\r/g,Qm=function(e,t,r=0){return e.slice(r,r+t.length)===t},YF=function(e){let t=parseInt(e.slice(-3));const r=parseInt(e.slice(-6,-4)),i=parseInt(e.slice(-9,-7)),s=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!Ye(t)||!Ye(r)||!Ye(i)||!Ye(s))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return t+=1e3*r,t+=60*1e3*i,t+=60*60*1e3*s,t},Jm=function(e){let t=5381,r=e.length;for(;r;)t=t*33^e.charCodeAt(--r);return(t>>>0).toString()};function iy(n,e,t){return Jm(n.toString())+Jm(e.toString())+Jm(t)}const qF=function(e,t,r){let i=e[t],s=e[i.prevCC];if(!s||!s.new&&i.new){e.ccOffset=e.presentationOffset=i.start,i.new=!1;return}for(;(a=s)!=null&&a.new;){var a;e.ccOffset+=i.start-s.start,i.new=!1,i=s,s=e[i.prevCC]}e.presentationOffset=r};function XF(n,e,t,r,i,s,a){const c=new KF,u=js(new Uint8Array(n)).trim().replace(WF,`
`).split(`
`),d=[],h=e?hF(e.baseTime,e.timescale):0;let p="00:00.000",g=0,x=0,v,S=!0;c.oncue=function(T){const _=t[r];let C=t.ccOffset;const k=(g-h)/9e4;if(_!=null&&_.new&&(x!==void 0?C=t.ccOffset=_.start:qF(t,r,k)),k){if(!e){v=new Error("Missing initPTS for VTT MPEGTS");return}C=k-t.presentationOffset}const O=T.endTime-T.startTime,w=Pi((T.startTime+C-x)*9e4,i*9e4)/9e4;T.startTime=Math.max(w,0),T.endTime=Math.max(w+O,0);const $=T.text.trim();T.text=decodeURIComponent(encodeURIComponent($)),T.id||(T.id=iy(T.startTime,T.endTime,$)),T.endTime>0&&d.push(T)},c.onparsingerror=function(T){v=T},c.onflush=function(){if(v){a(v);return}s(d)},u.forEach(T=>{if(S)if(Qm(T,"X-TIMESTAMP-MAP=")){S=!1,T.slice(16).split(",").forEach(_=>{Qm(_,"LOCAL:")?p=_.slice(6):Qm(_,"MPEGTS:")&&(g=parseInt(_.slice(7)))});try{x=YF(p)/1e3}catch(_){v=_}return}else T===""&&(S=!1);c.parse(T+`
`)}),c.flush()}const Zm="stpp.ttml.im1t",Fb=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,$b=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,QF={left:"start",center:"center",right:"end",start:"start",end:"end"};function eS(n,e,t,r){const i=St(new Uint8Array(n),["mdat"]);if(i.length===0){r(new Error("Could not parse IMSC1 mdat"));return}const s=i.map(c=>js(c)),a=fF(e.baseTime,1,e.timescale);try{s.forEach(c=>t(JF(c,a)))}catch(c){r(c)}}function JF(n,e){const i=new DOMParser().parseFromString(n,"text/xml").getElementsByTagName("tt")[0];if(!i)throw new Error("Invalid ttml");const s={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},a=Object.keys(s).reduce((p,g)=>(p[g]=i.getAttribute(`ttp:${g}`)||s[g],p),{}),c=i.getAttribute("xml:space")!=="preserve",u=tS(eg(i,"styling","style")),d=tS(eg(i,"layout","region")),h=eg(i,"body","[begin]");return[].map.call(h,p=>{const g=Bb(p,c);if(!g||!p.hasAttribute("begin"))return null;const x=ng(p.getAttribute("begin"),a),v=ng(p.getAttribute("dur"),a);let S=ng(p.getAttribute("end"),a);if(x===null)throw nS(p);if(S===null){if(v===null)throw nS(p);S=x+v}const T=new ry(x-e,S-e,g);T.id=iy(T.startTime,T.endTime,T.text);const _=d[p.getAttribute("region")],C=u[p.getAttribute("style")],k=ZF(_,C,u),{textAlign:O}=k;if(O){const w=QF[O];w&&(T.lineAlign=w),T.align=O}return $n(T,k),T}).filter(p=>p!==null)}function eg(n,e,t){const r=n.getElementsByTagName(e)[0];return r?[].slice.call(r.querySelectorAll(t)):[]}function tS(n){return n.reduce((e,t)=>{const r=t.getAttribute("xml:id");return r&&(e[r]=t),e},{})}function Bb(n,e){return[].slice.call(n.childNodes).reduce((t,r,i)=>{var s;return r.nodeName==="br"&&i?t+`
`:(s=r.childNodes)!=null&&s.length?Bb(r,e):e?t+r.textContent.trim().replace(/\s+/g," "):t+r.textContent},"")}function ZF(n,e,t){const r="http://www.w3.org/ns/ttml#styling";let i=null;const s=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],a=n!=null&&n.hasAttribute("style")?n.getAttribute("style"):null;return a&&t.hasOwnProperty(a)&&(i=t[a]),s.reduce((c,u)=>{const d=tg(e,r,u)||tg(n,r,u)||tg(i,r,u);return d&&(c[u]=d),c},{})}function tg(n,e,t){return n&&n.hasAttributeNS(e,t)?n.getAttributeNS(e,t):null}function nS(n){return new Error(`Could not parse ttml timestamp ${n}`)}function ng(n,e){if(!n)return null;let t=Ob(n);return t===null&&(Fb.test(n)?t=e4(n,e):$b.test(n)&&(t=t4(n,e))),t}function e4(n,e){const t=Fb.exec(n),r=(t[4]|0)+(t[5]|0)/e.subFrameRate;return(t[1]|0)*3600+(t[2]|0)*60+(t[3]|0)+r/e.frameRate}function t4(n,e){const t=$b.exec(n),r=Number(t[1]);switch(t[2]){case"h":return r*3600;case"m":return r*60;case"ms":return r*1e3;case"f":return r/e.frameRate;case"t":return r/e.tickRate}return r}class n4{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=iS(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(P.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(P.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(P.MANIFEST_LOADING,this.onManifestLoading,this),e.on(P.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(P.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(P.FRAG_LOADING,this.onFragLoading,this),e.on(P.FRAG_LOADED,this.onFragLoaded,this),e.on(P.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(P.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(P.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(P.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(P.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(P.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(P.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(P.MANIFEST_LOADING,this.onManifestLoading,this),e.off(P.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(P.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(P.FRAG_LOADING,this.onFragLoading,this),e.off(P.FRAG_LOADED,this.onFragLoaded,this),e.off(P.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(P.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(P.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(P.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(P.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){if(this.config.enableCEA708Captions&&(!this.cea608Parser1||!this.cea608Parser2)){const e=new hf(this,"textTrack1"),t=new hf(this,"textTrack2"),r=new hf(this,"textTrack3"),i=new hf(this,"textTrack4");this.cea608Parser1=new Z1(1,e,t),this.cea608Parser2=new Z1(3,r,i)}}addCues(e,t,r,i,s){let a=!1;for(let c=s.length;c--;){const u=s[c],d=r4(u[0],u[1],t,r);if(d>=0&&(u[0]=Math.min(u[0],t),u[1]=Math.max(u[1],r),a=!0,d/(r-t)>.5))return}if(a||s.push([t,r]),this.config.renderTextTracksNatively){const c=this.captionsTracks[e];this.Cues.newCue(c,t,r,i)}else{const c=this.Cues.newCue(null,t,r,i);this.hls.trigger(P.CUES_PARSED,{type:"captions",cues:c,track:e})}}onInitPtsFound(e,{frag:t,id:r,initPTS:i,timescale:s}){const{unparsedVttFrags:a}=this;r==="main"&&(this.initPTS[t.cc]={baseTime:i,timescale:s}),a.length&&(this.unparsedVttFrags=[],a.forEach(c=>{this.onFragLoaded(P.FRAG_LOADED,c)}))}getExistingTrack(e,t){const{media:r}=this;if(r)for(let i=0;i<r.textTracks.length;i++){const s=r.textTracks[i];if(rS(s,{name:e,lang:t,attrs:{}}))return s}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:t,captionsTracks:r,media:i}=this,{label:s,languageCode:a}=t[e],c=this.getExistingTrack(s,a);if(c)r[e]=c,Kl(r[e]),sb(r[e],i);else{const u=this.createTextTrack("captions",s,a);u&&(u[e]=!0,r[e]=u)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const t=this.captionsProperties[e];if(!t)return;const r=t.label,i={_id:e,label:r,kind:"captions",default:t.media?!!t.media.default:!1,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=i,this.hls.trigger(P.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[i]})}createTextTrack(e,t,r){const i=this.media;if(i)return i.addTextTrack(e,t,r)}onMediaAttaching(e,t){this.media=t.media,this._cleanTracks()}onMediaDetaching(){const{captionsTracks:e}=this;Object.keys(e).forEach(t=>{Kl(e[t]),delete e[t]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=iS(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const t=e.textTracks;if(t)for(let r=0;r<t.length;r++)Kl(t[r])}onSubtitleTracksUpdated(e,t){const r=t.subtitleTracks||[],i=r.some(s=>s.textCodec===Zm);if(this.config.enableWebVTT||i&&this.config.enableIMSC1){if(Ib(this.tracks,r)){this.tracks=r;return}if(this.textTracks=[],this.tracks=r,this.config.renderTextTracksNatively){const a=this.media,c=a?kf(a.textTracks):null;if(this.tracks.forEach((u,d)=>{let h;if(c){let p=null;for(let g=0;g<c.length;g++)if(c[g]&&rS(c[g],u)){p=c[g],c[g]=null;break}p&&(h=p)}if(h)Kl(h);else{const p=Ub(u);h=this.createTextTrack(p,u.name,u.lang),h&&(h.mode="disabled")}h&&this.textTracks.push(h)}),c!=null&&c.length){const u=c.filter(d=>d!==null).map(d=>d.label);u.length&&J.warn(`Media element contains unused subtitle tracks: ${u.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const a=this.tracks.map(c=>({label:c.name,kind:c.type.toLowerCase(),default:c.default,subtitleTrack:c}));this.hls.trigger(P.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:a})}}}onManifestLoaded(e,t){this.config.enableCEA708Captions&&t.captions&&t.captions.forEach(r=>{const i=/(?:CC|SERVICE)([1-4])/.exec(r.instreamId);if(!i)return;const s=`textTrack${i[1]}`,a=this.captionsProperties[s];a&&(a.label=r.name,r.lang&&(a.languageCode=r.lang),a.media=r)})}closedCaptionsForLevel(e){const t=this.hls.levels[e.level];return t==null?void 0:t.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,t){if(this.enabled&&t.frag.type===at.MAIN){var r,i;const{cea608Parser1:s,cea608Parser2:a,lastSn:c}=this,{cc:u,sn:d}=t.frag,h=(r=(i=t.part)==null?void 0:i.index)!=null?r:-1;s&&a&&(d!==c+1||d===c&&h!==this.lastPartIndex+1||u!==this.lastCc)&&(s.reset(),a.reset()),this.lastCc=u,this.lastSn=d,this.lastPartIndex=h}}onFragLoaded(e,t){const{frag:r,payload:i}=t;if(r.type===at.SUBTITLE)if(i.byteLength){const s=r.decryptdata,a="stats"in t;if(s==null||!s.encrypted||a){const c=this.tracks[r.level],u=this.vttCCs;u[r.cc]||(u[r.cc]={start:r.start,prevCC:this.prevCC,new:!0},this.prevCC=r.cc),c&&c.textCodec===Zm?this._parseIMSC1(r,i):this._parseVTTs(t)}}else this.hls.trigger(P.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,t){const r=this.hls;eS(t,this.initPTS[e.cc],i=>{this._appendCues(i,e.level),r.trigger(P.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},i=>{J.log(`Failed to parse IMSC1: ${i}`),r.trigger(P.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:i})})}_parseVTTs(e){var t;const{frag:r,payload:i}=e,{initPTS:s,unparsedVttFrags:a}=this,c=s.length-1;if(!s[r.cc]&&c===-1){a.push(e);return}const u=this.hls,d=(t=r.initSegment)!=null&&t.data?Oi(r.initSegment.data,new Uint8Array(i)):i;XF(d,this.initPTS[r.cc],this.vttCCs,r.cc,r.start,h=>{this._appendCues(h,r.level),u.trigger(P.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:r})},h=>{const p=h.message==="Missing initPTS for VTT MPEGTS";p?a.push(e):this._fallbackToIMSC1(r,i),J.log(`Failed to parse VTT cue: ${h}`),!(p&&c>r.cc)&&u.trigger(P.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:h})})}_fallbackToIMSC1(e,t){const r=this.tracks[e.level];r.textCodec||eS(t,this.initPTS[e.cc],()=>{r.textCodec=Zm,this._parseIMSC1(e,t)},()=>{r.textCodec="wvtt"})}_appendCues(e,t){const r=this.hls;if(this.config.renderTextTracksNatively){const i=this.textTracks[t];if(!i||i.mode==="disabled")return;e.forEach(s=>ob(i,s))}else{const i=this.tracks[t];if(!i)return;const s=i.default?"default":"subtitles"+t;r.trigger(P.CUES_PARSED,{type:"subtitles",cues:e,track:s})}}onFragDecrypted(e,t){const{frag:r}=t;r.type===at.SUBTITLE&&this.onFragLoaded(P.FRAG_LOADED,t)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,t){this.initCea608Parsers();const{cea608Parser1:r,cea608Parser2:i}=this;if(!this.enabled||!r||!i)return;const{frag:s,samples:a}=t;if(!(s.type===at.MAIN&&this.closedCaptionsForLevel(s)==="NONE"))for(let c=0;c<a.length;c++){const u=a[c].bytes;if(u){const d=this.extractCea608Data(u);r.addData(a[c].pts,d[0]),i.addData(a[c].pts,d[1])}}}onBufferFlushing(e,{startOffset:t,endOffset:r,endOffsetSubtitles:i,type:s}){const{media:a}=this;if(!(!a||a.currentTime<r)){if(!s||s==="video"){const{captionsTracks:c}=this;Object.keys(c).forEach(u=>Ng(c[u],t,r))}if(this.config.renderTextTracksNatively&&t===0&&i!==void 0){const{textTracks:c}=this;Object.keys(c).forEach(u=>Ng(c[u],t,i))}}}extractCea608Data(e){const t=[[],[]],r=e[0]&31;let i=2;for(let s=0;s<r;s++){const a=e[i++],c=127&e[i++],u=127&e[i++];if(c===0&&u===0)continue;if((4&a)!==0){const h=3&a;(h===0||h===1)&&(t[h].push(c),t[h].push(u))}}return t}}function Ub(n){return n.characteristics&&/transcribes-spoken-dialog/gi.test(n.characteristics)&&/describes-music-and-sound/gi.test(n.characteristics)?"captions":"subtitles"}function rS(n,e){return!!n&&n.kind===Ub(e)&&jg(e,n)}function r4(n,e,t,r){return Math.min(e,r)-Math.max(n,t)}function iS(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}class sy{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(P.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(P.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(P.MANIFEST_PARSED,this.onManifestParsed,this),e.on(P.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(P.BUFFER_CODECS,this.onBufferCodecs,this),e.on(P.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(P.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(P.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(P.MANIFEST_PARSED,this.onManifestParsed,this),e.off(P.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(P.BUFFER_CODECS,this.onBufferCodecs,this),e.off(P.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,t){const r=this.hls.levels[t.droppedLevel];this.isLevelAllowed(r)&&this.restrictedLevels.push({bitrate:r.bitrate,height:r.height,width:r.width})}onMediaAttaching(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,t){const r=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,r.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onLevelsUpdated(e,t){this.timer&&Ye(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onMediaDetaching(){this.stopCapping()}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}const e=this.hls.levels;if(e.length){const t=this.hls,r=this.getMaxLevel(e.length-1);r!==this.autoLevelCapping&&J.log(`Setting autoLevelCapping to ${r}: ${e[r].height}p@${e[r].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),t.autoLevelCapping=r,t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}getMaxLevel(e){const t=this.hls.levels;if(!t.length)return-1;const r=t.filter((i,s)=>this.isLevelAllowed(i)&&s<=e);return this.clientRect=null,sy.getMaxLevelByMediaSize(r,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,t={width:0,height:0};if(e){const r=e.getBoundingClientRect();t.width=r.width,t.height=r.height,!t.width&&!t.height&&(t.width=r.right-r.left||e.width||0,t.height=r.bottom-r.top||e.height||0)}return this.clientRect=t,t}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch{}return e}isLevelAllowed(e){return!this.restrictedLevels.some(r=>e.bitrate===r.bitrate&&e.width===r.width&&e.height===r.height)}static getMaxLevelByMediaSize(e,t,r){if(!(e!=null&&e.length))return-1;const i=(c,u)=>u?c.width!==u.width||c.height!==u.height:!0;let s=e.length-1;const a=Math.max(t,r);for(let c=0;c<e.length;c+=1){const u=e[c];if((u.width>=a||u.height>=a)&&i(u,e[c+1])){s=c;break}}return s}}class i4{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(P.MEDIA_ATTACHING,this.onMediaAttaching,this)}unregisterListeners(){this.hls.off(P.MEDIA_ATTACHING,this.onMediaAttaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,t){const r=this.hls.config;if(r.capLevelOnFPSDrop){const i=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=i,i&&typeof i.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),r.fpsDroppedMonitoringPeriod)}}checkFPS(e,t,r){const i=performance.now();if(t){if(this.lastTime){const s=i-this.lastTime,a=r-this.lastDroppedFrames,c=t-this.lastDecodedFrames,u=1e3*a/s,d=this.hls;if(d.trigger(P.FPS_DROP,{currentDropped:a,currentDecoded:c,totalDroppedFrames:r}),u>0&&a>d.config.fpsDroppedMonitoringThreshold*c){let h=d.currentLevel;J.warn("drop FPS ratio greater than max allowed value for currentLevel: "+h),h>0&&(d.autoLevelCapping===-1||d.autoLevelCapping>=h)&&(h=h-1,d.trigger(P.FPS_DROP_LEVEL_CAPPING,{level:h,droppedLevel:d.currentLevel}),d.autoLevelCapping=h,this.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=r,this.lastDecodedFrames=t}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}const mf="[eme]";class Ql{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=Ql.CDMCleanupPromise?[Ql.CDMCleanupPromise]:[],this.debug=J.debug.bind(J,mf),this.log=J.log.bind(J,mf),this.warn=J.warn.bind(J,mf),this.error=J.error.bind(J,mf),this.onMediaEncrypted=t=>{const{initDataType:r,initData:i}=t,s=`"${t.type}" event: init data type: "${r}"`;if(this.debug(s),i!==null){if(!this.keyFormatPromise){let a=Object.keys(this.keySystemAccessPromises);a.length||(a=sf(this.config));const c=a.map($m).filter(u=>!!u);this.keyFormatPromise=this.getKeyFormatPromise(c)}this.keyFormatPromise.then(a=>{const c=Mm(a);let u,d;if(r==="sinf"){if(c!==Zt.FAIRPLAY){this.warn(`Ignoring unexpected "${t.type}" event with init data type: "${r}" for selected key-system ${c}`);return}const v=Kn(new Uint8Array(i));try{const S=V0(JSON.parse(v).sinf),T=eb(S);if(!T)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");u=T.subarray(8,24),d=Zt.FAIRPLAY}catch(S){this.warn(`${s} Failed to parse sinf: ${S}`);return}}else{if(c!==Zt.WIDEVINE&&c!==Zt.PLAYREADY){this.warn(`Ignoring unexpected "${t.type}" event with init data type: "${r}" for selected key-system ${c}`);return}const v=NN(i),S=v.filter(_=>!!_.systemId&&Fm(_.systemId)===c);S.length>1&&this.warn(`${s} Using first of ${S.length} pssh found for selected key-system ${c}`);const T=S[0];if(!T){v.length===0||v.some(_=>!_.systemId)?this.warn(`${s} contains incomplete or invalid pssh data`):this.log(`ignoring ${s} for ${v.map(_=>Fm(_.systemId)).join(",")} pssh data in favor of playlist keys`);return}if(d=Fm(T.systemId),T.version===0&&T.data)if(d===Zt.WIDEVINE){const _=T.data.length-22;u=T.data.subarray(_,_+16)}else d===Zt.PLAYREADY&&(u=KT(T.data))}if(!d||!u){this.log(`Unable to handle ${s} with key-system ${c}`);return}const h=ks.hexDump(u),{keyIdToKeySessionPromise:p,mediaKeySessions:g}=this;let x=p[h];for(let v=0;v<g.length;v++){const S=g[v],T=S.decryptdata;if(!T.keyId)continue;const _=ks.hexDump(T.keyId);if(h===_||T.uri.replace(/-/g,"").indexOf(h)!==-1){if(x=p[_],T.pssh)break;delete p[_],T.pssh=new Uint8Array(i),T.keyId=u,x=p[h]=x.then(()=>this.generateRequestWithPreferredKeySession(S,r,i,"encrypted-event-key-match")),x.catch(C=>this.handleError(C));break}}if(!x){if(d!==c){this.log(`Ignoring "${s}" with ${d} init data for selected key-system ${c}`);return}x=p[h]=this.getKeySystemSelectionPromise([d]).then(({keySystem:v,mediaKeys:S})=>{var T;this.throwIfDestroyed();const _=new vu("ISO-23001-7",h,(T=$m(v))!=null?T:"");return _.pssh=new Uint8Array(i),_.keyId=u,this.attemptSetMediaKeys(v,S).then(()=>{this.throwIfDestroyed();const C=this.createMediaKeySessionContext({decryptdata:_,keySystem:v,mediaKeys:S});return this.generateRequestWithPreferredKeySession(C,r,i,"encrypted-event-no-match")})}),x.catch(v=>this.handleError(v))}})}},this.onWaitingForKey=t=>{this.log(`"${t.type}" event`)},this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.unregisterListeners(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onMediaEncrypted=this.onWaitingForKey=null}registerListeners(){this.hls.on(P.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(P.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(P.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(P.MANIFEST_LOADED,this.onManifestLoaded,this)}unregisterListeners(){this.hls.off(P.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(P.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(P.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(P.MANIFEST_LOADED,this.onManifestLoaded,this)}getLicenseServerUrl(e){const{drmSystems:t,widevineLicenseUrl:r}=this.config,i=t[e];if(i)return i.licenseUrl;if(e===Zt.WIDEVINE&&r)return r}getLicenseServerUrlOrThrow(e){const t=this.getLicenseServerUrl(e);if(t===void 0)throw new Error(`no license server URL configured for key-system "${e}"`);return t}getServerCertificateUrl(e){const{drmSystems:t}=this.config,r=t[e];if(r)return r.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const t=this.hls.levels,r=(a,c,u)=>!!a&&u.indexOf(a)===c,i=t.map(a=>a.audioCodec).filter(r),s=t.map(a=>a.videoCodec).filter(r);return i.length+s.length===0&&s.push("avc1.42e01e"),new Promise((a,c)=>{const u=d=>{const h=d.shift();this.getMediaKeysPromise(h,i,s).then(p=>a({keySystem:h,mediaKeys:p})).catch(p=>{d.length?u(d):p instanceof ki?c(p):c(new ki({type:ft.KEY_SYSTEM_ERROR,details:le.KEY_SYSTEM_NO_ACCESS,error:p,fatal:!0},p.message))})};u(e)})}requestMediaKeySystemAccess(e,t){const{requestMediaKeySystemAccessFunc:r}=this.config;if(typeof r!="function"){let i=`Configured requestMediaKeySystemAccess is not a function ${r}`;return zT===null&&self.location.protocol==="http:"&&(i=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(i))}return r(e,t)}getMediaKeysPromise(e,t,r){const i=uN(e,t,r,this.config.drmSystemOptions),s=this.keySystemAccessPromises[e];let a=s==null?void 0:s.keySystemAccess;if(!a){this.log(`Requesting encrypted media "${e}" key-system access with config: ${JSON.stringify(i)}`),a=this.requestMediaKeySystemAccess(e,i);const c=this.keySystemAccessPromises[e]={keySystemAccess:a};return a.catch(u=>{this.log(`Failed to obtain access to key-system "${e}": ${u}`)}),a.then(u=>{this.log(`Access for key-system "${u.keySystem}" obtained`);const d=this.fetchServerCertificate(e);return this.log(`Create media-keys for "${e}"`),c.mediaKeys=u.createMediaKeys().then(h=>(this.log(`Media-keys created for "${e}"`),d.then(p=>p?this.setMediaKeysServerCertificate(h,e,p):h))),c.mediaKeys.catch(h=>{this.error(`Failed to create media-keys for "${e}"}: ${h}`)}),c.mediaKeys})}return a.then(()=>s.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:t,mediaKeys:r}){this.log(`Creating key-system session "${t}" keyId: ${ks.hexDump(e.keyId||[])}`);const i=r.createSession(),s={decryptdata:e,keySystem:t,mediaKeys:r,mediaKeysSession:i,keyStatus:"status-pending"};return this.mediaKeySessions.push(s),s}renewKeySession(e){const t=e.decryptdata;if(t.pssh){const r=this.createMediaKeySessionContext(e),i=this.getKeyIdString(t),s="cenc";this.keyIdToKeySessionPromise[i]=this.generateRequestWithPreferredKeySession(r,s,t.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}getKeyIdString(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(e.keyId===null)throw new Error("keyId is null");return ks.hexDump(e.keyId)}updateKeySession(e,t){var r;const i=e.mediaKeysSession;return this.log(`Updating key-session "${i.sessionId}" for keyID ${ks.hexDump(((r=e.decryptdata)==null?void 0:r.keyId)||[])}
      } (data length: ${t&&t.byteLength})`),i.update(t)}selectKeySystemFormat(e){const t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${t.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise}getKeyFormatPromise(e){return new Promise((t,r)=>{const i=sf(this.config),s=e.map(Mm).filter(a=>!!a&&i.indexOf(a)!==-1);return this.getKeySystemSelectionPromise(s).then(({keySystem:a})=>{const c=$m(a);c?t(c):r(new Error(`Unable to find format for key-system "${a}"`))}).catch(r)})}loadKey(e){const t=e.keyInfo.decryptdata,r=this.getKeyIdString(t),i=`(keyId: ${r} format: "${t.keyFormat}" method: ${t.method} uri: ${t.uri})`;this.log(`Starting session for key ${i}`);let s=this.keyIdToKeySessionPromise[r];return s||(s=this.keyIdToKeySessionPromise[r]=this.getKeySystemForKeyPromise(t).then(({keySystem:a,mediaKeys:c})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${i}`),this.attemptSetMediaKeys(a,c).then(()=>{this.throwIfDestroyed();const u=this.createMediaKeySessionContext({keySystem:a,mediaKeys:c,decryptdata:t});return this.generateRequestWithPreferredKeySession(u,"cenc",t.pssh,"playlist-key")}))),s.catch(a=>this.handleError(a))),s}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e){this.hls&&(this.error(e.message),e instanceof ki?this.hls.trigger(P.ERROR,e.data):this.hls.trigger(P.ERROR,{type:ft.KEY_SYSTEM_ERROR,details:le.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))}getKeySystemForKeyPromise(e){const t=this.getKeyIdString(e),r=this.keyIdToKeySessionPromise[t];if(!r){const i=Mm(e.keyFormat),s=i?[i]:sf(this.config);return this.attemptKeySystemAccess(s)}return r}getKeySystemSelectionPromise(e){if(e.length||(e=sf(this.config)),e.length===0)throw new ki({type:ft.KEY_SYSTEM_ERROR,details:le.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${JSON.stringify({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}attemptSetMediaKeys(e,t){const r=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const i=Promise.all(r).then(()=>{if(!this.media)throw new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(t)});return this.setMediaKeysQueue.push(i),i.then(()=>{this.log(`Media-keys set for "${e}"`),r.push(i),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(s=>r.indexOf(s)===-1)})}generateRequestWithPreferredKeySession(e,t,r,i){var s,a;const c=(s=this.config.drmSystems)==null||(a=s[e.keySystem])==null?void 0:a.generateRequest;if(c)try{const v=c.call(this.hls,t,r,e);if(!v)throw new Error("Invalid response from configured generateRequest filter");t=v.initDataType,r=e.decryptdata.pssh=v.initData?new Uint8Array(v.initData):null}catch(v){var u;if(this.warn(v.message),(u=this.hls)!=null&&u.config.debug)throw v}if(r===null)return this.log(`Skipping key-session request for "${i}" (no initData)`),Promise.resolve(e);const d=this.getKeyIdString(e.decryptdata);this.log(`Generating key-session request for "${i}": ${d} (init data type: ${t} length: ${r?r.byteLength:null})`);const h=new ny,p=e._onmessage=v=>{const S=e.mediaKeysSession;if(!S){h.emit("error",new Error("invalid state"));return}const{messageType:T,message:_}=v;this.log(`"${T}" message event for session "${S.sessionId}" message size: ${_.byteLength}`),T==="license-request"||T==="license-renewal"?this.renewLicense(e,_).catch(C=>{this.handleError(C),h.emit("error",C)}):T==="license-release"?e.keySystem===Zt.FAIRPLAY&&(this.updateKeySession(e,Dg("acknowledged")),this.removeSession(e)):this.warn(`unhandled media key message type "${T}"`)},g=e._onkeystatuseschange=v=>{if(!e.mediaKeysSession){h.emit("error",new Error("invalid state"));return}this.onKeyStatusChange(e);const T=e.keyStatus;h.emit("keyStatus",T),T==="expired"&&(this.warn(`${e.keySystem} expired for key ${d}`),this.renewKeySession(e))};e.mediaKeysSession.addEventListener("message",p),e.mediaKeysSession.addEventListener("keystatuseschange",g);const x=new Promise((v,S)=>{h.on("error",S),h.on("keyStatus",T=>{T.startsWith("usable")?v():T==="output-restricted"?S(new ki({type:ft.KEY_SYSTEM_ERROR,details:le.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):T==="internal-error"?S(new ki({type:ft.KEY_SYSTEM_ERROR,details:le.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${T}"`)):T==="expired"?S(new Error("key expired while generating request")):this.warn(`unhandled key status change "${T}"`)})});return e.mediaKeysSession.generateRequest(t,r).then(()=>{var v;this.log(`Request generated for key-session "${(v=e.mediaKeysSession)==null?void 0:v.sessionId}" keyId: ${d}`)}).catch(v=>{throw new ki({type:ft.KEY_SYSTEM_ERROR,details:le.KEY_SYSTEM_NO_SESSION,error:v,fatal:!1},`Error generating key-session request: ${v}`)}).then(()=>x).catch(v=>{throw h.removeAllListeners(),this.removeSession(e),v}).then(()=>(h.removeAllListeners(),e))}onKeyStatusChange(e){e.mediaKeysSession.keyStatuses.forEach((t,r)=>{this.log(`key status change "${t}" for keyStatuses keyId: ${ks.hexDump("buffer"in r?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):new Uint8Array(r))} session keyId: ${ks.hexDump(new Uint8Array(e.decryptdata.keyId||[]))} uri: ${e.decryptdata.uri}`),e.keyStatus=t})}fetchServerCertificate(e){const t=this.config,r=t.loader,i=new r(t),s=this.getServerCertificateUrl(e);return s?(this.log(`Fetching server certificate for "${e}"`),new Promise((a,c)=>{const u={responseType:"arraybuffer",url:s},d=t.certLoadPolicy.default,h={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},p={onSuccess:(g,x,v,S)=>{a(g.data)},onError:(g,x,v,S)=>{c(new ki({type:ft.KEY_SYSTEM_ERROR,details:le.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:v,response:or({url:u.url,data:void 0},g)},`"${e}" certificate request failed (${s}). Status: ${g.code} (${g.text})`))},onTimeout:(g,x,v)=>{c(new ki({type:ft.KEY_SYSTEM_ERROR,details:le.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:v,response:{url:u.url,data:void 0}},`"${e}" certificate request timed out (${s})`))},onAbort:(g,x,v)=>{c(new Error("aborted"))}};i.load(u,h,p)})):Promise.resolve()}setMediaKeysServerCertificate(e,t,r){return new Promise((i,s)=>{e.setServerCertificate(r).then(a=>{this.log(`setServerCertificate ${a?"success":"not supported by CDM"} (${r==null?void 0:r.byteLength}) on "${t}"`),i(e)}).catch(a=>{s(new ki({type:ft.KEY_SYSTEM_ERROR,details:le.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:a,fatal:!0},a.message))})})}renewLicense(e,t){return this.requestLicense(e,new Uint8Array(t)).then(r=>this.updateKeySession(e,new Uint8Array(r)).catch(i=>{throw new ki({type:ft.KEY_SYSTEM_ERROR,details:le.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:i,fatal:!0},i.message)}))}unpackPlayReadyKeyMessage(e,t){const r=String.fromCharCode.apply(null,new Uint16Array(t.buffer));if(!r.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),t;const i=new DOMParser().parseFromString(r,"application/xml"),s=i.querySelectorAll("HttpHeader");if(s.length>0){let h;for(let p=0,g=s.length;p<g;p++){var a,c;h=s[p];const x=(a=h.querySelector("name"))==null?void 0:a.textContent,v=(c=h.querySelector("value"))==null?void 0:c.textContent;x&&v&&e.setRequestHeader(x,v)}}const u=i.querySelector("Challenge"),d=u==null?void 0:u.textContent;if(!d)throw new Error("Cannot find <Challenge> in key message");return Dg(atob(d))}setupLicenseXHR(e,t,r,i){const s=this.config.licenseXhrSetup;return s?Promise.resolve().then(()=>{if(!r.decryptdata)throw new Error("Key removed");return s.call(this.hls,e,t,r,i)}).catch(a=>{if(!r.decryptdata)throw a;return e.open("POST",t,!0),s.call(this.hls,e,t,r,i)}).then(a=>(e.readyState||e.open("POST",t,!0),{xhr:e,licenseChallenge:a||i})):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:i}))}requestLicense(e,t){const r=this.config.keyLoadPolicy.default;return new Promise((i,s)=>{const a=this.getLicenseServerUrlOrThrow(e.keySystem);this.log(`Sending license request to URL: ${a}`);const c=new XMLHttpRequest;c.responseType="arraybuffer",c.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return s(new Error("invalid state"));if(c.readyState===4)if(c.status===200){this._requestLicenseFailureCount=0;let u=c.response;this.log(`License received ${u instanceof ArrayBuffer?u.byteLength:u}`);const d=this.config.licenseResponseCallback;if(d)try{u=d.call(this.hls,c,a,e)}catch(h){this.error(h)}i(u)}else{const u=r.errorRetry,d=u?u.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>d||c.status>=400&&c.status<500)s(new ki({type:ft.KEY_SYSTEM_ERROR,details:le.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:c,response:{url:a,data:void 0,code:c.status,text:c.statusText}},`License Request XHR failed (${a}). Status: ${c.status} (${c.statusText})`));else{const h=d-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${h} attempts left`),this.requestLicense(e,t).then(i,s)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=c,this.setupLicenseXHR(c,a,e,t).then(({xhr:u,licenseChallenge:d})=>{e.keySystem==Zt.PLAYREADY&&(d=this.unpackPlayReadyKeyMessage(u,d)),u.send(d)})})}onMediaAttached(e,t){if(!this.config.emeEnabled)return;const r=t.media;this.media=r,r.removeEventListener("encrypted",this.onMediaEncrypted),r.removeEventListener("waitingforkey",this.onWaitingForKey),r.addEventListener("encrypted",this.onMediaEncrypted),r.addEventListener("waitingforkey",this.onWaitingForKey)}onMediaDetached(){const e=this.media,t=this.mediaKeySessions;e&&(e.removeEventListener("encrypted",this.onMediaEncrypted),e.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},vu.clearKeyUriToKeyIdMap();const r=t.length;Ql.CDMCleanupPromise=Promise.all(t.map(i=>this.removeSession(i)).concat(e==null?void 0:e.setMediaKeys(null).catch(i=>{this.log(`Could not clear media keys: ${i}`)}))).then(()=>{r&&(this.log("finished closing key sessions and clearing media keys"),t.length=0)}).catch(i=>{this.log(`Could not close sessions and clear media keys: ${i}`)})}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(e,{sessionKeys:t}){if(!(!t||!this.config.emeEnabled)&&!this.keyFormatPromise){const r=t.reduce((i,s)=>(i.indexOf(s.keyFormat)===-1&&i.push(s.keyFormat),i),[]);this.log(`Selecting key-system from session-keys ${r.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(r)}}removeSession(e){const{mediaKeysSession:t,licenseXhr:r}=e;if(t){this.log(`Remove licenses and keys and close session ${t.sessionId}`),e._onmessage&&(t.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(t.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),r&&r.readyState!==XMLHttpRequest.DONE&&r.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const i=this.mediaKeySessions.indexOf(e);return i>-1&&this.mediaKeySessions.splice(i,1),t.remove().catch(s=>{this.log(`Could not remove session: ${s}`)}).then(()=>t.close()).catch(s=>{this.log(`Could not close session: ${s}`)})}}}Ql.CDMCleanupPromise=void 0;class ki extends Error{constructor(e,t){super(t),this.data=void 0,e.error||(e.error=new Error(t)),this.data=e,e.err=e.error}}var wr;(function(n){n.MANIFEST="m",n.AUDIO="a",n.VIDEO="v",n.MUXED="av",n.INIT="i",n.CAPTION="c",n.TIMED_TEXT="tt",n.KEY="k",n.OTHER="o"})(wr||(wr={}));var Gg;(function(n){n.DASH="d",n.HLS="h",n.SMOOTH="s",n.OTHER="o"})(Gg||(Gg={}));var ja;(function(n){n.OBJECT="CMCD-Object",n.REQUEST="CMCD-Request",n.SESSION="CMCD-Session",n.STATUS="CMCD-Status"})(ja||(ja={}));const s4={[ja.OBJECT]:["br","d","ot","tb"],[ja.REQUEST]:["bl","dl","mtp","nor","nrr","su"],[ja.SESSION]:["cid","pr","sf","sid","st","v"],[ja.STATUS]:["bs","rtp"]};class nc{constructor(e,t){this.value=void 0,this.params=void 0,Array.isArray(e)&&(e=e.map(r=>r instanceof nc?r:new nc(r))),this.value=e,this.params=t}}class jb{constructor(e){this.description=void 0,this.description=e}}const o4="Dict";function a4(n){return Array.isArray(n)?JSON.stringify(n):n instanceof Map?"Map{}":n instanceof Set?"Set{}":typeof n=="object"?JSON.stringify(n):String(n)}function l4(n,e,t,r){return new Error(`failed to ${n} "${a4(e)}" as ${t}`,{cause:r})}const sS="Bare Item",c4="Boolean",u4="Byte Sequence",d4="Decimal",f4="Integer";function h4(n){return n<-999999999999999||999999999999999<n}const p4=/[\x00-\x1f\x7f]+/,m4="Token",g4="Key";function Gs(n,e,t){return l4("serialize",n,e,t)}function y4(n){if(typeof n!="boolean")throw Gs(n,c4);return n?"?1":"?0"}function v4(n){return btoa(String.fromCharCode(...n))}function x4(n){if(ArrayBuffer.isView(n)===!1)throw Gs(n,u4);return`:${v4(n)}:`}function Hb(n){if(h4(n))throw Gs(n,f4);return n.toString()}function S4(n){return`@${Hb(n.getTime()/1e3)}`}function Gb(n,e){if(n<0)return-Gb(-n,e);const t=Math.pow(10,e);if(Math.abs(n*t%1-.5)<Number.EPSILON){const i=Math.floor(n*t);return(i%2===0?i:i+1)/t}else return Math.round(n*t)/t}function E4(n){const e=Gb(n,3);if(Math.floor(Math.abs(e)).toString().length>12)throw Gs(n,d4);const t=e.toString();return t.includes(".")?t:`${t}.0`}const T4="String";function b4(n){if(p4.test(n))throw Gs(n,T4);return`"${n.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function w4(n){return n.description||n.toString().slice(7,-1)}function oS(n){const e=w4(n);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(e)===!1)throw Gs(e,m4);return e}function Vg(n){switch(typeof n){case"number":if(!Ye(n))throw Gs(n,sS);return Number.isInteger(n)?Hb(n):E4(n);case"string":return b4(n);case"symbol":return oS(n);case"boolean":return y4(n);case"object":if(n instanceof Date)return S4(n);if(n instanceof Uint8Array)return x4(n);if(n instanceof jb)return oS(n);default:throw Gs(n,sS)}}function zg(n){if(/^[a-z*][a-z0-9\-_.*]*$/.test(n)===!1)throw Gs(n,g4);return n}function oy(n){return n==null?"":Object.entries(n).map(([e,t])=>t===!0?`;${zg(e)}`:`;${zg(e)}=${Vg(t)}`).join("")}function Vb(n){return n instanceof nc?`${Vg(n.value)}${oy(n.params)}`:Vg(n)}function _4(n){return`(${n.value.map(Vb).join(" ")})${oy(n.params)}`}function L4(n,e={whitespace:!0}){if(typeof n!="object")throw Gs(n,o4);const t=n instanceof Map?n.entries():Object.entries(n),r=e!=null&&e.whitespace?" ":"";return Array.from(t).map(([i,s])=>{s instanceof nc||(s=new nc(s));let a=zg(i);return s.value===!0?a+=oy(s.params):(a+="=",Array.isArray(s.value)?a+=_4(s):a+=Vb(s)),a}).join(`,${r}`)}function C4(n,e){return L4(n,e)}const R4=n=>n==="ot"||n==="sf"||n==="st",A4=n=>typeof n=="number"?Ye(n):n!=null&&n!==""&&n!==!1;function k4(n,e){const t=new URL(n),r=new URL(e);if(t.origin!==r.origin)return n;const i=t.pathname.split("/").slice(1),s=r.pathname.split("/").slice(1,-1);for(;i[0]===s[0];)i.shift(),s.shift();for(;s.length;)s.shift(),i.unshift("..");return i.join("/")}function I4(){try{return crypto.randomUUID()}catch{try{const e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}catch{let t=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,i=>{const s=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(i=="x"?s:s&3|8).toString(16)})}}}const Mf=n=>Math.round(n),P4=(n,e)=>(e!=null&&e.baseUrl&&(n=k4(n,e.baseUrl)),encodeURIComponent(n)),gf=n=>Mf(n/100)*100,D4={br:Mf,d:Mf,bl:gf,dl:gf,mtp:gf,nor:P4,rtp:gf,tb:Mf};function O4(n,e){const t={};if(n==null||typeof n!="object")return t;const r=Object.keys(n).sort(),i=$n({},D4,e==null?void 0:e.formatters),s=e==null?void 0:e.filter;return r.forEach(a=>{if(s!=null&&s(a))return;let c=n[a];const u=i[a];u&&(c=u(c,e)),!(a==="v"&&c===1)&&(a=="pr"&&c===1||A4(c)&&(R4(a)&&typeof c=="string"&&(c=new jb(c)),t[a]=c))}),t}function zb(n,e={}){return n?C4(O4(n,e),$n({whitespace:!1},e)):""}function N4(n,e={}){if(!n)return{};const t=Object.entries(n),r=Object.entries(s4).concat(Object.entries((e==null?void 0:e.customHeaderMap)||{})),i=t.reduce((s,a)=>{var c,u;const[d,h]=a,p=((c=r.find(g=>g[1].includes(d)))==null?void 0:c[0])||ja.REQUEST;return(u=s[p])!=null||(s[p]={}),s[p][d]=h,s},{});return Object.entries(i).reduce((s,[a,c])=>(s[a]=zb(c,e),s),{})}function M4(n,e,t){return $n(n,N4(e,t))}const F4="CMCD";function $4(n,e={}){if(!n)return"";const t=zb(n,e);return`${F4}=${encodeURIComponent(t)}`}const aS=/CMCD=[^&#]+/;function B4(n,e,t){const r=$4(e,t);if(!r)return n;if(aS.test(n))return n.replace(aS,r);const i=n.includes("?")?"&":"?";return`${n}${i}${r}`}class U4{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=i=>{try{this.apply(i,{ot:wr.MANIFEST,su:!this.initialized})}catch(s){J.warn("Could not generate manifest CMCD data.",s)}},this.applyFragmentData=i=>{try{const s=i.frag,a=this.hls.levels[s.level],c=this.getObjectType(s),u={d:s.duration*1e3,ot:c};(c===wr.VIDEO||c===wr.AUDIO||c==wr.MUXED)&&(u.br=a.bitrate/1e3,u.tb=this.getTopBandwidth(c)/1e3,u.bl=this.getBufferLength(c)),this.apply(i,u)}catch(s){J.warn("Could not generate segment CMCD data.",s)}},this.hls=e;const t=this.config=e.config,{cmcd:r}=t;r!=null&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=r.sessionId||I4(),this.cid=r.contentId,this.useHeaders=r.useHeaders===!0,this.includeKeys=r.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(P.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(P.MEDIA_DETACHED,this.onMediaDetached,this),e.on(P.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(P.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(P.MEDIA_DETACHED,this.onMediaDetached,this),e.off(P.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=null}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,t){var r,i;this.audioBuffer=(r=t.tracks.audio)==null?void 0:r.buffer,this.videoBuffer=(i=t.tracks.video)==null?void 0:i.buffer}createData(){var e;return{v:1,sf:Gg.HLS,sid:this.sid,cid:this.cid,pr:(e=this.media)==null?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,t={}){$n(t,this.createData());const r=t.ot===wr.INIT||t.ot===wr.VIDEO||t.ot===wr.MUXED;this.starved&&r&&(t.bs=!0,t.su=!0,this.starved=!1),t.su==null&&(t.su=this.buffering);const{includeKeys:i}=this;i&&(t=Object.keys(t).reduce((s,a)=>(i.includes(a)&&(s[a]=t[a]),s),{})),this.useHeaders?(e.headers||(e.headers={}),M4(e.headers,t)):e.url=B4(e.url,t)}getObjectType(e){const{type:t}=e;if(t==="subtitle")return wr.TIMED_TEXT;if(e.sn==="initSegment")return wr.INIT;if(t==="audio")return wr.AUDIO;if(t==="main")return this.hls.audioTracks.length?wr.VIDEO:wr.MUXED}getTopBandwidth(e){let t=0,r;const i=this.hls;if(e===wr.AUDIO)r=i.audioTracks;else{const s=i.maxAutoLevel,a=s>-1?s+1:i.levels.length;r=i.levels.slice(0,a)}for(const s of r)s.bitrate>t&&(t=s.bitrate);return t>0?t:NaN}getBufferLength(e){const t=this.hls.media,r=e===wr.AUDIO?this.audioBuffer:this.videoBuffer;return!r||!t?NaN:mn.bufferInfo(r,t.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:e}=this.config,t=this.applyPlaylistData,r=e||this.config.loader;return class{constructor(s){this.loader=void 0,this.loader=new r(s)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(s,a,c){t(s),this.loader.load(s,a,c)}}}createFragmentLoader(){const{fLoader:e}=this.config,t=this.applyFragmentData,r=e||this.config.loader;return class{constructor(s){this.loader=void 0,this.loader=new r(s)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(s,a,c){t(s),this.loader.load(s,a,c)}}}}const j4=3e5;class H4{constructor(e){this.hls=void 0,this.log=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this.pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.log=J.log.bind(J,"[content-steering]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(P.MANIFEST_LOADING,this.onManifestLoading,this),e.on(P.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(P.MANIFEST_PARSED,this.onManifestParsed,this),e.on(P.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(P.MANIFEST_LOADING,this.onManifestLoading,this),e.off(P.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(P.MANIFEST_PARSED,this.onManifestParsed,this),e.off(P.ERROR,this.onError,this))}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=this.timeToLoad*1e3-(performance.now()-this.updated);if(e>0){this.scheduleRefresh(this.uri,e);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){this.reloadTimer!==-1&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const t=this.levels;t&&(this.levels=t.filter(r=>r!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,t){const{contentSteering:r}=t;r!==null&&(this.pathwayId=r.pathwayId,this.uri=r.uri,this.started&&this.startLoad())}onManifestParsed(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks}onError(e,t){const{errorAction:r}=t;if((r==null?void 0:r.action)===hr.SendAlternateToPenaltyBox&&r.flags===Ji.MoveAllAlternatesMatchingHost){const i=this.levels;let s=this.pathwayPriority,a=this.pathwayId;if(t.context){const{groupId:c,pathwayId:u,type:d}=t.context;c&&i?a=this.getPathwayForGroupId(c,d,a):u&&(a=u)}a in this.penalizedPathways||(this.penalizedPathways[a]=performance.now()),!s&&i&&(s=i.reduce((c,u)=>(c.indexOf(u.pathwayId)===-1&&c.push(u.pathwayId),c),[])),s&&s.length>1&&(this.updatePathwayPriority(s),r.resolved=this.pathwayId!==a),r.resolved||J.warn(`Could not resolve ${t.details} ("${t.error.message}") with content-steering for Pathway: ${a} levels: ${i&&i.length} priorities: ${JSON.stringify(s)} penalized: ${JSON.stringify(this.penalizedPathways)}`)}}filterParsedLevels(e){this.levels=e;let t=this.getLevelsForPathway(this.pathwayId);if(t.length===0){const r=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${r}"`),t=this.getLevelsForPathway(r),this.pathwayId=r}return t.length!==e.length&&this.log(`Found ${t.length}/${e.length} levels in Pathway "${this.pathwayId}"`),t}getLevelsForPathway(e){return this.levels===null?[]:this.levels.filter(t=>e===t.pathwayId)}updatePathwayPriority(e){this.pathwayPriority=e;let t;const r=this.penalizedPathways,i=performance.now();Object.keys(r).forEach(s=>{i-r[s]>j4&&delete r[s]});for(let s=0;s<e.length;s++){const a=e[s];if(a in r)continue;if(a===this.pathwayId)return;const c=this.hls.nextLoadLevel,u=this.hls.levels[c];if(t=this.getLevelsForPathway(a),t.length>0){this.log(`Setting Pathway to "${a}"`),this.pathwayId=a,ub(t),this.hls.trigger(P.LEVELS_UPDATED,{levels:t});const d=this.hls.levels[c];u&&d&&this.levels&&(d.attrs["STABLE-VARIANT-ID"]!==u.attrs["STABLE-VARIANT-ID"]&&d.bitrate!==u.bitrate&&this.log(`Unstable Pathways change from bitrate ${u.bitrate} to ${d.bitrate}`),this.hls.nextLoadLevel=c);break}}}getPathwayForGroupId(e,t,r){const i=this.getLevelsForPathway(r).concat(this.levels||[]);for(let s=0;s<i.length;s++)if(t===Dt.AUDIO_TRACK&&i[s].hasAudioGroup(e)||t===Dt.SUBTITLE_TRACK&&i[s].hasSubtitleGroup(e))return i[s].pathwayId;return r}clonePathways(e){const t=this.levels;if(!t)return;const r={},i={};e.forEach(s=>{const{ID:a,"BASE-ID":c,"URI-REPLACEMENT":u}=s;if(t.some(h=>h.pathwayId===a))return;const d=this.getLevelsForPathway(c).map(h=>{const p=new En(h.attrs);p["PATHWAY-ID"]=a;const g=p.AUDIO&&`${p.AUDIO}_clone_${a}`,x=p.SUBTITLES&&`${p.SUBTITLES}_clone_${a}`;g&&(r[p.AUDIO]=g,p.AUDIO=g),x&&(i[p.SUBTITLES]=x,p.SUBTITLES=x);const v=Kb(h.uri,p["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",u),S=new ec({attrs:p,audioCodec:h.audioCodec,bitrate:h.bitrate,height:h.height,name:h.name,url:v,videoCodec:h.videoCodec,width:h.width});if(h.audioGroups)for(let T=1;T<h.audioGroups.length;T++)S.addGroupId("audio",`${h.audioGroups[T]}_clone_${a}`);if(h.subtitleGroups)for(let T=1;T<h.subtitleGroups.length;T++)S.addGroupId("text",`${h.subtitleGroups[T]}_clone_${a}`);return S});t.push(...d),lS(this.audioTracks,r,u,a),lS(this.subtitleTracks,i,u,a)})}loadSteeringManifest(e){const t=this.hls.config,r=t.loader;this.loader&&this.loader.destroy(),this.loader=new r(t);let i;try{i=new self.URL(e)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${e}`);return}if(i.protocol!=="data:"){const h=(this.hls.bandwidthEstimate||t.abrEwmaDefaultEstimate)|0;i.searchParams.set("_HLS_pathway",this.pathwayId),i.searchParams.set("_HLS_throughput",""+h)}const s={responseType:"json",url:i.href},a=t.steeringManifestLoadPolicy.default,c=a.errorRetry||a.timeoutRetry||{},u={loadPolicy:a,timeout:a.maxLoadTimeMs,maxRetry:c.maxNumRetry||0,retryDelay:c.retryDelayMs||0,maxRetryDelay:c.maxRetryDelayMs||0},d={onSuccess:(h,p,g,x)=>{this.log(`Loaded steering manifest: "${i}"`);const v=h.data;if(v.VERSION!==1){this.log(`Steering VERSION ${v.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=v.TTL;const{"RELOAD-URI":S,"PATHWAY-CLONES":T,"PATHWAY-PRIORITY":_}=v;if(S)try{this.uri=new self.URL(S,i).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${S}`);return}this.scheduleRefresh(this.uri||g.url),T&&this.clonePathways(T);const C={steeringManifest:v,url:i.toString()};this.hls.trigger(P.STEERING_MANIFEST_LOADED,C),_&&this.updatePathwayPriority(_)},onError:(h,p,g,x)=>{if(this.log(`Error loading steering manifest: ${h.code} ${h.text} (${p.url})`),this.stopLoad(),h.code===410){this.enabled=!1,this.log(`Steering manifest ${p.url} no longer available`);return}let v=this.timeToLoad*1e3;if(h.code===429){const S=this.loader;if(typeof(S==null?void 0:S.getResponseHeader)=="function"){const T=S.getResponseHeader("Retry-After");T&&(v=parseFloat(T)*1e3)}this.log(`Steering manifest ${p.url} rate limited`);return}this.scheduleRefresh(this.uri||p.url,v)},onTimeout:(h,p,g)=>{this.log(`Timeout loading steering manifest (${p.url})`),this.scheduleRefresh(this.uri||p.url)}};this.log(`Requesting steering manifest: ${i}`),this.loader.load(s,u,d)}scheduleRefresh(e,t=this.timeToLoad*1e3){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var r;const i=(r=this.hls)==null?void 0:r.media;if(i&&!i.ended){this.loadSteeringManifest(e);return}this.scheduleRefresh(e,this.timeToLoad*1e3)},t)}}function lS(n,e,t,r){n&&Object.keys(e).forEach(i=>{const s=n.filter(a=>a.groupId===i).map(a=>{const c=$n({},a);return c.details=void 0,c.attrs=new En(c.attrs),c.url=c.attrs.URI=Kb(a.url,a.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",t),c.groupId=c.attrs["GROUP-ID"]=e[i],c.attrs["PATHWAY-ID"]=r,c});n.push(...s)})}function Kb(n,e,t,r){const{HOST:i,PARAMS:s,[t]:a}=r;let c;e&&(c=a==null?void 0:a[e],c&&(n=c));const u=new self.URL(n);return i&&!c&&(u.host=i),s&&Object.keys(s).sort().forEach(d=>{d&&u.searchParams.set(d,s[d])}),u.href}const G4=/^age:\s*[\d.]+\s*$/im;class Wb{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new Hh,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,e.readyState!==4&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,t,r){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=r,this.loadInternal()}loadInternal(){const{config:e,context:t}=this;if(!e||!t)return;const r=this.loader=new self.XMLHttpRequest,i=this.stats;i.loading.first=0,i.loaded=0,i.aborted=!1;const s=this.xhrSetup;s?Promise.resolve().then(()=>{if(!(this.loader!==r||this.stats.aborted))return s(r,t.url)}).catch(a=>{if(!(this.loader!==r||this.stats.aborted))return r.open("GET",t.url,!0),s(r,t.url)}).then(()=>{this.loader!==r||this.stats.aborted||this.openAndSendXhr(r,t,e)}).catch(a=>{this.callbacks.onError({code:r.status,text:a.message},t,r,i)}):this.openAndSendXhr(r,t,e)}openAndSendXhr(e,t,r){e.readyState||e.open("GET",t.url,!0);const i=t.headers,{maxTimeToFirstByteMs:s,maxLoadTimeMs:a}=r.loadPolicy;if(i)for(const c in i)e.setRequestHeader(c,i[c]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),r.timeout=s&&Ye(s)?s:a,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),r.timeout),e.send()}readystatechange(){const{context:e,loader:t,stats:r}=this;if(!e||!t)return;const i=t.readyState,s=this.config;if(!r.aborted&&i>=2&&(r.loading.first===0&&(r.loading.first=Math.max(self.performance.now(),r.loading.start),s.timeout!==s.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),s.timeout=s.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),s.loadPolicy.maxLoadTimeMs-(r.loading.first-r.loading.start)))),i===4)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;const a=t.status,c=t.responseType==="text"?t.responseText:null;if(a>=200&&a<300){const p=c??t.response;if(p!=null){r.loading.end=Math.max(self.performance.now(),r.loading.first);const g=t.responseType==="arraybuffer"?p.byteLength:p.length;if(r.loaded=r.total=g,r.bwEstimate=r.total*8e3/(r.loading.end-r.loading.first),!this.callbacks)return;const x=this.callbacks.onProgress;if(x&&x(r,e,p,t),!this.callbacks)return;const v={url:t.responseURL,data:p,code:a};this.callbacks.onSuccess(v,r,e,t);return}}const u=s.loadPolicy.errorRetry,d=r.retry,h={url:e.url,data:void 0,code:a};rh(u,d,!1,h)?this.retry(u):(J.error(`${a} while loading ${e.url}`),this.callbacks.onError({code:a,text:t.statusText},e,t,r))}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry,t=this.stats.retry;if(rh(e,t,!0))this.retry(e);else{var r;J.warn(`timeout while loading ${(r=this.context)==null?void 0:r.url}`);const i=this.callbacks;i&&(this.abortInternal(),i.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:t,stats:r}=this;this.retryDelay=W0(e,r.retry),r.retry++,J.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${t==null?void 0:t.url}, retrying ${r.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)}getCacheAge(){let e=null;if(this.loader&&G4.test(this.loader.getAllResponseHeaders())){const t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}function V4(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const z4=/(\d+)-(\d+)\/(\d+)/;class cS{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||q4,this.controller=new self.AbortController,this.stats=new Hh}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,t,r){const i=this.stats;if(i.loading.start)throw new Error("Loader can only be used once.");i.loading.start=self.performance.now();const s=K4(e,this.controller.signal),a=r.onProgress,c=e.responseType==="arraybuffer",u=c?"byteLength":"length",{maxTimeToFirstByteMs:d,maxLoadTimeMs:h}=t.loadPolicy;this.context=e,this.config=t,this.callbacks=r,this.request=this.fetchSetup(e,s),self.clearTimeout(this.requestTimeout),t.timeout=d&&Ye(d)?d:h,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),r.onTimeout(i,e,this.response)},t.timeout),self.fetch(this.request).then(p=>{this.response=this.loader=p;const g=Math.max(self.performance.now(),i.loading.start);if(self.clearTimeout(this.requestTimeout),t.timeout=h,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),r.onTimeout(i,e,this.response)},h-(g-i.loading.start)),!p.ok){const{status:x,statusText:v}=p;throw new X4(v||"fetch, bad network response",x,p)}return i.loading.first=g,i.total=Y4(p.headers)||i.total,a&&Ye(t.highWaterMark)?this.loadProgressively(p,i,e,t.highWaterMark,a):c?p.arrayBuffer():e.responseType==="json"?p.json():p.text()}).then(p=>{const g=this.response;if(!g)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),i.loading.end=Math.max(self.performance.now(),i.loading.first);const x=p[u];x&&(i.loaded=i.total=x);const v={url:g.url,data:p,code:g.status};a&&!Ye(t.highWaterMark)&&a(i,e,p,g),r.onSuccess(v,i,e,g)}).catch(p=>{if(self.clearTimeout(this.requestTimeout),i.aborted)return;const g=p&&p.code||0,x=p?p.message:null;r.onError({code:g,text:x},e,p?p.details:null,i)})}getCacheAge(){let e=null;if(this.response){const t=this.response.headers.get("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,t,r,i=0,s){const a=new pb,c=e.body.getReader(),u=()=>c.read().then(d=>{if(d.done)return a.dataLength&&s(t,r,a.flush(),e),Promise.resolve(new ArrayBuffer(0));const h=d.value,p=h.length;return t.loaded+=p,p<i||a.dataLength?(a.push(h),a.dataLength>=i&&s(t,r,a.flush(),e)):s(t,r,h,e),u()}).catch(()=>Promise.reject());return u()}}function K4(n,e){const t={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers($n({},n.headers))};return n.rangeEnd&&t.headers.set("Range","bytes="+n.rangeStart+"-"+String(n.rangeEnd-1)),t}function W4(n){const e=z4.exec(n);if(e)return parseInt(e[2])-parseInt(e[1])+1}function Y4(n){const e=n.get("Content-Range");if(e){const r=W4(e);if(Ye(r))return r}const t=n.get("Content-Length");if(t)return parseInt(t)}function q4(n,e){return new self.Request(n.url,e)}class X4 extends Error{constructor(e,t,r){super(e),this.code=void 0,this.details=void 0,this.code=t,this.details=r}}const Q4=/\s/,J4={newCue(n,e,t,r){const i=[];let s,a,c,u,d;const h=self.VTTCue||self.TextTrackCue;for(let g=0;g<r.rows.length;g++)if(s=r.rows[g],c=!0,u=0,d="",!s.isEmpty()){var p;for(let S=0;S<s.chars.length;S++)Q4.test(s.chars[S].uchar)&&c?u++:(d+=s.chars[S].uchar,c=!1);s.cueStartTime=e,e===t&&(t+=1e-4),u>=16?u--:u++;const x=Mb(d.trim()),v=iy(e,t,x);n!=null&&(p=n.cues)!=null&&p.getCueById(v)||(a=new h(e,t,x),a.id=v,a.line=g+1,a.align="left",a.position=10+Math.min(80,Math.floor(u*8/32)*10),i.push(a))}return n&&i.length&&(i.sort((g,x)=>g.line==="auto"||x.line==="auto"?0:g.line>8&&x.line>8?x.line-g.line:g.line-x.line),i.forEach(g=>ob(n,g))),i}},Z4={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},Yb=or(or({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,maxBufferSize:60*1e3*1e3,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:Wb,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:LM,bufferController:kF,capLevelController:sy,errorController:pM,fpsController:i4,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:zT,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0,useMediaCapabilities:!0,certLoadPolicy:{default:Z4},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},e3()),{},{subtitleStreamController:LF,subtitleTrackController:RF,timelineController:n4,audioStreamController:wF,audioTrackController:_F,emeController:Ql,cmcdController:U4,contentSteeringController:H4});function e3(){return{cueHandler:J4,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function t3(n,e){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(e.liveMaxLatencyDurationCount!==void 0&&(e.liveSyncDurationCount===void 0||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(e.liveMaxLatencyDuration!==void 0&&(e.liveSyncDuration===void 0||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const t=Kg(n),r=["manifest","level","frag"],i=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return r.forEach(s=>{const a=`${s==="level"?"playlist":s}LoadPolicy`,c=e[a]===void 0,u=[];i.forEach(d=>{const h=`${s}Loading${d}`,p=e[h];if(p!==void 0&&c){u.push(h);const g=t[a].default;switch(e[a]={default:g},d){case"TimeOut":g.maxLoadTimeMs=p,g.maxTimeToFirstByteMs=p;break;case"MaxRetry":g.errorRetry.maxNumRetry=p,g.timeoutRetry.maxNumRetry=p;break;case"RetryDelay":g.errorRetry.retryDelayMs=p,g.timeoutRetry.retryDelayMs=p;break;case"MaxRetryTimeout":g.errorRetry.maxRetryDelayMs=p,g.timeoutRetry.maxRetryDelayMs=p;break}}}),u.length&&J.warn(`hls.js config: "${u.join('", "')}" setting(s) are deprecated, use "${a}": ${JSON.stringify(e[a])}`)}),or(or({},t),e)}function Kg(n){return n&&typeof n=="object"?Array.isArray(n)?n.map(Kg):Object.keys(n).reduce((e,t)=>(e[t]=Kg(n[t]),e),{}):n}function n3(n){const e=n.loader;e!==cS&&e!==Wb?(J.log("[config]: Custom loader detected, cannot enable progressive streaming"),n.progressive=!1):V4()&&(n.loader=cS,n.progressive=!0,n.enableSoftwareAES=!0,J.log("[config]: Progressive streaming enabled, using FetchLoader"))}let rg;class r3 extends Y0{constructor(e,t){super(e,"[level-controller]"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=t,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(P.MANIFEST_LOADING,this.onManifestLoading,this),e.on(P.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(P.LEVEL_LOADED,this.onLevelLoaded,this),e.on(P.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(P.FRAG_BUFFERED,this.onFragBuffered,this),e.on(P.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(P.MANIFEST_LOADING,this.onManifestLoading,this),e.off(P.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(P.LEVEL_LOADED,this.onLevelLoaded,this),e.off(P.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(P.FRAG_BUFFERED,this.onFragBuffered,this),e.off(P.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(t=>{t.loadError=0,t.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,t){this.resetLevels()}onManifestLoaded(e,t){const r=this.hls.config.preferManagedMediaSource,i=[],s={},a={};let c=!1,u=!1,d=!1;t.levels.forEach(h=>{var p,g;const x=h.attrs;let{audioCodec:v,videoCodec:S}=h;((p=v)==null?void 0:p.indexOf("mp4a.40.34"))!==-1&&(rg||(rg=/chrome|firefox/i.test(navigator.userAgent)),rg&&(h.audioCodec=v=void 0)),v&&(h.audioCodec=v=eh(v,r)),((g=S)==null?void 0:g.indexOf("avc1"))===0&&(S=h.videoCodec=GN(S));const{width:T,height:_,unknownCodecs:C}=h;if(c||(c=!!(T&&_)),u||(u=!!S),d||(d=!!v),C!=null&&C.length||v&&!Hm(v,"audio",r)||S&&!Hm(S,"video",r))return;const{CODECS:k,"FRAME-RATE":O,"HDCP-LEVEL":w,"PATHWAY-ID":$,RESOLUTION:M,"VIDEO-RANGE":U}=x,R=`${`${$||"."}-`}${h.bitrate}-${M}-${O}-${k}-${U}-${w}`;if(s[R])if(s[R].uri!==h.url&&!h.attrs["PATHWAY-ID"]){const G=a[R]+=1;h.attrs["PATHWAY-ID"]=new Array(G+1).join(".");const fe=new ec(h);s[R]=fe,i.push(fe)}else s[R].addGroupId("audio",x.AUDIO),s[R].addGroupId("text",x.SUBTITLES);else{const G=new ec(h);s[R]=G,a[R]=1,i.push(G)}}),this.filterAndSortMediaOptions(i,t,c,u,d)}filterAndSortMediaOptions(e,t,r,i,s){let a=[],c=[],u=e;if((r||i)&&s&&(u=u.filter(({videoCodec:v,videoRange:S,width:T,height:_})=>(!!v||!!(T&&_))&&nM(S))),u.length===0){Promise.resolve().then(()=>{if(this.hls){t.levels.length&&this.warn(`One or more CODECS in variant not supported: ${JSON.stringify(t.levels[0].attrs)}`);const v=new Error("no level with compatible codecs found in manifest");this.hls.trigger(P.ERROR,{type:ft.MEDIA_ERROR,details:le.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:v,reason:v.message})}});return}if(t.audioTracks){const{preferManagedMediaSource:v}=this.hls.config;a=t.audioTracks.filter(S=>!S.audioCodec||Hm(S.audioCodec,"audio",v)),uS(a)}t.subtitles&&(c=t.subtitles,uS(c));const d=u.slice(0);u.sort((v,S)=>{if(v.attrs["HDCP-LEVEL"]!==S.attrs["HDCP-LEVEL"])return(v.attrs["HDCP-LEVEL"]||"")>(S.attrs["HDCP-LEVEL"]||"")?1:-1;if(r&&v.height!==S.height)return v.height-S.height;if(v.frameRate!==S.frameRate)return v.frameRate-S.frameRate;if(v.videoRange!==S.videoRange)return th.indexOf(v.videoRange)-th.indexOf(S.videoRange);if(v.videoCodec!==S.videoCodec){const T=y1(v.videoCodec),_=y1(S.videoCodec);if(T!==_)return _-T}if(v.uri===S.uri&&v.codecSet!==S.codecSet){const T=Zf(v.codecSet),_=Zf(S.codecSet);if(T!==_)return _-T}return v.averageBitrate!==S.averageBitrate?v.averageBitrate-S.averageBitrate:0});let h=d[0];if(this.steering&&(u=this.steering.filterParsedLevels(u),u.length!==d.length)){for(let v=0;v<d.length;v++)if(d[v].pathwayId===u[0].pathwayId){h=d[v];break}}this._levels=u;for(let v=0;v<u.length;v++)if(u[v]===h){var p;this._firstLevel=v;const S=h.bitrate,T=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${u.length} level(s) found, first bitrate: ${S}`),((p=this.hls.userConfig)==null?void 0:p.abrEwmaDefaultEstimate)===void 0){const _=Math.min(S,this.hls.config.abrEwmaDefaultEstimateMax);_>T&&T===Yb.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=_)}break}const g=s&&!i,x={levels:u,audioTracks:a,subtitleTracks:c,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:s,video:i,altAudio:!g&&a.some(v=>!!v.url)};this.hls.trigger(P.MANIFEST_PARSED,x),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}get levels(){return this._levels.length===0?null:this._levels}get level(){return this.currentLevelIndex}set level(e){const t=this._levels;if(t.length===0)return;if(e<0||e>=t.length){const h=new Error("invalid level idx"),p=e<0;if(this.hls.trigger(P.ERROR,{type:ft.OTHER_ERROR,details:le.LEVEL_SWITCH_ERROR,level:e,fatal:p,error:h,reason:h.message}),p)return;e=Math.min(e,t.length-1)}const r=this.currentLevelIndex,i=this.currentLevel,s=i?i.attrs["PATHWAY-ID"]:void 0,a=t[e],c=a.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=a,r===e&&a.details&&i&&s===c)return;this.log(`Switching to level ${e} (${a.height?a.height+"p ":""}${a.videoRange?a.videoRange+" ":""}${a.codecSet?a.codecSet+" ":""}@${a.bitrate})${c?" with Pathway "+c:""} from level ${r}${s?" with Pathway "+s:""}`);const u={level:e,attrs:a.attrs,details:a.details,bitrate:a.bitrate,averageBitrate:a.averageBitrate,maxBitrate:a.maxBitrate,realBitrate:a.realBitrate,width:a.width,height:a.height,codecSet:a.codecSet,audioCodec:a.audioCodec,videoCodec:a.videoCodec,audioGroups:a.audioGroups,subtitleGroups:a.subtitleGroups,loaded:a.loaded,loadError:a.loadError,fragmentError:a.fragmentError,name:a.name,id:a.id,uri:a.uri,url:a.url,urlId:0,audioGroupIds:a.audioGroupIds,textGroupIds:a.textGroupIds};this.hls.trigger(P.LEVEL_SWITCHING,u);const d=a.details;if(!d||d.live){const h=this.switchParams(a.uri,i==null?void 0:i.details,d);this.loadPlaylist(h)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,this._startLevel===void 0&&(this._startLevel=e),e!==-1&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(this._startLevel===void 0){const e=this.hls.config.startLevel;return e!==void 0?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}onError(e,t){t.fatal||!t.context||t.context.type===Dt.LEVEL&&t.context.level===this.level&&this.checkRetry(t)}onFragBuffered(e,{frag:t}){if(t!==void 0&&t.type===at.MAIN){const r=t.elementaryStreams;if(!Object.keys(r).some(s=>!!r[s]))return;const i=this._levels[t.level];i!=null&&i.loadError&&(this.log(`Resetting level error count of ${i.loadError} on frag buffered`),i.loadError=0)}}onLevelLoaded(e,t){var r;const{level:i,details:s}=t,a=this._levels[i];if(!a){var c;this.warn(`Invalid level index ${i}`),(c=t.deliveryDirectives)!=null&&c.skip&&(s.deltaUpdateFailed=!0);return}i===this.currentLevelIndex?(a.fragmentError===0&&(a.loadError=0),this.playlistLoaded(i,t,a.details)):(r=t.deliveryDirectives)!=null&&r.skip&&(s.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist();const t=this.currentLevelIndex,r=this.currentLevel;if(r&&this.shouldLoadPlaylist(r)){let i=r.uri;if(e)try{i=e.addDirectives(i)}catch(a){this.warn(`Could not construct new URL with HLS Delivery Directives: ${a}`)}const s=r.attrs["PATHWAY-ID"];this.log(`Loading level index ${t}${(e==null?void 0:e.msn)!==void 0?" at sn "+e.msn+" part "+e.part:""} with${s?" Pathway "+s:""} ${i}`),this.clearTimer(),this.hls.trigger(P.LEVEL_LOADING,{url:i,level:t,pathwayId:r.attrs["PATHWAY-ID"],id:0,deliveryDirectives:e||null})}}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=e)}removeLevel(e){var t;const r=this._levels.filter((i,s)=>s!==e?!0:(this.steering&&this.steering.removeLevel(i),i===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,i.details&&i.details.fragments.forEach(a=>a.level=-1)),!1));ub(r),this._levels=r,this.currentLevelIndex>-1&&(t=this.currentLevel)!=null&&t.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.hls.trigger(P.LEVELS_UPDATED,{levels:r})}onLevelsUpdated(e,{levels:t}){this._levels=t}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:t,maxHdcpLevel:r}=this.hls;this._maxAutoLevel!==t&&(this._maxAutoLevel=t,this.hls.trigger(P.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:t,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:r}))}}function uS(n){const e={};n.forEach(t=>{const r=t.groupId||"";t.id=e[r]=e[r]||0,e[r]++})}class i3{constructor(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const r in this.keyUriToKeyInfo){const i=this.keyUriToKeyInfo[r].loader;if(i){var t;if(e&&e!==((t=i.context)==null?void 0:t.frag.type))return;i.abort()}}}detach(){for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e].loader;t&&t.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(e,t=le.KEY_LOAD_ERROR,r,i,s){return new fo({type:ft.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:s,error:r,networkDetails:i})}loadClear(e,t){if(this.emeController&&this.config.emeEnabled){const{sn:r,cc:i}=e;for(let s=0;s<t.length;s++){const a=t[s];if(i<=a.cc&&(r==="initSegment"||a.sn==="initSegment"||r<a.sn)){this.emeController.selectKeySystemFormat(a).then(c=>{a.setKeyFormat(c)});break}}}}load(e){return!e.decryptdata&&e.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(e).then(t=>this.loadInternal(e,t)):this.loadInternal(e)}loadInternal(e,t){var r,i;t&&e.setKeyFormat(t);const s=e.decryptdata;if(!s){const d=new Error(t?`Expected frag.decryptdata to be defined after setting format ${t}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(e,le.KEY_LOAD_ERROR,d))}const a=s.uri;if(!a)return Promise.reject(this.createKeyLoadError(e,le.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${a}"`)));let c=this.keyUriToKeyInfo[a];if((r=c)!=null&&r.decryptdata.key)return s.key=c.decryptdata.key,Promise.resolve({frag:e,keyInfo:c});if((i=c)!=null&&i.keyLoadPromise){var u;switch((u=c.mediaKeySessionContext)==null?void 0:u.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return c.keyLoadPromise.then(d=>(s.key=d.keyInfo.decryptdata.key,{frag:e,keyInfo:c}))}}switch(c=this.keyUriToKeyInfo[a]={decryptdata:s,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},s.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return s.keyFormat==="identity"?this.loadKeyHTTP(c,e):this.loadKeyEME(c,e);case"AES-128":return this.loadKeyHTTP(c,e);default:return Promise.reject(this.createKeyLoadError(e,le.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${s.method}"`)))}}loadKeyEME(e,t){const r={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){const i=this.emeController.loadKey(r);if(i)return(e.keyLoadPromise=i.then(s=>(e.mediaKeySessionContext=s,r))).catch(s=>{throw e.keyLoadPromise=null,s})}return Promise.resolve(r)}loadKeyHTTP(e,t){const r=this.config,i=r.loader,s=new i(r);return t.keyLoader=e.loader=s,e.keyLoadPromise=new Promise((a,c)=>{const u={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},d=r.keyLoadPolicy.default,h={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},p={onSuccess:(g,x,v,S)=>{const{frag:T,keyInfo:_,url:C}=v;if(!T.decryptdata||_!==this.keyUriToKeyInfo[C])return c(this.createKeyLoadError(T,le.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),S));_.decryptdata.key=T.decryptdata.key=new Uint8Array(g.data),T.keyLoader=null,_.loader=null,a({frag:T,keyInfo:_})},onError:(g,x,v,S)=>{this.resetLoader(x),c(this.createKeyLoadError(t,le.KEY_LOAD_ERROR,new Error(`HTTP Error ${g.code} loading key ${g.text}`),v,or({url:u.url,data:void 0},g)))},onTimeout:(g,x,v)=>{this.resetLoader(x),c(this.createKeyLoadError(t,le.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),v))},onAbort:(g,x,v)=>{this.resetLoader(x),c(this.createKeyLoadError(t,le.INTERNAL_ABORTED,new Error("key loading aborted"),v))}};s.load(u,h,p)})}resetLoader(e){const{frag:t,keyInfo:r,url:i}=e,s=r.loader;t.keyLoader===s&&(t.keyLoader=null,r.loader=null),delete this.keyUriToKeyInfo[i],s&&s.destroy()}}function qb(){return self.SourceBuffer||self.WebKitSourceBuffer}function Xb(){if(!Xa())return!1;const e=qb();return!e||e.prototype&&typeof e.prototype.appendBuffer=="function"&&typeof e.prototype.remove=="function"}function s3(){if(!Xb())return!1;const n=Xa();return typeof(n==null?void 0:n.isTypeSupported)=="function"&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(e=>n.isTypeSupported(xu(e,"video")))||["mp4a.40.2","fLaC"].some(e=>n.isTypeSupported(xu(e,"audio"))))}function o3(){var n;const e=qb();return typeof(e==null||(n=e.prototype)==null?void 0:n.changeType)=="function"}const a3=250,Ff=2,l3=.1,c3=.05;class u3{constructor(e,t,r,i){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=e,this.media=t,this.fragmentTracker=r,this.hls=i}destroy(){this.media=null,this.hls=this.fragmentTracker=null}poll(e,t){const{config:r,media:i,stalled:s}=this;if(i===null)return;const{currentTime:a,seeking:c}=i,u=this.seeking&&!c,d=!this.seeking&&c;if(this.seeking=c,a!==e){if(this.moved=!0,c||(this.nudgeRetry=0),s!==null){if(this.stallReported){const T=self.performance.now()-s;J.warn(`playback not stuck anymore @${a}, after ${Math.round(T)}ms`),this.stallReported=!1}this.stalled=null}return}if(d||u){this.stalled=null;return}if(i.paused&&!c||i.ended||i.playbackRate===0||!mn.getBuffered(i).length){this.nudgeRetry=0;return}const h=mn.bufferInfo(i,a,0),p=h.nextStart||0;if(c){const T=h.len>Ff,_=!p||t&&t.start<=a||p-a>Ff&&!this.fragmentTracker.getPartialFragment(a);if(T||_)return;this.moved=!1}if(!this.moved&&this.stalled!==null){var g;if(!(h.len>0)&&!p)return;const _=Math.max(p,h.start||0)-a,C=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,O=(C==null||(g=C.details)==null?void 0:g.live)?C.details.targetduration*2:Ff,w=this.fragmentTracker.getPartialFragment(a);if(_>0&&(_<=O||w)){i.paused||this._trySkipBufferHole(w);return}}const x=self.performance.now();if(s===null){this.stalled=x;return}const v=x-s;if(!c&&v>=a3&&(this._reportStall(h),!this.media))return;const S=mn.bufferInfo(i,a,r.maxBufferHole);this._tryFixBufferStall(S,v)}_tryFixBufferStall(e,t){const{config:r,fragmentTracker:i,media:s}=this;if(s===null)return;const a=s.currentTime,c=i.getPartialFragment(a);c&&(this._trySkipBufferHole(c)||!this.media)||(e.len>r.maxBufferHole||e.nextStart&&e.nextStart-a<r.maxBufferHole)&&t>r.highBufferWatchdogPeriod*1e3&&(J.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}_reportStall(e){const{hls:t,media:r,stallReported:i}=this;if(!i&&r){this.stallReported=!0;const s=new Error(`Playback stalling at @${r.currentTime} due to low buffer (${JSON.stringify(e)})`);J.warn(s.message),t.trigger(P.ERROR,{type:ft.MEDIA_ERROR,details:le.BUFFER_STALLED_ERROR,fatal:!1,error:s,buffer:e.len})}}_trySkipBufferHole(e){const{config:t,hls:r,media:i}=this;if(i===null)return 0;const s=i.currentTime,a=mn.bufferInfo(i,s,0),c=s<a.start?a.start:a.nextStart;if(c){const u=a.len<=t.maxBufferHole,d=a.len>0&&a.len<1&&i.readyState<3,h=c-s;if(h>0&&(u||d)){if(h>t.maxBufferHole){const{fragmentTracker:g}=this;let x=!1;if(s===0){const v=g.getAppendedFrag(0,at.MAIN);v&&c<v.end&&(x=!0)}if(!x){const v=e||g.getAppendedFrag(s,at.MAIN);if(v){let S=!1,T=v.end;for(;T<c;){const _=g.getPartialFragment(T);if(_)T+=_.duration;else{S=!0;break}}if(S)return 0}}}const p=Math.max(c+c3,s+l3);if(J.warn(`skipping hole, adjusting currentTime from ${s} to ${p}`),this.moved=!0,this.stalled=null,i.currentTime=p,e&&!e.gap){const g=new Error(`fragment loaded with buffer holes, seeking from ${s} to ${p}`);r.trigger(P.ERROR,{type:ft.MEDIA_ERROR,details:le.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:g,reason:g.message,frag:e})}return p}}return 0}_tryNudgeBuffer(){const{config:e,hls:t,media:r,nudgeRetry:i}=this;if(r===null)return;const s=r.currentTime;if(this.nudgeRetry++,i<e.nudgeMaxRetry){const a=s+(i+1)*e.nudgeOffset,c=new Error(`Nudging 'currentTime' from ${s} to ${a}`);J.warn(c.message),r.currentTime=a,t.trigger(P.ERROR,{type:ft.MEDIA_ERROR,details:le.BUFFER_NUDGE_ON_STALL,error:c,fatal:!1})}else{const a=new Error(`Playhead still not moving while enough data buffered @${s} after ${e.nudgeMaxRetry} nudges`);J.error(a.message),t.trigger(P.ERROR,{type:ft.MEDIA_ERROR,details:le.BUFFER_STALLED_ERROR,error:a,fatal:!0})}}}const d3=100;class f3 extends Q0{constructor(e,t,r){super(e,t,r,"[stream-controller]",at.MAIN),this.audioCodecSwap=!1,this.gapController=null,this.level=-1,this._forceStartLoad=!1,this.altAudio=!1,this.audioOnly=!1,this.fragPlaying=null,this.onvplaying=null,this.onvseeked=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(P.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(P.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(P.MANIFEST_LOADING,this.onManifestLoading,this),e.on(P.MANIFEST_PARSED,this.onManifestParsed,this),e.on(P.LEVEL_LOADING,this.onLevelLoading,this),e.on(P.LEVEL_LOADED,this.onLevelLoaded,this),e.on(P.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(P.ERROR,this.onError,this),e.on(P.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(P.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(P.BUFFER_CREATED,this.onBufferCreated,this),e.on(P.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(P.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(P.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(P.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(P.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(P.MANIFEST_LOADING,this.onManifestLoading,this),e.off(P.MANIFEST_PARSED,this.onManifestParsed,this),e.off(P.LEVEL_LOADED,this.onLevelLoaded,this),e.off(P.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(P.ERROR,this.onError,this),e.off(P.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(P.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(P.BUFFER_CREATED,this.onBufferCreated,this),e.off(P.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(P.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(P.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying()}startLoad(e){if(this.levels){const{lastCurrentTime:t,hls:r}=this;if(this.stopLoad(),this.setInterval(d3),this.level=-1,!this.startFragRequested){let i=r.startLevel;i===-1&&(r.config.testBandwidth&&this.levels.length>1?(i=0,this.bitrateTest=!0):i=r.firstAutoLevel),r.nextLoadLevel=i,this.level=r.loadLevel,this.loadedmetadata=!1}t>0&&e===-1&&(this.log(`Override startPosition with lastCurrentTime @${t.toFixed(3)}`),e=t),this.state=ve.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this._forceStartLoad=!0,this.state=ve.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case ve.WAITING_LEVEL:{const{levels:t,level:r}=this,i=t==null?void 0:t[r],s=i==null?void 0:i.details;if(s&&(!s.live||this.levelLastLoaded===i)){if(this.waitForCdnTuneIn(s))break;this.state=ve.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=ve.IDLE;break}break}case ve.FRAG_LOADING_WAITING_RETRY:{var e;const t=self.performance.now(),r=this.retryDate;if(!r||t>=r||(e=this.media)!=null&&e.seeking){const{levels:i,level:s}=this,a=i==null?void 0:i[s];this.resetStartWhenNotLoaded(a||null),this.state=ve.IDLE}}break}this.state===ve.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){super.onTickEnd(),this.checkBuffer(),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:t,levels:r,media:i}=this;if(t===null||!i&&(this.startFragRequested||!e.config.startFragPrefetch)||this.altAudio&&this.audioOnly)return;const s=this.buffering?e.nextLoadLevel:e.loadLevel;if(!(r!=null&&r[s]))return;const a=r[s],c=this.getMainFwdBufferInfo();if(c===null)return;const u=this.getLevelDetails();if(u&&this._streamEnded(c,u)){const S={};this.altAudio&&(S.type="video"),this.hls.trigger(P.BUFFER_EOS,S),this.state=ve.ENDED;return}if(!this.buffering)return;e.loadLevel!==s&&e.manualLevel===-1&&this.log(`Adapting to level ${s} from level ${this.level}`),this.level=e.nextLoadLevel=s;const d=a.details;if(!d||this.state===ve.WAITING_LEVEL||d.live&&this.levelLastLoaded!==a){this.level=s,this.state=ve.WAITING_LEVEL;return}const h=c.len,p=this.getMaxBufferLength(a.maxBitrate);if(h>=p)return;this.backtrackFragment&&this.backtrackFragment.start>c.end&&(this.backtrackFragment=null);const g=this.backtrackFragment?this.backtrackFragment.start:c.end;let x=this.getNextFragment(g,d);if(this.couldBacktrack&&!this.fragPrevious&&x&&x.sn!=="initSegment"&&this.fragmentTracker.getState(x)!==rr.OK){var v;const T=((v=this.backtrackFragment)!=null?v:x).sn-d.startSN,_=d.fragments[T-1];_&&x.cc===_.cc&&(x=_,this.fragmentTracker.removeFragment(_))}else this.backtrackFragment&&c.len&&(this.backtrackFragment=null);if(x&&this.isLoopLoading(x,g)){if(!x.gap){const T=this.audioOnly&&!this.altAudio?rn.AUDIO:rn.VIDEO,_=(T===rn.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;_&&this.afterBufferFlushed(_,T,at.MAIN)}x=this.getNextFragmentLoopLoading(x,d,c,at.MAIN,p)}x&&(x.initSegment&&!x.initSegment.data&&!this.bitrateTest&&(x=x.initSegment),this.loadFragment(x,a,g))}loadFragment(e,t,r){const i=this.fragmentTracker.getState(e);this.fragCurrent=e,i===rr.NOT_LOADED||i===rr.PARTIAL?e.sn==="initSegment"?this._loadInitSegment(e,t):this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,t)):(this.startFragRequested=!0,super.loadFragment(e,t,r)):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,at.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:t}=this;if(t!=null&&t.readyState){let r;const i=this.getAppendedFrag(t.currentTime);i&&i.start>1&&this.flushMainBuffer(0,i.start-1);const s=this.getLevelDetails();if(s!=null&&s.live){const c=this.getMainFwdBufferInfo();if(!c||c.len<s.targetduration*2)return}if(!t.paused&&e){const c=this.hls.nextLoadLevel,u=e[c],d=this.fragLastKbps;d&&this.fragCurrent?r=this.fragCurrent.duration*u.maxBitrate/(1e3*d)+1:r=0}else r=0;const a=this.getBufferedFrag(t.currentTime+r);if(a){const c=this.followingBufferedFrag(a);if(c){this.abortCurrentFrag();const u=c.maxStartPTS?c.maxStartPTS:c.start,d=c.duration,h=Math.max(a.end,u+Math.min(Math.max(d-this.config.maxFragLookUpTolerance,d*(this.couldBacktrack?.5:.125)),d*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(h,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case ve.KEY_LOADING:case ve.FRAG_LOADING:case ve.FRAG_LOADING_WAITING_RETRY:case ve.PARSING:case ve.PARSED:this.state=ve.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,t){super.flushMainBuffer(e,t,this.altAudio?"video":null)}onMediaAttached(e,t){super.onMediaAttached(e,t);const r=t.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),r.addEventListener("playing",this.onvplaying),r.addEventListener("seeked",this.onvseeked),this.gapController=new u3(this.config,r,this.fragmentTracker,this.hls)}onMediaDetaching(){const{media:e}=this;e&&this.onvplaying&&this.onvseeked&&(e.removeEventListener("playing",this.onvplaying),e.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),super.onMediaDetaching()}onMediaPlaying(){this.tick()}onMediaSeeked(){const e=this.media,t=e?e.currentTime:null;Ye(t)&&this.log(`Media seeked to ${t.toFixed(3)}`);const r=this.getMainFwdBufferInfo();if(r===null||r.len===0){this.warn(`Main forward buffer length on "seeked" event ${r?r.len:"empty"})`);return}this.tick()}onManifestLoading(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(P.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=this.fragLastKbps=0,this.levels=this.fragPlaying=this.backtrackFragment=this.levelLastLoaded=null,this.altAudio=this.audioOnly=this.startFragRequested=!1}onManifestParsed(e,t){let r=!1,i=!1;t.levels.forEach(s=>{const a=s.audioCodec;a&&(r=r||a.indexOf("mp4a.40.2")!==-1,i=i||a.indexOf("mp4a.40.5")!==-1)}),this.audioCodecSwitch=r&&i&&!o3(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1}onLevelLoading(e,t){const{levels:r}=this;if(!r||this.state!==ve.IDLE)return;const i=r[t.level];(!i.details||i.details.live&&this.levelLastLoaded!==i||this.waitForCdnTuneIn(i.details))&&(this.state=ve.WAITING_LEVEL)}onLevelLoaded(e,t){var r;const{levels:i}=this,s=t.level,a=t.details,c=a.totalduration;if(!i){this.warn(`Levels were reset while loading level ${s}`);return}this.log(`Level ${s} loaded [${a.startSN},${a.endSN}]${a.lastPartSn?`[part-${a.lastPartSn}-${a.lastPartIndex}]`:""}, cc [${a.startCC}, ${a.endCC}] duration:${c}`);const u=i[s],d=this.fragCurrent;d&&(this.state===ve.FRAG_LOADING||this.state===ve.FRAG_LOADING_WAITING_RETRY)&&d.level!==t.level&&d.loader&&this.abortCurrentFrag();let h=0;if(a.live||(r=u.details)!=null&&r.live){var p;if(this.checkLiveUpdate(a),a.deltaUpdateFailed)return;h=this.alignPlaylists(a,u.details,(p=this.levelLastLoaded)==null?void 0:p.details)}if(u.details=a,this.levelLastLoaded=u,this.hls.trigger(P.LEVEL_UPDATED,{details:a,level:s}),this.state===ve.WAITING_LEVEL){if(this.waitForCdnTuneIn(a))return;this.state=ve.IDLE}this.startFragRequested?a.live&&this.synchronizeToLiveEdge(a):this.setStartPosition(a,h),this.tick()}_handleFragmentLoadProgress(e){var t;const{frag:r,part:i,payload:s}=e,{levels:a}=this;if(!a){this.warn(`Levels were reset while fragment load was in progress. Fragment ${r.sn} of level ${r.level} will not be buffered`);return}const c=a[r.level],u=c.details;if(!u){this.warn(`Dropping fragment ${r.sn} of level ${r.level} after level details were reset`),this.fragmentTracker.removeFragment(r);return}const d=c.videoCodec,h=u.PTSKnown||!u.live,p=(t=r.initSegment)==null?void 0:t.data,g=this._getAudioCodec(c),x=this.transmuxer=this.transmuxer||new kb(this.hls,at.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),v=i?i.index:-1,S=v!==-1,T=new q0(r.level,r.sn,r.stats.chunkCount,s.byteLength,v,S),_=this.initPTS[r.cc];x.push(s,p,g,d,r,i,u.totalduration,h,T,_)}onAudioTrackSwitching(e,t){const r=this.altAudio;if(!!!t.url){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const a=this.fragCurrent;a&&(this.log("Switching to main audio track, cancel main fragment load"),a.abortRequests(),this.fragmentTracker.removeFragment(a)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();const s=this.hls;r&&(s.trigger(P.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null}),this.fragmentTracker.removeAllFragments()),s.trigger(P.AUDIO_TRACK_SWITCHED,t)}}onAudioTrackSwitched(e,t){const r=t.id,i=!!this.hls.audioTracks[r].url;if(i){const s=this.videoBuffer;s&&this.mediaBuffer!==s&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=s)}this.altAudio=i,this.tick()}onBufferCreated(e,t){const r=t.tracks;let i,s,a=!1;for(const c in r){const u=r[c];if(u.id==="main"){if(s=c,i=u,c==="video"){const d=r[c];d&&(this.videoBuffer=d.buffer)}}else a=!0}a&&i?(this.log(`Alternate track found, use ${s}.buffered to schedule main fragment loading`),this.mediaBuffer=i.buffer):this.mediaBuffer=this.media}onFragBuffered(e,t){const{frag:r,part:i}=t;if(r&&r.type!==at.MAIN)return;if(this.fragContextChanged(r)){this.warn(`Fragment ${r.sn}${i?" p: "+i.index:""} of level ${r.level} finished buffering, but was aborted. state: ${this.state}`),this.state===ve.PARSED&&(this.state=ve.IDLE);return}const s=i?i.stats:r.stats;this.fragLastKbps=Math.round(8*s.total/(s.buffering.end-s.loading.first)),r.sn!=="initSegment"&&(this.fragPrevious=r),this.fragBufferedComplete(r,i)}onError(e,t){var r;if(t.fatal){this.state=ve.ERROR;return}switch(t.details){case le.FRAG_GAP:case le.FRAG_PARSING_ERROR:case le.FRAG_DECRYPT_ERROR:case le.FRAG_LOAD_ERROR:case le.FRAG_LOAD_TIMEOUT:case le.KEY_LOAD_ERROR:case le.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(at.MAIN,t);break;case le.LEVEL_LOAD_ERROR:case le.LEVEL_LOAD_TIMEOUT:case le.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===ve.WAITING_LEVEL&&((r=t.context)==null?void 0:r.type)===Dt.LEVEL&&(this.state=ve.IDLE);break;case le.BUFFER_APPEND_ERROR:case le.BUFFER_FULL_ERROR:if(!t.parent||t.parent!=="main")return;if(t.details===le.BUFFER_APPEND_ERROR){this.resetLoadingState();return}this.reduceLengthAndFlushBuffer(t)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case le.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}checkBuffer(){const{media:e,gapController:t}=this;if(!(!e||!t||!e.readyState)){if(this.loadedmetadata||!mn.getBuffered(e).length){const r=this.state!==ve.IDLE?this.fragCurrent:null;t.poll(this.lastCurrentTime,r)}this.lastCurrentTime=e.currentTime}}onFragLoadEmergencyAborted(){this.state=ve.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()}onBufferFlushed(e,{type:t}){if(t!==rn.AUDIO||this.audioOnly&&!this.altAudio){const r=(t===rn.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(r,t,at.MAIN),this.tick()}}onLevelsUpdated(e,t){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level),this.levels=t.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const t=e.currentTime;let r=this.startPosition;if(r>=0&&t<r){if(e.seeking){this.log(`could not seek to ${r}, already seeking at ${t}`);return}const i=mn.getBuffered(e),a=(i.length?i.start(0):0)-r;a>0&&(a<this.config.maxBufferHole||a<this.config.maxFragLookUpTolerance)&&(this.log(`adjusting start position by ${a} to match buffer start`),r+=a,this.startPosition=r),this.log(`seek to target start position ${r} from current time ${t}`),e.currentTime=r}}_getAudioCodec(e){let t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t.indexOf("mp4a.40.5")!==-1?t="mp4a.40.2":t="mp4a.40.5"),t}_loadBitrateTestFrag(e,t){e.bitrateTest=!0,this._doFragLoad(e,t).then(r=>{const{hls:i}=this;if(!r||this.fragContextChanged(e))return;t.fragmentError=0,this.state=ve.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const s=e.stats;s.parsing.start=s.parsing.end=s.buffering.start=s.buffering.end=self.performance.now(),i.trigger(P.FRAG_LOADED,r),e.bitrateTest=!1})}_handleTransmuxComplete(e){var t;const r="main",{hls:i}=this,{remuxResult:s,chunkMeta:a}=e,c=this.getCurrentContext(a);if(!c){this.resetWhenMissingContext(a);return}const{frag:u,part:d,level:h}=c,{video:p,text:g,id3:x,initSegment:v}=s,{details:S}=h,T=this.altAudio?void 0:s.audio;if(this.fragContextChanged(u)){this.fragmentTracker.removeFragment(u);return}if(this.state=ve.PARSING,v){if(v!=null&&v.tracks){const k=u.initSegment||u;this._bufferInitSegment(h,v.tracks,k,a),i.trigger(P.FRAG_PARSING_INIT_SEGMENT,{frag:k,id:r,tracks:v.tracks})}const _=v.initPTS,C=v.timescale;Ye(_)&&(this.initPTS[u.cc]={baseTime:_,timescale:C},i.trigger(P.INIT_PTS_FOUND,{frag:u,id:r,initPTS:_,timescale:C}))}if(p&&S&&u.sn!=="initSegment"){const _=S.fragments[u.sn-1-S.startSN],C=u.sn===S.startSN,k=!_||u.cc>_.cc;if(s.independent!==!1){const{startPTS:O,endPTS:w,startDTS:$,endDTS:M}=p;if(d)d.elementaryStreams[p.type]={startPTS:O,endPTS:w,startDTS:$,endDTS:M};else if(p.firstKeyFrame&&p.independent&&a.id===1&&!k&&(this.couldBacktrack=!0),p.dropped&&p.independent){const U=this.getMainFwdBufferInfo(),W=(U?U.end:this.getLoadPosition())+this.config.maxBufferHole,R=p.firstKeyFramePTS?p.firstKeyFramePTS:O;if(!C&&W<R-this.config.maxBufferHole&&!k){this.backtrack(u);return}else k&&(u.gap=!0);u.setElementaryStreamInfo(p.type,u.start,w,u.start,M,!0)}else C&&O>Ff&&(u.gap=!0);u.setElementaryStreamInfo(p.type,O,w,$,M),this.backtrackFragment&&(this.backtrackFragment=u),this.bufferFragmentData(p,u,d,a,C||k)}else if(C||k)u.gap=!0;else{this.backtrack(u);return}}if(T){const{startPTS:_,endPTS:C,startDTS:k,endDTS:O}=T;d&&(d.elementaryStreams[rn.AUDIO]={startPTS:_,endPTS:C,startDTS:k,endDTS:O}),u.setElementaryStreamInfo(rn.AUDIO,_,C,k,O),this.bufferFragmentData(T,u,d,a)}if(S&&x!=null&&(t=x.samples)!=null&&t.length){const _={id:r,frag:u,details:S,samples:x.samples};i.trigger(P.FRAG_PARSING_METADATA,_)}if(S&&g){const _={id:r,frag:u,details:S,samples:g.samples};i.trigger(P.FRAG_PARSING_USERDATA,_)}}_bufferInitSegment(e,t,r,i){if(this.state!==ve.PARSING)return;this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&delete t.audio;const{audio:s,video:a,audiovideo:c}=t;if(s){let u=e.audioCodec;const d=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){u&&(u.indexOf("mp4a.40.5")!==-1?u="mp4a.40.2":u="mp4a.40.5");const h=s.metadata;h&&"channelCount"in h&&(h.channelCount||1)!==1&&d.indexOf("firefox")===-1&&(u="mp4a.40.5")}u&&u.indexOf("mp4a.40.5")!==-1&&d.indexOf("android")!==-1&&s.container!=="audio/mpeg"&&(u="mp4a.40.2",this.log(`Android: force audio codec to ${u}`)),e.audioCodec&&e.audioCodec!==u&&this.log(`Swapping manifest audio codec "${e.audioCodec}" for "${u}"`),s.levelCodec=u,s.id="main",this.log(`Init audio buffer, container:${s.container}, codecs[selected/level/parsed]=[${u||""}/${e.audioCodec||""}/${s.codec}]`)}a&&(a.levelCodec=e.videoCodec,a.id="main",this.log(`Init video buffer, container:${a.container}, codecs[level/parsed]=[${e.videoCodec||""}/${a.codec}]`)),c&&this.log(`Init audiovideo buffer, container:${c.container}, codecs[level/parsed]=[${e.codecs}/${c.codec}]`),this.hls.trigger(P.BUFFER_CODECS,t),Object.keys(t).forEach(u=>{const h=t[u].initSegment;h!=null&&h.byteLength&&this.hls.trigger(P.BUFFER_APPENDING,{type:u,data:h,frag:r,part:null,chunkMeta:i,parent:r.type})}),this.tickImmediate()}getMainFwdBufferInfo(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,at.MAIN)}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=ve.IDLE}checkFragmentChanged(){const e=this.media;let t=null;if(e&&e.readyState>1&&e.seeking===!1){const r=e.currentTime;if(mn.isBuffered(e,r)?t=this.getAppendedFrag(r):mn.isBuffered(e,r+.1)&&(t=this.getAppendedFrag(r+.1)),t){this.backtrackFragment=null;const i=this.fragPlaying,s=t.level;(!i||t.sn!==i.sn||i.level!==s)&&(this.fragPlaying=t,this.hls.trigger(P.FRAG_CHANGED,{frag:t}),(!i||i.level!==s)&&this.hls.trigger(P.LEVEL_SWITCHED,{level:s}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){const e=this.media;return e?this.fragPlaying||this.getAppendedFrag(e.currentTime):null}get currentProgramDateTime(){const e=this.media;if(e){const t=e.currentTime,r=this.currentFrag;if(r&&Ye(t)&&Ye(r.programDateTime)){const i=r.programDateTime+(t-r.start)*1e3;return new Date(i)}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class Fs{static get version(){return"1.5.19"}static isMSESupported(){return Xb()}static isSupported(){return s3()}static getMediaSource(){return Xa()}static get Events(){return P}static get ErrorTypes(){return ft}static get ErrorDetails(){return le}static get DefaultConfig(){return Fs.defaultConfig?Fs.defaultConfig:Yb}static set DefaultConfig(e){Fs.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this.started=!1,this._emitter=new ny,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null,this.triggeringException=void 0,eN(e.debug||!1,"Hls instance");const t=this.config=t3(Fs.DefaultConfig,e);this.userConfig=e,t.progressive&&n3(t);const{abrController:r,bufferController:i,capLevelController:s,errorController:a,fpsController:c}=t,u=new a(this),d=this.abrController=new r(this),h=this.bufferController=new i(this),p=this.capLevelController=new s(this),g=new c(this),x=new YN(this),v=new ZN(this),S=t.contentSteeringController,T=S?new S(this):null,_=this.levelController=new r3(this,T),C=new RM(this),k=new i3(this.config),O=this.streamController=new f3(this,C,k);p.setStreamController(O),g.setStreamController(O);const w=[x,_,O];T&&w.splice(1,0,T),this.networkControllers=w;const $=[d,h,p,g,v,C];this.audioTrackController=this.createController(t.audioTrackController,w);const M=t.audioStreamController;M&&w.push(new M(this,C,k)),this.subtitleTrackController=this.createController(t.subtitleTrackController,w);const U=t.subtitleStreamController;U&&w.push(new U(this,C,k)),this.createController(t.timelineController,$),k.emeController=this.emeController=this.createController(t.emeController,$),this.cmcdController=this.createController(t.cmcdController,$),this.latencyController=this.createController(eM,$),this.coreComponents=$,w.push(u);const W=u.onErrorOut;typeof W=="function"&&this.on(P.ERROR,W,u)}createController(e,t){if(e){const r=new e(this);return t&&t.push(r),r}return null}on(e,t,r=this){this._emitter.on(e,t,r)}once(e,t,r=this){this._emitter.once(e,t,r)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,t,r=this,i){this._emitter.off(e,t,r,i)}listeners(e){return this._emitter.listeners(e)}emit(e,t,r){return this._emitter.emit(e,t,r)}trigger(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(r){if(J.error("An internal error happened while handling event "+e+'. Error message: "'+r.message+'". Here is a stacktrace:',r),!this.triggeringException){this.triggeringException=!0;const i=e===P.ERROR;this.trigger(P.ERROR,{type:ft.OTHER_ERROR,details:le.INTERNAL_EXCEPTION,fatal:i,event:e,error:r}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){J.log("destroy"),this.trigger(P.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(t=>t.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(t=>t.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){J.log("attachMedia"),this._media=e,this.trigger(P.MEDIA_ATTACHING,{media:e})}detachMedia(){J.log("detachMedia"),this.trigger(P.MEDIA_DETACHING,void 0),this._media=null}loadSource(e){this.stopLoad();const t=this.media,r=this.url,i=this.url=G0.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,J.log(`loadSource:${i}`),t&&r&&(r!==i||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger(P.MANIFEST_LOADING,{url:e})}startLoad(e=-1){J.log(`startLoad(${e})`),this.started=!0,this.resumeBuffering();for(let t=0;t<this.networkControllers.length&&(this.networkControllers[t].startLoad(e),!(!this.started||!this.networkControllers));t++);}stopLoad(){J.log("stopLoad"),this.started=!1;for(let e=0;e<this.networkControllers.length&&(this.networkControllers[e].stopLoad(),!(this.started||!this.networkControllers));e++);}resumeBuffering(){J.log("resume buffering"),this.networkControllers.forEach(e=>{e.resumeBuffering&&e.resumeBuffering()})}pauseBuffering(){J.log("pause buffering"),this.networkControllers.forEach(e=>{e.pauseBuffering&&e.pauseBuffering()})}swapAudioCodec(){J.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){J.log("recoverMediaError");const e=this._media;this.detachMedia(),e&&this.attachMedia(e)}removeLevel(e){this.levelController.removeLevel(e)}get levels(){const e=this.levelController.levels;return e||[]}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){J.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){J.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){J.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){J.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return e===-1&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){J.log(`set startLevel:${e}`),e!==-1&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(J.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){tM(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:t}}=this;if(!e)return 0;const r=e.length;for(let i=0;i<r;i++)if(e[i].maxBitrate>=t)return i;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:t,maxHdcpLevel:r}=this;let i;if(t===-1&&e!=null&&e.length?i=e.length-1:i=t,r)for(let s=i;s--;){const a=e[s].attrs["HDCP-LEVEL"];if(a&&a<=r)return s}return i}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}setAudioOption(e){var t;return(t=this.audioTrackController)==null?void 0:t.setAudioOption(e)}setSubtitleOption(e){var t;return(t=this.subtitleTrackController)==null||t.setSubtitleOption(e),null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const t=this.audioTrackController;t&&(t.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return e?e.subtitleDisplay:!1}set subtitleDisplay(e){const t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}}Fs.defaultConfig=void 0;const h3=({src:n,autoNext:e})=>{const t=F.useRef(null),{t:r}=Lr(),{handleNextEpisode:i}=Du();return F.useEffect(()=>{if(!n||typeof n!="string"){console.error("Invalid source URL provided to VideoPlayer:",n);return}const s=t.current;if(s){let a=null;return Fs.isSupported()?(a=new Fs,a.loadSource(n),a.attachMedia(s),a.on(Fs.Events.MANIFEST_PARSED,()=>{console.log("HLS manifest loaded successfully!"),s.play()}),e&&(s.onended=()=>{i(),It.success(r("common.eventvideo.success"))}),a.on(Fs.Events.ERROR,(c,u)=>{console.error("HLS.js Error:",u)})):s.canPlayType("application/vnd.apple.mpegurl")?s.src=n:console.error("Browser does not support HLS."),()=>{a&&a.destroy()}}},[n]),A.jsx("div",{children:A.jsx("video",{ref:t,controls:!0,style:{width:"100%",height:"auto"}})})},p3=({episodeUrl:n,handleNextEpisode:e,handlePrevEpisode:t})=>{const[r,i]=F.useState(!0),{t:s}=Lr();return A.jsx("div",{children:n&&A.jsxs(A.Fragment,{children:[A.jsx(h3,{src:n==null?void 0:n.link_m3u8,autoNext:r})," ",A.jsxs("div",{className:" btn-event d-flex gap-3 justify-content-center align-items-center",children:[A.jsxs("button",{onClick:t,className:"btn btn-info btn-sm",children:[A.jsx(v0,{})," ",s("common.eventvideo.prev")]}),A.jsx(Hs,{onClick:()=>i(a=>!a),text:s("common.eventvideo.noit")+`: ${s(r?"common.yes":"common.no")}`,className:"btn btn-dark btn-sm"}),A.jsxs("button",{onClick:e,className:"btn btn-info btn-sm",children:[s("common.eventvideo.next"),A.jsx(fk,{})]})]}),A.jsx(tT,{context:n==null?void 0:n.filename,className:"fs-0"})]})})},m3=()=>{const{handleNextEpisode:n,handlePrevEpisode:e,currentEpisode:t,episodes:r,categoryMovieType:i}=Du();return A.jsxs("div",{children:[t&&r&&A.jsxs(A.Fragment,{children:[A.jsx(p3,{episodeUrl:t,handleNextEpisode:n,handlePrevEpisode:e}),A.jsx(H0,{episode:r,fullEpisodes:!0,server_name:!0})]}),A.jsx("div",{className:"same-category",children:A.jsx(mo,{movie:i||{items:[],titlePage:"",type_list:""},title:"common.samecategory"})})]})};function g3(n,e){const[t,r]=F.useState(n);return F.useEffect(()=>{const i=setTimeout(()=>{r(n)},e);return()=>{clearTimeout(i)}},[n,e]),t}const y3=()=>{const[n]=jS(),e=n.get("keyword"),{t}=Lr(),r=g3(e,300),[i,s]=F.useState(!1),[a,c]=F.useState([]);return F.useEffect(()=>{(async()=>{if(s(!0),r){const d=await RO(r);c(d.items)}s(!1)})()},[r]),a.length===0&&!i?A.jsxs("h3",{className:"not-found",children:[t("movie.movieSearch.notFound"),' "',e,'"']}):A.jsx(A.Fragment,{children:A.jsx("div",{className:"movie-items",children:A.jsx("div",{className:"single-movie",children:A.jsx(mo,{movie:{items:a,titlePage:"",type_list:""},title:`${i?`${t("movie.movieSearch.loading")} "${e}"`:`${t("movie.movieSearch.result")} "${e}"`}`,loading:i})})})})},Qb=n=>F.forwardRef((e,t)=>A.jsx("div",{...e,ref:t,className:gn(e.className,n)})),ay=F.forwardRef(({className:n,bsPrefix:e,as:t="div",...r},i)=>(e=Tn(e,"card-body"),A.jsx(t,{ref:i,className:gn(n,e),...r})));ay.displayName="CardBody";const Jb=F.forwardRef(({className:n,bsPrefix:e,as:t="div",...r},i)=>(e=Tn(e,"card-footer"),A.jsx(t,{ref:i,className:gn(n,e),...r})));Jb.displayName="CardFooter";const Zb=F.createContext(null);Zb.displayName="CardHeaderContext";const ew=F.forwardRef(({bsPrefix:n,className:e,as:t="div",...r},i)=>{const s=Tn(n,"card-header"),a=F.useMemo(()=>({cardHeaderBsPrefix:s}),[s]);return A.jsx(Zb.Provider,{value:a,children:A.jsx(t,{ref:i,...r,className:gn(e,s)})})});ew.displayName="CardHeader";const tw=F.forwardRef(({bsPrefix:n,className:e,variant:t,as:r="img",...i},s)=>{const a=Tn(n,"card-img");return A.jsx(r,{ref:s,className:gn(t?`${a}-${t}`:a,e),...i})});tw.displayName="CardImg";const nw=F.forwardRef(({className:n,bsPrefix:e,as:t="div",...r},i)=>(e=Tn(e,"card-img-overlay"),A.jsx(t,{ref:i,className:gn(n,e),...r})));nw.displayName="CardImgOverlay";const rw=F.forwardRef(({className:n,bsPrefix:e,as:t="a",...r},i)=>(e=Tn(e,"card-link"),A.jsx(t,{ref:i,className:gn(n,e),...r})));rw.displayName="CardLink";const v3=Qb("h6"),iw=F.forwardRef(({className:n,bsPrefix:e,as:t=v3,...r},i)=>(e=Tn(e,"card-subtitle"),A.jsx(t,{ref:i,className:gn(n,e),...r})));iw.displayName="CardSubtitle";const sw=F.forwardRef(({className:n,bsPrefix:e,as:t="p",...r},i)=>(e=Tn(e,"card-text"),A.jsx(t,{ref:i,className:gn(n,e),...r})));sw.displayName="CardText";const x3=Qb("h5"),ow=F.forwardRef(({className:n,bsPrefix:e,as:t=x3,...r},i)=>(e=Tn(e,"card-title"),A.jsx(t,{ref:i,className:gn(n,e),...r})));ow.displayName="CardTitle";const aw=F.forwardRef(({bsPrefix:n,className:e,bg:t,text:r,border:i,body:s=!1,children:a,as:c="div",...u},d)=>{const h=Tn(n,"card");return A.jsx(c,{ref:d,...u,className:gn(e,h,t&&`bg-${t}`,r&&`text-${r}`,i&&`border-${i}`),children:s?A.jsx(ay,{children:a}):a})});aw.displayName="Card";const Yo=Object.assign(aw,{Img:tw,Title:ow,Subtitle:iw,Body:ay,Link:rw,Text:sw,Header:ew,Footer:Jb,ImgOverlay:nw}),lw=F.forwardRef(({bsPrefix:n,fluid:e=!1,as:t="div",className:r,...i},s)=>{const a=Tn(n,"container"),c=typeof e=="string"?`-${e}`:"-fluid";return A.jsx(t,{ref:s,...i,className:gn(r,e?`${a}${c}`:a)})});lw.displayName="Container";function S3(n){return Wn({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 10l4 -2l-8 -4l-8 4l4 2"},child:[]},{tag:"path",attr:{d:"M12 12l-4 -2l-4 2l8 4l8 -4l-4 -2l-4 2z",fill:"currentColor"},child:[]},{tag:"path",attr:{d:"M8 14l-4 2l8 4l8 -4l-4 -2"},child:[]}]})(n)}const E3=[{name:"React",description:"Th vin JavaScript mnh m  xy dng giao din ngi dng.",icon:A.jsx(IO,{size:50,color:"#61dafb"})},{name:"Redux",description:"Th vin qun l trng thi ng dng trong React.",icon:A.jsx(DI,{size:50,color:"#764abc"})},{name:"Axios",description:"Th vin gip gi cc yu cu HTTP d dng.",icon:A.jsx(AI,{size:50,color:"#5a5a5a"})},{name:"Material UI",description:"Mt th vin giao din ngi dng  xy dng ng dng React d dng v p mt.",icon:A.jsx(II,{size:50,color:"#007bff"})},{name:"Bootstrap",description:"Th vin CSS ph bin  xy dng giao din ngi dng responsive.",icon:A.jsx(AO,{size:50,color:"#563d7c"})}],T3=[{name:"Node.js",description:"Nn tng JavaScript gip xy dng server-side applications.",icon:A.jsx(kO,{size:50,color:"#68a063"})},{name:"Express",description:"Framework ti gin cho Node.js gip pht trin ng dng web nhanh chng.",icon:A.jsx(jT,{size:50,color:"#000000"})},{name:"MySQL",description:"H qun tr c s d liu quan h ph bin.",icon:A.jsx(PO,{size:50,color:"#00618d"})},{name:"JWT",description:"JSON Web Token, gii php xc thc bo mt cho cc ng dng web.",icon:A.jsx(kI,{size:50,color:"#00618d"})},{name:"Multer",description:"Middleware  x l multipart/form-data, thng c s dng  upload file.",icon:A.jsx(S3,{size:50,color:"#00618d"})}],b3=()=>A.jsxs(lw,{className:"about-page",children:[A.jsx("h1",{className:"about-page__title",children:"Cc cng ngh ti  p dng trong d n"}),A.jsx("h2",{className:"about-page__subtitle",children:"Cng ngh Front-end"}),A.jsx("div",{className:"about-page__content",children:E3.map((n,e)=>A.jsx(Yo,{className:"about-page__card",style:{"--card-index":e},children:A.jsxs(Yo.Body,{className:"about-page__card-body",children:[A.jsx("div",{className:"about-page__icon-container",children:n.icon}),A.jsx(Yo.Title,{className:"about-page__card-title",children:n.name}),A.jsx(Yo.Text,{className:"about-page__card-text",children:n.description})]})},e))}),A.jsx("h2",{className:"about-page__subtitle mt-5",children:"Cng ngh Back-end"}),A.jsx("div",{className:"about-page__content",children:T3.map((n,e)=>A.jsx(Yo,{className:"about-page__card",children:A.jsxs(Yo.Body,{className:"about-page__card-body",children:[A.jsx("div",{className:"about-page__icon-container",children:n.icon}),A.jsx(Yo.Title,{className:"about-page__card-title",children:n.name}),A.jsx(Yo.Text,{className:"about-page__card-text",children:n.description})]})},e))})]}),w3=()=>{const{t:n}=Lr();return A.jsxs("div",{className:"not-found",children:[A.jsx("h1",{children:"404"}),A.jsx("p",{children:n("common.notfound")}),A.jsx(sr,{to:"/",className:"home-link",children:n("common.return")})]})},_3=VL([{element:A.jsx(BC,{}),children:[{element:A.jsx(_I,{}),path:"/login"},{element:A.jsx(vO,{}),path:"/register"},{element:A.jsx(vk,{}),children:[{element:A.jsx(bO,{}),children:[{element:A.jsx(gO,{}),path:"/"},{element:A.jsx(xO,{}),path:"/last-update"},{element:A.jsx(b3,{}),path:"/technologies"},{element:A.jsx(VO,{}),path:"/movie/:id"},{element:A.jsx(zO,{}),path:"/movie-genres/:id"},{path:"/movie-play/:moviename/:tapPhim",element:A.jsx(m3,{})},{path:"/tim-kiem",element:A.jsx(y3,{})},{path:"*",element:A.jsx(w3,{})}]}]}]}]),L3=({children:n})=>{const[e,t]=F.useState(!1),r=()=>t(i=>!i);return A.jsx(d0.Provider,{value:{isMenuOpen:e,toggleMenu:r},children:n})},yt=n=>typeof n=="string",tu=()=>{let n,e;const t=new Promise((r,i)=>{n=r,e=i});return t.resolve=n,t.reject=e,t},dS=n=>n==null?"":""+n,C3=(n,e,t)=>{n.forEach(r=>{e[r]&&(t[r]=e[r])})},R3=/###/g,fS=n=>n&&n.indexOf("###")>-1?n.replace(R3,"."):n,hS=n=>!n||yt(n),lu=(n,e,t)=>{const r=yt(e)?e.split("."):e;let i=0;for(;i<r.length-1;){if(hS(n))return{};const s=fS(r[i]);!n[s]&&t&&(n[s]=new t),Object.prototype.hasOwnProperty.call(n,s)?n=n[s]:n={},++i}return hS(n)?{}:{obj:n,k:fS(r[i])}},pS=(n,e,t)=>{const{obj:r,k:i}=lu(n,e,Object);if(r!==void 0||e.length===1){r[i]=t;return}let s=e[e.length-1],a=e.slice(0,e.length-1),c=lu(n,a,Object);for(;c.obj===void 0&&a.length;)s=`${a[a.length-1]}.${s}`,a=a.slice(0,a.length-1),c=lu(n,a,Object),c!=null&&c.obj&&typeof c.obj[`${c.k}.${s}`]<"u"&&(c.obj=void 0);c.obj[`${c.k}.${s}`]=t},A3=(n,e,t,r)=>{const{obj:i,k:s}=lu(n,e,Object);i[s]=i[s]||[],i[s].push(t)},lh=(n,e)=>{const{obj:t,k:r}=lu(n,e);if(t&&Object.prototype.hasOwnProperty.call(t,r))return t[r]},k3=(n,e,t)=>{const r=lh(n,t);return r!==void 0?r:lh(e,t)},cw=(n,e,t)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in n?yt(n[r])||n[r]instanceof String||yt(e[r])||e[r]instanceof String?t&&(n[r]=e[r]):cw(n[r],e[r],t):n[r]=e[r]);return n},Gl=n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var I3={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const P3=n=>yt(n)?n.replace(/[&<>"'\/]/g,e=>I3[e]):n;class D3{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const O3=[" ",",","?","!",";"],N3=new D3(20),M3=(n,e,t)=>{e=e||"",t=t||"";const r=O3.filter(a=>e.indexOf(a)<0&&t.indexOf(a)<0);if(r.length===0)return!0;const i=N3.getRegExp(`(${r.map(a=>a==="?"?"\\?":a).join("|")})`);let s=!i.test(n);if(!s){const a=n.indexOf(t);a>0&&!i.test(n.substring(0,a))&&(s=!0)}return s},Wg=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!n)return;if(n[e])return Object.prototype.hasOwnProperty.call(n,e)?n[e]:void 0;const r=e.split(t);let i=n;for(let s=0;s<r.length;){if(!i||typeof i!="object")return;let a,c="";for(let u=s;u<r.length;++u)if(u!==s&&(c+=t),c+=r[u],a=i[c],a!==void 0){if(["string","number","boolean"].indexOf(typeof a)>-1&&u<r.length-1)continue;s+=u-s+1;break}i=a}return i},ch=n=>n==null?void 0:n.replace("_","-"),F3={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,e){var t,r;(r=(t=console==null?void 0:console[n])==null?void 0:t.apply)==null||r.call(t,console,e)}};class uh{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||F3,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,r,i){return i&&!this.debug?null:(yt(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new uh(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new uh(this.logger,e)}}var $s=new uh;class Vh{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(t)||0;this.observers[r].set(t,i+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(a=>{let[c,u]=a;for(let d=0;d<u;d++)c(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(a=>{let[c,u]=a;for(let d=0;d<u;d++)c.apply(c,[e,...r])})}}class mS extends Vh{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,r){var d,h;let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,a=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let c;e.indexOf(".")>-1?c=e.split("."):(c=[e,t],r&&(Array.isArray(r)?c.push(...r):yt(r)&&s?c.push(...r.split(s)):c.push(r)));const u=lh(this.data,c);return!u&&!t&&!r&&e.indexOf(".")>-1&&(e=c[0],t=c[1],r=c.slice(2).join(".")),u||!a||!yt(r)?u:Wg((h=(d=this.data)==null?void 0:d[e])==null?void 0:h[t],r,s)}addResource(e,t,r,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const a=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let c=[e,t];r&&(c=c.concat(a?r.split(a):r)),e.indexOf(".")>-1&&(c=e.split("."),i=t,t=c[1]),this.addNamespaces(t),pS(this.data,c,i),s.silent||this.emit("added",e,t,r,i)}addResources(e,t,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const s in r)(yt(r[s])||Array.isArray(r[s]))&&this.addResource(e,t,s,r[s],{silent:!0});i.silent||this.emit("added",e,t,r)}addResourceBundle(e,t,r,i,s){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},c=[e,t];e.indexOf(".")>-1&&(c=e.split("."),i=r,r=t,t=c[1]),this.addNamespaces(t);let u=lh(this.data,c)||{};a.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?cw(u,r,s):u={...u,...r},pS(this.data,c,u),a.silent||this.emit("added",e,t,r)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(i=>t[i]&&Object.keys(t[i]).length>0)}toJSON(){return this.data}}var uw={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,e,t,r,i){return n.forEach(s=>{var a;e=((a=this.processors[s])==null?void 0:a.process(e,t,r,i))??e}),e}};const gS={};class dh extends Vh{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),C3(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=$s.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const r=this.resolve(e,t);return(r==null?void 0:r.res)!==void 0}extractFromKey(e,t){let r=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let s=t.ns||this.options.defaultNS||[];const a=r&&e.indexOf(r)>-1,c=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!M3(e,r,i);if(a&&!c){const u=e.match(this.interpolator.nestingRegexp);if(u&&u.length>0)return{key:e,namespaces:yt(s)?[s]:s};const d=e.split(r);(r!==i||r===i&&this.options.ns.indexOf(d[0])>-1)&&(s=d.shift()),e=d.join(i)}return{key:e,namespaces:yt(s)?[s]:s}}translate(e,t,r){if(typeof t!="object"&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),typeof t=="object"&&(t={...t}),t||(t={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const i=t.returnDetails!==void 0?t.returnDetails:this.options.returnDetails,s=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator,{key:a,namespaces:c}=this.extractFromKey(e[e.length-1],t),u=c[c.length-1],d=t.lng||this.language,h=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((d==null?void 0:d.toLowerCase())==="cimode"){if(h){const O=t.nsSeparator||this.options.nsSeparator;return i?{res:`${u}${O}${a}`,usedKey:a,exactUsedKey:a,usedLng:d,usedNS:u,usedParams:this.getUsedParamsDetails(t)}:`${u}${O}${a}`}return i?{res:a,usedKey:a,exactUsedKey:a,usedLng:d,usedNS:u,usedParams:this.getUsedParamsDetails(t)}:a}const p=this.resolve(e,t);let g=p==null?void 0:p.res;const x=(p==null?void 0:p.usedKey)||a,v=(p==null?void 0:p.exactUsedKey)||a,S=Object.prototype.toString.apply(g),T=["[object Number]","[object Function]","[object RegExp]"],_=t.joinArrays!==void 0?t.joinArrays:this.options.joinArrays,C=!this.i18nFormat||this.i18nFormat.handleAsObject,k=!yt(g)&&typeof g!="boolean"&&typeof g!="number";if(C&&g&&k&&T.indexOf(S)<0&&!(yt(_)&&Array.isArray(g))){if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const O=this.options.returnedObjectHandler?this.options.returnedObjectHandler(x,g,{...t,ns:c}):`key '${a} (${this.language})' returned an object instead of string.`;return i?(p.res=O,p.usedParams=this.getUsedParamsDetails(t),p):O}if(s){const O=Array.isArray(g),w=O?[]:{},$=O?v:x;for(const M in g)if(Object.prototype.hasOwnProperty.call(g,M)){const U=`${$}${s}${M}`;w[M]=this.translate(U,{...t,joinArrays:!1,ns:c}),w[M]===U&&(w[M]=g[M])}g=w}}else if(C&&yt(_)&&Array.isArray(g))g=g.join(_),g&&(g=this.extendTranslation(g,e,t,r));else{let O=!1,w=!1;const $=t.count!==void 0&&!yt(t.count),M=dh.hasDefaultValue(t),U=$?this.pluralResolver.getSuffix(d,t.count,t):"",W=t.ordinal&&$?this.pluralResolver.getSuffix(d,t.count,{ordinal:!1}):"",R=$&&!t.ordinal&&t.count===0,G=R&&t[`defaultValue${this.options.pluralSeparator}zero`]||t[`defaultValue${U}`]||t[`defaultValue${W}`]||t.defaultValue;!this.isValidLookup(g)&&M&&(O=!0,g=G),this.isValidLookup(g)||(w=!0,g=a);const ae=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&w?void 0:g,xe=M&&G!==g&&this.options.updateMissing;if(w||O||xe){if(this.logger.log(xe?"updateKey":"missingKey",d,u,a,xe?G:g),s){const ie=this.resolve(a,{...t,keySeparator:!1});ie&&ie.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let ye=[];const Ee=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Ee&&Ee[0])for(let ie=0;ie<Ee.length;ie++)ye.push(Ee[ie]);else this.options.saveMissingTo==="all"?ye=this.languageUtils.toResolveHierarchy(t.lng||this.language):ye.push(t.lng||this.language);const Pe=(ie,se,B)=>{var Q;const H=M&&B!==g?B:ae;this.options.missingKeyHandler?this.options.missingKeyHandler(ie,u,se,H,xe,t):(Q=this.backendConnector)!=null&&Q.saveMissing&&this.backendConnector.saveMissing(ie,u,se,H,xe,t),this.emit("missingKey",ie,u,se,g)};this.options.saveMissing&&(this.options.saveMissingPlurals&&$?ye.forEach(ie=>{const se=this.pluralResolver.getSuffixes(ie,t);R&&t[`defaultValue${this.options.pluralSeparator}zero`]&&se.indexOf(`${this.options.pluralSeparator}zero`)<0&&se.push(`${this.options.pluralSeparator}zero`),se.forEach(B=>{Pe([ie],a+B,t[`defaultValue${B}`]||G)})}):Pe(ye,a,G))}g=this.extendTranslation(g,e,t,p,r),w&&g===a&&this.options.appendNamespaceToMissingKey&&(g=`${u}:${a}`),(w||O)&&this.options.parseMissingKeyHandler&&(g=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${u}:${a}`:a,O?g:void 0))}return i?(p.res=g,p.usedParams=this.getUsedParamsDetails(t),p):g}extendTranslation(e,t,r,i,s){var d,h;var a=this;if((d=this.i18nFormat)!=null&&d.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const p=yt(e)&&(((h=r==null?void 0:r.interpolation)==null?void 0:h.skipOnVariables)!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let g;if(p){const v=e.match(this.interpolator.nestingRegexp);g=v&&v.length}let x=r.replace&&!yt(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(x={...this.options.interpolation.defaultVariables,...x}),e=this.interpolator.interpolate(e,x,r.lng||this.language||i.usedLng,r),p){const v=e.match(this.interpolator.nestingRegexp),S=v&&v.length;g<S&&(r.nest=!1)}!r.lng&&i&&i.res&&(r.lng=this.language||i.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var v=arguments.length,S=new Array(v),T=0;T<v;T++)S[T]=arguments[T];return(s==null?void 0:s[0])===S[0]&&!r.context?(a.logger.warn(`It seems you are nesting recursively key: ${S[0]} in key: ${t[0]}`),null):a.translate(...S,t)},r)),r.interpolation&&this.interpolator.reset()}const c=r.postProcess||this.options.postProcess,u=yt(c)?[c]:c;return e!=null&&(u!=null&&u.length)&&r.applyPostProcessor!==!1&&(e=uw.handle(u,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,i,s,a,c;return yt(e)&&(e=[e]),e.forEach(u=>{if(this.isValidLookup(r))return;const d=this.extractFromKey(u,t),h=d.key;i=h;let p=d.namespaces;this.options.fallbackNS&&(p=p.concat(this.options.fallbackNS));const g=t.count!==void 0&&!yt(t.count),x=g&&!t.ordinal&&t.count===0,v=t.context!==void 0&&(yt(t.context)||typeof t.context=="number")&&t.context!=="",S=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);p.forEach(T=>{var _,C;this.isValidLookup(r)||(c=T,!gS[`${S[0]}-${T}`]&&((_=this.utils)!=null&&_.hasLoadedNamespace)&&!((C=this.utils)!=null&&C.hasLoadedNamespace(c))&&(gS[`${S[0]}-${T}`]=!0,this.logger.warn(`key "${i}" for languages "${S.join(", ")}" won't get resolved as namespace "${c}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),S.forEach(k=>{var $;if(this.isValidLookup(r))return;a=k;const O=[h];if(($=this.i18nFormat)!=null&&$.addLookupKeys)this.i18nFormat.addLookupKeys(O,h,k,T,t);else{let M;g&&(M=this.pluralResolver.getSuffix(k,t.count,t));const U=`${this.options.pluralSeparator}zero`,W=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(g&&(O.push(h+M),t.ordinal&&M.indexOf(W)===0&&O.push(h+M.replace(W,this.options.pluralSeparator)),x&&O.push(h+U)),v){const R=`${h}${this.options.contextSeparator}${t.context}`;O.push(R),g&&(O.push(R+M),t.ordinal&&M.indexOf(W)===0&&O.push(R+M.replace(W,this.options.pluralSeparator)),x&&O.push(R+U))}}let w;for(;w=O.pop();)this.isValidLookup(r)||(s=w,r=this.getResource(k,T,w,t))}))})}),{res:r,usedKey:i,exactUsedKey:s,usedLng:a,usedNS:c}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,r){var s;let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return(s=this.i18nFormat)!=null&&s.getResource?this.i18nFormat.getResource(e,t,r,i):this.resourceStore.getResource(e,t,r,i)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!yt(e.replace);let i=r?e.replace:e;if(r&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const s of t)delete i[s]}return i}static hasDefaultValue(e){const t="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t===r.substring(0,t.length)&&e[r]!==void 0)return!0;return!1}}class yS{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=$s.create("languageUtils")}getScriptPartFromCode(e){if(e=ch(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=ch(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(yt(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(r=>{if(t)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(t=i)}),!t&&this.options.supportedLngs&&e.forEach(r=>{if(t)return;const i=this.getLanguagePartFromCode(r);if(this.isSupportedCode(i))return t=i;t=this.options.supportedLngs.find(s=>{if(s===i)return s;if(!(s.indexOf("-")<0&&i.indexOf("-")<0)&&(s.indexOf("-")>0&&i.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===i||s.indexOf(i)===0&&i.length>1))return s})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),yt(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let r=e[t];return r||(r=e[this.getScriptPartFromCode(t)]),r||(r=e[this.formatLanguageCode(t)]),r||(r=e[this.getLanguagePartFromCode(t)]),r||(r=e.default),r||[]}toResolveHierarchy(e,t){const r=this.getFallbackCodes(t||this.options.fallbackLng||[],e),i=[],s=a=>{a&&(this.isSupportedCode(a)?i.push(a):this.logger.warn(`rejecting language code not found in supportedLngs: ${a}`))};return yt(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(e))):yt(e)&&s(this.formatLanguageCode(e)),r.forEach(a=>{i.indexOf(a)<0&&s(this.formatLanguageCode(a))}),i}}const vS={zero:0,one:1,two:2,few:3,many:4,other:5},xS={select:n=>n===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class $3{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=$s.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=ch(e==="dev"?"en":e),i=t.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:r,type:i});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let a;try{a=new Intl.PluralRules(r,{type:i})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),xS;if(!e.match(/-|_/))return xS;const u=this.languageUtils.getLanguagePartFromCode(e);a=this.getRule(u,t)}return this.pluralRulesCache[s]=a,a}needsPlural(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),(r==null?void 0:r.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,r).map(i=>`${t}${i}`)}getSuffixes(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),r?r.resolvedOptions().pluralCategories.sort((i,s)=>vS[i]-vS[s]).map(i=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${i}`):[]}getSuffix(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=this.getRule(e,r);return i?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,r))}}const SS=function(n,e,t){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=k3(n,e,t);return!s&&i&&yt(t)&&(s=Wg(n,t,r),s===void 0&&(s=Wg(e,t,r))),s},ig=n=>n.replace(/\$/g,"$$$$");class B3{constructor(){var t;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=$s.create("interpolator"),this.options=e,this.format=((t=e==null?void 0:e.interpolation)==null?void 0:t.format)||(r=>r),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:r,useRawValueToEscape:i,prefix:s,prefixEscaped:a,suffix:c,suffixEscaped:u,formatSeparator:d,unescapeSuffix:h,unescapePrefix:p,nestingPrefix:g,nestingPrefixEscaped:x,nestingSuffix:v,nestingSuffixEscaped:S,nestingOptionsSeparator:T,maxReplaces:_,alwaysFormat:C}=e.interpolation;this.escape=t!==void 0?t:P3,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=s?Gl(s):a||"{{",this.suffix=c?Gl(c):u||"}}",this.formatSeparator=d||",",this.unescapePrefix=h?"":p||"-",this.unescapeSuffix=this.unescapePrefix?"":h||"",this.nestingPrefix=g?Gl(g):x||Gl("$t("),this.nestingSuffix=v?Gl(v):S||Gl(")"),this.nestingOptionsSeparator=T||",",this.maxReplaces=_||1e3,this.alwaysFormat=C!==void 0?C:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,r)=>(t==null?void 0:t.source)===r?(t.lastIndex=0,t):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,r,i){var x;let s,a,c;const u=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},d=v=>{if(v.indexOf(this.formatSeparator)<0){const C=SS(t,u,v,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(C,void 0,r,{...i,...t,interpolationkey:v}):C}const S=v.split(this.formatSeparator),T=S.shift().trim(),_=S.join(this.formatSeparator).trim();return this.format(SS(t,u,T,this.options.keySeparator,this.options.ignoreJSONStructure),_,r,{...i,...t,interpolationkey:T})};this.resetRegExp();const h=(i==null?void 0:i.missingInterpolationHandler)||this.options.missingInterpolationHandler,p=((x=i==null?void 0:i.interpolation)==null?void 0:x.skipOnVariables)!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:v=>ig(v)},{regex:this.regexp,safeValue:v=>this.escapeValue?ig(this.escape(v)):ig(v)}].forEach(v=>{for(c=0;s=v.regex.exec(e);){const S=s[1].trim();if(a=d(S),a===void 0)if(typeof h=="function"){const _=h(e,s,i);a=yt(_)?_:""}else if(i&&Object.prototype.hasOwnProperty.call(i,S))a="";else if(p){a=s[0];continue}else this.logger.warn(`missed to pass in variable ${S} for interpolating ${e}`),a="";else!yt(a)&&!this.useRawValueToEscape&&(a=dS(a));const T=v.safeValue(a);if(e=e.replace(s[0],T),p?(v.regex.lastIndex+=a.length,v.regex.lastIndex-=s[0].length):v.regex.lastIndex=0,c++,c>=this.maxReplaces)break}}),e}nest(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i,s,a;const c=(u,d)=>{const h=this.nestingOptionsSeparator;if(u.indexOf(h)<0)return u;const p=u.split(new RegExp(`${h}[ ]*{`));let g=`{${p[1]}`;u=p[0],g=this.interpolate(g,a);const x=g.match(/'/g),v=g.match(/"/g);(((x==null?void 0:x.length)??0)%2===0&&!v||v.length%2!==0)&&(g=g.replace(/'/g,'"'));try{a=JSON.parse(g),d&&(a={...d,...a})}catch(S){return this.logger.warn(`failed parsing options string in nesting for key ${u}`,S),`${u}${h}${g}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,u};for(;i=this.nestingRegexp.exec(e);){let u=[];a={...r},a=a.replace&&!yt(a.replace)?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;let d=!1;if(i[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(i[1])){const h=i[1].split(this.formatSeparator).map(p=>p.trim());i[1]=h.shift(),u=h,d=!0}if(s=t(c.call(this,i[1].trim(),a),a),s&&i[0]===e&&!yt(s))return s;yt(s)||(s=dS(s)),s||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),s=""),d&&(s=u.reduce((h,p)=>this.format(h,p,r.lng,{...r,interpolationkey:i[1].trim()}),s.trim())),e=e.replace(i[0],s),this.regexp.lastIndex=0}return e}}const U3=n=>{let e=n.toLowerCase().trim();const t={};if(n.indexOf("(")>-1){const r=n.split("(");e=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);e==="currency"&&i.indexOf(":")<0?t.currency||(t.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?t.range||(t.range=i.trim()):i.split(";").forEach(a=>{if(a){const[c,...u]=a.split(":"),d=u.join(":").trim().replace(/^'+|'+$/g,""),h=c.trim();t[h]||(t[h]=d),d==="false"&&(t[h]=!1),d==="true"&&(t[h]=!0),isNaN(d)||(t[h]=parseInt(d,10))}})}return{formatName:e,formatOptions:t}},Vl=n=>{const e={};return(t,r,i)=>{let s=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(s={...s,[i.interpolationkey]:void 0});const a=r+JSON.stringify(s);let c=e[a];return c||(c=n(ch(r),i),e[a]=c),c(t)}};class j3{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=$s.create("formatter"),this.options=e,this.formats={number:Vl((t,r)=>{const i=new Intl.NumberFormat(t,{...r});return s=>i.format(s)}),currency:Vl((t,r)=>{const i=new Intl.NumberFormat(t,{...r,style:"currency"});return s=>i.format(s)}),datetime:Vl((t,r)=>{const i=new Intl.DateTimeFormat(t,{...r});return s=>i.format(s)}),relativetime:Vl((t,r)=>{const i=new Intl.RelativeTimeFormat(t,{...r});return s=>i.format(s,r.range||"day")}),list:Vl((t,r)=>{const i=new Intl.ListFormat(t,{...r});return s=>i.format(s)})},this.init(e)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=Vl(t)}format(e,t,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=t.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(c=>c.indexOf(")")>-1)){const c=s.findIndex(u=>u.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,c)].join(this.formatSeparator)}return s.reduce((c,u)=>{var p;const{formatName:d,formatOptions:h}=U3(u);if(this.formats[d]){let g=c;try{const x=((p=i==null?void 0:i.formatParams)==null?void 0:p[i.interpolationkey])||{},v=x.locale||x.lng||i.locale||i.lng||r;g=this.formats[d](c,v,{...h,...i,...x})}catch(x){this.logger.warn(x)}return g}else this.logger.warn(`there was no format function for ${d}`);return c},e)}}const H3=(n,e)=>{n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)};class G3 extends Vh{constructor(e,t,r){var s,a;let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=$s.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],(a=(s=this.backend)==null?void 0:s.init)==null||a.call(s,r,i.backend,i)}queueLoad(e,t,r,i){const s={},a={},c={},u={};return e.forEach(d=>{let h=!0;t.forEach(p=>{const g=`${d}|${p}`;!r.reload&&this.store.hasResourceBundle(d,p)?this.state[g]=2:this.state[g]<0||(this.state[g]===1?a[g]===void 0&&(a[g]=!0):(this.state[g]=1,h=!1,a[g]===void 0&&(a[g]=!0),s[g]===void 0&&(s[g]=!0),u[p]===void 0&&(u[p]=!0)))}),h||(c[d]=!0)}),(Object.keys(s).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(s),pending:Object.keys(a),toLoadLanguages:Object.keys(c),toLoadNamespaces:Object.keys(u)}}loaded(e,t,r){const i=e.split("|"),s=i[0],a=i[1];t&&this.emit("failedLoading",s,a,t),!t&&r&&this.store.addResourceBundle(s,a,r,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&r&&(this.state[e]=0);const c={};this.queue.forEach(u=>{A3(u.loaded,[s],a),H3(u,e),t&&u.errors.push(t),u.pendingCount===0&&!u.done&&(Object.keys(u.loaded).forEach(d=>{c[d]||(c[d]={});const h=u.loaded[d];h.length&&h.forEach(p=>{c[d][p]===void 0&&(c[d][p]=!0)})}),u.done=!0,u.errors.length?u.callback(u.errors):u.callback())}),this.emit("loaded",c),this.queue=this.queue.filter(u=>!u.done)}read(e,t,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,a=arguments.length>5?arguments[5]:void 0;if(!e.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:r,tried:i,wait:s,callback:a});return}this.readingCalls++;const c=(d,h)=>{if(this.readingCalls--,this.waitingReads.length>0){const p=this.waitingReads.shift();this.read(p.lng,p.ns,p.fcName,p.tried,p.wait,p.callback)}if(d&&h&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,r,i+1,s*2,a)},s);return}a(d,h)},u=this.backend[r].bind(this.backend);if(u.length===2){try{const d=u(e,t);d&&typeof d.then=="function"?d.then(h=>c(null,h)).catch(c):c(null,d)}catch(d){c(d)}return}return u(e,t,c)}prepareLoading(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();yt(e)&&(e=this.languageUtils.toResolveHierarchy(e)),yt(t)&&(t=[t]);const s=this.queueLoad(e,t,r,i);if(!s.toLoad.length)return s.pending.length||i(),null;s.toLoad.forEach(a=>{this.loadOne(a)})}load(e,t,r){this.prepareLoading(e,t,{},r)}reload(e,t,r){this.prepareLoading(e,t,{reload:!0},r)}loadOne(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e.split("|"),i=r[0],s=r[1];this.read(i,s,"read",void 0,void 0,(a,c)=>{a&&this.logger.warn(`${t}loading namespace ${s} for language ${i} failed`,a),!a&&c&&this.logger.log(`${t}loaded namespace ${s} for language ${i}`,c),this.loaded(e,a,c)})}saveMissing(e,t,r,i,s){var u,d,h,p,g;let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},c=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if((d=(u=this.services)==null?void 0:u.utils)!=null&&d.hasLoadedNamespace&&!((p=(h=this.services)==null?void 0:h.utils)!=null&&p.hasLoadedNamespace(t))){this.logger.warn(`did not save key "${r}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if((g=this.backend)!=null&&g.create){const x={...a,isUpdate:s},v=this.backend.create.bind(this.backend);if(v.length<6)try{let S;v.length===5?S=v(e,t,r,i,x):S=v(e,t,r,i),S&&typeof S.then=="function"?S.then(T=>c(null,T)).catch(c):c(null,S)}catch(S){c(S)}else v(e,t,r,i,c,x)}!e||!e[0]||this.store.addResource(e[0],t,r,i)}}}const ES=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:n=>{let e={};if(typeof n[1]=="object"&&(e=n[1]),yt(n[1])&&(e.defaultValue=n[1]),yt(n[2])&&(e.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const t=n[3]||n[2];Object.keys(t).forEach(r=>{e[r]=t[r]})}return e},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),TS=n=>{var e,t;return yt(n.ns)&&(n.ns=[n.ns]),yt(n.fallbackLng)&&(n.fallbackLng=[n.fallbackLng]),yt(n.fallbackNS)&&(n.fallbackNS=[n.fallbackNS]),((t=(e=n.supportedLngs)==null?void 0:e.indexOf)==null?void 0:t.call(e,"cimode"))<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),typeof n.initImmediate=="boolean"&&(n.initAsync=n.initImmediate),n},yf=()=>{},V3=n=>{Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(t=>{typeof n[t]=="function"&&(n[t]=n[t].bind(n))})};class Su extends Vh{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(super(),this.options=TS(e),this.services={},this.logger=$s,this.modules={external:[]},V3(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(){var e=this;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof t=="function"&&(r=t,t={}),!t.defaultNS&&t.defaultNS!==!1&&t.ns&&(yt(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const i=ES();this.options={...i,...this.options,...TS(t)},this.options.interpolation={...i.interpolation,...this.options.interpolation},t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator);const s=h=>h?typeof h=="function"?new h:h:null;if(!this.options.isClone){this.modules.logger?$s.init(s(this.modules.logger),this.options):$s.init(null,this.options);let h;this.modules.formatter?h=this.modules.formatter:h=j3;const p=new yS(this.options);this.store=new mS(this.options.resources,this.options);const g=this.services;g.logger=$s,g.resourceStore=this.store,g.languageUtils=p,g.pluralResolver=new $3(p,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),h&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(g.formatter=s(h),g.formatter.init(g,this.options),this.options.interpolation.format=g.formatter.format.bind(g.formatter)),g.interpolator=new B3(this.options),g.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},g.backendConnector=new G3(s(this.modules.backend),g.resourceStore,g,this.options),g.backendConnector.on("*",function(x){for(var v=arguments.length,S=new Array(v>1?v-1:0),T=1;T<v;T++)S[T-1]=arguments[T];e.emit(x,...S)}),this.modules.languageDetector&&(g.languageDetector=s(this.modules.languageDetector),g.languageDetector.init&&g.languageDetector.init(g,this.options.detection,this.options)),this.modules.i18nFormat&&(g.i18nFormat=s(this.modules.i18nFormat),g.i18nFormat.init&&g.i18nFormat.init(this)),this.translator=new dh(this.services,this.options),this.translator.on("*",function(x){for(var v=arguments.length,S=new Array(v>1?v-1:0),T=1;T<v;T++)S[T-1]=arguments[T];e.emit(x,...S)}),this.modules.external.forEach(x=>{x.init&&x.init(this)})}if(this.format=this.options.interpolation.format,r||(r=yf),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const h=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);h.length>0&&h[0]!=="dev"&&(this.options.lng=h[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(h=>{this[h]=function(){return e.store[h](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(h=>{this[h]=function(){return e.store[h](...arguments),e}});const u=tu(),d=()=>{const h=(p,g)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),u.resolve(g),r(p,g)};if(this.languages&&!this.isInitialized)return h(null,this.t.bind(this));this.changeLanguage(this.options.lng,h)};return this.options.resources||!this.options.initAsync?d():setTimeout(d,0),u}loadResources(e){var s,a;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:yf;const i=yt(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if((i==null?void 0:i.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const c=[],u=d=>{if(!d||d==="cimode")return;this.services.languageUtils.toResolveHierarchy(d).forEach(p=>{p!=="cimode"&&c.indexOf(p)<0&&c.push(p)})};i?u(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(h=>u(h)),(a=(s=this.options.preload)==null?void 0:s.forEach)==null||a.call(s,d=>u(d)),this.services.backendConnector.load(c,this.options.ns,d=>{!d&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(d)})}else r(null)}reloadResources(e,t,r){const i=tu();return typeof e=="function"&&(r=e,e=void 0),typeof t=="function"&&(r=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),r||(r=yf),this.services.backendConnector.reload(e,t,s=>{i.resolve(),r(s)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&uw.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let t=0;t<this.languages.length;t++){const r=this.languages[t];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(e,t){var r=this;this.isLanguageChangingTo=e;const i=tu();this.emit("languageChanging",e);const s=u=>{this.language=u,this.languages=this.services.languageUtils.toResolveHierarchy(u),this.resolvedLanguage=void 0,this.setResolvedLanguage(u)},a=(u,d)=>{d?(s(d),this.translator.changeLanguage(d),this.isLanguageChangingTo=void 0,this.emit("languageChanged",d),this.logger.log("languageChanged",d)):this.isLanguageChangingTo=void 0,i.resolve(function(){return r.t(...arguments)}),t&&t(u,function(){return r.t(...arguments)})},c=u=>{var h,p;!e&&!u&&this.services.languageDetector&&(u=[]);const d=yt(u)?u:this.services.languageUtils.getBestMatchFromCodes(u);d&&(this.language||s(d),this.translator.language||this.translator.changeLanguage(d),(p=(h=this.services.languageDetector)==null?void 0:h.cacheUserLanguage)==null||p.call(h,d)),this.loadResources(d,g=>{a(g,d)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?c(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(c):this.services.languageDetector.detect(c):c(e),i}getFixedT(e,t,r){var i=this;const s=function(a,c){let u;if(typeof c!="object"){for(var d=arguments.length,h=new Array(d>2?d-2:0),p=2;p<d;p++)h[p-2]=arguments[p];u=i.options.overloadTranslationOptionHandler([a,c].concat(h))}else u={...c};u.lng=u.lng||s.lng,u.lngs=u.lngs||s.lngs,u.ns=u.ns||s.ns,u.keyPrefix!==""&&(u.keyPrefix=u.keyPrefix||r||s.keyPrefix);const g=i.options.keySeparator||".";let x;return u.keyPrefix&&Array.isArray(a)?x=a.map(v=>`${u.keyPrefix}${g}${v}`):x=u.keyPrefix?`${u.keyPrefix}${g}${a}`:a,i.t(x,u)};return yt(e)?s.lng=e:s.lngs=e,s.ns=t,s.keyPrefix=r,s}t(){var i;for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(i=this.translator)==null?void 0:i.translate(...t)}exists(){var i;for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(i=this.translator)==null?void 0:i.exists(...t)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=t.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const a=(c,u)=>{const d=this.services.backendConnector.state[`${c}|${u}`];return d===-1||d===0||d===2};if(t.precheck){const c=t.precheck(this,a);if(c!==void 0)return c}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(r,e)&&(!i||a(s,e)))}loadNamespaces(e,t){const r=tu();return this.options.ns?(yt(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),t&&t(i)}),r):(t&&t(),Promise.resolve())}loadLanguages(e,t){const r=tu();yt(e)&&(e=[e]);const i=this.options.preload||[],s=e.filter(a=>i.indexOf(a)<0&&this.services.languageUtils.isSupportedCode(a));return s.length?(this.options.preload=i.concat(s),this.loadResources(a=>{r.resolve(),t&&t(a)}),r):(t&&t(),Promise.resolve())}dir(e){var i,s;if(e||(e=this.resolvedLanguage||(((i=this.languages)==null?void 0:i.length)>0?this.languages[0]:this.language)),!e)return"rtl";const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=((s=this.services)==null?void 0:s.languageUtils)||new yS(ES());return t.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return new Su(e,t)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:yf;const r=e.forkResourceStore;r&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},s=new Su(i);if((e.debug!==void 0||e.prefix!==void 0)&&(s.logger=s.logger.clone(e)),["store","services","language"].forEach(c=>{s[c]=this[c]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},r){const c=Object.keys(this.store.data).reduce((u,d)=>(u[d]={...this.store.data[d]},Object.keys(u[d]).reduce((h,p)=>(h[p]={...u[d][p]},h),{})),{});s.store=new mS(c,i),s.services.resourceStore=s.store}return s.translator=new dh(s.services,i),s.translator.on("*",function(c){for(var u=arguments.length,d=new Array(u>1?u-1:0),h=1;h<u;h++)d[h-1]=arguments[h];s.emit(c,...d)}),s.init(i,t),s.translator.options=i,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const ar=Su.createInstance();ar.createInstance=Su.createInstance;ar.createInstance;ar.dir;ar.init;ar.loadResources;ar.reloadResources;ar.use;ar.changeLanguage;ar.getFixedT;ar.t;ar.exists;ar.setDefaultNamespace;ar.hasLoadedNamespace;ar.loadNamespaces;ar.loadLanguages;const z3={search:"Search",view:"See more ",collapse:"Collapse ",yes:"Yes",no:"No",seenow:"See now",samecategory:"Same category",eventvideo:{success:"Auto-forward video",noit:"Auto transfer",next:"Next episode",prev:"Previous episode"},welcome:"Enjoy the movie!",notfound:"Oops! The page youre looking for doesnt exist",return:"Go back home"},K3={menu:{home:"Home",singleMovies:"Single Movies",tvSeries:"TV Series",movieGenres:"Movie Genres",blog:"Blog",about:"Technologies",tvshows:"TV Shows",subMenu:{"hanh-dong":"Action","bi-an":"Mystery","hai-huoc":"Comedy","tinh-cam":"Romance","vien-tuong":"Science Fiction","khoa-hoc":"Science","tre-em":"Children","chinh-kich":"Drama","co-trang":"Historical","hinh-su":"Crime","vo-thuat":"Martial Arts","gia-dinh":"Family","am-nhac":"Music","kinh-di":"Horrified"}},notification:{notifyOne:"Visit",notifyTwo:"to take the quiz!"}},W3={login:{title:"Welcome Back",descrice:"Login",emailPlaceholder:"Enter your email",passwordPlaceholder:"Enter your password",submitButton:"Sign In",forgotPassword:"Forgot your password?",noAccount:"Don't have an account?",register:"Register here"},register:{title:"Create an Account",descrice:"Register",emailPlaceholder:"Enter your email",passwordPlaceholder:"Enter your password",submitButton:"Register",alreadyHaveAccount:"Already have an account? Sign In here"},logout:{title:"Log Out"}},Y3={moviecontent:"Movie content",cartoon:{title:{heading:"Cartoon"}},singlemovie:{title:{heading:"Signle Movie"}},tvseries:{title:{heading:"TV series"}},tvshows:{title:{heading:"TV shows"}},movieDetails:{cinema:"Cinema",language:"Language",episodeStatus:"Currently airing",newestEpisode:"Newest episode",country:"Country",cast:"Cast",category:"Category"},movieSearchTip:{message:"If you can't find a movie, please search on Google using the following syntax:",syntax:"Movie Name + VanPhuTin",example:"For example, to find the movie",movieName:"Cuu Trung Tu",domain:"Cuu Trung Tu VanPhuTin",website:"On this website, you can watch without lag and without ads.",commentNote:"Please leave a comment if you encounter any issues with your viewing experience. We will try to resolve it as soon as possible."},movieSearch:{loading:"Looking for movies ",result:"Movie search results ",notFound:"Movie not found"}},q3={logo:"vanphutin",description:"Vanphutin is a free online movie streaming site with high-quality content. We provide movies with Vietnamese subtitles, dubbing, and voiceovers. With over 10,000+ new movies, we quickly update the latest cinema releases, Chinese dramas, Korean dramas, and more, all with an intuitive interface and fast loading speed. Motchill brings you a perfect entertainment experience.",contact:"Contact Facebook: @vanphutin.info",sections:{newMovies:{title:"New Movies",items:["Science Movies","Horror Movies","Cinema Movies","Crime Movies","Action Movies"]},featuredMovies:{title:"Featured Movies",items:["American Movies","Korean Movies","Chinese Movies","Japanese Movies","Thai Movies"]},information:{title:"Information",items:["About Us","Contact Us","Terms of Use","Privacy Policy","Copyright Complaints"]}}},X3={common:z3,header:K3,auth:W3,movie:Y3,footer:q3},Q3={search:"Tm kim",view:"Xem thm ",collapse:"Thu gn ",yes:"C",no:"Khng",seenow:"Xem ngay",samecategory:"Chung th loi",eventvideo:{success:"T ng chuyn tip video",noit:"T ng chuyn",next:"Tp tip theo",prev:"Tp trc"},welcome:"Chc bn xem phim vui v!",notfound:"! Trang bn ang tm kim khng tn ti.",return:"Tr v trang ch"},J3={menu:{home:"Trang ch",singleMovies:"Phim l",tvSeries:"Phim b",movieGenres:"Th loi phim",blog:"Blog",tvshows:"Phim truyn hnh",about:"Cng ngh",subMenu:{"hanh-dong":"Hnh ng","bi-an":"B n","hai-huoc":"Hi hc","tinh-cam":"Lng mn","vien-tuong":"Khoa hc vin tng","khoa-hoc":"Khoa hc","tre-em":"Tr em","chinh-kich":"Chnh kch","co-trang":"C trang","hinh-su":"Hnh s","vo-thuat":"V thut","gia-dinh":"Gia nh","am-nhac":"m nhc","kinh-di":"Kinh d"}},notification:{notifyOne:"Hy truy cp",notifyTwo:" lm cc bi kim tra no !"}},Z3={login:{title:"Cho mng tr li",descrice:"ng nhp",emailPlaceholder:"Nhp email ca bn",passwordPlaceholder:"Nhp mt khu ca bn",submitButton:"ng nhp",forgotPassword:"Qun mt khu?",noAccount:"Cha c ti khon?",register:"ng k ti y"},register:{title:"To mt ti khon",descrice:"ng k",emailPlaceholder:"Nhp email ca bn",passwordPlaceholder:"Nhp mt khu ca bn",submitButton:"ng k",alreadyHaveAccount:" c ti khon? ng nhp ti y"},logout:{title:"ng xut"}},e5={moviecontent:"Ni dung phim",cartoon:{title:{heading:"Phim hot hnh"}},singlemovie:{title:{heading:"Phim l"}},tvseries:{title:{heading:"Phim b"}},tvshows:{title:{heading:"Chng trnh truyn hnh"}},movieDetails:{cinema:"Chiu rp",language:"Ngn ng",episodeStatus:"ang pht",newestEpisode:"Tp mi nht",country:"Quc gia",cast:"Din vin",category:"Th loi"},movieSearchTip:{message:"Mo tm phim khng thy, cc bn vui lng tm trn Google vi c php sau ,",syntax:"Tn Phim + VanPhuTin",example:"V d tm phim",movieName:"Cu Trng T",domain:"Cu Trng T VanPhuTin",website:"Ti Website ny bn xem khng git lag v khng qung co.",commentNote:"Vui lng  li comment nu c vn  v tri nghim xem phim, chng ti s c gng x l n trong thi gian sm nht."},movieSearch:{loading:"ang tm kim phim ",result:"Kt qu kim phim ",notFound:"Khng tm thy phim"}},t5={logo:"vanphutin",description:"Vanphutin l trang xem phim online min ph cht lng cao, cung cp phim vi ph  ting Vit, thuyt minh, v lng ting. Vi hn 10.000+ phim mi, lun cp nht nhanh nht cc phim chiu rp, phim b Trung Quc, Hn Quc, cng giao din trc quan v tc  ti nhanh. Motchill mang n tri nghim gii tr hon ho cho bn.",contact:"Lin h Facebook: @vanphutin.info",sections:{phimMoi:{title:"Phim mi",items:["Phim Khoa Hc","Phim Kinh D","Phim Chiu Rp","Phim Hnh S","Phim Hnh ng"]},phimHay:{title:"Phim hay",items:["Phim u M","Phim Hn Quc","Phim Trung Quc","Phim Nht Bn","Phim Thi Lan"]},thongTin:{title:"Thng tin",items:["Gii thiu","Lin h chng ti","iu khon s dng","Chnh sch ring t","Khiu ni bn quyn"]}}},n5={common:Q3,header:J3,auth:Z3,movie:e5,footer:t5};ar.use(JA).init({resources:{en:{translation:X3},vi:{translation:n5}},lng:localStorage.getItem("language")||"en",fallbackLng:"en",interpolation:{escapeValue:!1}});const r5=({children:n})=>{const[e,t]=F.useState(XS);F.useEffect(()=>{ar.changeLanguage(e),localStorage.setItem("language",e)},[e]);const r=i=>{t(i)};return A.jsx(QS.Provider,{value:{language:e,switchLanguage:r},children:n})},i5=({children:n})=>{const[e,t]=F.useState({titlePage:"",type_list:"phim-le",items:[]}),[r,i]=F.useState({titlePage:"",type_list:"phim-bo",items:[]}),[s,a]=F.useState({titlePage:"",type_list:"hoat-hinh",items:[]}),[c,u]=F.useState({titlePage:"",type_list:"tv-shows",items:[]}),[d,h]=F.useState({"phim-le":1,"phim-bo":1,"hoat-hinh":1,"tv-shows":1}),[p,g]=F.useState(!1),[x,v]=F.useState({"phim-le":!0,"phim-bo":!0,"hoat-hinh":!0,"tv-shows":!0}),S=async(C,k)=>{g(!0);try{const w=await await LO(`${C}?limit=12&page=${k}`);if(w.items.length>0){const $={titlePage:w.titlePage||"",type_list:C,items:w.items};C==="phim-le"?t(M=>({...M,...$,items:T(M.items,w.items)})):C==="phim-bo"?i(M=>({...M,...$,items:T(M.items,w.items)})):C==="hoat-hinh"?a(M=>({...M,...$,items:T(M.items,w.items)})):C==="tv-shows"&&u(M=>({...M,...$,items:T(M.items,w.items)}))}else v($=>({...$,[C]:!1}))}catch(O){console.error(`Error fetching ${C}:`,O)}finally{g(!1)}},T=(C,k)=>{const O=new Set(C.map(w=>w._id));return[...C,...k.filter(w=>!O.has(w._id))]};F.useEffect(()=>{Object.entries(d).forEach(([C,k])=>{S(C,k)})},[d]);const _=C=>{!p&&x[C]&&h(k=>({...k,[C]:k[C]+1}))};return A.jsx(BT.Provider,{value:{phimLe:e,phimBo:r,hoatHinh:s,tvShows:c,loading:p,hasMore:x,loadMore:_,fetchMovies:S},children:n})},s5=({children:n})=>{const[e,t]=F.useState([]),[r,i]=F.useState(""),[s,a]=F.useState(!1);F.useEffect(()=>{const u=localStorage.getItem("keySlug"),d=localStorage.getItem("keyTitle");u&&d&&c(u,d)},[]);const c=async(u,d)=>{localStorage.setItem("keySlug",u),localStorage.setItem("keyTitle",d);try{a(!0);const h=await CO(u);if(h&&h.length>0)if(t(h),!d||d===""){const p=localStorage.getItem("keyTitle");i(p||"")}else i(d);else t([])}catch(h){Au(h)}finally{a(!1)}};return A.jsx(f0.Provider,{value:{movieGenres:e,setMoviesGenres:t,title:r,setTitle:i,loading:s,handleGetMoviesByCategory:c},children:n})},o5=({children:n})=>{const[e,t]=F.useState(null),[r,i]=F.useState(null),[s,a]=F.useState([]),[c,u]=F.useState(null),[d,h]=F.useState(-1),[p,g]=F.useState(null);F.useEffect(()=>{const S=localStorage.getItem("currentEpisode"),T=localStorage.getItem("storedEpisode");S&&t(JSON.parse(S)),T&&a(JSON.parse(T))},[]),F.useEffect(()=>{e&&localStorage.setItem("currentEpisode",JSON.stringify(e)),s.length>0&&localStorage.setItem("storedEpisode",JSON.stringify(s))},[e,s]),F.useEffect(()=>{if(e&&s.length>0){const S=s[0].server_data.findIndex(T=>T.slug===e.slug);h(S!==-1?S:-1)}},[e,s]);const x=()=>{s.length===0||d===-1||(d<s[0].server_data.length-1?(h(d+1),t(s[0].server_data[d+1])):u("Khng cn tp no na"))},v=()=>{d===0||s.length===0||d===-1||(d>0?(h(d-1),t(s[0].server_data[d-1])):u("Khng cn tp no na"))};return F.useEffect(()=>{if(r&&s.length>0){const S=s[0].server_data.findIndex(T=>T.slug===r.slug);h(S>=0?S:0)}},[r,s]),A.jsx(UT.Provider,{value:{currentEpisode:e,categoryMovieType:p,setCategoryMovieType:g,setCurrentEpisode:t,currentMovie:r,setCurrentMovie:i,episodes:s,setEpisodes:a,handleNextEpisode:x,handlePrevEpisode:v,error:c},children:n})};Jw.createRoot(document.getElementById("root")).render(A.jsx(tR,{store:eT,children:A.jsx(nk,{i18n:ar,children:A.jsx(r5,{children:A.jsx(i5,{children:A.jsx(o5,{children:A.jsx(s5,{children:A.jsx(L3,{children:A.jsx(nC,{router:_3})})})})})})})}));
